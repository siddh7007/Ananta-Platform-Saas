{
  "version": 4,
  "terraform_version": "1.14.3",
  "serial": 332,
  "lineage": "30dd319f-3540-0a63-2b76-edc1d5e3294d",
  "outputs": {
    "admin_app_url": {
      "value": "http://localhost:27555",
      "type": "string"
    },
    "api_url": {
      "value": "http://tenant-management-service.control-plane.svc.cluster.local:14000",
      "type": "string"
    },
    "app_plane_components_db_host": {
      "value": "components-db",
      "type": "string"
    },
    "app_plane_minio_endpoint": {
      "value": "minio:9000",
      "type": "string"
    },
    "app_plane_supabase_api_url": {
      "value": "http://supabase-api:3000",
      "type": "string"
    },
    "app_plane_supabase_db_host": {
      "value": "supabase-db",
      "type": "string"
    },
    "database_host": {
      "value": "ananta-local-pg-rw.database-system.svc.cluster.local",
      "type": "string"
    },
    "keycloak_url": {
      "value": "http://localhost:8180",
      "type": "string"
    },
    "temporal_ui_url": {
      "value": "http://localhost:27021",
      "type": "string"
    },
    "vault_address": {
      "value": "http://ananta-vault.vault-system.svc.cluster.local:8200",
      "type": "string"
    }
  },
  "resources": [
    {
      "mode": "managed",
      "type": "kubernetes_config_map",
      "name": "app_plane_migrations",
      "provider": "provider[\"registry.terraform.io/hashicorp/kubernetes\"]",
      "instances": [
        {
          "index_key": 0,
          "schema_version": 0,
          "attributes": {
            "binary_data": {},
            "data": {
              "001_SUPABASE_MASTER.sql": "--\n-- PostgreSQL database dump\n--\n\n-- Dumped from database version 15.1 (Ubuntu 15.1-1.pgdg20.04+1)\n-- Dumped by pg_dump version 15.5 (Ubuntu 15.5-1.pgdg20.04+1)\n\nSET statement_timeout = 0;\nSET lock_timeout = 0;\nSET idle_in_transaction_session_timeout = 0;\nSET client_encoding = 'UTF8';\nSET standard_conforming_strings = on;\nSELECT pg_catalog.set_config('search_path', '', false);\nSET check_function_bodies = false;\nSET xmloption = content;\nSET client_min_messages = warning;\nSET row_security = off;\n\nALTER TABLE IF EXISTS ONLY public.workspaces DROP CONSTRAINT IF EXISTS workspaces_organization_id_fkey;\nALTER TABLE IF EXISTS ONLY public.workspaces DROP CONSTRAINT IF EXISTS workspaces_created_by_fkey;\nALTER TABLE IF EXISTS ONLY public.workspace_memberships DROP CONSTRAINT IF EXISTS workspace_memberships_workspace_id_fkey;\nALTER TABLE IF EXISTS ONLY public.workspace_memberships DROP CONSTRAINT IF EXISTS workspace_memberships_user_id_fkey;\nALTER TABLE IF EXISTS ONLY public.workspace_members DROP CONSTRAINT IF EXISTS workspace_members_workspace_id_fkey;\nALTER TABLE IF EXISTS ONLY public.workspace_members DROP CONSTRAINT IF EXISTS workspace_members_user_id_fkey;\nALTER TABLE IF EXISTS ONLY public.user_preferences DROP CONSTRAINT IF EXISTS user_preferences_user_id_fkey;\nALTER TABLE IF EXISTS ONLY public.user_preferences DROP CONSTRAINT IF EXISTS user_preferences_last_organization_id_fkey;\nALTER TABLE IF EXISTS ONLY public.usage_records DROP CONSTRAINT IF EXISTS usage_records_subscription_id_fkey;\nALTER TABLE IF EXISTS ONLY public.usage_records DROP CONSTRAINT IF EXISTS usage_records_organization_id_fkey;\nALTER TABLE IF EXISTS ONLY public.subscriptions DROP CONSTRAINT IF EXISTS subscriptions_plan_id_fkey;\nALTER TABLE IF EXISTS ONLY public.subscriptions DROP CONSTRAINT IF EXISTS subscriptions_organization_id_fkey;\nALTER TABLE IF EXISTS ONLY public.risk_score_history DROP CONSTRAINT IF EXISTS risk_score_history_organization_id_fkey;\nALTER TABLE IF EXISTS ONLY public.projects DROP CONSTRAINT IF EXISTS projects_workspace_id_fkey;\nALTER TABLE IF EXISTS ONLY public.projects DROP CONSTRAINT IF EXISTS projects_organization_id_fkey;\nALTER TABLE IF EXISTS ONLY public.projects DROP CONSTRAINT IF EXISTS projects_created_by_fkey;\nALTER TABLE IF EXISTS ONLY public.project_risk_summaries DROP CONSTRAINT IF EXISTS project_risk_summaries_project_id_fkey;\nALTER TABLE IF EXISTS ONLY public.project_risk_summaries DROP CONSTRAINT IF EXISTS project_risk_summaries_organization_id_fkey;\nALTER TABLE IF EXISTS ONLY public.project_members DROP CONSTRAINT IF EXISTS project_members_user_id_fkey;\nALTER TABLE IF EXISTS ONLY public.project_members DROP CONSTRAINT IF EXISTS project_members_project_id_fkey;\nALTER TABLE IF EXISTS ONLY public.payments DROP CONSTRAINT IF EXISTS payments_subscription_id_fkey;\nALTER TABLE IF EXISTS ONLY public.payments DROP CONSTRAINT IF EXISTS payments_payment_method_id_fkey;\nALTER TABLE IF EXISTS ONLY public.payments DROP CONSTRAINT IF EXISTS payments_invoice_id_fkey;\nALTER TABLE IF EXISTS ONLY public.payments DROP CONSTRAINT IF EXISTS payments_billing_customer_id_fkey;\nALTER TABLE IF EXISTS ONLY public.payment_methods DROP CONSTRAINT IF EXISTS payment_methods_billing_customer_id_fkey;\nALTER TABLE IF EXISTS ONLY public.organization_settings_audit DROP CONSTRAINT IF EXISTS organization_settings_audit_organization_id_fkey;\nALTER TABLE IF EXISTS ONLY public.organization_risk_profiles DROP CONSTRAINT IF EXISTS organization_risk_profiles_updated_by_fkey;\nALTER TABLE IF EXISTS ONLY public.organization_risk_profiles DROP CONSTRAINT IF EXISTS organization_risk_profiles_organization_id_fkey;\nALTER TABLE IF EXISTS ONLY public.organization_risk_profiles DROP CONSTRAINT IF EXISTS organization_risk_profiles_created_by_fkey;\nALTER TABLE IF EXISTS ONLY public.organization_memberships DROP CONSTRAINT IF EXISTS organization_memberships_user_id_fkey;\nALTER TABLE IF EXISTS ONLY public.organization_memberships DROP CONSTRAINT IF EXISTS organization_memberships_organization_id_fkey;\nALTER TABLE IF EXISTS ONLY public.organization_memberships DROP CONSTRAINT IF EXISTS organization_memberships_invited_by_fkey;\nALTER TABLE IF EXISTS ONLY public.onboarding_events DROP CONSTRAINT IF EXISTS onboarding_events_user_id_fkey;\nALTER TABLE IF EXISTS ONLY public.onboarding_events DROP CONSTRAINT IF EXISTS onboarding_events_organization_id_fkey;\nALTER TABLE IF EXISTS ONLY public.notifications DROP CONSTRAINT IF EXISTS notifications_user_id_fkey;\nALTER TABLE IF EXISTS ONLY public.notifications DROP CONSTRAINT IF EXISTS notifications_organization_id_fkey;\nALTER TABLE IF EXISTS ONLY public.invoices DROP CONSTRAINT IF EXISTS invoices_subscription_id_fkey;\nALTER TABLE IF EXISTS ONLY public.invoices DROP CONSTRAINT IF EXISTS invoices_organization_id_fkey;\nALTER TABLE IF EXISTS ONLY public.invoices DROP CONSTRAINT IF EXISTS invoices_billing_customer_id_fkey;\nALTER TABLE IF EXISTS ONLY public.invoice_line_items DROP CONSTRAINT IF EXISTS invoice_line_items_invoice_id_fkey;\nALTER TABLE IF EXISTS ONLY public.enrichment_queue DROP CONSTRAINT IF EXISTS enrichment_queue_organization_id_fkey;\nALTER TABLE IF EXISTS ONLY public.enrichment_queue DROP CONSTRAINT IF EXISTS enrichment_queue_bom_id_fkey;\nALTER TABLE IF EXISTS ONLY public.enrichment_audit_log DROP CONSTRAINT IF EXISTS enrichment_audit_log_organization_id_fkey;\nALTER TABLE IF EXISTS ONLY public.enrichment_audit_log DROP CONSTRAINT IF EXISTS enrichment_audit_log_bom_id_fkey;\nALTER TABLE IF EXISTS ONLY public.components DROP CONSTRAINT IF EXISTS components_organization_id_fkey;\nALTER TABLE IF EXISTS ONLY public.components DROP CONSTRAINT IF EXISTS components_manufacturer_id_fkey;\nALTER TABLE IF EXISTS ONLY public.components DROP CONSTRAINT IF EXISTS components_category_id_fkey;\nALTER TABLE IF EXISTS ONLY public.component_watches DROP CONSTRAINT IF EXISTS component_watches_user_id_fkey;\nALTER TABLE IF EXISTS ONLY public.component_watches DROP CONSTRAINT IF EXISTS component_watches_organization_id_fkey;\nALTER TABLE IF EXISTS ONLY public.component_watches DROP CONSTRAINT IF EXISTS component_watches_component_id_fkey;\nALTER TABLE IF EXISTS ONLY public.component_base_risk_scores DROP CONSTRAINT IF EXISTS component_base_risk_scores_component_id_fkey;\nALTER TABLE IF EXISTS ONLY public.column_mapping_templates DROP CONSTRAINT IF EXISTS column_mapping_templates_organization_id_fkey;\nALTER TABLE IF EXISTS ONLY public.column_mapping_templates DROP CONSTRAINT IF EXISTS column_mapping_templates_created_by_fkey;\nALTER TABLE IF EXISTS ONLY public.cns_processing_events DROP CONSTRAINT IF EXISTS cns_processing_events_organization_id_fkey;\nALTER TABLE IF EXISTS ONLY public.cns_processing_events DROP CONSTRAINT IF EXISTS cns_processing_events_bom_id_fkey;\nALTER TABLE IF EXISTS ONLY public.cns_bulk_uploads DROP CONSTRAINT IF EXISTS cns_bulk_uploads_project_id_fkey;\nALTER TABLE IF EXISTS ONLY public.cns_bulk_uploads DROP CONSTRAINT IF EXISTS cns_bulk_uploads_organization_id_fkey;\nALTER TABLE IF EXISTS ONLY public.categories DROP CONSTRAINT IF EXISTS categories_parent_id_fkey;\nALTER TABLE IF EXISTS ONLY public.boms DROP CONSTRAINT IF EXISTS boms_project_id_fkey;\nALTER TABLE IF EXISTS ONLY public.boms DROP CONSTRAINT IF EXISTS boms_organization_id_fkey;\nALTER TABLE IF EXISTS ONLY public.bom_uploads DROP CONSTRAINT IF EXISTS bom_uploads_uploaded_by_fkey;\nALTER TABLE IF EXISTS ONLY public.bom_uploads DROP CONSTRAINT IF EXISTS bom_uploads_project_id_fkey;\nALTER TABLE IF EXISTS ONLY public.bom_uploads DROP CONSTRAINT IF EXISTS bom_uploads_organization_id_fkey;\nALTER TABLE IF EXISTS ONLY public.bom_uploads DROP CONSTRAINT IF EXISTS bom_uploads_bom_id_fkey;\nALTER TABLE IF EXISTS ONLY public.bom_risk_summaries DROP CONSTRAINT IF EXISTS bom_risk_summaries_organization_id_fkey;\nALTER TABLE IF EXISTS ONLY public.bom_risk_summaries DROP CONSTRAINT IF EXISTS bom_risk_summaries_bom_id_fkey;\nALTER TABLE IF EXISTS ONLY public.bom_processing_jobs DROP CONSTRAINT IF EXISTS bom_processing_jobs_organization_id_fkey;\nALTER TABLE IF EXISTS ONLY public.bom_processing_jobs DROP CONSTRAINT IF EXISTS bom_processing_jobs_bom_id_fkey;\nALTER TABLE IF EXISTS ONLY public.bom_line_items DROP CONSTRAINT IF EXISTS bom_line_items_bom_id_fkey;\nALTER TABLE IF EXISTS ONLY public.bom_line_item_risk_scores DROP CONSTRAINT IF EXISTS bom_line_item_risk_scores_organization_id_fkey;\nALTER TABLE IF EXISTS ONLY public.bom_line_item_risk_scores DROP CONSTRAINT IF EXISTS bom_line_item_risk_scores_bom_line_item_id_fkey;\nALTER TABLE IF EXISTS ONLY public.billing_customers DROP CONSTRAINT IF EXISTS billing_customers_organization_id_fkey;\nALTER TABLE IF EXISTS ONLY public.audit_logs DROP CONSTRAINT IF EXISTS audit_logs_organization_id_fkey;\nALTER TABLE IF EXISTS ONLY public.audit_field_comparisons DROP CONSTRAINT IF EXISTS audit_field_comparisons_enrichment_run_id_fkey;\nALTER TABLE IF EXISTS ONLY public.attributes DROP CONSTRAINT IF EXISTS attributes_component_id_fkey;\nALTER TABLE IF EXISTS ONLY public.alerts DROP CONSTRAINT IF EXISTS alerts_user_id_fkey;\nALTER TABLE IF EXISTS ONLY public.alerts DROP CONSTRAINT IF EXISTS alerts_organization_id_fkey;\nALTER TABLE IF EXISTS ONLY public.alerts DROP CONSTRAINT IF EXISTS alerts_component_id_fkey;\nALTER TABLE IF EXISTS ONLY public.alert_preferences DROP CONSTRAINT IF EXISTS alert_preferences_user_id_fkey;\nALTER TABLE IF EXISTS ONLY public.alert_preferences DROP CONSTRAINT IF EXISTS alert_preferences_organization_id_fkey;\nALTER TABLE IF EXISTS ONLY public.alert_deliveries DROP CONSTRAINT IF EXISTS alert_deliveries_alert_id_fkey;\nALTER TABLE IF EXISTS ONLY public.account_deletion_audit DROP CONSTRAINT IF EXISTS account_deletion_audit_organization_id_fkey;\nDROP TRIGGER IF EXISTS update_workspaces_updated_at ON public.workspaces;\nDROP TRIGGER IF EXISTS update_workspace_memberships_updated_at ON public.workspace_memberships;\nDROP TRIGGER IF EXISTS update_users_updated_at ON public.users;\nDROP TRIGGER IF EXISTS update_usage_records_updated_at ON public.usage_records;\nDROP TRIGGER IF EXISTS update_subscriptions_updated_at ON public.subscriptions;\nDROP TRIGGER IF EXISTS update_projects_updated_at ON public.projects;\nDROP TRIGGER IF EXISTS update_project_risk_summaries_updated_at ON public.project_risk_summaries;\nDROP TRIGGER IF EXISTS update_payments_updated_at ON public.payments;\nDROP TRIGGER IF EXISTS update_payment_methods_updated_at ON public.payment_methods;\nDROP TRIGGER IF EXISTS update_organizations_updated_at ON public.organizations;\nDROP TRIGGER IF EXISTS update_org_risk_profiles_updated_at ON public.organization_risk_profiles;\nDROP TRIGGER IF EXISTS update_org_memberships_updated_at ON public.organization_memberships;\nDROP TRIGGER IF EXISTS update_invoices_updated_at ON public.invoices;\nDROP TRIGGER IF EXISTS update_components_updated_at ON public.components;\nDROP TRIGGER IF EXISTS update_component_search ON public.components;\nDROP TRIGGER IF EXISTS update_column_mapping_templates_updated_at ON public.column_mapping_templates;\nDROP TRIGGER IF EXISTS update_cns_bulk_uploads_updated_at ON public.cns_bulk_uploads;\nDROP TRIGGER IF EXISTS update_boms_updated_at ON public.boms;\nDROP TRIGGER IF EXISTS update_bom_uploads_updated_at ON public.bom_uploads;\nDROP TRIGGER IF EXISTS update_bom_risk_summaries_updated_at ON public.bom_risk_summaries;\nDROP TRIGGER IF EXISTS update_bom_processing_jobs_updated_at ON public.bom_processing_jobs;\nDROP TRIGGER IF EXISTS update_bom_line_items_updated_at ON public.bom_line_items;\nDROP TRIGGER IF EXISTS update_bom_jobs_updated_at ON public.bom_jobs;\nDROP TRIGGER IF EXISTS update_bom_items_updated_at ON public.bom_items;\nDROP TRIGGER IF EXISTS update_billing_customers_updated_at ON public.billing_customers;\nDROP TRIGGER IF EXISTS ensure_single_default_template ON public.column_mapping_templates;\nDROP TRIGGER IF EXISTS auto_add_platform_staff_to_platform_org ON public.users;\nDROP INDEX IF EXISTS public.idx_workspaces_slug;\nDROP INDEX IF EXISTS public.idx_workspaces_org;\nDROP INDEX IF EXISTS public.idx_workspace_memberships_workspace;\nDROP INDEX IF EXISTS public.idx_workspace_memberships_user;\nDROP INDEX IF EXISTS public.idx_workspace_members_workspace;\nDROP INDEX IF EXISTS public.idx_workspace_members_user;\nDROP INDEX IF EXISTS public.idx_users_keycloak_id;\nDROP INDEX IF EXISTS public.idx_users_is_platform_admin;\nDROP INDEX IF EXISTS public.idx_users_email;\nDROP INDEX IF EXISTS public.idx_users_auth0_id;\nDROP INDEX IF EXISTS public.idx_usage_records_type;\nDROP INDEX IF EXISTS public.idx_usage_records_period;\nDROP INDEX IF EXISTS public.idx_usage_records_org;\nDROP INDEX IF EXISTS public.idx_suppliers_slug;\nDROP INDEX IF EXISTS public.idx_suppliers_priority;\nDROP INDEX IF EXISTS public.idx_subscriptions_status;\nDROP INDEX IF EXISTS public.idx_subscriptions_org;\nDROP INDEX IF EXISTS public.idx_risk_score_history_recorded;\nDROP INDEX IF EXISTS public.idx_risk_score_history_org;\nDROP INDEX IF EXISTS public.idx_risk_score_history_entity;\nDROP INDEX IF EXISTS public.idx_projects_workspace;\nDROP INDEX IF EXISTS public.idx_projects_status;\nDROP INDEX IF EXISTS public.idx_projects_slug;\nDROP INDEX IF EXISTS public.idx_projects_organization;\nDROP INDEX IF EXISTS public.idx_project_risk_summaries_project;\nDROP INDEX IF EXISTS public.idx_project_risk_summaries_org;\nDROP INDEX IF EXISTS public.idx_project_members_user;\nDROP INDEX IF EXISTS public.idx_project_members_project;\nDROP INDEX IF EXISTS public.idx_payments_status;\nDROP INDEX IF EXISTS public.idx_payments_invoice;\nDROP INDEX IF EXISTS public.idx_payments_customer;\nDROP INDEX IF EXISTS public.idx_payment_methods_customer;\nDROP INDEX IF EXISTS public.idx_organizations_status;\nDROP INDEX IF EXISTS public.idx_organizations_slug;\nDROP INDEX IF EXISTS public.idx_organizations_deleted;\nDROP INDEX IF EXISTS public.idx_org_settings_audit_org;\nDROP INDEX IF EXISTS public.idx_org_risk_profiles_org;\nDROP INDEX IF EXISTS public.idx_org_memberships_user_org;\nDROP INDEX IF EXISTS public.idx_org_memberships_user;\nDROP INDEX IF EXISTS public.idx_org_memberships_org;\nDROP INDEX IF EXISTS public.idx_onboarding_events_user;\nDROP INDEX IF EXISTS public.idx_onboarding_events_org;\nDROP INDEX IF EXISTS public.idx_notifications_user;\nDROP INDEX IF EXISTS public.idx_notifications_org;\nDROP INDEX IF EXISTS public.idx_manufacturers_slug;\nDROP INDEX IF EXISTS public.idx_manufacturers_name;\nDROP INDEX IF EXISTS public.idx_invoices_status;\nDROP INDEX IF EXISTS public.idx_invoices_org;\nDROP INDEX IF EXISTS public.idx_invoices_customer;\nDROP INDEX IF EXISTS public.idx_invoice_line_items_invoice;\nDROP INDEX IF EXISTS public.idx_enrichment_queue_status;\nDROP INDEX IF EXISTS public.idx_enrichment_queue_org;\nDROP INDEX IF EXISTS public.idx_enrichment_queue_bom;\nDROP INDEX IF EXISTS public.idx_enrichment_history_status;\nDROP INDEX IF EXISTS public.idx_enrichment_history_mpn;\nDROP INDEX IF EXISTS public.idx_enrichment_events_tenant;\nDROP INDEX IF EXISTS public.idx_enrichment_events_bom;\nDROP INDEX IF EXISTS public.idx_enrichment_audit_log_org;\nDROP INDEX IF EXISTS public.idx_enrichment_audit_log_bom;\nDROP INDEX IF EXISTS public.idx_components_search;\nDROP INDEX IF EXISTS public.idx_components_risk;\nDROP INDEX IF EXISTS public.idx_components_org;\nDROP INDEX IF EXISTS public.idx_components_mpn;\nDROP INDEX IF EXISTS public.idx_components_manufacturer;\nDROP INDEX IF EXISTS public.idx_components_lifecycle;\nDROP INDEX IF EXISTS public.idx_components_category;\nDROP INDEX IF EXISTS public.idx_component_watches_user;\nDROP INDEX IF EXISTS public.idx_component_watches_component;\nDROP INDEX IF EXISTS public.idx_component_base_risk_mpn;\nDROP INDEX IF EXISTS public.idx_component_base_risk_component;\nDROP INDEX IF EXISTS public.idx_column_mapping_templates_org;\nDROP INDEX IF EXISTS public.idx_cns_events_type;\nDROP INDEX IF EXISTS public.idx_cns_events_org;\nDROP INDEX IF EXISTS public.idx_cns_events_bom;\nDROP INDEX IF EXISTS public.idx_cns_config_tenant;\nDROP INDEX IF EXISTS public.idx_cns_config_global;\nDROP INDEX IF EXISTS public.idx_cns_bulk_uploads_status;\nDROP INDEX IF EXISTS public.idx_cns_bulk_uploads_org;\nDROP INDEX IF EXISTS public.idx_categories_slug;\nDROP INDEX IF EXISTS public.idx_categories_path;\nDROP INDEX IF EXISTS public.idx_categories_parent;\nDROP INDEX IF EXISTS public.idx_boms_status;\nDROP INDEX IF EXISTS public.idx_boms_project;\nDROP INDEX IF EXISTS public.idx_boms_org;\nDROP INDEX IF EXISTS public.idx_boms_enrichment_status;\nDROP INDEX IF EXISTS public.idx_bom_uploads_status;\nDROP INDEX IF EXISTS public.idx_bom_uploads_project;\nDROP INDEX IF EXISTS public.idx_bom_uploads_org;\nDROP INDEX IF EXISTS public.idx_bom_risk_summaries_org;\nDROP INDEX IF EXISTS public.idx_bom_risk_summaries_bom;\nDROP INDEX IF EXISTS public.idx_bom_processing_jobs_status;\nDROP INDEX IF EXISTS public.idx_bom_processing_jobs_bom;\nDROP INDEX IF EXISTS public.idx_bom_line_risk_org;\nDROP INDEX IF EXISTS public.idx_bom_line_risk_line_item;\nDROP INDEX IF EXISTS public.idx_bom_line_items_status;\nDROP INDEX IF EXISTS public.idx_bom_line_items_mpn;\nDROP INDEX IF EXISTS public.idx_bom_line_items_component;\nDROP INDEX IF EXISTS public.idx_bom_line_items_bom;\nDROP INDEX IF EXISTS public.idx_bom_jobs_org;\nDROP INDEX IF EXISTS public.idx_bom_jobs_job_id;\nDROP INDEX IF EXISTS public.idx_bom_items_job_id;\nDROP INDEX IF EXISTS public.idx_billing_webhook_provider_event;\nDROP INDEX IF EXISTS public.idx_billing_customers_org;\nDROP INDEX IF EXISTS public.idx_audit_supplier_quality_date;\nDROP INDEX IF EXISTS public.idx_audit_logs_type;\nDROP INDEX IF EXISTS public.idx_audit_logs_org;\nDROP INDEX IF EXISTS public.idx_audit_field_comparisons_run;\nDROP INDEX IF EXISTS public.idx_audit_enrichment_upload;\nDROP INDEX IF EXISTS public.idx_attributes_name;\nDROP INDEX IF EXISTS public.idx_attributes_component;\nDROP INDEX IF EXISTS public.idx_alerts_user;\nDROP INDEX IF EXISTS public.idx_alerts_type;\nDROP INDEX IF EXISTS public.idx_alerts_severity;\nDROP INDEX IF EXISTS public.idx_alerts_org;\nDROP INDEX IF EXISTS public.idx_alerts_component;\nDROP INDEX IF EXISTS public.idx_alert_preferences_user;\nDROP INDEX IF EXISTS public.idx_alert_preferences_org;\nDROP INDEX IF EXISTS public.idx_alert_deliveries_alert;\nDROP INDEX IF EXISTS public.idx_account_deletion_audit_org;\nALTER TABLE IF EXISTS ONLY public.workspaces DROP CONSTRAINT IF EXISTS workspaces_pkey;\nALTER TABLE IF EXISTS ONLY public.workspaces DROP CONSTRAINT IF EXISTS workspaces_organization_id_slug_key;\nALTER TABLE IF EXISTS ONLY public.workspace_memberships DROP CONSTRAINT IF EXISTS workspace_memberships_pkey;\nALTER TABLE IF EXISTS ONLY public.workspace_members DROP CONSTRAINT IF EXISTS workspace_members_workspace_id_user_id_key;\nALTER TABLE IF EXISTS ONLY public.workspace_members DROP CONSTRAINT IF EXISTS workspace_members_pkey;\nALTER TABLE IF EXISTS ONLY public.users DROP CONSTRAINT IF EXISTS users_pkey;\nALTER TABLE IF EXISTS ONLY public.users DROP CONSTRAINT IF EXISTS users_email_key;\nALTER TABLE IF EXISTS ONLY public.users DROP CONSTRAINT IF EXISTS users_auth0_user_id_key;\nALTER TABLE IF EXISTS ONLY public.user_preferences DROP CONSTRAINT IF EXISTS user_preferences_pkey;\nALTER TABLE IF EXISTS ONLY public.usage_records DROP CONSTRAINT IF EXISTS usage_records_pkey;\nALTER TABLE IF EXISTS ONLY public.usage_records DROP CONSTRAINT IF EXISTS usage_records_org_type_period_unique;\nALTER TABLE IF EXISTS ONLY public.workspace_memberships DROP CONSTRAINT IF EXISTS unique_workspace_membership;\nALTER TABLE IF EXISTS ONLY public.suppliers DROP CONSTRAINT IF EXISTS suppliers_slug_key;\nALTER TABLE IF EXISTS ONLY public.suppliers DROP CONSTRAINT IF EXISTS suppliers_pkey;\nALTER TABLE IF EXISTS ONLY public.suppliers DROP CONSTRAINT IF EXISTS suppliers_name_key;\nALTER TABLE IF EXISTS ONLY public.subscriptions DROP CONSTRAINT IF EXISTS subscriptions_pkey;\nALTER TABLE IF EXISTS ONLY public.subscription_plans DROP CONSTRAINT IF EXISTS subscription_plans_pkey;\nALTER TABLE IF EXISTS ONLY public.subscription_plans DROP CONSTRAINT IF EXISTS subscription_plans_code_key;\nALTER TABLE IF EXISTS ONLY public.risk_score_history DROP CONSTRAINT IF EXISTS risk_score_history_pkey;\nALTER TABLE IF EXISTS ONLY public.risk_profile_presets DROP CONSTRAINT IF EXISTS risk_profile_presets_pkey;\nALTER TABLE IF EXISTS ONLY public.risk_profile_presets DROP CONSTRAINT IF EXISTS risk_profile_presets_name_key;\nALTER TABLE IF EXISTS ONLY public.projects DROP CONSTRAINT IF EXISTS projects_workspace_id_slug_key;\nALTER TABLE IF EXISTS ONLY public.projects DROP CONSTRAINT IF EXISTS projects_pkey;\nALTER TABLE IF EXISTS ONLY public.project_risk_summaries DROP CONSTRAINT IF EXISTS project_risk_summaries_pkey;\nALTER TABLE IF EXISTS ONLY public.project_members DROP CONSTRAINT IF EXISTS project_members_project_id_user_id_key;\nALTER TABLE IF EXISTS ONLY public.project_members DROP CONSTRAINT IF EXISTS project_members_pkey;\nALTER TABLE IF EXISTS ONLY public.payments DROP CONSTRAINT IF EXISTS payments_pkey;\nALTER TABLE IF EXISTS ONLY public.payment_methods DROP CONSTRAINT IF EXISTS payment_methods_pkey;\nALTER TABLE IF EXISTS ONLY public.organizations DROP CONSTRAINT IF EXISTS organizations_slug_key;\nALTER TABLE IF EXISTS ONLY public.organizations DROP CONSTRAINT IF EXISTS organizations_pkey;\nALTER TABLE IF EXISTS ONLY public.organization_settings_audit DROP CONSTRAINT IF EXISTS organization_settings_audit_pkey;\nALTER TABLE IF EXISTS ONLY public.organization_risk_profiles DROP CONSTRAINT IF EXISTS organization_risk_profiles_pkey;\nALTER TABLE IF EXISTS ONLY public.organization_memberships DROP CONSTRAINT IF EXISTS organization_memberships_user_id_organization_id_key;\nALTER TABLE IF EXISTS ONLY public.organization_memberships DROP CONSTRAINT IF EXISTS organization_memberships_pkey;\nALTER TABLE IF EXISTS ONLY public.onboarding_events DROP CONSTRAINT IF EXISTS onboarding_events_pkey;\nALTER TABLE IF EXISTS ONLY public.notifications DROP CONSTRAINT IF EXISTS notifications_pkey;\nALTER TABLE IF EXISTS ONLY public.manufacturers DROP CONSTRAINT IF EXISTS manufacturers_slug_key;\nALTER TABLE IF EXISTS ONLY public.manufacturers DROP CONSTRAINT IF EXISTS manufacturers_pkey;\nALTER TABLE IF EXISTS ONLY public.manufacturers DROP CONSTRAINT IF EXISTS manufacturers_name_key;\nALTER TABLE IF EXISTS ONLY public.invoices DROP CONSTRAINT IF EXISTS invoices_pkey;\nALTER TABLE IF EXISTS ONLY public.invoices DROP CONSTRAINT IF EXISTS invoices_invoice_number_key;\nALTER TABLE IF EXISTS ONLY public.invoice_line_items DROP CONSTRAINT IF EXISTS invoice_line_items_pkey;\nALTER TABLE IF EXISTS ONLY public.enrichment_queue DROP CONSTRAINT IF EXISTS enrichment_queue_pkey;\nALTER TABLE IF EXISTS ONLY public.enrichment_history DROP CONSTRAINT IF EXISTS enrichment_history_pkey;\nALTER TABLE IF EXISTS ONLY public.enrichment_events DROP CONSTRAINT IF EXISTS enrichment_events_pkey;\nALTER TABLE IF EXISTS ONLY public.enrichment_events DROP CONSTRAINT IF EXISTS enrichment_events_event_id_key;\nALTER TABLE IF EXISTS ONLY public.enrichment_audit_log DROP CONSTRAINT IF EXISTS enrichment_audit_log_pkey;\nALTER TABLE IF EXISTS ONLY public.components DROP CONSTRAINT IF EXISTS components_pkey;\nALTER TABLE IF EXISTS ONLY public.component_watches DROP CONSTRAINT IF EXISTS component_watches_user_id_component_id_key;\nALTER TABLE IF EXISTS ONLY public.component_watches DROP CONSTRAINT IF EXISTS component_watches_pkey;\nALTER TABLE IF EXISTS ONLY public.component_base_risk_scores DROP CONSTRAINT IF EXISTS component_base_risk_scores_pkey;\nALTER TABLE IF EXISTS ONLY public.column_mapping_templates DROP CONSTRAINT IF EXISTS column_mapping_templates_pkey;\nALTER TABLE IF EXISTS ONLY public.cns_processing_events DROP CONSTRAINT IF EXISTS cns_processing_events_pkey;\nALTER TABLE IF EXISTS ONLY public.cns_enrichment_config DROP CONSTRAINT IF EXISTS cns_enrichment_config_pkey;\nALTER TABLE IF EXISTS ONLY public.cns_bulk_uploads DROP CONSTRAINT IF EXISTS cns_bulk_uploads_pkey;\nALTER TABLE IF EXISTS ONLY public.categories DROP CONSTRAINT IF EXISTS categories_slug_key;\nALTER TABLE IF EXISTS ONLY public.categories DROP CONSTRAINT IF EXISTS categories_pkey;\nALTER TABLE IF EXISTS ONLY public.boms DROP CONSTRAINT IF EXISTS boms_pkey;\nALTER TABLE IF EXISTS ONLY public.bom_uploads DROP CONSTRAINT IF EXISTS bom_uploads_pkey;\nALTER TABLE IF EXISTS ONLY public.bom_risk_summaries DROP CONSTRAINT IF EXISTS bom_risk_summaries_pkey;\nALTER TABLE IF EXISTS ONLY public.bom_processing_jobs DROP CONSTRAINT IF EXISTS bom_processing_jobs_pkey;\nALTER TABLE IF EXISTS ONLY public.bom_line_items DROP CONSTRAINT IF EXISTS bom_line_items_pkey;\nALTER TABLE IF EXISTS ONLY public.bom_line_item_risk_scores DROP CONSTRAINT IF EXISTS bom_line_item_risk_scores_pkey;\nALTER TABLE IF EXISTS ONLY public.bom_jobs DROP CONSTRAINT IF EXISTS bom_jobs_pkey;\nALTER TABLE IF EXISTS ONLY public.bom_jobs DROP CONSTRAINT IF EXISTS bom_jobs_job_id_key;\nALTER TABLE IF EXISTS ONLY public.bom_items DROP CONSTRAINT IF EXISTS bom_items_pkey;\nALTER TABLE IF EXISTS ONLY public.billing_webhook_events DROP CONSTRAINT IF EXISTS billing_webhook_events_pkey;\nALTER TABLE IF EXISTS ONLY public.billing_customers DROP CONSTRAINT IF EXISTS billing_customers_pkey;\nALTER TABLE IF EXISTS ONLY public.audit_supplier_quality DROP CONSTRAINT IF EXISTS audit_supplier_quality_pkey;\nALTER TABLE IF EXISTS ONLY public.audit_logs DROP CONSTRAINT IF EXISTS audit_logs_pkey;\nALTER TABLE IF EXISTS ONLY public.audit_field_comparisons DROP CONSTRAINT IF EXISTS audit_field_comparisons_pkey;\nALTER TABLE IF EXISTS ONLY public.audit_enrichment_runs DROP CONSTRAINT IF EXISTS audit_enrichment_runs_pkey;\nALTER TABLE IF EXISTS ONLY public.attributes DROP CONSTRAINT IF EXISTS attributes_pkey;\nALTER TABLE IF EXISTS ONLY public.alerts DROP CONSTRAINT IF EXISTS alerts_pkey;\nALTER TABLE IF EXISTS ONLY public.alert_preferences DROP CONSTRAINT IF EXISTS alert_preferences_user_id_organization_id_alert_type_key;\nALTER TABLE IF EXISTS ONLY public.alert_preferences DROP CONSTRAINT IF EXISTS alert_preferences_pkey;\nALTER TABLE IF EXISTS ONLY public.alert_deliveries DROP CONSTRAINT IF EXISTS alert_deliveries_pkey;\nALTER TABLE IF EXISTS ONLY public.account_deletion_audit DROP CONSTRAINT IF EXISTS account_deletion_audit_pkey;\nALTER TABLE IF EXISTS public.enrichment_history ALTER COLUMN id DROP DEFAULT;\nALTER TABLE IF EXISTS public.cns_enrichment_config ALTER COLUMN id DROP DEFAULT;\nALTER TABLE IF EXISTS public.bom_jobs ALTER COLUMN id DROP DEFAULT;\nALTER TABLE IF EXISTS public.bom_items ALTER COLUMN id DROP DEFAULT;\nDROP TABLE IF EXISTS public.workspaces;\nDROP TABLE IF EXISTS public.workspace_memberships;\nDROP TABLE IF EXISTS public.workspace_members;\nDROP TABLE IF EXISTS public.users;\nDROP VIEW IF EXISTS public.user_profiles;\nDROP TABLE IF EXISTS public.user_preferences;\nDROP TABLE IF EXISTS public.usage_records;\nDROP TABLE IF EXISTS public.suppliers;\nDROP TABLE IF EXISTS public.subscriptions;\nDROP TABLE IF EXISTS public.subscription_plans;\nDROP TABLE IF EXISTS public.risk_score_history;\nDROP TABLE IF EXISTS public.risk_profile_presets;\nDROP TABLE IF EXISTS public.projects;\nDROP TABLE IF EXISTS public.project_risk_summaries;\nDROP TABLE IF EXISTS public.project_members;\nDROP TABLE IF EXISTS public.payments;\nDROP TABLE IF EXISTS public.payment_methods;\nDROP TABLE IF EXISTS public.organizations;\nDROP TABLE IF EXISTS public.organization_settings_audit;\nDROP TABLE IF EXISTS public.organization_memberships;\nDROP TABLE IF EXISTS public.onboarding_events;\nDROP TABLE IF EXISTS public.notifications;\nDROP TABLE IF EXISTS public.manufacturers;\nDROP TABLE IF EXISTS public.invoices;\nDROP TABLE IF EXISTS public.invoice_line_items;\nDROP TABLE IF EXISTS public.enrichment_queue;\nDROP SEQUENCE IF EXISTS public.enrichment_history_id_seq;\nDROP TABLE IF EXISTS public.enrichment_history;\nDROP TABLE IF EXISTS public.enrichment_events;\nDROP TABLE IF EXISTS public.enrichment_audit_log;\nDROP TABLE IF EXISTS public.components;\nDROP TABLE IF EXISTS public.component_watches;\nDROP TABLE IF EXISTS public.component_base_risk_scores;\nDROP TABLE IF EXISTS public.column_mapping_templates;\nDROP TABLE IF EXISTS public.cns_processing_events;\nDROP SEQUENCE IF EXISTS public.cns_enrichment_config_id_seq;\nDROP TABLE IF EXISTS public.cns_enrichment_config;\nDROP TABLE IF EXISTS public.cns_bulk_uploads;\nDROP TABLE IF EXISTS public.categories;\nDROP TABLE IF EXISTS public.boms;\nDROP TABLE IF EXISTS public.bom_uploads;\nDROP TABLE IF EXISTS public.bom_risk_summaries;\nDROP TABLE IF EXISTS public.bom_processing_jobs;\nDROP TABLE IF EXISTS public.bom_line_items;\nDROP TABLE IF EXISTS public.bom_line_item_risk_scores;\nDROP SEQUENCE IF EXISTS public.bom_jobs_id_seq;\nDROP TABLE IF EXISTS public.bom_jobs;\nDROP SEQUENCE IF EXISTS public.bom_items_id_seq;\nDROP TABLE IF EXISTS public.bom_items;\nDROP TABLE IF EXISTS public.billing_webhook_events;\nDROP TABLE IF EXISTS public.billing_customers;\nDROP TABLE IF EXISTS public.audit_supplier_quality;\nDROP TABLE IF EXISTS public.audit_logs;\nDROP TABLE IF EXISTS public.audit_field_comparisons;\nDROP TABLE IF EXISTS public.audit_enrichment_runs;\nDROP TABLE IF EXISTS public.attributes;\nDROP TABLE IF EXISTS public.alerts;\nDROP TABLE IF EXISTS public.alert_preferences;\nDROP TABLE IF EXISTS public.alert_deliveries;\nDROP TABLE IF EXISTS public.account_deletion_audit;\nDROP FUNCTION IF EXISTS public.update_component_search_vector();\nDROP FUNCTION IF EXISTS public.update_column_mapping_templates_updated_at();\nDROP FUNCTION IF EXISTS public.update_bom_processing_jobs_updated_at();\nDROP FUNCTION IF EXISTS public.update_bom_jobs_updated_at();\nDROP FUNCTION IF EXISTS public.update_bom_items_updated_at();\nDROP FUNCTION IF EXISTS public.trigger_set_timestamp();\nDROP FUNCTION IF EXISTS public.trigger_auto_add_platform_staff_to_platform_org();\nDROP FUNCTION IF EXISTS public.slugify(text_to_slug text);\nDROP FUNCTION IF EXISTS public.set_bom_organization_id();\nDROP FUNCTION IF EXISTS public.normalize_role(input_role text);\nDROP FUNCTION IF EXISTS public.log_cns_event(p_organization_id uuid, p_event_type character varying, p_title character varying, p_message text, p_bom_id uuid, p_event_category character varying, p_severity character varying, p_metadata jsonb, p_workflow_id character varying, p_actor_type character varying, p_actor_id character varying);\nDROP FUNCTION IF EXISTS public.is_super_admin();\nDROP FUNCTION IF EXISTS public.is_platform_staff();\nDROP FUNCTION IF EXISTS public.is_platform_admin();\nDROP FUNCTION IF EXISTS public.is_org_member(p_org_id uuid, p_user_id uuid);\nDROP FUNCTION IF EXISTS public.is_org_admin(p_org_id uuid, p_user_id uuid);\nDROP FUNCTION IF EXISTS public.is_member_of(p_org_id uuid);\nDROP FUNCTION IF EXISTS public.is_admin_of(p_org_id uuid);\nDROP FUNCTION IF EXISTS public.get_user_organizations(p_user_id uuid);\nDROP FUNCTION IF EXISTS public.get_user_organization_ids();\nDROP FUNCTION IF EXISTS public.get_or_create_risk_profile(p_org_id uuid);\nDROP TABLE IF EXISTS public.organization_risk_profiles;\nDROP FUNCTION IF EXISTS public.get_current_user_id();\nDROP FUNCTION IF EXISTS public.get_active_cns_config(p_tenant_id character varying);\nDROP FUNCTION IF EXISTS public.generate_slug_from_name();\nDROP FUNCTION IF EXISTS public.ensure_single_default_template();\nDROP FUNCTION IF EXISTS public.current_user_organization_id();\nDROP FUNCTION IF EXISTS public.add_user_to_platform_org(p_user_id uuid);\nDROP TYPE IF EXISTS public.payment_status;\nDROP TYPE IF EXISTS public.invoice_status;\n--\n-- Name: SCHEMA public; Type: COMMENT; Schema: -; Owner: -\n--\n\nCOMMENT ON SCHEMA public IS '';\n\n\n--\n-- Name: invoice_status; Type: TYPE; Schema: public; Owner: -\n--\n\nCREATE TYPE public.invoice_status AS ENUM (\n    'draft',\n    'open',\n    'paid',\n    'void',\n    'uncollectible'\n);\n\n\n--\n-- Name: payment_status; Type: TYPE; Schema: public; Owner: -\n--\n\nCREATE TYPE public.payment_status AS ENUM (\n    'pending',\n    'processing',\n    'succeeded',\n    'failed',\n    'refunded',\n    'partially_refunded',\n    'cancelled'\n);\n\n\n--\n-- Name: add_user_to_platform_org(uuid); Type: FUNCTION; Schema: public; Owner: -\n--\n\nCREATE FUNCTION public.add_user_to_platform_org(p_user_id uuid) RETURNS void\n    LANGUAGE plpgsql SECURITY DEFINER\n    SET search_path TO 'public'\n    AS $$\nDECLARE\n    platform_org_id UUID := 'a0000000-0000-0000-0000-000000000001';\n    user_role TEXT;\n    user_is_platform_admin BOOLEAN;\nBEGIN\n    SELECT role, is_platform_admin INTO user_role, user_is_platform_admin\n    FROM users WHERE id = p_user_id;\n\n    IF user_role IN ('super_admin', 'admin') OR user_is_platform_admin = true THEN\n        INSERT INTO organization_memberships (user_id, organization_id, role, created_at, updated_at)\n        VALUES (p_user_id, platform_org_id, 'admin', NOW(), NOW())\n        ON CONFLICT (user_id, organization_id) DO UPDATE SET role = 'admin', updated_at = NOW();\n    END IF;\nEND;\n$$;\n\n\n--\n-- Name: current_user_organization_id(); Type: FUNCTION; Schema: public; Owner: -\n--\n\nCREATE FUNCTION public.current_user_organization_id() RETURNS uuid\n    LANGUAGE sql STABLE SECURITY DEFINER\n    AS $$\n    SELECT COALESCE(\n        (current_setting('request.jwt.claims', true)::json-\u003e\u003e'organization_id')::UUID,\n        (current_setting('request.jwt.claims', true)::json-\u003e'user_metadata'-\u003e\u003e'organization_id')::UUID\n    )\n$$;\n\n\n--\n-- Name: ensure_single_default_template(); Type: FUNCTION; Schema: public; Owner: -\n--\n\nCREATE FUNCTION public.ensure_single_default_template() RETURNS trigger\n    LANGUAGE plpgsql\n    AS $$\nBEGIN\n    IF NEW.is_default = TRUE THEN\n        UPDATE column_mapping_templates\n        SET is_default = FALSE\n        WHERE organization_id = NEW.organization_id\n          AND id != NEW.id\n          AND is_default = TRUE;\n    END IF;\n    RETURN NEW;\nEND;\n$$;\n\n\n--\n-- Name: generate_slug_from_name(); Type: FUNCTION; Schema: public; Owner: -\n--\n\nCREATE FUNCTION public.generate_slug_from_name() RETURNS trigger\n    LANGUAGE plpgsql\n    AS $$\nBEGIN\n    IF NEW.slug IS NULL OR NEW.slug = '' THEN\n        NEW.slug := lower(\n            regexp_replace(\n                regexp_replace(\n                    regexp_replace(trim(NEW.name), '[^\\w\\s-]', '', 'g'),\n                    '\\s+', '-', 'g'\n                ),\n                '-+', '-', 'g'\n            )\n        );\n    END IF;\n    RETURN NEW;\nEND;\n$$;\n\n\n--\n-- Name: get_active_cns_config(character varying); Type: FUNCTION; Schema: public; Owner: -\n--\n\nCREATE FUNCTION public.get_active_cns_config(p_tenant_id character varying) RETURNS TABLE(id integer, tenant_id character varying, config_name character varying, is_active boolean, is_global boolean, enable_suppliers boolean, preferred_suppliers text[], supplier_min_confidence numeric, enable_ai boolean, ai_provider character varying, ai_operations text[], ai_min_confidence numeric, ai_cost_limit_monthly numeric, enable_web_scraping boolean, scraping_sources text[], scraping_timeout_seconds integer, quality_reject_threshold integer, quality_staging_threshold integer, quality_auto_approve_threshold integer, batch_size integer, max_retries integer, ai_cost_current_month numeric, ai_requests_current_month integer, web_scraping_requests_current_month integer, created_at timestamp with time zone, updated_at timestamp with time zone)\n    LANGUAGE plpgsql\n    AS $$\nBEGIN\n    IF p_tenant_id IS NOT NULL THEN\n        RETURN QUERY\n        SELECT c.* FROM cns_enrichment_config c\n        WHERE c.tenant_id = p_tenant_id AND c.is_active = TRUE\n        LIMIT 1;\n\n        IF FOUND THEN\n            RETURN;\n        END IF;\n    END IF;\n\n    RETURN QUERY\n    SELECT c.* FROM cns_enrichment_config c\n    WHERE c.is_global = TRUE AND c.is_active = TRUE\n    ORDER BY c.created_at DESC\n    LIMIT 1;\nEND;\n$$;\n\n\n--\n-- Name: get_current_user_id(); Type: FUNCTION; Schema: public; Owner: -\n--\n\nCREATE FUNCTION public.get_current_user_id() RETURNS uuid\n    LANGUAGE sql STABLE SECURITY DEFINER\n    SET search_path TO 'public'\n    AS $$\n    SELECT COALESCE(\n        nullif(current_setting('app.current_user_id', true), '')::uuid,\n        (SELECT id FROM users\n         WHERE keycloak_user_id = nullif(current_setting('app.keycloak_user_id', true), '')\n         LIMIT 1)\n    )\n$$;\n\n\nSET default_tablespace = '';\n\nSET default_table_access_method = heap;\n\n--\n-- Name: organization_risk_profiles; Type: TABLE; Schema: public; Owner: -\n--\n\nCREATE TABLE public.organization_risk_profiles (\n    id uuid DEFAULT gen_random_uuid() NOT NULL,\n    organization_id uuid NOT NULL,\n    lifecycle_weight integer DEFAULT 30,\n    supply_chain_weight integer DEFAULT 25,\n    compliance_weight integer DEFAULT 20,\n    obsolescence_weight integer DEFAULT 15,\n    single_source_weight integer DEFAULT 10,\n    low_threshold integer DEFAULT 30,\n    medium_threshold integer DEFAULT 60,\n    high_threshold integer DEFAULT 85,\n    quantity_weight numeric(4,3) DEFAULT 0.150,\n    lead_time_weight numeric(4,3) DEFAULT 0.100,\n    criticality_weight numeric(4,3) DEFAULT 0.200,\n    preset_name text,\n    custom_factors jsonb DEFAULT '[]'::jsonb,\n    created_at timestamp with time zone DEFAULT now(),\n    updated_at timestamp with time zone DEFAULT now(),\n    created_by uuid,\n    updated_by uuid,\n    CONSTRAINT organization_risk_profiles_compliance_weight_check CHECK (((compliance_weight \u003e= 0) AND (compliance_weight \u003c= 100))),\n    CONSTRAINT organization_risk_profiles_criticality_weight_check CHECK (((criticality_weight \u003e= (0)::numeric) AND (criticality_weight \u003c= (1)::numeric))),\n    CONSTRAINT organization_risk_profiles_high_threshold_check CHECK (((high_threshold \u003e= 1) AND (high_threshold \u003c= 99))),\n    CONSTRAINT organization_risk_profiles_lead_time_weight_check CHECK (((lead_time_weight \u003e= (0)::numeric) AND (lead_time_weight \u003c= (1)::numeric))),\n    CONSTRAINT organization_risk_profiles_lifecycle_weight_check CHECK (((lifecycle_weight \u003e= 0) AND (lifecycle_weight \u003c= 100))),\n    CONSTRAINT organization_risk_profiles_low_threshold_check CHECK (((low_threshold \u003e= 1) AND (low_threshold \u003c= 99))),\n    CONSTRAINT organization_risk_profiles_medium_threshold_check CHECK (((medium_threshold \u003e= 1) AND (medium_threshold \u003c= 99))),\n    CONSTRAINT organization_risk_profiles_obsolescence_weight_check CHECK (((obsolescence_weight \u003e= 0) AND (obsolescence_weight \u003c= 100))),\n    CONSTRAINT organization_risk_profiles_preset_name_check CHECK ((preset_name = ANY (ARRAY['default'::text, 'automotive'::text, 'medical'::text, 'aerospace'::text, 'consumer'::text, 'industrial'::text, 'custom'::text]))),\n    CONSTRAINT organization_risk_profiles_quantity_weight_check CHECK (((quantity_weight \u003e= (0)::numeric) AND (quantity_weight \u003c= (1)::numeric))),\n    CONSTRAINT organization_risk_profiles_single_source_weight_check CHECK (((single_source_weight \u003e= 0) AND (single_source_weight \u003c= 100))),\n    CONSTRAINT organization_risk_profiles_supply_chain_weight_check CHECK (((supply_chain_weight \u003e= 0) AND (supply_chain_weight \u003c= 100))),\n    CONSTRAINT risk_profile_thresholds_order CHECK (((low_threshold \u003c medium_threshold) AND (medium_threshold \u003c high_threshold))),\n    CONSTRAINT risk_profile_weights_sum CHECK ((((((lifecycle_weight + supply_chain_weight) + compliance_weight) + obsolescence_weight) + single_source_weight) = 100))\n);\n\n\n--\n-- Name: TABLE organization_risk_profiles; Type: COMMENT; Schema: public; Owner: -\n--\n\nCOMMENT ON TABLE public.organization_risk_profiles IS 'Customer-specific risk scoring configuration with configurable weights and thresholds';\n\n\n--\n-- Name: get_or_create_risk_profile(uuid); Type: FUNCTION; Schema: public; Owner: -\n--\n\nCREATE FUNCTION public.get_or_create_risk_profile(p_org_id uuid) RETURNS public.organization_risk_profiles\n    LANGUAGE plpgsql SECURITY DEFINER\n    SET search_path TO 'public'\n    AS $$\nDECLARE\n    v_profile organization_risk_profiles;\nBEGIN\n    -- Try to get existing profile\n    SELECT * INTO v_profile FROM organization_risk_profiles WHERE organization_id = p_org_id;\n\n    IF v_profile IS NULL THEN\n        -- Create default profile for organization\n        INSERT INTO organization_risk_profiles (organization_id, preset_name)\n        VALUES (p_org_id, 'default')\n        RETURNING * INTO v_profile;\n    END IF;\n\n    RETURN v_profile;\nEND;\n$$;\n\n\n--\n-- Name: get_user_organization_ids(); Type: FUNCTION; Schema: public; Owner: -\n--\n\nCREATE FUNCTION public.get_user_organization_ids() RETURNS SETOF uuid\n    LANGUAGE sql STABLE SECURITY DEFINER\n    SET search_path TO 'public'\n    AS $$\n    SELECT organization_id\n    FROM organization_memberships\n    WHERE user_id = get_current_user_id()\n$$;\n\n\n--\n-- Name: get_user_organizations(uuid); Type: FUNCTION; Schema: public; Owner: -\n--\n\nCREATE FUNCTION public.get_user_organizations(p_user_id uuid DEFAULT NULL::uuid) RETURNS SETOF uuid\n    LANGUAGE sql STABLE SECURITY DEFINER\n    SET search_path TO 'public'\n    AS $$\n    SELECT organization_id\n    FROM organization_memberships\n    WHERE user_id = COALESCE(p_user_id, get_current_user_id())\n$$;\n\n\n--\n-- Name: is_admin_of(uuid); Type: FUNCTION; Schema: public; Owner: -\n--\n\nCREATE FUNCTION public.is_admin_of(p_org_id uuid) RETURNS boolean\n    LANGUAGE sql STABLE SECURITY DEFINER\n    SET search_path TO 'public'\n    AS $$\n    SELECT EXISTS (\n        SELECT 1 FROM organization_memberships\n        WHERE user_id = get_current_user_id()\n        AND organization_id = p_org_id\n        AND role IN ('owner', 'admin')\n    )\n$$;\n\n\n--\n-- Name: is_member_of(uuid); Type: FUNCTION; Schema: public; Owner: -\n--\n\nCREATE FUNCTION public.is_member_of(p_org_id uuid) RETURNS boolean\n    LANGUAGE sql STABLE SECURITY DEFINER\n    SET search_path TO 'public'\n    AS $$\n    SELECT EXISTS (\n        SELECT 1 FROM organization_memberships\n        WHERE user_id = get_current_user_id()\n        AND organization_id = p_org_id\n    )\n$$;\n\n\n--\n-- Name: is_org_admin(uuid, uuid); Type: FUNCTION; Schema: public; Owner: -\n--\n\nCREATE FUNCTION public.is_org_admin(p_org_id uuid, p_user_id uuid DEFAULT NULL::uuid) RETURNS boolean\n    LANGUAGE sql STABLE SECURITY DEFINER\n    SET search_path TO 'public'\n    AS $$\n    SELECT EXISTS (\n        SELECT 1 FROM organization_memberships\n        WHERE organization_id = p_org_id\n        AND user_id = COALESCE(p_user_id, get_current_user_id())\n        AND role IN ('owner', 'admin')\n    )\n$$;\n\n\n--\n-- Name: is_org_member(uuid, uuid); Type: FUNCTION; Schema: public; Owner: -\n--\n\nCREATE FUNCTION public.is_org_member(p_org_id uuid, p_user_id uuid DEFAULT NULL::uuid) RETURNS boolean\n    LANGUAGE sql STABLE SECURITY DEFINER\n    SET search_path TO 'public'\n    AS $$\n    SELECT EXISTS (\n        SELECT 1 FROM organization_memberships\n        WHERE organization_id = p_org_id\n        AND user_id = COALESCE(p_user_id, get_current_user_id())\n    )\n$$;\n\n\n--\n-- Name: is_platform_admin(); Type: FUNCTION; Schema: public; Owner: -\n--\n\nCREATE FUNCTION public.is_platform_admin() RETURNS boolean\n    LANGUAGE sql STABLE SECURITY DEFINER\n    AS $$\n    SELECT COALESCE(\n        (current_setting('request.jwt.claims', true)::json-\u003e\u003e'platform_admin')::BOOLEAN,\n        (current_setting('request.jwt.claims', true)::json-\u003e'user_metadata'-\u003e\u003e'platform_admin')::BOOLEAN,\n        false\n    )\n$$;\n\n\n--\n-- Name: is_platform_staff(); Type: FUNCTION; Schema: public; Owner: -\n--\n\nCREATE FUNCTION public.is_platform_staff() RETURNS boolean\n    LANGUAGE sql STABLE SECURITY DEFINER\n    SET search_path TO 'public'\n    AS $$\n    SELECT EXISTS (\n        SELECT 1 FROM organization_memberships\n        WHERE user_id = get_current_user_id()\n        AND organization_id = 'a0000000-0000-0000-0000-000000000001'::uuid\n    )\n$$;\n\n\n--\n-- Name: is_super_admin(); Type: FUNCTION; Schema: public; Owner: -\n--\n\nCREATE FUNCTION public.is_super_admin() RETURNS boolean\n    LANGUAGE sql STABLE SECURITY DEFINER\n    AS $$\n    SELECT COALESCE(\n        (SELECT is_platform_admin FROM users WHERE id = get_current_user_id()),\n        false\n    )\n$$;\n\n\n--\n-- Name: log_cns_event(uuid, character varying, character varying, text, uuid, character varying, character varying, jsonb, character varying, character varying, character varying); Type: FUNCTION; Schema: public; Owner: -\n--\n\nCREATE FUNCTION public.log_cns_event(p_organization_id uuid, p_event_type character varying, p_title character varying, p_message text DEFAULT NULL::text, p_bom_id uuid DEFAULT NULL::uuid, p_event_category character varying DEFAULT 'processing'::character varying, p_severity character varying DEFAULT 'info'::character varying, p_metadata jsonb DEFAULT '{}'::jsonb, p_workflow_id character varying DEFAULT NULL::character varying, p_actor_type character varying DEFAULT 'system'::character varying, p_actor_id character varying DEFAULT NULL::character varying) RETURNS uuid\n    LANGUAGE plpgsql SECURITY DEFINER\n    AS $$\nDECLARE\n    v_event_id UUID;\nBEGIN\n    INSERT INTO cns_processing_events (\n        organization_id, bom_id, event_type, event_category, severity,\n        title, message, metadata, workflow_id, actor_type, actor_id\n    ) VALUES (\n        p_organization_id, p_bom_id, p_event_type, p_event_category, p_severity,\n        p_title, p_message, p_metadata, p_workflow_id, p_actor_type, p_actor_id\n    )\n    RETURNING id INTO v_event_id;\n\n    RETURN v_event_id;\nEND;\n$$;\n\n\n--\n-- Name: normalize_role(text); Type: FUNCTION; Schema: public; Owner: -\n--\n\nCREATE FUNCTION public.normalize_role(input_role text) RETURNS text\n    LANGUAGE plpgsql IMMUTABLE\n    AS $$\nDECLARE\n    normalized TEXT;\n    lower_role TEXT;\nBEGIN\n    lower_role := LOWER(COALESCE(input_role, ''));\n\n    IF lower_role IN ('platform:super_admin', 'platform-super-admin', 'realm-admin', 'platform_admin') THEN\n        normalized := 'super_admin';\n    ELSIF lower_role IN ('org-owner', 'organization-owner', 'billing_admin') THEN\n        normalized := 'owner';\n    ELSIF lower_role IN ('administrator', 'org_admin', 'tenant-admin', 'org-admin') THEN\n        normalized := 'admin';\n    ELSIF lower_role IN ('staff', 'developer', 'support', 'operator', 'platform:engineer', 'platform:staff') THEN\n        normalized := 'engineer';\n    ELSIF lower_role IN ('user', 'customer', 'viewer', 'member', 'read-only', '') THEN\n        normalized := 'analyst';\n    ELSIF lower_role IN ('super_admin', 'owner', 'admin', 'engineer', 'analyst') THEN\n        normalized := lower_role;\n    ELSE\n        normalized := 'analyst';\n    END IF;\n\n    RETURN normalized;\nEND;\n$$;\n\n\n--\n-- Name: FUNCTION normalize_role(input_role text); Type: COMMENT; Schema: public; Owner: -\n--\n\nCOMMENT ON FUNCTION public.normalize_role(input_role text) IS 'Normalizes legacy role names to unified 5-level hierarchy';\n\n\n--\n-- Name: set_bom_organization_id(); Type: FUNCTION; Schema: public; Owner: -\n--\n\nCREATE FUNCTION public.set_bom_organization_id() RETURNS trigger\n    LANGUAGE plpgsql\n    AS $$\nDECLARE\n    v_organization_id UUID;\nBEGIN\n    SELECT w.organization_id INTO v_organization_id\n    FROM projects p\n    JOIN workspaces w ON w.id = p.workspace_id\n    WHERE p.id = NEW.project_id;\n\n    IF v_organization_id IS NOT NULL THEN\n        NEW.organization_id := v_organization_id;\n    ELSE\n        RAISE EXCEPTION '[ERROR] Cannot determine organization_id for BOM \"%\" with project_id %. Check workspace linkage.',\n            NEW.name, NEW.project_id;\n    END IF;\n\n    RETURN NEW;\nEND;\n$$;\n\n\n--\n-- Name: slugify(text); Type: FUNCTION; Schema: public; Owner: -\n--\n\nCREATE FUNCTION public.slugify(text_to_slug text) RETURNS text\n    LANGUAGE plpgsql IMMUTABLE\n    AS $_$\nDECLARE\n    slugged text;\nBEGIN\n    slugged := lower(text_to_slug);\n    slugged := regexp_replace(slugged, '[\\s_]+', '-', 'g');\n    slugged := regexp_replace(slugged, '[^a-z0-9\\-]', '', 'g');\n    slugged := regexp_replace(slugged, '-+', '-', 'g');\n    slugged := regexp_replace(slugged, '^-|-$', '', 'g');\n    IF slugged IS NULL OR slugged = '' THEN\n        slugged := 'entity-' || substring(gen_random_uuid()::text from 1 for 8);\n    END IF;\n    RETURN slugged;\nEND;\n$_$;\n\n\n--\n-- Name: trigger_auto_add_platform_staff_to_platform_org(); Type: FUNCTION; Schema: public; Owner: -\n--\n\nCREATE FUNCTION public.trigger_auto_add_platform_staff_to_platform_org() RETURNS trigger\n    LANGUAGE plpgsql SECURITY DEFINER\n    SET search_path TO 'public'\n    AS $$\nBEGIN\n    IF (NEW.role IN ('super_admin', 'admin') OR NEW.is_platform_admin = true) AND\n       (OLD IS NULL OR (OLD.role NOT IN ('super_admin', 'admin') AND OLD.is_platform_admin \u003c\u003e true)) THEN\n        PERFORM add_user_to_platform_org(NEW.id);\n    END IF;\n    RETURN NEW;\nEND;\n$$;\n\n\n--\n-- Name: trigger_set_timestamp(); Type: FUNCTION; Schema: public; Owner: -\n--\n\nCREATE FUNCTION public.trigger_set_timestamp() RETURNS trigger\n    LANGUAGE plpgsql\n    AS $$\nBEGIN\n    NEW.updated_at = NOW();\n    RETURN NEW;\nEND;\n$$;\n\n\n--\n-- Name: update_bom_items_updated_at(); Type: FUNCTION; Schema: public; Owner: -\n--\n\nCREATE FUNCTION public.update_bom_items_updated_at() RETURNS trigger\n    LANGUAGE plpgsql\n    AS $$\nBEGIN\n    NEW.updated_at = NOW();\n    RETURN NEW;\nEND;\n$$;\n\n\n--\n-- Name: update_bom_jobs_updated_at(); Type: FUNCTION; Schema: public; Owner: -\n--\n\nCREATE FUNCTION public.update_bom_jobs_updated_at() RETURNS trigger\n    LANGUAGE plpgsql\n    AS $$\nBEGIN\n    NEW.updated_at = NOW();\n    RETURN NEW;\nEND;\n$$;\n\n\n--\n-- Name: update_bom_processing_jobs_updated_at(); Type: FUNCTION; Schema: public; Owner: -\n--\n\nCREATE FUNCTION public.update_bom_processing_jobs_updated_at() RETURNS trigger\n    LANGUAGE plpgsql\n    AS $$\nBEGIN\n    NEW.updated_at = NOW();\n    RETURN NEW;\nEND;\n$$;\n\n\n--\n-- Name: update_column_mapping_templates_updated_at(); Type: FUNCTION; Schema: public; Owner: -\n--\n\nCREATE FUNCTION public.update_column_mapping_templates_updated_at() RETURNS trigger\n    LANGUAGE plpgsql\n    AS $$\nBEGIN\n    NEW.updated_at = NOW();\n    RETURN NEW;\nEND;\n$$;\n\n\n--\n-- Name: update_component_search_vector(); Type: FUNCTION; Schema: public; Owner: -\n--\n\nCREATE FUNCTION public.update_component_search_vector() RETURNS trigger\n    LANGUAGE plpgsql\n    AS $$\nBEGIN\n    NEW.search_vector := to_tsvector('english',\n        COALESCE(NEW.manufacturer_part_number, '') || ' ' ||\n        COALESCE(NEW.manufacturer, '') || ' ' ||\n        COALESCE(NEW.description, '')\n    );\n    RETURN NEW;\nEND;\n$$;\n\n\n--\n-- Name: account_deletion_audit; Type: TABLE; Schema: public; Owner: -\n--\n\nCREATE TABLE public.account_deletion_audit (\n    id uuid DEFAULT gen_random_uuid() NOT NULL,\n    organization_id uuid NOT NULL,\n    user_id uuid,\n    event_type text NOT NULL,\n    event_data jsonb DEFAULT '{}'::jsonb,\n    performed_by uuid,\n    ip_address inet,\n    user_agent text,\n    created_at timestamp with time zone DEFAULT now()\n);\n\n\n--\n-- Name: TABLE account_deletion_audit; Type: COMMENT; Schema: public; Owner: -\n--\n\nCOMMENT ON TABLE public.account_deletion_audit IS 'Audit log for account deletion events (GDPR compliance)';\n\n\n--\n-- Name: alert_deliveries; Type: TABLE; Schema: public; Owner: -\n--\n\nCREATE TABLE public.alert_deliveries (\n    id uuid DEFAULT gen_random_uuid() NOT NULL,\n    alert_id uuid NOT NULL,\n    delivery_method text NOT NULL,\n    recipient text NOT NULL,\n    status text DEFAULT 'pending'::text,\n    delivered_at timestamp with time zone,\n    novu_transaction_id text,\n    error_message text,\n    created_at timestamp with time zone DEFAULT now()\n);\n\n\n--\n-- Name: alert_preferences; Type: TABLE; Schema: public; Owner: -\n--\n\nCREATE TABLE public.alert_preferences (\n    id uuid DEFAULT gen_random_uuid() NOT NULL,\n    user_id uuid NOT NULL,\n    organization_id uuid NOT NULL,\n    alert_type text NOT NULL,\n    is_active boolean DEFAULT true,\n    in_app_enabled boolean DEFAULT true,\n    email_enabled boolean DEFAULT false,\n    webhook_enabled boolean DEFAULT false,\n    webhook_url text,\n    email_address text,\n    threshold_config jsonb,\n    created_at timestamp with time zone DEFAULT now(),\n    updated_at timestamp with time zone DEFAULT now(),\n    CONSTRAINT alert_preferences_alert_type_check CHECK ((alert_type = ANY (ARRAY['LIFECYCLE'::text, 'RISK'::text, 'PRICE'::text, 'AVAILABILITY'::text, 'COMPLIANCE'::text, 'PCN'::text, 'SUPPLY_CHAIN'::text])))\n);\n\n\n--\n-- Name: alerts; Type: TABLE; Schema: public; Owner: -\n--\n\nCREATE TABLE public.alerts (\n    id uuid DEFAULT gen_random_uuid() NOT NULL,\n    organization_id uuid NOT NULL,\n    component_id uuid,\n    user_id uuid,\n    severity text NOT NULL,\n    alert_type text NOT NULL,\n    title text NOT NULL,\n    message text,\n    is_read boolean DEFAULT false,\n    is_dismissed boolean DEFAULT false,\n    created_at timestamp with time zone DEFAULT now(),\n    read_at timestamp with time zone,\n    dismissed_at timestamp with time zone,\n    deleted_at timestamp with time zone,\n    context jsonb,\n    action_url text,\n    archived_at timestamp with time zone,\n    snoozed_until timestamp with time zone,\n    CONSTRAINT alerts_alert_type_check CHECK ((alert_type = ANY (ARRAY['LIFECYCLE'::text, 'RISK'::text, 'PRICE'::text, 'AVAILABILITY'::text, 'COMPLIANCE'::text, 'PCN'::text, 'SUPPLY_CHAIN'::text]))),\n    CONSTRAINT alerts_severity_check CHECK ((severity = ANY (ARRAY['LOW'::text, 'MEDIUM'::text, 'HIGH'::text, 'CRITICAL'::text])))\n);\n\n\n--\n-- Name: attributes; Type: TABLE; Schema: public; Owner: -\n--\n\nCREATE TABLE public.attributes (\n    id uuid DEFAULT gen_random_uuid() NOT NULL,\n    component_id uuid NOT NULL,\n    name text NOT NULL,\n    value text NOT NULL,\n    unit text,\n    source text,\n    confidence numeric(5,2),\n    created_at timestamp with time zone DEFAULT now()\n);\n\n\n--\n-- Name: audit_enrichment_runs; Type: TABLE; Schema: public; Owner: -\n--\n\nCREATE TABLE public.audit_enrichment_runs (\n    id uuid DEFAULT gen_random_uuid() NOT NULL,\n    upload_id text NOT NULL,\n    line_id text NOT NULL,\n    mpn text NOT NULL,\n    manufacturer text,\n    enrichment_timestamp timestamp with time zone DEFAULT now() NOT NULL,\n    successful boolean DEFAULT false NOT NULL,\n    quality_score numeric(5,2),\n    storage_location text,\n    supplier_name text NOT NULL,\n    supplier_match_confidence numeric(5,2),\n    processing_time_ms integer,\n    error_message text,\n    needs_review boolean DEFAULT false,\n    review_notes text,\n    reviewed_by text,\n    reviewed_at timestamp with time zone,\n    created_at timestamp with time zone DEFAULT now(),\n    updated_at timestamp with time zone DEFAULT now()\n);\n\n\n--\n-- Name: audit_field_comparisons; Type: TABLE; Schema: public; Owner: -\n--\n\nCREATE TABLE public.audit_field_comparisons (\n    id uuid DEFAULT gen_random_uuid() NOT NULL,\n    enrichment_run_id uuid NOT NULL,\n    field_name text NOT NULL,\n    field_category text,\n    supplier_value text,\n    normalized_value text,\n    changed boolean DEFAULT false,\n    change_type text,\n    change_reason text,\n    confidence numeric(5,2),\n    supplier_data_quality text,\n    normalization_applied boolean DEFAULT false,\n    created_at timestamp with time zone DEFAULT now()\n);\n\n\n--\n-- Name: audit_logs; Type: TABLE; Schema: public; Owner: -\n--\n\nCREATE TABLE public.audit_logs (\n    id uuid DEFAULT gen_random_uuid() NOT NULL,\n    event_type text NOT NULL,\n    routing_key text NOT NULL,\n    organization_id uuid NOT NULL,\n    user_id text,\n    username text,\n    email text,\n    source text DEFAULT 'cns-service'::text NOT NULL,\n    event_data jsonb DEFAULT '{}'::jsonb,\n    created_at timestamp with time zone DEFAULT now()\n);\n\n\n--\n-- Name: audit_supplier_quality; Type: TABLE; Schema: public; Owner: -\n--\n\nCREATE TABLE public.audit_supplier_quality (\n    id uuid DEFAULT gen_random_uuid() NOT NULL,\n    date date NOT NULL,\n    supplier_name text NOT NULL,\n    total_requests integer DEFAULT 0,\n    successful_requests integer DEFAULT 0,\n    failed_requests integer DEFAULT 0,\n    avg_quality_score numeric(5,2),\n    avg_match_confidence numeric(5,2),\n    avg_processing_time_ms integer,\n    fields_changed_count integer DEFAULT 0,\n    fields_missing_count integer DEFAULT 0,\n    fields_invalid_count integer DEFAULT 0,\n    created_at timestamp with time zone DEFAULT now(),\n    updated_at timestamp with time zone DEFAULT now()\n);\n\n\n--\n-- Name: billing_customers; Type: TABLE; Schema: public; Owner: -\n--\n\nCREATE TABLE public.billing_customers (\n    id uuid DEFAULT gen_random_uuid() NOT NULL,\n    organization_id uuid NOT NULL,\n    billing_email text NOT NULL,\n    billing_name text,\n    billing_address jsonb DEFAULT '{}'::jsonb,\n    tax_id text,\n    tax_exempt boolean DEFAULT false,\n    provider_customer_ids jsonb DEFAULT '{}'::jsonb,\n    default_payment_method_id uuid,\n    metadata jsonb DEFAULT '{}'::jsonb,\n    created_at timestamp with time zone DEFAULT now(),\n    updated_at timestamp with time zone DEFAULT now()\n);\n\n\n--\n-- Name: TABLE billing_customers; Type: COMMENT; Schema: public; Owner: -\n--\n\nCOMMENT ON TABLE public.billing_customers IS 'Billing profiles linked to organizations';\n\n\n--\n-- Name: billing_webhook_events; Type: TABLE; Schema: public; Owner: -\n--\n\nCREATE TABLE public.billing_webhook_events (\n    id uuid DEFAULT gen_random_uuid() NOT NULL,\n    provider text NOT NULL,\n    provider_event_id text NOT NULL,\n    event_type text NOT NULL,\n    payload jsonb NOT NULL,\n    processed boolean DEFAULT false,\n    processed_at timestamp with time zone,\n    processing_error text,\n    created_at timestamp with time zone DEFAULT now()\n);\n\n\n--\n-- Name: TABLE billing_webhook_events; Type: COMMENT; Schema: public; Owner: -\n--\n\nCOMMENT ON TABLE public.billing_webhook_events IS 'Webhook events from payment providers for idempotency';\n\n\n--\n-- Name: bom_items; Type: TABLE; Schema: public; Owner: -\n--\n\nCREATE TABLE public.bom_items (\n    id integer NOT NULL,\n    job_id character varying(100) NOT NULL,\n    line_number integer NOT NULL,\n    mpn character varying(255),\n    manufacturer character varying(255),\n    quantity integer,\n    reference_designator text,\n    description text,\n    component_id integer,\n    enriched_mpn character varying(255),\n    enriched_manufacturer character varying(255),\n    specifications jsonb,\n    datasheet_url text,\n    lifecycle_status character varying(50),\n    estimated_lifetime date,\n    compliance_status jsonb,\n    pricing jsonb,\n    match_confidence numeric(5,2),\n    quality_score integer,\n    routing_destination character varying(50) DEFAULT 'staging'::character varying,\n    enrichment_status character varying(50) DEFAULT 'pending'::character varying,\n    error_message text,\n    retry_count integer DEFAULT 0,\n    created_at timestamp with time zone DEFAULT now(),\n    updated_at timestamp with time zone DEFAULT now()\n);\n\n\n--\n-- Name: bom_items_id_seq; Type: SEQUENCE; Schema: public; Owner: -\n--\n\nCREATE SEQUENCE public.bom_items_id_seq\n    AS integer\n    START WITH 1\n    INCREMENT BY 1\n    NO MINVALUE\n    NO MAXVALUE\n    CACHE 1;\n\n\n--\n-- Name: bom_items_id_seq; Type: SEQUENCE OWNED BY; Schema: public; Owner: -\n--\n\nALTER SEQUENCE public.bom_items_id_seq OWNED BY public.bom_items.id;\n\n\n--\n-- Name: bom_jobs; Type: TABLE; Schema: public; Owner: -\n--\n\nCREATE TABLE public.bom_jobs (\n    id integer NOT NULL,\n    job_id character varying(100) NOT NULL,\n    customer_id integer,\n    customer_name character varying(255),\n    filename character varying(255),\n    file_size integer,\n    total_items integer,\n    status character varying(50) DEFAULT 'pending'::character varying,\n    progress integer DEFAULT 0,\n    items_processed integer DEFAULT 0,\n    items_auto_approved integer DEFAULT 0,\n    items_in_staging integer DEFAULT 0,\n    items_rejected integer DEFAULT 0,\n    items_failed integer DEFAULT 0,\n    started_at timestamp with time zone,\n    completed_at timestamp with time zone,\n    processing_time_ms integer,\n    error_message text,\n    results_data jsonb,\n    organization_id uuid,\n    project_id uuid,\n    source character varying(50) DEFAULT 'customer'::character varying,\n    source_metadata jsonb,\n    priority integer DEFAULT 5,\n    created_at timestamp with time zone DEFAULT now(),\n    updated_at timestamp with time zone DEFAULT now()\n);\n\n\n--\n-- Name: bom_jobs_id_seq; Type: SEQUENCE; Schema: public; Owner: -\n--\n\nCREATE SEQUENCE public.bom_jobs_id_seq\n    AS integer\n    START WITH 1\n    INCREMENT BY 1\n    NO MINVALUE\n    NO MAXVALUE\n    CACHE 1;\n\n\n--\n-- Name: bom_jobs_id_seq; Type: SEQUENCE OWNED BY; Schema: public; Owner: -\n--\n\nALTER SEQUENCE public.bom_jobs_id_seq OWNED BY public.bom_jobs.id;\n\n\n--\n-- Name: bom_line_item_risk_scores; Type: TABLE; Schema: public; Owner: -\n--\n\nCREATE TABLE public.bom_line_item_risk_scores (\n    id uuid DEFAULT gen_random_uuid() NOT NULL,\n    bom_line_item_id uuid NOT NULL,\n    organization_id uuid NOT NULL,\n    base_risk_id uuid,\n    base_risk_score integer DEFAULT 0 NOT NULL,\n    quantity_modifier integer DEFAULT 0,\n    lead_time_modifier integer DEFAULT 0,\n    criticality_modifier integer DEFAULT 0,\n    user_criticality_level integer DEFAULT 5,\n    contextual_risk_score integer DEFAULT 0 NOT NULL,\n    risk_level text DEFAULT 'low'::text,\n    alternates_available integer DEFAULT 0,\n    alternate_risk_reduction integer DEFAULT 0,\n    calculated_at timestamp with time zone DEFAULT now(),\n    profile_version_used uuid,\n    created_at timestamp with time zone DEFAULT now(),\n    updated_at timestamp with time zone DEFAULT now(),\n    CONSTRAINT bom_line_item_risk_scores_alternate_risk_reduction_check CHECK (((alternate_risk_reduction \u003e= 0) AND (alternate_risk_reduction \u003c= 100))),\n    CONSTRAINT bom_line_item_risk_scores_base_risk_score_check CHECK (((base_risk_score \u003e= 0) AND (base_risk_score \u003c= 100))),\n    CONSTRAINT bom_line_item_risk_scores_contextual_risk_score_check CHECK (((contextual_risk_score \u003e= 0) AND (contextual_risk_score \u003c= 100))),\n    CONSTRAINT bom_line_item_risk_scores_criticality_modifier_check CHECK (((criticality_modifier \u003e= 0) AND (criticality_modifier \u003c= 100))),\n    CONSTRAINT bom_line_item_risk_scores_lead_time_modifier_check CHECK (((lead_time_modifier \u003e= 0) AND (lead_time_modifier \u003c= 100))),\n    CONSTRAINT bom_line_item_risk_scores_quantity_modifier_check CHECK (((quantity_modifier \u003e= 0) AND (quantity_modifier \u003c= 100))),\n    CONSTRAINT bom_line_item_risk_scores_risk_level_check CHECK ((risk_level = ANY (ARRAY['low'::text, 'medium'::text, 'high'::text, 'critical'::text]))),\n    CONSTRAINT bom_line_item_risk_scores_user_criticality_level_check CHECK (((user_criticality_level \u003e= 1) AND (user_criticality_level \u003c= 10)))\n);\n\n\n--\n-- Name: TABLE bom_line_item_risk_scores; Type: COMMENT; Schema: public; Owner: -\n--\n\nCOMMENT ON TABLE public.bom_line_item_risk_scores IS 'Contextual risk scores per BOM line item with usage-context modifiers';\n\n\n--\n-- Name: bom_line_items; Type: TABLE; Schema: public; Owner: -\n--\n\nCREATE TABLE public.bom_line_items (\n    id uuid DEFAULT gen_random_uuid() NOT NULL,\n    bom_id uuid NOT NULL,\n    line_number integer,\n    reference_designator text,\n    manufacturer_part_number text,\n    manufacturer text,\n    description text,\n    quantity integer DEFAULT 1,\n    component_id uuid,\n    match_confidence numeric(5,2),\n    match_method text,\n    enrichment_status text DEFAULT 'pending'::text,\n    enriched_mpn text,\n    enriched_manufacturer text,\n    specifications jsonb,\n    datasheet_url text,\n    lifecycle_status text,\n    compliance_status jsonb,\n    pricing jsonb,\n    unit_price numeric(10,4),\n    extended_price numeric(12,2),\n    risk_level text,\n    redis_component_key text,\n    component_storage text DEFAULT 'none'::text,\n    enrichment_error text,\n    category character varying(255),\n    subcategory character varying(255),\n    metadata jsonb DEFAULT '{}'::jsonb,\n    enriched_at timestamp with time zone,\n    created_at timestamp with time zone DEFAULT now(),\n    updated_at timestamp with time zone DEFAULT now(),\n    CONSTRAINT bom_line_items_enrichment_status_check CHECK ((enrichment_status = ANY (ARRAY['pending'::text, 'matched'::text, 'enriched'::text, 'no_match'::text, 'error'::text]))),\n    CONSTRAINT bom_line_items_match_method_check CHECK ((match_method = ANY (ARRAY['exact'::text, 'fuzzy'::text, 'manual'::text, 'unmatched'::text]))),\n    CONSTRAINT bom_line_items_risk_level_check CHECK ((risk_level = ANY (ARRAY['GREEN'::text, 'YELLOW'::text, 'ORANGE'::text, 'RED'::text])))\n);\n\n\n--\n-- Name: bom_processing_jobs; Type: TABLE; Schema: public; Owner: -\n--\n\nCREATE TABLE public.bom_processing_jobs (\n    id uuid DEFAULT gen_random_uuid() NOT NULL,\n    bom_id uuid NOT NULL,\n    organization_id uuid NOT NULL,\n    status text DEFAULT 'queued'::text,\n    priority integer DEFAULT 5,\n    temporal_workflow_id text,\n    total_items integer,\n    processed_items integer DEFAULT 0,\n    enriched_items integer DEFAULT 0,\n    failed_items integer DEFAULT 0,\n    started_at timestamp with time zone,\n    completed_at timestamp with time zone,\n    error_message text,\n    metadata jsonb DEFAULT '{}'::jsonb,\n    created_at timestamp with time zone DEFAULT now(),\n    updated_at timestamp with time zone DEFAULT now(),\n    workflow_id text,\n    current_stage text,\n    stages jsonb DEFAULT '[]'::jsonb,\n    risk_scored_items integer DEFAULT 0,\n    health_grade text,\n    average_risk_score numeric(5,2),\n    paused_at timestamp with time zone,\n    enrichment_progress jsonb DEFAULT '{}'::jsonb,\n    CONSTRAINT bom_processing_jobs_status_check CHECK ((status = ANY (ARRAY['queued'::text, 'processing'::text, 'completed'::text, 'failed'::text, 'cancelled'::text])))\n);\n\n\n--\n-- Name: bom_risk_summaries; Type: TABLE; Schema: public; Owner: -\n--\n\nCREATE TABLE public.bom_risk_summaries (\n    id uuid DEFAULT gen_random_uuid() NOT NULL,\n    bom_id uuid NOT NULL,\n    organization_id uuid NOT NULL,\n    low_risk_count integer DEFAULT 0,\n    medium_risk_count integer DEFAULT 0,\n    high_risk_count integer DEFAULT 0,\n    critical_risk_count integer DEFAULT 0,\n    total_line_items integer DEFAULT 0,\n    average_risk_score numeric(5,2) DEFAULT 0,\n    weighted_risk_score numeric(5,2) DEFAULT 0,\n    max_risk_score integer DEFAULT 0,\n    min_risk_score integer DEFAULT 0,\n    health_grade text DEFAULT 'A'::text,\n    top_risk_factors jsonb DEFAULT '[]'::jsonb,\n    top_risk_components jsonb DEFAULT '[]'::jsonb,\n    previous_average_score numeric(5,2),\n    score_trend text DEFAULT 'stable'::text,\n    calculated_at timestamp with time zone DEFAULT now(),\n    profile_version_used uuid,\n    created_at timestamp with time zone DEFAULT now(),\n    updated_at timestamp with time zone DEFAULT now(),\n    CONSTRAINT bom_risk_summaries_average_risk_score_check CHECK (((average_risk_score \u003e= (0)::numeric) AND (average_risk_score \u003c= (100)::numeric))),\n    CONSTRAINT bom_risk_summaries_critical_risk_count_check CHECK ((critical_risk_count \u003e= 0)),\n    CONSTRAINT bom_risk_summaries_health_grade_check CHECK ((health_grade = ANY (ARRAY['A'::text, 'B'::text, 'C'::text, 'D'::text, 'F'::text]))),\n    CONSTRAINT bom_risk_summaries_high_risk_count_check CHECK ((high_risk_count \u003e= 0)),\n    CONSTRAINT bom_risk_summaries_low_risk_count_check CHECK ((low_risk_count \u003e= 0)),\n    CONSTRAINT bom_risk_summaries_max_risk_score_check CHECK (((max_risk_score \u003e= 0) AND (max_risk_score \u003c= 100))),\n    CONSTRAINT bom_risk_summaries_medium_risk_count_check CHECK ((medium_risk_count \u003e= 0)),\n    CONSTRAINT bom_risk_summaries_min_risk_score_check CHECK (((min_risk_score \u003e= 0) AND (min_risk_score \u003c= 100))),\n    CONSTRAINT bom_risk_summaries_score_trend_check CHECK ((score_trend = ANY (ARRAY['improving'::text, 'stable'::text, 'worsening'::text]))),\n    CONSTRAINT bom_risk_summaries_total_line_items_check CHECK ((total_line_items \u003e= 0)),\n    CONSTRAINT bom_risk_summaries_weighted_risk_score_check CHECK (((weighted_risk_score \u003e= (0)::numeric) AND (weighted_risk_score \u003c= (100)::numeric)))\n);\n\n\n--\n-- Name: TABLE bom_risk_summaries; Type: COMMENT; Schema: public; Owner: -\n--\n\nCOMMENT ON TABLE public.bom_risk_summaries IS 'Aggregate BOM health scores with distribution and grade';\n\n\n--\n-- Name: bom_uploads; Type: TABLE; Schema: public; Owner: -\n--\n\nCREATE TABLE public.bom_uploads (\n    id uuid DEFAULT gen_random_uuid() NOT NULL,\n    filename text NOT NULL,\n    file_size bigint NOT NULL,\n    file_type text NOT NULL,\n    raw_file_url text,\n    organization_id uuid NOT NULL,\n    project_id uuid,\n    uploaded_by uuid,\n    status text DEFAULT 'uploaded'::text NOT NULL,\n    detected_columns jsonb,\n    unmapped_columns text[],\n    column_mappings jsonb,\n    mapping_confirmed boolean DEFAULT false,\n    mapping_confirmed_at timestamp with time zone,\n    total_rows integer DEFAULT 0,\n    preview_data jsonb,\n    parse_stats jsonb,\n    processing_settings jsonb,\n    rabbitmq_event_published boolean DEFAULT false,\n    rabbitmq_event_published_at timestamp with time zone,\n    temporal_workflow_id text,\n    temporal_workflow_status text,\n    enrichment_job_id text,\n    error_message text,\n    error_details jsonb,\n    created_at timestamp with time zone DEFAULT now() NOT NULL,\n    updated_at timestamp with time zone DEFAULT now() NOT NULL,\n    deleted_at timestamp with time zone,\n    upload_source text DEFAULT 'customer'::text NOT NULL,\n    s3_bucket text DEFAULT 'bulk-uploads'::text,\n    s3_key text,\n    storage_backend text DEFAULT 'minio'::text,\n    original_filename text,\n    cns_job_id text,\n    cns_job_status text,\n    enrichment_summary jsonb,\n    archived boolean DEFAULT false,\n    archived_at timestamp with time zone,\n    archive_s3_key text,\n    results_s3_key text,\n    failed_items_s3_key text,\n    bom_id uuid,\n    CONSTRAINT bom_uploads_status_check CHECK ((status = ANY (ARRAY['uploaded'::text, 'parsing'::text, 'parsed'::text, 'mapping_pending'::text, 'ready_for_enrichment'::text, 'processing'::text, 'completed'::text, 'failed'::text])))\n);\n\n\n--\n-- Name: TABLE bom_uploads; Type: COMMENT; Schema: public; Owner: -\n--\n\nCOMMENT ON TABLE public.bom_uploads IS 'Unified upload tracking for customer and CNS bulk uploads with S3 storage';\n\n\n--\n-- Name: boms; Type: TABLE; Schema: public; Owner: -\n--\n\nCREATE TABLE public.boms (\n    id uuid DEFAULT gen_random_uuid() NOT NULL,\n    organization_id uuid NOT NULL,\n    project_id uuid,\n    name text NOT NULL,\n    version text,\n    description text,\n    status text DEFAULT 'draft'::text,\n    component_count integer DEFAULT 0,\n    total_cost numeric(12,2),\n    enrichment_status text DEFAULT 'pending'::text,\n    enrichment_priority integer DEFAULT 5,\n    temporal_workflow_id text,\n    source text,\n    priority text DEFAULT 'normal'::text,\n    raw_file_s3_key text,\n    parsed_file_s3_key text,\n    metadata jsonb DEFAULT '{}'::jsonb,\n    created_at timestamp with time zone DEFAULT now(),\n    updated_at timestamp with time zone DEFAULT now(),\n    CONSTRAINT boms_enrichment_priority_check CHECK (((enrichment_priority \u003e= 1) AND (enrichment_priority \u003c= 10))),\n    CONSTRAINT boms_enrichment_status_check CHECK ((enrichment_status = ANY (ARRAY['pending'::text, 'queued'::text, 'processing'::text, 'enriched'::text, 'failed'::text]))),\n    CONSTRAINT boms_priority_check CHECK ((priority = ANY (ARRAY['high'::text, 'normal'::text]))),\n    CONSTRAINT boms_status_check CHECK ((status = ANY (ARRAY['draft'::text, 'pending'::text, 'processing'::text, 'completed'::text, 'failed'::text, 'archived'::text])))\n);\n\n\n--\n-- Name: categories; Type: TABLE; Schema: public; Owner: -\n--\n\nCREATE TABLE public.categories (\n    id uuid DEFAULT gen_random_uuid() NOT NULL,\n    name text NOT NULL,\n    slug text NOT NULL,\n    parent_id uuid,\n    level integer DEFAULT 0,\n    path text,\n    description text,\n    image_url text,\n    component_count integer DEFAULT 0,\n    created_at timestamp with time zone DEFAULT now(),\n    updated_at timestamp with time zone DEFAULT now()\n);\n\n\n--\n-- Name: cns_bulk_uploads; Type: TABLE; Schema: public; Owner: -\n--\n\nCREATE TABLE public.cns_bulk_uploads (\n    id uuid DEFAULT gen_random_uuid() NOT NULL,\n    filename text NOT NULL,\n    file_size bigint NOT NULL,\n    file_type text NOT NULL,\n    original_name text NOT NULL,\n    s3_bucket text DEFAULT 'bulk-uploads'::text NOT NULL,\n    s3_key text NOT NULL,\n    s3_url text,\n    storage_backend text DEFAULT 'minio'::text NOT NULL,\n    tenant_id uuid NOT NULL,\n    organization_id uuid NOT NULL,\n    project_id uuid,\n    uploaded_by uuid,\n    status text DEFAULT 'uploaded'::text NOT NULL,\n    validation_status text,\n    validation_errors jsonb,\n    total_rows integer DEFAULT 0,\n    valid_rows integer DEFAULT 0,\n    invalid_rows integer DEFAULT 0,\n    preview_data jsonb,\n    detected_columns jsonb,\n    column_mappings jsonb,\n    unmapped_columns text[],\n    mapping_confirmed boolean DEFAULT false,\n    mapping_confirmed_at timestamp with time zone,\n    parse_stats jsonb,\n    processing_settings jsonb,\n    cns_job_id text,\n    cns_job_status text,\n    rabbitmq_event_published boolean DEFAULT false,\n    rabbitmq_event_published_at timestamp with time zone,\n    temporal_workflow_id text,\n    temporal_workflow_status text,\n    enrichment_summary jsonb,\n    results_s3_key text,\n    failed_items_s3_key text,\n    error_message text,\n    error_details jsonb,\n    created_at timestamp with time zone DEFAULT now() NOT NULL,\n    updated_at timestamp with time zone DEFAULT now() NOT NULL,\n    deleted_at timestamp with time zone,\n    archived boolean DEFAULT false,\n    archived_at timestamp with time zone,\n    archive_s3_key text\n);\n\n\n--\n-- Name: TABLE cns_bulk_uploads; Type: COMMENT; Schema: public; Owner: -\n--\n\nCOMMENT ON TABLE public.cns_bulk_uploads IS 'Tracks CNS bulk upload files stored in MinIO/S3. Similar to bom_uploads but for CNS admin bulk operations.';\n\n\n--\n-- Name: cns_enrichment_config; Type: TABLE; Schema: public; Owner: -\n--\n\nCREATE TABLE public.cns_enrichment_config (\n    id integer NOT NULL,\n    tenant_id character varying(100),\n    config_name character varying(100) NOT NULL,\n    is_active boolean DEFAULT true,\n    is_global boolean DEFAULT false,\n    enable_suppliers boolean DEFAULT true,\n    preferred_suppliers text[] DEFAULT ARRAY['mouser'::text, 'digikey'::text, 'element14'::text],\n    supplier_min_confidence numeric(5,2) DEFAULT 90.0,\n    enable_ai boolean DEFAULT false,\n    ai_provider character varying(50),\n    ai_operations text[] DEFAULT ARRAY['category'::text, 'specs'::text],\n    ai_min_confidence numeric(5,2) DEFAULT 70.0,\n    ai_cost_limit_monthly numeric(10,2),\n    enable_web_scraping boolean DEFAULT false,\n    scraping_sources text[],\n    scraping_timeout_seconds integer,\n    quality_reject_threshold integer DEFAULT 70,\n    quality_staging_threshold integer DEFAULT 94,\n    quality_auto_approve_threshold integer DEFAULT 95,\n    batch_size integer DEFAULT 100,\n    max_retries integer DEFAULT 2,\n    ai_cost_current_month numeric(10,2),\n    ai_requests_current_month integer,\n    web_scraping_requests_current_month integer,\n    created_at timestamp with time zone DEFAULT now(),\n    updated_at timestamp with time zone DEFAULT now(),\n    CONSTRAINT cns_enrichment_config_batch_size_check CHECK (((batch_size \u003e= 1) AND (batch_size \u003c= 1000))),\n    CONSTRAINT cns_enrichment_config_max_retries_check CHECK (((max_retries \u003e= 0) AND (max_retries \u003c= 10)))\n);\n\n\n--\n-- Name: cns_enrichment_config_id_seq; Type: SEQUENCE; Schema: public; Owner: -\n--\n\nCREATE SEQUENCE public.cns_enrichment_config_id_seq\n    AS integer\n    START WITH 1\n    INCREMENT BY 1\n    NO MINVALUE\n    NO MAXVALUE\n    CACHE 1;\n\n\n--\n-- Name: cns_enrichment_config_id_seq; Type: SEQUENCE OWNED BY; Schema: public; Owner: -\n--\n\nALTER SEQUENCE public.cns_enrichment_config_id_seq OWNED BY public.cns_enrichment_config.id;\n\n\n--\n-- Name: cns_processing_events; Type: TABLE; Schema: public; Owner: -\n--\n\nCREATE TABLE public.cns_processing_events (\n    id uuid DEFAULT gen_random_uuid() NOT NULL,\n    organization_id uuid NOT NULL,\n    bom_id uuid,\n    event_type character varying(100) NOT NULL,\n    event_category character varying(50) DEFAULT 'processing'::character varying,\n    severity character varying(20) DEFAULT 'info'::character varying,\n    title text NOT NULL,\n    message text,\n    metadata jsonb DEFAULT '{}'::jsonb,\n    workflow_id character varying(255),\n    actor_type character varying(50) DEFAULT 'system'::character varying,\n    actor_id character varying(255),\n    created_at timestamp with time zone DEFAULT now()\n);\n\n\n--\n-- Name: column_mapping_templates; Type: TABLE; Schema: public; Owner: -\n--\n\nCREATE TABLE public.column_mapping_templates (\n    id uuid DEFAULT gen_random_uuid() NOT NULL,\n    organization_id uuid NOT NULL,\n    name text NOT NULL,\n    description text,\n    mappings jsonb NOT NULL,\n    is_default boolean DEFAULT false,\n    created_by uuid,\n    created_at timestamp with time zone DEFAULT now(),\n    updated_at timestamp with time zone DEFAULT now()\n);\n\n\n--\n-- Name: component_base_risk_scores; Type: TABLE; Schema: public; Owner: -\n--\n\nCREATE TABLE public.component_base_risk_scores (\n    id uuid DEFAULT gen_random_uuid() NOT NULL,\n    component_id uuid,\n    mpn text NOT NULL,\n    manufacturer text,\n    lifecycle_score integer DEFAULT 0,\n    supply_chain_score integer DEFAULT 0,\n    compliance_score integer DEFAULT 0,\n    obsolescence_score integer DEFAULT 0,\n    single_source_score integer DEFAULT 0,\n    composite_score integer DEFAULT 0,\n    risk_level text DEFAULT 'low'::text,\n    factors jsonb DEFAULT '[]'::jsonb,\n    data_sources jsonb DEFAULT '[]'::jsonb,\n    calculated_at timestamp with time zone DEFAULT now(),\n    valid_until timestamp with time zone DEFAULT (now() + '7 days'::interval),\n    created_at timestamp with time zone DEFAULT now(),\n    updated_at timestamp with time zone DEFAULT now(),\n    CONSTRAINT component_base_risk_scores_compliance_score_check CHECK (((compliance_score \u003e= 0) AND (compliance_score \u003c= 100))),\n    CONSTRAINT component_base_risk_scores_composite_score_check CHECK (((composite_score \u003e= 0) AND (composite_score \u003c= 100))),\n    CONSTRAINT component_base_risk_scores_lifecycle_score_check CHECK (((lifecycle_score \u003e= 0) AND (lifecycle_score \u003c= 100))),\n    CONSTRAINT component_base_risk_scores_obsolescence_score_check CHECK (((obsolescence_score \u003e= 0) AND (obsolescence_score \u003c= 100))),\n    CONSTRAINT component_base_risk_scores_risk_level_check CHECK ((risk_level = ANY (ARRAY['low'::text, 'medium'::text, 'high'::text, 'critical'::text]))),\n    CONSTRAINT component_base_risk_scores_single_source_score_check CHECK (((single_source_score \u003e= 0) AND (single_source_score \u003c= 100))),\n    CONSTRAINT component_base_risk_scores_supply_chain_score_check CHECK (((supply_chain_score \u003e= 0) AND (supply_chain_score \u003c= 100)))\n);\n\n\n--\n-- Name: TABLE component_base_risk_scores; Type: COMMENT; Schema: public; Owner: -\n--\n\nCOMMENT ON TABLE public.component_base_risk_scores IS 'Cached base risk scores for components (independent of usage context)';\n\n\n--\n-- Name: component_watches; Type: TABLE; Schema: public; Owner: -\n--\n\nCREATE TABLE public.component_watches (\n    id uuid DEFAULT gen_random_uuid() NOT NULL,\n    user_id uuid NOT NULL,\n    organization_id uuid NOT NULL,\n    component_id uuid NOT NULL,\n    watch_lifecycle boolean DEFAULT true,\n    watch_price boolean DEFAULT true,\n    watch_availability boolean DEFAULT true,\n    watch_compliance boolean DEFAULT true,\n    watch_supply_chain boolean DEFAULT true,\n    created_at timestamp with time zone DEFAULT now()\n);\n\n\n--\n-- Name: components; Type: TABLE; Schema: public; Owner: -\n--\n\nCREATE TABLE public.components (\n    id uuid DEFAULT gen_random_uuid() NOT NULL,\n    organization_id uuid,\n    manufacturer_id uuid,\n    category_id uuid,\n    manufacturer_part_number text NOT NULL,\n    manufacturer text,\n    description text,\n    datasheet_url text,\n    image_url text,\n    lifecycle_status text,\n    lifecycle_change_date date,\n    risk_level text,\n    rohs_compliant text,\n    reach_compliant text,\n    has_alternatives boolean DEFAULT false,\n    alternative_part_numbers text[],\n    unit_price numeric(14,4),\n    currency text DEFAULT 'USD'::text,\n    stock_quantity integer,\n    moq integer,\n    lead_time_days integer,\n    quality_score numeric(5,2),\n    package_type text,\n    mounting_style text,\n    temp_min_c integer,\n    temp_max_c integer,\n    power_rating_w numeric(10,4),\n    specifications jsonb DEFAULT '{}'::jsonb,\n    metadata jsonb DEFAULT '{}'::jsonb,\n    search_vector tsvector,\n    created_at timestamp with time zone DEFAULT now(),\n    updated_at timestamp with time zone DEFAULT now(),\n    last_enriched_at timestamp with time zone,\n    CONSTRAINT components_lifecycle_status_check CHECK ((lifecycle_status = ANY (ARRAY['Active'::text, 'NRND'::text, 'EOL'::text, 'Obsolete'::text, 'Preview'::text, 'Unknown'::text]))),\n    CONSTRAINT components_mounting_style_check CHECK ((mounting_style = ANY (ARRAY['SMD'::text, 'THT'::text, 'HYBRID'::text]))),\n    CONSTRAINT components_reach_compliant_check CHECK ((reach_compliant = ANY (ARRAY['COMPLIANT'::text, 'NON_COMPLIANT'::text, 'UNKNOWN'::text]))),\n    CONSTRAINT components_risk_level_check CHECK ((risk_level = ANY (ARRAY['GREEN'::text, 'YELLOW'::text, 'ORANGE'::text, 'RED'::text, 'CRITICAL'::text]))),\n    CONSTRAINT components_rohs_compliant_check CHECK ((rohs_compliant = ANY (ARRAY['COMPLIANT'::text, 'NON_COMPLIANT'::text, 'UNKNOWN'::text])))\n);\n\n\n--\n-- Name: enrichment_audit_log; Type: TABLE; Schema: public; Owner: -\n--\n\nCREATE TABLE public.enrichment_audit_log (\n    id uuid DEFAULT gen_random_uuid() NOT NULL,\n    bom_id uuid NOT NULL,\n    organization_id uuid NOT NULL,\n    event_type text NOT NULL,\n    event_data jsonb,\n    temporal_workflow_id text,\n    temporal_activity_id text,\n    created_at timestamp with time zone DEFAULT now(),\n    CONSTRAINT enrichment_audit_log_event_type_check CHECK ((event_type = ANY (ARRAY['queued'::text, 'quality_check_passed'::text, 'quality_check_failed'::text, 'started'::text, 'matching_batch_complete'::text, 'enrichment_complete'::text, 'admin_approval_requested'::text, 'admin_approved'::text, 'admin_rejected'::text, 'completed'::text, 'failed'::text, 'cancelled'::text])))\n);\n\n\n--\n-- Name: TABLE enrichment_audit_log; Type: COMMENT; Schema: public; Owner: -\n--\n\nCOMMENT ON TABLE public.enrichment_audit_log IS 'Audit trail for all enrichment workflow events';\n\n\n--\n-- Name: enrichment_events; Type: TABLE; Schema: public; Owner: -\n--\n\nCREATE TABLE public.enrichment_events (\n    id uuid DEFAULT gen_random_uuid() NOT NULL,\n    event_id character varying(255) NOT NULL,\n    event_type character varying(100) NOT NULL,\n    routing_key character varying(255),\n    bom_id uuid NOT NULL,\n    tenant_id uuid NOT NULL,\n    project_id uuid,\n    user_id uuid,\n    source character varying(20) NOT NULL,\n    workflow_id character varying(255),\n    state jsonb NOT NULL,\n    payload jsonb NOT NULL,\n    created_at timestamp with time zone DEFAULT now(),\n    CONSTRAINT enrichment_events_source_check CHECK (((source)::text = ANY (ARRAY[('customer'::character varying)::text, ('staff'::character varying)::text])))\n);\n\n\n--\n-- Name: enrichment_history; Type: TABLE; Schema: public; Owner: -\n--\n\nCREATE TABLE public.enrichment_history (\n    id integer NOT NULL,\n    mpn character varying(255) NOT NULL,\n    enrichment_data jsonb,\n    quality_score numeric(5,2),\n    status character varying(50) NOT NULL,\n    rejection_reason text,\n    error_message text,\n    issues jsonb DEFAULT '[]'::jsonb,\n    enrichment_source character varying(50),\n    customer_id integer,\n    bom_job_id character varying(100),\n    api_calls jsonb DEFAULT '[]'::jsonb,\n    processing_time_ms integer,\n    tier_reached integer,\n    created_at timestamp with time zone DEFAULT now(),\n    created_by integer\n);\n\n\n--\n-- Name: TABLE enrichment_history; Type: COMMENT; Schema: public; Owner: -\n--\n\nCOMMENT ON TABLE public.enrichment_history IS 'Audit log of all enrichment attempts (approved, rejected, errors)';\n\n\n--\n-- Name: enrichment_history_id_seq; Type: SEQUENCE; Schema: public; Owner: -\n--\n\nCREATE SEQUENCE public.enrichment_history_id_seq\n    AS integer\n    START WITH 1\n    INCREMENT BY 1\n    NO MINVALUE\n    NO MAXVALUE\n    CACHE 1;\n\n\n--\n-- Name: enrichment_history_id_seq; Type: SEQUENCE OWNED BY; Schema: public; Owner: -\n--\n\nALTER SEQUENCE public.enrichment_history_id_seq OWNED BY public.enrichment_history.id;\n\n\n--\n-- Name: enrichment_queue; Type: TABLE; Schema: public; Owner: -\n--\n\nCREATE TABLE public.enrichment_queue (\n    id uuid DEFAULT gen_random_uuid() NOT NULL,\n    bom_id uuid NOT NULL,\n    organization_id uuid NOT NULL,\n    priority integer DEFAULT 5 NOT NULL,\n    status text DEFAULT 'queued'::text NOT NULL,\n    temporal_workflow_id text,\n    temporal_run_id text,\n    quality_score integer,\n    quality_issues jsonb,\n    requires_admin_approval boolean DEFAULT false,\n    admin_approved_at timestamp with time zone,\n    queued_at timestamp with time zone DEFAULT now(),\n    started_at timestamp with time zone,\n    completed_at timestamp with time zone,\n    failed_at timestamp with time zone,\n    error_message text,\n    retry_count integer DEFAULT 0,\n    total_items integer,\n    matched_items integer,\n    enriched_items integer,\n    match_rate numeric(5,2),\n    avg_confidence numeric(5,2),\n    CONSTRAINT enrichment_queue_priority_check CHECK (((priority \u003e= 1) AND (priority \u003c= 10))),\n    CONSTRAINT enrichment_queue_quality_score_check CHECK (((quality_score \u003e= 0) AND (quality_score \u003c= 100))),\n    CONSTRAINT enrichment_queue_status_check CHECK ((status = ANY (ARRAY['queued'::text, 'processing'::text, 'completed'::text, 'failed'::text, 'cancelled'::text])))\n);\n\n\n--\n-- Name: TABLE enrichment_queue; Type: COMMENT; Schema: public; Owner: -\n--\n\nCOMMENT ON TABLE public.enrichment_queue IS 'Staging queue for components needing manual review (quality 70-94%)';\n\n\n--\n-- Name: invoice_line_items; Type: TABLE; Schema: public; Owner: -\n--\n\nCREATE TABLE public.invoice_line_items (\n    id uuid DEFAULT gen_random_uuid() NOT NULL,\n    invoice_id uuid NOT NULL,\n    description text NOT NULL,\n    quantity integer DEFAULT 1 NOT NULL,\n    unit_amount integer NOT NULL,\n    amount integer NOT NULL,\n    currency text DEFAULT 'USD'::text NOT NULL,\n    period_start timestamp with time zone,\n    period_end timestamp with time zone,\n    type text DEFAULT 'subscription'::text,\n    metadata jsonb DEFAULT '{}'::jsonb,\n    created_at timestamp with time zone DEFAULT now()\n);\n\n\n--\n-- Name: invoices; Type: TABLE; Schema: public; Owner: -\n--\n\nCREATE TABLE public.invoices (\n    id uuid DEFAULT gen_random_uuid() NOT NULL,\n    invoice_number text NOT NULL,\n    billing_customer_id uuid NOT NULL,\n    subscription_id uuid,\n    organization_id uuid NOT NULL,\n    status public.invoice_status DEFAULT 'draft'::public.invoice_status NOT NULL,\n    subtotal integer DEFAULT 0 NOT NULL,\n    tax integer DEFAULT 0 NOT NULL,\n    total integer DEFAULT 0 NOT NULL,\n    amount_paid integer DEFAULT 0 NOT NULL,\n    amount_due integer DEFAULT 0 NOT NULL,\n    currency text DEFAULT 'USD'::text NOT NULL,\n    invoice_date timestamp with time zone DEFAULT now() NOT NULL,\n    due_date timestamp with time zone,\n    paid_at timestamp with time zone,\n    period_start timestamp with time zone,\n    period_end timestamp with time zone,\n    provider text,\n    provider_invoice_id text,\n    provider_data jsonb DEFAULT '{}'::jsonb,\n    invoice_pdf_url text,\n    hosted_invoice_url text,\n    metadata jsonb DEFAULT '{}'::jsonb,\n    created_at timestamp with time zone DEFAULT now(),\n    updated_at timestamp with time zone DEFAULT now()\n);\n\n\n--\n-- Name: TABLE invoices; Type: COMMENT; Schema: public; Owner: -\n--\n\nCOMMENT ON TABLE public.invoices IS 'Generated invoices for billing';\n\n\n--\n-- Name: manufacturers; Type: TABLE; Schema: public; Owner: -\n--\n\nCREATE TABLE public.manufacturers (\n    id uuid DEFAULT gen_random_uuid() NOT NULL,\n    name text NOT NULL,\n    slug text NOT NULL,\n    normalized_name text,\n    aliases text[] DEFAULT '{}'::text[],\n    website text,\n    description text,\n    logo_url text,\n    is_verified boolean DEFAULT false,\n    created_at timestamp with time zone DEFAULT now(),\n    updated_at timestamp with time zone DEFAULT now()\n);\n\n\n--\n-- Name: notifications; Type: TABLE; Schema: public; Owner: -\n--\n\nCREATE TABLE public.notifications (\n    id uuid DEFAULT gen_random_uuid() NOT NULL,\n    organization_id uuid NOT NULL,\n    user_id uuid,\n    type text NOT NULL,\n    title text NOT NULL,\n    message text,\n    data jsonb,\n    is_read boolean DEFAULT false,\n    created_at timestamp with time zone DEFAULT now(),\n    read_at timestamp with time zone\n);\n\n\n--\n-- Name: onboarding_events; Type: TABLE; Schema: public; Owner: -\n--\n\nCREATE TABLE public.onboarding_events (\n    id uuid DEFAULT gen_random_uuid() NOT NULL,\n    organization_id uuid NOT NULL,\n    user_id uuid NOT NULL,\n    event_type text NOT NULL,\n    event_data jsonb,\n    created_at timestamp with time zone DEFAULT now()\n);\n\n\n--\n-- Name: TABLE onboarding_events; Type: COMMENT; Schema: public; Owner: -\n--\n\nCOMMENT ON TABLE public.onboarding_events IS 'Audit trail for onboarding-related events';\n\n\n--\n-- Name: organization_memberships; Type: TABLE; Schema: public; Owner: -\n--\n\nCREATE TABLE public.organization_memberships (\n    id uuid DEFAULT gen_random_uuid() NOT NULL,\n    user_id uuid NOT NULL,\n    organization_id uuid NOT NULL,\n    role text DEFAULT 'analyst'::text NOT NULL,\n    is_default boolean DEFAULT false,\n    invited_by uuid,\n    joined_at timestamp with time zone DEFAULT now(),\n    created_at timestamp with time zone DEFAULT now(),\n    updated_at timestamp with time zone DEFAULT now(),\n    CONSTRAINT organization_memberships_role_check CHECK ((role = ANY (ARRAY['owner'::text, 'admin'::text, 'engineer'::text, 'analyst'::text])))\n);\n\n\n--\n-- Name: organization_settings_audit; Type: TABLE; Schema: public; Owner: -\n--\n\nCREATE TABLE public.organization_settings_audit (\n    id uuid DEFAULT gen_random_uuid() NOT NULL,\n    organization_id uuid NOT NULL,\n    changed_by uuid NOT NULL,\n    changed_at timestamp with time zone DEFAULT now(),\n    setting_name text NOT NULL,\n    old_value text,\n    new_value text,\n    change_reason text\n);\n\n\n--\n-- Name: TABLE organization_settings_audit; Type: COMMENT; Schema: public; Owner: -\n--\n\nCOMMENT ON TABLE public.organization_settings_audit IS 'Audit trail for organization settings changes';\n\n\n--\n-- Name: organizations; Type: TABLE; Schema: public; Owner: -\n--\n\nCREATE TABLE public.organizations (\n    id uuid DEFAULT gen_random_uuid() NOT NULL,\n    name text NOT NULL,\n    slug text,\n    description text,\n    subscription_status text DEFAULT 'trial'::text,\n    plan_tier text DEFAULT 'standard'::text,\n    billing_email text,\n    timezone text DEFAULT 'UTC'::text,\n    region text DEFAULT 'us-east-1'::text,\n    max_users integer DEFAULT 10,\n    max_components integer DEFAULT 50000,\n    max_storage_gb integer DEFAULT 100,\n    current_users_count integer DEFAULT 0,\n    current_components_count integer DEFAULT 0,\n    current_storage_gb numeric(12,2) DEFAULT 0,\n    trial_ends_at timestamp with time zone,\n    deleted_at timestamp with time zone,\n    created_by uuid,\n    created_at timestamp with time zone DEFAULT now(),\n    updated_at timestamp with time zone DEFAULT now(),\n    control_plane_tenant_id uuid,\n    CONSTRAINT organizations_subscription_status_check CHECK ((subscription_status = ANY (ARRAY['trial'::text, 'active'::text, 'past_due'::text, 'canceled'::text, 'suspended'::text])))\n);\n\n\n--\n-- Name: payment_methods; Type: TABLE; Schema: public; Owner: -\n--\n\nCREATE TABLE public.payment_methods (\n    id uuid DEFAULT gen_random_uuid() NOT NULL,\n    billing_customer_id uuid NOT NULL,\n    type text NOT NULL,\n    display_name text,\n    brand text,\n    last_four text,\n    exp_month integer,\n    exp_year integer,\n    provider text NOT NULL,\n    provider_payment_method_id text NOT NULL,\n    is_default boolean DEFAULT false,\n    is_valid boolean DEFAULT true,\n    metadata jsonb DEFAULT '{}'::jsonb,\n    created_at timestamp with time zone DEFAULT now(),\n    updated_at timestamp with time zone DEFAULT now()\n);\n\n\n--\n-- Name: TABLE payment_methods; Type: COMMENT; Schema: public; Owner: -\n--\n\nCOMMENT ON TABLE public.payment_methods IS 'Stored payment methods (cards, bank accounts, etc.)';\n\n\n--\n-- Name: payments; Type: TABLE; Schema: public; Owner: -\n--\n\nCREATE TABLE public.payments (\n    id uuid DEFAULT gen_random_uuid() NOT NULL,\n    billing_customer_id uuid NOT NULL,\n    invoice_id uuid,\n    subscription_id uuid,\n    payment_method_id uuid,\n    amount integer NOT NULL,\n    currency text DEFAULT 'USD'::text NOT NULL,\n    status public.payment_status DEFAULT 'pending'::public.payment_status NOT NULL,\n    provider text NOT NULL,\n    provider_payment_id text NOT NULL,\n    provider_data jsonb DEFAULT '{}'::jsonb,\n    failure_code text,\n    failure_message text,\n    refunded_amount integer DEFAULT 0,\n    metadata jsonb DEFAULT '{}'::jsonb,\n    created_at timestamp with time zone DEFAULT now(),\n    updated_at timestamp with time zone DEFAULT now()\n);\n\n\n--\n-- Name: TABLE payments; Type: COMMENT; Schema: public; Owner: -\n--\n\nCOMMENT ON TABLE public.payments IS 'Payment transactions and their status';\n\n\n--\n-- Name: project_members; Type: TABLE; Schema: public; Owner: -\n--\n\nCREATE TABLE public.project_members (\n    id uuid DEFAULT gen_random_uuid() NOT NULL,\n    project_id uuid NOT NULL,\n    user_id uuid NOT NULL,\n    role text DEFAULT 'member'::text,\n    created_at timestamp with time zone DEFAULT now(),\n    CONSTRAINT project_members_role_check CHECK ((role = ANY (ARRAY['owner'::text, 'admin'::text, 'member'::text, 'viewer'::text])))\n);\n\n\n--\n-- Name: project_risk_summaries; Type: TABLE; Schema: public; Owner: -\n--\n\nCREATE TABLE public.project_risk_summaries (\n    id uuid DEFAULT gen_random_uuid() NOT NULL,\n    project_id uuid NOT NULL,\n    organization_id uuid NOT NULL,\n    total_boms integer DEFAULT 0,\n    healthy_boms integer DEFAULT 0,\n    at_risk_boms integer DEFAULT 0,\n    critical_boms integer DEFAULT 0,\n    total_components integer DEFAULT 0,\n    unique_components integer DEFAULT 0,\n    average_bom_health_score numeric(5,2) DEFAULT 0,\n    weighted_project_score numeric(5,2) DEFAULT 0,\n    low_risk_total integer DEFAULT 0,\n    medium_risk_total integer DEFAULT 0,\n    high_risk_total integer DEFAULT 0,\n    critical_risk_total integer DEFAULT 0,\n    project_health_grade text DEFAULT 'A'::text,\n    common_risk_factors jsonb DEFAULT '[]'::jsonb,\n    calculated_at timestamp with time zone DEFAULT now(),\n    created_at timestamp with time zone DEFAULT now(),\n    updated_at timestamp with time zone DEFAULT now(),\n    CONSTRAINT project_risk_summaries_project_health_grade_check CHECK ((project_health_grade = ANY (ARRAY['A'::text, 'B'::text, 'C'::text, 'D'::text, 'F'::text])))\n);\n\n\n--\n-- Name: TABLE project_risk_summaries; Type: COMMENT; Schema: public; Owner: -\n--\n\nCOMMENT ON TABLE public.project_risk_summaries IS 'Aggregate project health across all BOMs';\n\n\n--\n-- Name: projects; Type: TABLE; Schema: public; Owner: -\n--\n\nCREATE TABLE public.projects (\n    id uuid DEFAULT gen_random_uuid() NOT NULL,\n    workspace_id uuid NOT NULL,\n    name text NOT NULL,\n    slug text NOT NULL,\n    description text,\n    status text DEFAULT 'active'::text,\n    settings jsonb DEFAULT '{}'::jsonb,\n    created_by uuid,\n    created_at timestamp with time zone DEFAULT now(),\n    updated_at timestamp with time zone DEFAULT now(),\n    organization_id uuid NOT NULL,\n    project_code text,\n    visibility text DEFAULT 'private'::text,\n    project_owner_id uuid,\n    total_boms integer DEFAULT 0,\n    total_components integer DEFAULT 0,\n    start_date date,\n    end_date date,\n    last_activity_at timestamp with time zone,\n    tags text[] DEFAULT '{}'::text[],\n    metadata jsonb DEFAULT '{}'::jsonb,\n    created_by_id uuid,\n    CONSTRAINT projects_status_check CHECK ((status = ANY (ARRAY['active'::text, 'archived'::text, 'deleted'::text])))\n);\n\n\n--\n-- Name: risk_profile_presets; Type: TABLE; Schema: public; Owner: -\n--\n\nCREATE TABLE public.risk_profile_presets (\n    id uuid DEFAULT gen_random_uuid() NOT NULL,\n    name text NOT NULL,\n    description text,\n    lifecycle_weight integer DEFAULT 30,\n    supply_chain_weight integer DEFAULT 25,\n    compliance_weight integer DEFAULT 20,\n    obsolescence_weight integer DEFAULT 15,\n    single_source_weight integer DEFAULT 10,\n    low_threshold integer DEFAULT 30,\n    medium_threshold integer DEFAULT 60,\n    high_threshold integer DEFAULT 85,\n    quantity_weight numeric(4,3) DEFAULT 0.150,\n    lead_time_weight numeric(4,3) DEFAULT 0.100,\n    criticality_weight numeric(4,3) DEFAULT 0.200,\n    industry_focus text,\n    is_default boolean DEFAULT false,\n    created_at timestamp with time zone DEFAULT now()\n);\n\n\n--\n-- Name: TABLE risk_profile_presets; Type: COMMENT; Schema: public; Owner: -\n--\n\nCOMMENT ON TABLE public.risk_profile_presets IS 'Pre-configured risk profiles for different industries';\n\n\n--\n-- Name: risk_score_history; Type: TABLE; Schema: public; Owner: -\n--\n\nCREATE TABLE public.risk_score_history (\n    id uuid DEFAULT gen_random_uuid() NOT NULL,\n    entity_type text NOT NULL,\n    entity_id uuid NOT NULL,\n    organization_id uuid NOT NULL,\n    score integer NOT NULL,\n    risk_level text,\n    factors jsonb DEFAULT '[]'::jsonb,\n    recorded_at timestamp with time zone DEFAULT now(),\n    created_at timestamp with time zone DEFAULT now(),\n    CONSTRAINT risk_score_history_entity_type_check CHECK ((entity_type = ANY (ARRAY['component'::text, 'bom'::text, 'project'::text]))),\n    CONSTRAINT risk_score_history_risk_level_check CHECK ((risk_level = ANY (ARRAY['low'::text, 'medium'::text, 'high'::text, 'critical'::text]))),\n    CONSTRAINT risk_score_history_score_check CHECK (((score \u003e= 0) AND (score \u003c= 100)))\n);\n\n\n--\n-- Name: TABLE risk_score_history; Type: COMMENT; Schema: public; Owner: -\n--\n\nCOMMENT ON TABLE public.risk_score_history IS 'Historical risk scores for trend analysis';\n\n\n--\n-- Name: subscription_plans; Type: TABLE; Schema: public; Owner: -\n--\n\nCREATE TABLE public.subscription_plans (\n    id uuid DEFAULT gen_random_uuid() NOT NULL,\n    name text NOT NULL,\n    code text NOT NULL,\n    tier text NOT NULL,\n    price_monthly numeric(10,2),\n    price_yearly numeric(10,2),\n    max_users integer,\n    max_components integer,\n    max_boms_per_month integer,\n    max_storage_gb integer,\n    features jsonb DEFAULT '[]'::jsonb,\n    is_active boolean DEFAULT true,\n    created_at timestamp with time zone DEFAULT now(),\n    updated_at timestamp with time zone DEFAULT now(),\n    CONSTRAINT subscription_plans_tier_check CHECK ((tier = ANY (ARRAY['free'::text, 'starter'::text, 'professional'::text, 'enterprise'::text])))\n);\n\n\n--\n-- Name: subscriptions; Type: TABLE; Schema: public; Owner: -\n--\n\nCREATE TABLE public.subscriptions (\n    id uuid DEFAULT gen_random_uuid() NOT NULL,\n    organization_id uuid NOT NULL,\n    plan_id uuid,\n    status text DEFAULT 'active'::text,\n    billing_interval text DEFAULT 'monthly'::text,\n    current_period_start timestamp with time zone,\n    current_period_end timestamp with time zone,\n    trial_ends_at timestamp with time zone,\n    canceled_at timestamp with time zone,\n    stripe_subscription_id text,\n    stripe_customer_id text,\n    created_at timestamp with time zone DEFAULT now(),\n    updated_at timestamp with time zone DEFAULT now(),\n    CONSTRAINT subscriptions_billing_interval_check CHECK ((billing_interval = ANY (ARRAY['monthly'::text, 'yearly'::text]))),\n    CONSTRAINT subscriptions_status_check CHECK ((status = ANY (ARRAY['trialing'::text, 'active'::text, 'past_due'::text, 'canceled'::text, 'paused'::text])))\n);\n\n\n--\n-- Name: suppliers; Type: TABLE; Schema: public; Owner: -\n--\n\nCREATE TABLE public.suppliers (\n    id uuid DEFAULT gen_random_uuid() NOT NULL,\n    name text NOT NULL,\n    slug text NOT NULL,\n    api_key_required boolean DEFAULT false,\n    api_endpoint text,\n    website text,\n    priority integer DEFAULT 50,\n    is_active boolean DEFAULT true,\n    rate_limit_per_minute integer,\n    rate_limit_per_day integer,\n    created_at timestamp with time zone DEFAULT now(),\n    updated_at timestamp with time zone DEFAULT now()\n);\n\n\n--\n-- Name: usage_records; Type: TABLE; Schema: public; Owner: -\n--\n\nCREATE TABLE public.usage_records (\n    id uuid DEFAULT gen_random_uuid() NOT NULL,\n    organization_id uuid NOT NULL,\n    subscription_id uuid,\n    usage_type text NOT NULL,\n    period_start timestamp with time zone NOT NULL,\n    period_end timestamp with time zone NOT NULL,\n    quantity integer DEFAULT 0 NOT NULL,\n    metadata jsonb DEFAULT '{}'::jsonb,\n    created_at timestamp with time zone DEFAULT now(),\n    updated_at timestamp with time zone DEFAULT now()\n);\n\n\n--\n-- Name: TABLE usage_records; Type: COMMENT; Schema: public; Owner: -\n--\n\nCOMMENT ON TABLE public.usage_records IS 'Metered usage tracking per organization';\n\n\n--\n-- Name: user_preferences; Type: TABLE; Schema: public; Owner: -\n--\n\nCREATE TABLE public.user_preferences (\n    user_id uuid NOT NULL,\n    last_organization_id uuid,\n    theme text DEFAULT 'system'::text,\n    notifications_enabled boolean DEFAULT true,\n    email_notifications boolean DEFAULT true,\n    language text DEFAULT 'en'::text,\n    timezone text DEFAULT 'UTC'::text,\n    updated_at timestamp with time zone DEFAULT now(),\n    CONSTRAINT user_preferences_theme_check CHECK ((theme = ANY (ARRAY['light'::text, 'dark'::text, 'system'::text])))\n);\n\n\n--\n-- Name: user_profiles; Type: VIEW; Schema: public; Owner: -\n--\n\nCREATE VIEW public.user_profiles AS\n SELECT user_preferences.user_id AS id,\n    user_preferences.user_id,\n    user_preferences.last_organization_id,\n    user_preferences.theme,\n    user_preferences.notifications_enabled,\n    user_preferences.email_notifications,\n    user_preferences.language,\n    user_preferences.timezone,\n    user_preferences.updated_at\n   FROM public.user_preferences;\n\n\n--\n-- Name: users; Type: TABLE; Schema: public; Owner: -\n--\n\nCREATE TABLE public.users (\n    id uuid DEFAULT gen_random_uuid() NOT NULL,\n    email text NOT NULL,\n    email_verified boolean DEFAULT false,\n    first_name text,\n    last_name text,\n    full_name text,\n    avatar_url text,\n    auth0_user_id text,\n    keycloak_user_id text,\n    role text DEFAULT 'analyst'::text NOT NULL,\n    is_platform_admin boolean DEFAULT false,\n    is_active boolean DEFAULT true,\n    last_login_at timestamp with time zone,\n    metadata jsonb DEFAULT '{}'::jsonb,\n    created_at timestamp with time zone DEFAULT now(),\n    updated_at timestamp with time zone DEFAULT now(),\n    organization_id uuid,\n    CONSTRAINT users_role_check CHECK ((role = ANY (ARRAY['super_admin'::text, 'owner'::text, 'admin'::text, 'engineer'::text, 'analyst'::text])))\n);\n\n\n--\n-- Name: workspace_members; Type: TABLE; Schema: public; Owner: -\n--\n\nCREATE TABLE public.workspace_members (\n    id uuid DEFAULT gen_random_uuid() NOT NULL,\n    workspace_id uuid NOT NULL,\n    user_id uuid NOT NULL,\n    role text DEFAULT 'member'::text,\n    created_at timestamp with time zone DEFAULT now(),\n    CONSTRAINT workspace_members_role_check CHECK ((role = ANY (ARRAY['owner'::text, 'admin'::text, 'member'::text, 'viewer'::text])))\n);\n\n\n--\n-- Name: workspace_memberships; Type: TABLE; Schema: public; Owner: -\n--\n\nCREATE TABLE public.workspace_memberships (\n    id uuid DEFAULT gen_random_uuid() NOT NULL,\n    workspace_id uuid NOT NULL,\n    user_id uuid NOT NULL,\n    role text DEFAULT 'viewer'::text NOT NULL,\n    created_at timestamp with time zone DEFAULT now(),\n    updated_at timestamp with time zone DEFAULT now(),\n    CONSTRAINT workspace_memberships_role_check CHECK ((role = ANY (ARRAY['owner'::text, 'admin'::text, 'engineer'::text, 'analyst'::text, 'viewer'::text])))\n);\n\n\n--\n-- Name: TABLE workspace_memberships; Type: COMMENT; Schema: public; Owner: -\n--\n\nCOMMENT ON TABLE public.workspace_memberships IS 'Maps users to workspaces with roles. Replaces org-level roles for work/access control.';\n\n\n--\n-- Name: workspaces; Type: TABLE; Schema: public; Owner: -\n--\n\nCREATE TABLE public.workspaces (\n    id uuid DEFAULT gen_random_uuid() NOT NULL,\n    organization_id uuid NOT NULL,\n    name text NOT NULL,\n    slug text NOT NULL,\n    description text,\n    visibility text DEFAULT 'private'::text,\n    settings jsonb DEFAULT '{}'::jsonb,\n    created_by uuid,\n    created_at timestamp with time zone DEFAULT now(),\n    updated_at timestamp with time zone DEFAULT now(),\n    is_default boolean DEFAULT false NOT NULL,\n    CONSTRAINT workspaces_visibility_check CHECK ((visibility = ANY (ARRAY['private'::text, 'team'::text, 'public'::text])))\n);\n\n\n--\n-- Name: bom_items id; Type: DEFAULT; Schema: public; Owner: -\n--\n\nALTER TABLE ONLY public.bom_items ALTER COLUMN id SET DEFAULT nextval('public.bom_items_id_seq'::regclass);\n\n\n--\n-- Name: bom_jobs id; Type: DEFAULT; Schema: public; Owner: -\n--\n\nALTER TABLE ONLY public.bom_jobs ALTER COLUMN id SET DEFAULT nextval('public.bom_jobs_id_seq'::regclass);\n\n\n--\n-- Name: cns_enrichment_config id; Type: DEFAULT; Schema: public; Owner: -\n--\n\nALTER TABLE ONLY public.cns_enrichment_config ALTER COLUMN id SET DEFAULT nextval('public.cns_enrichment_config_id_seq'::regclass);\n\n\n--\n-- Name: enrichment_history id; Type: DEFAULT; Schema: public; Owner: -\n--\n\nALTER TABLE ONLY public.enrichment_history ALTER COLUMN id SET DEFAULT nextval('public.enrichment_history_id_seq'::regclass);\n\n\n--\n-- Name: account_deletion_audit account_deletion_audit_pkey; Type: CONSTRAINT; Schema: public; Owner: -\n--\n\nALTER TABLE ONLY public.account_deletion_audit\n    ADD CONSTRAINT account_deletion_audit_pkey PRIMARY KEY (id);\n\n\n--\n-- Name: alert_deliveries alert_deliveries_pkey; Type: CONSTRAINT; Schema: public; Owner: -\n--\n\nALTER TABLE ONLY public.alert_deliveries\n    ADD CONSTRAINT alert_deliveries_pkey PRIMARY KEY (id);\n\n\n--\n-- Name: alert_preferences alert_preferences_pkey; Type: CONSTRAINT; Schema: public; Owner: -\n--\n\nALTER TABLE ONLY public.alert_preferences\n    ADD CONSTRAINT alert_preferences_pkey PRIMARY KEY (id);\n\n\n--\n-- Name: alert_preferences alert_preferences_user_id_organization_id_alert_type_key; Type: CONSTRAINT; Schema: public; Owner: -\n--\n\nALTER TABLE ONLY public.alert_preferences\n    ADD CONSTRAINT alert_preferences_user_id_organization_id_alert_type_key UNIQUE (user_id, organization_id, alert_type);\n\n\n--\n-- Name: alerts alerts_pkey; Type: CONSTRAINT; Schema: public; Owner: -\n--\n\nALTER TABLE ONLY public.alerts\n    ADD CONSTRAINT alerts_pkey PRIMARY KEY (id);\n\n\n--\n-- Name: attributes attributes_pkey; Type: CONSTRAINT; Schema: public; Owner: -\n--\n\nALTER TABLE ONLY public.attributes\n    ADD CONSTRAINT attributes_pkey PRIMARY KEY (id);\n\n\n--\n-- Name: audit_enrichment_runs audit_enrichment_runs_pkey; Type: CONSTRAINT; Schema: public; Owner: -\n--\n\nALTER TABLE ONLY public.audit_enrichment_runs\n    ADD CONSTRAINT audit_enrichment_runs_pkey PRIMARY KEY (id);\n\n\n--\n-- Name: audit_field_comparisons audit_field_comparisons_pkey; Type: CONSTRAINT; Schema: public; Owner: -\n--\n\nALTER TABLE ONLY public.audit_field_comparisons\n    ADD CONSTRAINT audit_field_comparisons_pkey PRIMARY KEY (id);\n\n\n--\n-- Name: audit_logs audit_logs_pkey; Type: CONSTRAINT; Schema: public; Owner: -\n--\n\nALTER TABLE ONLY public.audit_logs\n    ADD CONSTRAINT audit_logs_pkey PRIMARY KEY (id);\n\n\n--\n-- Name: audit_supplier_quality audit_supplier_quality_pkey; Type: CONSTRAINT; Schema: public; Owner: -\n--\n\nALTER TABLE ONLY public.audit_supplier_quality\n    ADD CONSTRAINT audit_supplier_quality_pkey PRIMARY KEY (id);\n\n\n--\n-- Name: billing_customers billing_customers_pkey; Type: CONSTRAINT; Schema: public; Owner: -\n--\n\nALTER TABLE ONLY public.billing_customers\n    ADD CONSTRAINT billing_customers_pkey PRIMARY KEY (id);\n\n\n--\n-- Name: billing_webhook_events billing_webhook_events_pkey; Type: CONSTRAINT; Schema: public; Owner: -\n--\n\nALTER TABLE ONLY public.billing_webhook_events\n    ADD CONSTRAINT billing_webhook_events_pkey PRIMARY KEY (id);\n\n\n--\n-- Name: bom_items bom_items_pkey; Type: CONSTRAINT; Schema: public; Owner: -\n--\n\nALTER TABLE ONLY public.bom_items\n    ADD CONSTRAINT bom_items_pkey PRIMARY KEY (id);\n\n\n--\n-- Name: bom_jobs bom_jobs_job_id_key; Type: CONSTRAINT; Schema: public; Owner: -\n--\n\nALTER TABLE ONLY public.bom_jobs\n    ADD CONSTRAINT bom_jobs_job_id_key UNIQUE (job_id);\n\n\n--\n-- Name: bom_jobs bom_jobs_pkey; Type: CONSTRAINT; Schema: public; Owner: -\n--\n\nALTER TABLE ONLY public.bom_jobs\n    ADD CONSTRAINT bom_jobs_pkey PRIMARY KEY (id);\n\n\n--\n-- Name: bom_line_item_risk_scores bom_line_item_risk_scores_pkey; Type: CONSTRAINT; Schema: public; Owner: -\n--\n\nALTER TABLE ONLY public.bom_line_item_risk_scores\n    ADD CONSTRAINT bom_line_item_risk_scores_pkey PRIMARY KEY (id);\n\n\n--\n-- Name: bom_line_items bom_line_items_pkey; Type: CONSTRAINT; Schema: public; Owner: -\n--\n\nALTER TABLE ONLY public.bom_line_items\n    ADD CONSTRAINT bom_line_items_pkey PRIMARY KEY (id);\n\n\n--\n-- Name: bom_processing_jobs bom_processing_jobs_pkey; Type: CONSTRAINT; Schema: public; Owner: -\n--\n\nALTER TABLE ONLY public.bom_processing_jobs\n    ADD CONSTRAINT bom_processing_jobs_pkey PRIMARY KEY (id);\n\n\n--\n-- Name: bom_risk_summaries bom_risk_summaries_pkey; Type: CONSTRAINT; Schema: public; Owner: -\n--\n\nALTER TABLE ONLY public.bom_risk_summaries\n    ADD CONSTRAINT bom_risk_summaries_pkey PRIMARY KEY (id);\n\n\n--\n-- Name: bom_uploads bom_uploads_pkey; Type: CONSTRAINT; Schema: public; Owner: -\n--\n\nALTER TABLE ONLY public.bom_uploads\n    ADD CONSTRAINT bom_uploads_pkey PRIMARY KEY (id);\n\n\n--\n-- Name: boms boms_pkey; Type: CONSTRAINT; Schema: public; Owner: -\n--\n\nALTER TABLE ONLY public.boms\n    ADD CONSTRAINT boms_pkey PRIMARY KEY (id);\n\n\n--\n-- Name: categories categories_pkey; Type: CONSTRAINT; Schema: public; Owner: -\n--\n\nALTER TABLE ONLY public.categories\n    ADD CONSTRAINT categories_pkey PRIMARY KEY (id);\n\n\n--\n-- Name: categories categories_slug_key; Type: CONSTRAINT; Schema: public; Owner: -\n--\n\nALTER TABLE ONLY public.categories\n    ADD CONSTRAINT categories_slug_key UNIQUE (slug);\n\n\n--\n-- Name: cns_bulk_uploads cns_bulk_uploads_pkey; Type: CONSTRAINT; Schema: public; Owner: -\n--\n\nALTER TABLE ONLY public.cns_bulk_uploads\n    ADD CONSTRAINT cns_bulk_uploads_pkey PRIMARY KEY (id);\n\n\n--\n-- Name: cns_enrichment_config cns_enrichment_config_pkey; Type: CONSTRAINT; Schema: public; Owner: -\n--\n\nALTER TABLE ONLY public.cns_enrichment_config\n    ADD CONSTRAINT cns_enrichment_config_pkey PRIMARY KEY (id);\n\n\n--\n-- Name: cns_processing_events cns_processing_events_pkey; Type: CONSTRAINT; Schema: public; Owner: -\n--\n\nALTER TABLE ONLY public.cns_processing_events\n    ADD CONSTRAINT cns_processing_events_pkey PRIMARY KEY (id);\n\n\n--\n-- Name: column_mapping_templates column_mapping_templates_pkey; Type: CONSTRAINT; Schema: public; Owner: -\n--\n\nALTER TABLE ONLY public.column_mapping_templates\n    ADD CONSTRAINT column_mapping_templates_pkey PRIMARY KEY (id);\n\n\n--\n-- Name: component_base_risk_scores component_base_risk_scores_pkey; Type: CONSTRAINT; Schema: public; Owner: -\n--\n\nALTER TABLE ONLY public.component_base_risk_scores\n    ADD CONSTRAINT component_base_risk_scores_pkey PRIMARY KEY (id);\n\n\n--\n-- Name: component_watches component_watches_pkey; Type: CONSTRAINT; Schema: public; Owner: -\n--\n\nALTER TABLE ONLY public.component_watches\n    ADD CONSTRAINT component_watches_pkey PRIMARY KEY (id);\n\n\n--\n-- Name: component_watches component_watches_user_id_component_id_key; Type: CONSTRAINT; Schema: public; Owner: -\n--\n\nALTER TABLE ONLY public.component_watches\n    ADD CONSTRAINT component_watches_user_id_component_id_key UNIQUE (user_id, component_id);\n\n\n--\n-- Name: components components_pkey; Type: CONSTRAINT; Schema: public; Owner: -\n--\n\nALTER TABLE ONLY public.components\n    ADD CONSTRAINT components_pkey PRIMARY KEY (id);\n\n\n--\n-- Name: enrichment_audit_log enrichment_audit_log_pkey; Type: CONSTRAINT; Schema: public; Owner: -\n--\n\nALTER TABLE ONLY public.enrichment_audit_log\n    ADD CONSTRAINT enrichment_audit_log_pkey PRIMARY KEY (id);\n\n\n--\n-- Name: enrichment_events enrichment_events_event_id_key; Type: CONSTRAINT; Schema: public; Owner: -\n--\n\nALTER TABLE ONLY public.enrichment_events\n    ADD CONSTRAINT enrichment_events_event_id_key UNIQUE (event_id);\n\n\n--\n-- Name: enrichment_events enrichment_events_pkey; Type: CONSTRAINT; Schema: public; Owner: -\n--\n\nALTER TABLE ONLY public.enrichment_events\n    ADD CONSTRAINT enrichment_events_pkey PRIMARY KEY (id);\n\n\n--\n-- Name: enrichment_history enrichment_history_pkey; Type: CONSTRAINT; Schema: public; Owner: -\n--\n\nALTER TABLE ONLY public.enrichment_history\n    ADD CONSTRAINT enrichment_history_pkey PRIMARY KEY (id);\n\n\n--\n-- Name: enrichment_queue enrichment_queue_pkey; Type: CONSTRAINT; Schema: public; Owner: -\n--\n\nALTER TABLE ONLY public.enrichment_queue\n    ADD CONSTRAINT enrichment_queue_pkey PRIMARY KEY (id);\n\n\n--\n-- Name: invoice_line_items invoice_line_items_pkey; Type: CONSTRAINT; Schema: public; Owner: -\n--\n\nALTER TABLE ONLY public.invoice_line_items\n    ADD CONSTRAINT invoice_line_items_pkey PRIMARY KEY (id);\n\n\n--\n-- Name: invoices invoices_invoice_number_key; Type: CONSTRAINT; Schema: public; Owner: -\n--\n\nALTER TABLE ONLY public.invoices\n    ADD CONSTRAINT invoices_invoice_number_key UNIQUE (invoice_number);\n\n\n--\n-- Name: invoices invoices_pkey; Type: CONSTRAINT; Schema: public; Owner: -\n--\n\nALTER TABLE ONLY public.invoices\n    ADD CONSTRAINT invoices_pkey PRIMARY KEY (id);\n\n\n--\n-- Name: manufacturers manufacturers_name_key; Type: CONSTRAINT; Schema: public; Owner: -\n--\n\nALTER TABLE ONLY public.manufacturers\n    ADD CONSTRAINT manufacturers_name_key UNIQUE (name);\n\n\n--\n-- Name: manufacturers manufacturers_pkey; Type: CONSTRAINT; Schema: public; Owner: -\n--\n\nALTER TABLE ONLY public.manufacturers\n    ADD CONSTRAINT manufacturers_pkey PRIMARY KEY (id);\n\n\n--\n-- Name: manufacturers manufacturers_slug_key; Type: CONSTRAINT; Schema: public; Owner: -\n--\n\nALTER TABLE ONLY public.manufacturers\n    ADD CONSTRAINT manufacturers_slug_key UNIQUE (slug);\n\n\n--\n-- Name: notifications notifications_pkey; Type: CONSTRAINT; Schema: public; Owner: -\n--\n\nALTER TABLE ONLY public.notifications\n    ADD CONSTRAINT notifications_pkey PRIMARY KEY (id);\n\n\n--\n-- Name: onboarding_events onboarding_events_pkey; Type: CONSTRAINT; Schema: public; Owner: -\n--\n\nALTER TABLE ONLY public.onboarding_events\n    ADD CONSTRAINT onboarding_events_pkey PRIMARY KEY (id);\n\n\n--\n-- Name: organization_memberships organization_memberships_pkey; Type: CONSTRAINT; Schema: public; Owner: -\n--\n\nALTER TABLE ONLY public.organization_memberships\n    ADD CONSTRAINT organization_memberships_pkey PRIMARY KEY (id);\n\n\n--\n-- Name: organization_memberships organization_memberships_user_id_organization_id_key; Type: CONSTRAINT; Schema: public; Owner: -\n--\n\nALTER TABLE ONLY public.organization_memberships\n    ADD CONSTRAINT organization_memberships_user_id_organization_id_key UNIQUE (user_id, organization_id);\n\n\n--\n-- Name: organization_risk_profiles organization_risk_profiles_pkey; Type: CONSTRAINT; Schema: public; Owner: -\n--\n\nALTER TABLE ONLY public.organization_risk_profiles\n    ADD CONSTRAINT organization_risk_profiles_pkey PRIMARY KEY (id);\n\n\n--\n-- Name: organization_settings_audit organization_settings_audit_pkey; Type: CONSTRAINT; Schema: public; Owner: -\n--\n\nALTER TABLE ONLY public.organization_settings_audit\n    ADD CONSTRAINT organization_settings_audit_pkey PRIMARY KEY (id);\n\n\n--\n-- Name: organizations organizations_pkey; Type: CONSTRAINT; Schema: public; Owner: -\n--\n\nALTER TABLE ONLY public.organizations\n    ADD CONSTRAINT organizations_pkey PRIMARY KEY (id);\n\n\n--\n-- Name: organizations organizations_slug_key; Type: CONSTRAINT; Schema: public; Owner: -\n--\n\nALTER TABLE ONLY public.organizations\n    ADD CONSTRAINT organizations_slug_key UNIQUE (slug);\n\n\n--\n-- Name: payment_methods payment_methods_pkey; Type: CONSTRAINT; Schema: public; Owner: -\n--\n\nALTER TABLE ONLY public.payment_methods\n    ADD CONSTRAINT payment_methods_pkey PRIMARY KEY (id);\n\n\n--\n-- Name: payments payments_pkey; Type: CONSTRAINT; Schema: public; Owner: -\n--\n\nALTER TABLE ONLY public.payments\n    ADD CONSTRAINT payments_pkey PRIMARY KEY (id);\n\n\n--\n-- Name: project_members project_members_pkey; Type: CONSTRAINT; Schema: public; Owner: -\n--\n\nALTER TABLE ONLY public.project_members\n    ADD CONSTRAINT project_members_pkey PRIMARY KEY (id);\n\n\n--\n-- Name: project_members project_members_project_id_user_id_key; Type: CONSTRAINT; Schema: public; Owner: -\n--\n\nALTER TABLE ONLY public.project_members\n    ADD CONSTRAINT project_members_project_id_user_id_key UNIQUE (project_id, user_id);\n\n\n--\n-- Name: project_risk_summaries project_risk_summaries_pkey; Type: CONSTRAINT; Schema: public; Owner: -\n--\n\nALTER TABLE ONLY public.project_risk_summaries\n    ADD CONSTRAINT project_risk_summaries_pkey PRIMARY KEY (id);\n\n\n--\n-- Name: projects projects_pkey; Type: CONSTRAINT; Schema: public; Owner: -\n--\n\nALTER TABLE ONLY public.projects\n    ADD CONSTRAINT projects_pkey PRIMARY KEY (id);\n\n\n--\n-- Name: projects projects_workspace_id_slug_key; Type: CONSTRAINT; Schema: public; Owner: -\n--\n\nALTER TABLE ONLY public.projects\n    ADD CONSTRAINT projects_workspace_id_slug_key UNIQUE (workspace_id, slug);\n\n\n--\n-- Name: risk_profile_presets risk_profile_presets_name_key; Type: CONSTRAINT; Schema: public; Owner: -\n--\n\nALTER TABLE ONLY public.risk_profile_presets\n    ADD CONSTRAINT risk_profile_presets_name_key UNIQUE (name);\n\n\n--\n-- Name: risk_profile_presets risk_profile_presets_pkey; Type: CONSTRAINT; Schema: public; Owner: -\n--\n\nALTER TABLE ONLY public.risk_profile_presets\n    ADD CONSTRAINT risk_profile_presets_pkey PRIMARY KEY (id);\n\n\n--\n-- Name: risk_score_history risk_score_history_pkey; Type: CONSTRAINT; Schema: public; Owner: -\n--\n\nALTER TABLE ONLY public.risk_score_history\n    ADD CONSTRAINT risk_score_history_pkey PRIMARY KEY (id);\n\n\n--\n-- Name: subscription_plans subscription_plans_code_key; Type: CONSTRAINT; Schema: public; Owner: -\n--\n\nALTER TABLE ONLY public.subscription_plans\n    ADD CONSTRAINT subscription_plans_code_key UNIQUE (code);\n\n\n--\n-- Name: subscription_plans subscription_plans_pkey; Type: CONSTRAINT; Schema: public; Owner: -\n--\n\nALTER TABLE ONLY public.subscription_plans\n    ADD CONSTRAINT subscription_plans_pkey PRIMARY KEY (id);\n\n\n--\n-- Name: subscriptions subscriptions_pkey; Type: CONSTRAINT; Schema: public; Owner: -\n--\n\nALTER TABLE ONLY public.subscriptions\n    ADD CONSTRAINT subscriptions_pkey PRIMARY KEY (id);\n\n\n--\n-- Name: suppliers suppliers_name_key; Type: CONSTRAINT; Schema: public; Owner: -\n--\n\nALTER TABLE ONLY public.suppliers\n    ADD CONSTRAINT suppliers_name_key UNIQUE (name);\n\n\n--\n-- Name: suppliers suppliers_pkey; Type: CONSTRAINT; Schema: public; Owner: -\n--\n\nALTER TABLE ONLY public.suppliers\n    ADD CONSTRAINT suppliers_pkey PRIMARY KEY (id);\n\n\n--\n-- Name: suppliers suppliers_slug_key; Type: CONSTRAINT; Schema: public; Owner: -\n--\n\nALTER TABLE ONLY public.suppliers\n    ADD CONSTRAINT suppliers_slug_key UNIQUE (slug);\n\n\n--\n-- Name: workspace_memberships unique_workspace_membership; Type: CONSTRAINT; Schema: public; Owner: -\n--\n\nALTER TABLE ONLY public.workspace_memberships\n    ADD CONSTRAINT unique_workspace_membership UNIQUE (workspace_id, user_id);\n\n\n--\n-- Name: usage_records usage_records_org_type_period_unique; Type: CONSTRAINT; Schema: public; Owner: -\n--\n\nALTER TABLE ONLY public.usage_records\n    ADD CONSTRAINT usage_records_org_type_period_unique UNIQUE (organization_id, usage_type, period_start);\n\n\n--\n-- Name: usage_records usage_records_pkey; Type: CONSTRAINT; Schema: public; Owner: -\n--\n\nALTER TABLE ONLY public.usage_records\n    ADD CONSTRAINT usage_records_pkey PRIMARY KEY (id);\n\n\n--\n-- Name: user_preferences user_preferences_pkey; Type: CONSTRAINT; Schema: public; Owner: -\n--\n\nALTER TABLE ONLY public.user_preferences\n    ADD CONSTRAINT user_preferences_pkey PRIMARY KEY (user_id);\n\n\n--\n-- Name: users users_auth0_user_id_key; Type: CONSTRAINT; Schema: public; Owner: -\n--\n\nALTER TABLE ONLY public.users\n    ADD CONSTRAINT users_auth0_user_id_key UNIQUE (auth0_user_id);\n\n\n--\n-- Name: users users_email_key; Type: CONSTRAINT; Schema: public; Owner: -\n--\n\nALTER TABLE ONLY public.users\n    ADD CONSTRAINT users_email_key UNIQUE (email);\n\n\n--\n-- Name: users users_pkey; Type: CONSTRAINT; Schema: public; Owner: -\n--\n\nALTER TABLE ONLY public.users\n    ADD CONSTRAINT users_pkey PRIMARY KEY (id);\n\n\n--\n-- Name: workspace_members workspace_members_pkey; Type: CONSTRAINT; Schema: public; Owner: -\n--\n\nALTER TABLE ONLY public.workspace_members\n    ADD CONSTRAINT workspace_members_pkey PRIMARY KEY (id);\n\n\n--\n-- Name: workspace_members workspace_members_workspace_id_user_id_key; Type: CONSTRAINT; Schema: public; Owner: -\n--\n\nALTER TABLE ONLY public.workspace_members\n    ADD CONSTRAINT workspace_members_workspace_id_user_id_key UNIQUE (workspace_id, user_id);\n\n\n--\n-- Name: workspace_memberships workspace_memberships_pkey; Type: CONSTRAINT; Schema: public; Owner: -\n--\n\nALTER TABLE ONLY public.workspace_memberships\n    ADD CONSTRAINT workspace_memberships_pkey PRIMARY KEY (id);\n\n\n--\n-- Name: workspaces workspaces_organization_id_slug_key; Type: CONSTRAINT; Schema: public; Owner: -\n--\n\nALTER TABLE ONLY public.workspaces\n    ADD CONSTRAINT workspaces_organization_id_slug_key UNIQUE (organization_id, slug);\n\n\n--\n-- Name: workspaces workspaces_pkey; Type: CONSTRAINT; Schema: public; Owner: -\n--\n\nALTER TABLE ONLY public.workspaces\n    ADD CONSTRAINT workspaces_pkey PRIMARY KEY (id);\n\n\n--\n-- Name: idx_account_deletion_audit_org; Type: INDEX; Schema: public; Owner: -\n--\n\nCREATE INDEX idx_account_deletion_audit_org ON public.account_deletion_audit USING btree (organization_id);\n\n\n--\n-- Name: idx_alert_deliveries_alert; Type: INDEX; Schema: public; Owner: -\n--\n\nCREATE INDEX idx_alert_deliveries_alert ON public.alert_deliveries USING btree (alert_id);\n\n\n--\n-- Name: idx_alert_preferences_org; Type: INDEX; Schema: public; Owner: -\n--\n\nCREATE INDEX idx_alert_preferences_org ON public.alert_preferences USING btree (organization_id);\n\n\n--\n-- Name: idx_alert_preferences_user; Type: INDEX; Schema: public; Owner: -\n--\n\nCREATE INDEX idx_alert_preferences_user ON public.alert_preferences USING btree (user_id);\n\n\n--\n-- Name: idx_alerts_component; Type: INDEX; Schema: public; Owner: -\n--\n\nCREATE INDEX idx_alerts_component ON public.alerts USING btree (component_id);\n\n\n--\n-- Name: idx_alerts_org; Type: INDEX; Schema: public; Owner: -\n--\n\nCREATE INDEX idx_alerts_org ON public.alerts USING btree (organization_id);\n\n\n--\n-- Name: idx_alerts_severity; Type: INDEX; Schema: public; Owner: -\n--\n\nCREATE INDEX idx_alerts_severity ON public.alerts USING btree (severity);\n\n\n--\n-- Name: idx_alerts_type; Type: INDEX; Schema: public; Owner: -\n--\n\nCREATE INDEX idx_alerts_type ON public.alerts USING btree (alert_type);\n\n\n--\n-- Name: idx_alerts_user; Type: INDEX; Schema: public; Owner: -\n--\n\nCREATE INDEX idx_alerts_user ON public.alerts USING btree (user_id);\n\n\n--\n-- Name: idx_attributes_component; Type: INDEX; Schema: public; Owner: -\n--\n\nCREATE INDEX idx_attributes_component ON public.attributes USING btree (component_id);\n\n\n--\n-- Name: idx_attributes_name; Type: INDEX; Schema: public; Owner: -\n--\n\nCREATE INDEX idx_attributes_name ON public.attributes USING btree (name);\n\n\n--\n-- Name: idx_audit_enrichment_upload; Type: INDEX; Schema: public; Owner: -\n--\n\nCREATE INDEX idx_audit_enrichment_upload ON public.audit_enrichment_runs USING btree (upload_id);\n\n\n--\n-- Name: idx_audit_field_comparisons_run; Type: INDEX; Schema: public; Owner: -\n--\n\nCREATE INDEX idx_audit_field_comparisons_run ON public.audit_field_comparisons USING btree (enrichment_run_id);\n\n\n--\n-- Name: idx_audit_logs_org; Type: INDEX; Schema: public; Owner: -\n--\n\nCREATE INDEX idx_audit_logs_org ON public.audit_logs USING btree (organization_id);\n\n\n--\n-- Name: idx_audit_logs_type; Type: INDEX; Schema: public; Owner: -\n--\n\nCREATE INDEX idx_audit_logs_type ON public.audit_logs USING btree (event_type);\n\n\n--\n-- Name: idx_audit_supplier_quality_date; Type: INDEX; Schema: public; Owner: -\n--\n\nCREATE UNIQUE INDEX idx_audit_supplier_quality_date ON public.audit_supplier_quality USING btree (date, supplier_name);\n\n\n--\n-- Name: idx_billing_customers_org; Type: INDEX; Schema: public; Owner: -\n--\n\nCREATE UNIQUE INDEX idx_billing_customers_org ON public.billing_customers USING btree (organization_id);\n\n\n--\n-- Name: idx_billing_webhook_provider_event; Type: INDEX; Schema: public; Owner: -\n--\n\nCREATE UNIQUE INDEX idx_billing_webhook_provider_event ON public.billing_webhook_events USING btree (provider, provider_event_id);\n\n\n--\n-- Name: idx_bom_items_job_id; Type: INDEX; Schema: public; Owner: -\n--\n\nCREATE INDEX idx_bom_items_job_id ON public.bom_items USING btree (job_id);\n\n\n--\n-- Name: idx_bom_jobs_job_id; Type: INDEX; Schema: public; Owner: -\n--\n\nCREATE INDEX idx_bom_jobs_job_id ON public.bom_jobs USING btree (job_id);\n\n\n--\n-- Name: idx_bom_jobs_org; Type: INDEX; Schema: public; Owner: -\n--\n\nCREATE INDEX idx_bom_jobs_org ON public.bom_jobs USING btree (organization_id);\n\n\n--\n-- Name: idx_bom_line_items_bom; Type: INDEX; Schema: public; Owner: -\n--\n\nCREATE INDEX idx_bom_line_items_bom ON public.bom_line_items USING btree (bom_id);\n\n\n--\n-- Name: idx_bom_line_items_component; Type: INDEX; Schema: public; Owner: -\n--\n\nCREATE INDEX idx_bom_line_items_component ON public.bom_line_items USING btree (component_id);\n\n\n--\n-- Name: idx_bom_line_items_mpn; Type: INDEX; Schema: public; Owner: -\n--\n\nCREATE INDEX idx_bom_line_items_mpn ON public.bom_line_items USING btree (manufacturer_part_number);\n\n\n--\n-- Name: idx_bom_line_items_status; Type: INDEX; Schema: public; Owner: -\n--\n\nCREATE INDEX idx_bom_line_items_status ON public.bom_line_items USING btree (enrichment_status);\n\n\n--\n-- Name: idx_bom_line_risk_line_item; Type: INDEX; Schema: public; Owner: -\n--\n\nCREATE INDEX idx_bom_line_risk_line_item ON public.bom_line_item_risk_scores USING btree (bom_line_item_id);\n\n\n--\n-- Name: idx_bom_line_risk_org; Type: INDEX; Schema: public; Owner: -\n--\n\nCREATE INDEX idx_bom_line_risk_org ON public.bom_line_item_risk_scores USING btree (organization_id);\n\n\n--\n-- Name: idx_bom_processing_jobs_bom; Type: INDEX; Schema: public; Owner: -\n--\n\nCREATE INDEX idx_bom_processing_jobs_bom ON public.bom_processing_jobs USING btree (bom_id);\n\n\n--\n-- Name: idx_bom_processing_jobs_status; Type: INDEX; Schema: public; Owner: -\n--\n\nCREATE INDEX idx_bom_processing_jobs_status ON public.bom_processing_jobs USING btree (status);\n\n\n--\n-- Name: idx_bom_risk_summaries_bom; Type: INDEX; Schema: public; Owner: -\n--\n\nCREATE INDEX idx_bom_risk_summaries_bom ON public.bom_risk_summaries USING btree (bom_id);\n\n\n--\n-- Name: idx_bom_risk_summaries_org; Type: INDEX; Schema: public; Owner: -\n--\n\nCREATE INDEX idx_bom_risk_summaries_org ON public.bom_risk_summaries USING btree (organization_id);\n\n\n--\n-- Name: idx_bom_uploads_org; Type: INDEX; Schema: public; Owner: -\n--\n\nCREATE INDEX idx_bom_uploads_org ON public.bom_uploads USING btree (organization_id);\n\n\n--\n-- Name: idx_bom_uploads_project; Type: INDEX; Schema: public; Owner: -\n--\n\nCREATE INDEX idx_bom_uploads_project ON public.bom_uploads USING btree (project_id);\n\n\n--\n-- Name: idx_bom_uploads_status; Type: INDEX; Schema: public; Owner: -\n--\n\nCREATE INDEX idx_bom_uploads_status ON public.bom_uploads USING btree (status);\n\n\n--\n-- Name: idx_boms_enrichment_status; Type: INDEX; Schema: public; Owner: -\n--\n\nCREATE INDEX idx_boms_enrichment_status ON public.boms USING btree (enrichment_status);\n\n\n--\n-- Name: idx_boms_org; Type: INDEX; Schema: public; Owner: -\n--\n\nCREATE INDEX idx_boms_org ON public.boms USING btree (organization_id);\n\n\n--\n-- Name: idx_boms_project; Type: INDEX; Schema: public; Owner: -\n--\n\nCREATE INDEX idx_boms_project ON public.boms USING btree (project_id);\n\n\n--\n-- Name: idx_boms_status; Type: INDEX; Schema: public; Owner: -\n--\n\nCREATE INDEX idx_boms_status ON public.boms USING btree (status);\n\n\n--\n-- Name: idx_categories_parent; Type: INDEX; Schema: public; Owner: -\n--\n\nCREATE INDEX idx_categories_parent ON public.categories USING btree (parent_id);\n\n\n--\n-- Name: idx_categories_path; Type: INDEX; Schema: public; Owner: -\n--\n\nCREATE INDEX idx_categories_path ON public.categories USING btree (path);\n\n\n--\n-- Name: idx_categories_slug; Type: INDEX; Schema: public; Owner: -\n--\n\nCREATE INDEX idx_categories_slug ON public.categories USING btree (slug);\n\n\n--\n-- Name: idx_cns_bulk_uploads_org; Type: INDEX; Schema: public; Owner: -\n--\n\nCREATE INDEX idx_cns_bulk_uploads_org ON public.cns_bulk_uploads USING btree (organization_id);\n\n\n--\n-- Name: idx_cns_bulk_uploads_status; Type: INDEX; Schema: public; Owner: -\n--\n\nCREATE INDEX idx_cns_bulk_uploads_status ON public.cns_bulk_uploads USING btree (status);\n\n\n--\n-- Name: idx_cns_config_global; Type: INDEX; Schema: public; Owner: -\n--\n\nCREATE INDEX idx_cns_config_global ON public.cns_enrichment_config USING btree (is_global) WHERE (is_global = true);\n\n\n--\n-- Name: idx_cns_config_tenant; Type: INDEX; Schema: public; Owner: -\n--\n\nCREATE INDEX idx_cns_config_tenant ON public.cns_enrichment_config USING btree (tenant_id);\n\n\n--\n-- Name: idx_cns_events_bom; Type: INDEX; Schema: public; Owner: -\n--\n\nCREATE INDEX idx_cns_events_bom ON public.cns_processing_events USING btree (bom_id);\n\n\n--\n-- Name: idx_cns_events_org; Type: INDEX; Schema: public; Owner: -\n--\n\nCREATE INDEX idx_cns_events_org ON public.cns_processing_events USING btree (organization_id);\n\n\n--\n-- Name: idx_cns_events_type; Type: INDEX; Schema: public; Owner: -\n--\n\nCREATE INDEX idx_cns_events_type ON public.cns_processing_events USING btree (event_type);\n\n\n--\n-- Name: idx_column_mapping_templates_org; Type: INDEX; Schema: public; Owner: -\n--\n\nCREATE INDEX idx_column_mapping_templates_org ON public.column_mapping_templates USING btree (organization_id);\n\n\n--\n-- Name: idx_component_base_risk_component; Type: INDEX; Schema: public; Owner: -\n--\n\nCREATE INDEX idx_component_base_risk_component ON public.component_base_risk_scores USING btree (component_id);\n\n\n--\n-- Name: idx_component_base_risk_mpn; Type: INDEX; Schema: public; Owner: -\n--\n\nCREATE INDEX idx_component_base_risk_mpn ON public.component_base_risk_scores USING btree (mpn);\n\n\n--\n-- Name: idx_component_watches_component; Type: INDEX; Schema: public; Owner: -\n--\n\nCREATE INDEX idx_component_watches_component ON public.component_watches USING btree (component_id);\n\n\n--\n-- Name: idx_component_watches_user; Type: INDEX; Schema: public; Owner: -\n--\n\nCREATE INDEX idx_component_watches_user ON public.component_watches USING btree (user_id);\n\n\n--\n-- Name: idx_components_category; Type: INDEX; Schema: public; Owner: -\n--\n\nCREATE INDEX idx_components_category ON public.components USING btree (category_id);\n\n\n--\n-- Name: idx_components_lifecycle; Type: INDEX; Schema: public; Owner: -\n--\n\nCREATE INDEX idx_components_lifecycle ON public.components USING btree (lifecycle_status);\n\n\n--\n-- Name: idx_components_manufacturer; Type: INDEX; Schema: public; Owner: -\n--\n\nCREATE INDEX idx_components_manufacturer ON public.components USING btree (manufacturer_id);\n\n\n--\n-- Name: idx_components_mpn; Type: INDEX; Schema: public; Owner: -\n--\n\nCREATE INDEX idx_components_mpn ON public.components USING btree (manufacturer_part_number);\n\n\n--\n-- Name: idx_components_org; Type: INDEX; Schema: public; Owner: -\n--\n\nCREATE INDEX idx_components_org ON public.components USING btree (organization_id);\n\n\n--\n-- Name: idx_components_risk; Type: INDEX; Schema: public; Owner: -\n--\n\nCREATE INDEX idx_components_risk ON public.components USING btree (risk_level);\n\n\n--\n-- Name: idx_components_search; Type: INDEX; Schema: public; Owner: -\n--\n\nCREATE INDEX idx_components_search ON public.components USING gin (search_vector);\n\n\n--\n-- Name: idx_enrichment_audit_log_bom; Type: INDEX; Schema: public; Owner: -\n--\n\nCREATE INDEX idx_enrichment_audit_log_bom ON public.enrichment_audit_log USING btree (bom_id);\n\n\n--\n-- Name: idx_enrichment_audit_log_org; Type: INDEX; Schema: public; Owner: -\n--\n\nCREATE INDEX idx_enrichment_audit_log_org ON public.enrichment_audit_log USING btree (organization_id);\n\n\n--\n-- Name: idx_enrichment_events_bom; Type: INDEX; Schema: public; Owner: -\n--\n\nCREATE INDEX idx_enrichment_events_bom ON public.enrichment_events USING btree (bom_id);\n\n\n--\n-- Name: idx_enrichment_events_tenant; Type: INDEX; Schema: public; Owner: -\n--\n\nCREATE INDEX idx_enrichment_events_tenant ON public.enrichment_events USING btree (tenant_id);\n\n\n--\n-- Name: idx_enrichment_history_mpn; Type: INDEX; Schema: public; Owner: -\n--\n\nCREATE INDEX idx_enrichment_history_mpn ON public.enrichment_history USING btree (mpn);\n\n\n--\n-- Name: idx_enrichment_history_status; Type: INDEX; Schema: public; Owner: -\n--\n\nCREATE INDEX idx_enrichment_history_status ON public.enrichment_history USING btree (status);\n\n\n--\n-- Name: idx_enrichment_queue_bom; Type: INDEX; Schema: public; Owner: -\n--\n\nCREATE INDEX idx_enrichment_queue_bom ON public.enrichment_queue USING btree (bom_id);\n\n\n--\n-- Name: idx_enrichment_queue_org; Type: INDEX; Schema: public; Owner: -\n--\n\nCREATE INDEX idx_enrichment_queue_org ON public.enrichment_queue USING btree (organization_id);\n\n\n--\n-- Name: idx_enrichment_queue_status; Type: INDEX; Schema: public; Owner: -\n--\n\nCREATE INDEX idx_enrichment_queue_status ON public.enrichment_queue USING btree (status);\n\n\n--\n-- Name: idx_invoice_line_items_invoice; Type: INDEX; Schema: public; Owner: -\n--\n\nCREATE INDEX idx_invoice_line_items_invoice ON public.invoice_line_items USING btree (invoice_id);\n\n\n--\n-- Name: idx_invoices_customer; Type: INDEX; Schema: public; Owner: -\n--\n\nCREATE INDEX idx_invoices_customer ON public.invoices USING btree (billing_customer_id);\n\n\n--\n-- Name: idx_invoices_org; Type: INDEX; Schema: public; Owner: -\n--\n\nCREATE INDEX idx_invoices_org ON public.invoices USING btree (organization_id);\n\n\n--\n-- Name: idx_invoices_status; Type: INDEX; Schema: public; Owner: -\n--\n\nCREATE INDEX idx_invoices_status ON public.invoices USING btree (status);\n\n\n--\n-- Name: idx_manufacturers_name; Type: INDEX; Schema: public; Owner: -\n--\n\nCREATE INDEX idx_manufacturers_name ON public.manufacturers USING btree (name);\n\n\n--\n-- Name: idx_manufacturers_slug; Type: INDEX; Schema: public; Owner: -\n--\n\nCREATE INDEX idx_manufacturers_slug ON public.manufacturers USING btree (slug);\n\n\n--\n-- Name: idx_notifications_org; Type: INDEX; Schema: public; Owner: -\n--\n\nCREATE INDEX idx_notifications_org ON public.notifications USING btree (organization_id);\n\n\n--\n-- Name: idx_notifications_user; Type: INDEX; Schema: public; Owner: -\n--\n\nCREATE INDEX idx_notifications_user ON public.notifications USING btree (user_id);\n\n\n--\n-- Name: idx_onboarding_events_org; Type: INDEX; Schema: public; Owner: -\n--\n\nCREATE INDEX idx_onboarding_events_org ON public.onboarding_events USING btree (organization_id);\n\n\n--\n-- Name: idx_onboarding_events_user; Type: INDEX; Schema: public; Owner: -\n--\n\nCREATE INDEX idx_onboarding_events_user ON public.onboarding_events USING btree (user_id);\n\n\n--\n-- Name: idx_org_memberships_org; Type: INDEX; Schema: public; Owner: -\n--\n\nCREATE INDEX idx_org_memberships_org ON public.organization_memberships USING btree (organization_id);\n\n\n--\n-- Name: idx_org_memberships_user; Type: INDEX; Schema: public; Owner: -\n--\n\nCREATE INDEX idx_org_memberships_user ON public.organization_memberships USING btree (user_id);\n\n\n--\n-- Name: idx_org_memberships_user_org; Type: INDEX; Schema: public; Owner: -\n--\n\nCREATE INDEX idx_org_memberships_user_org ON public.organization_memberships USING btree (user_id, organization_id);\n\n\n--\n-- Name: idx_org_risk_profiles_org; Type: INDEX; Schema: public; Owner: -\n--\n\nCREATE INDEX idx_org_risk_profiles_org ON public.organization_risk_profiles USING btree (organization_id);\n\n\n--\n-- Name: idx_org_settings_audit_org; Type: INDEX; Schema: public; Owner: -\n--\n\nCREATE INDEX idx_org_settings_audit_org ON public.organization_settings_audit USING btree (organization_id);\n\n\n--\n-- Name: idx_organizations_deleted; Type: INDEX; Schema: public; Owner: -\n--\n\nCREATE INDEX idx_organizations_deleted ON public.organizations USING btree (deleted_at) WHERE (deleted_at IS NULL);\n\n\n--\n-- Name: idx_organizations_slug; Type: INDEX; Schema: public; Owner: -\n--\n\nCREATE INDEX idx_organizations_slug ON public.organizations USING btree (slug);\n\n\n--\n-- Name: idx_organizations_status; Type: INDEX; Schema: public; Owner: -\n--\n\nCREATE INDEX idx_organizations_status ON public.organizations USING btree (subscription_status);\n\n\n--\n-- Name: idx_payment_methods_customer; Type: INDEX; Schema: public; Owner: -\n--\n\nCREATE INDEX idx_payment_methods_customer ON public.payment_methods USING btree (billing_customer_id);\n\n\n--\n-- Name: idx_payments_customer; Type: INDEX; Schema: public; Owner: -\n--\n\nCREATE INDEX idx_payments_customer ON public.payments USING btree (billing_customer_id);\n\n\n--\n-- Name: idx_payments_invoice; Type: INDEX; Schema: public; Owner: -\n--\n\nCREATE INDEX idx_payments_invoice ON public.payments USING btree (invoice_id);\n\n\n--\n-- Name: idx_payments_status; Type: INDEX; Schema: public; Owner: -\n--\n\nCREATE INDEX idx_payments_status ON public.payments USING btree (status);\n\n\n--\n-- Name: idx_project_members_project; Type: INDEX; Schema: public; Owner: -\n--\n\nCREATE INDEX idx_project_members_project ON public.project_members USING btree (project_id);\n\n\n--\n-- Name: idx_project_members_user; Type: INDEX; Schema: public; Owner: -\n--\n\nCREATE INDEX idx_project_members_user ON public.project_members USING btree (user_id);\n\n\n--\n-- Name: idx_project_risk_summaries_org; Type: INDEX; Schema: public; Owner: -\n--\n\nCREATE INDEX idx_project_risk_summaries_org ON public.project_risk_summaries USING btree (organization_id);\n\n\n--\n-- Name: idx_project_risk_summaries_project; Type: INDEX; Schema: public; Owner: -\n--\n\nCREATE INDEX idx_project_risk_summaries_project ON public.project_risk_summaries USING btree (project_id);\n\n\n--\n-- Name: idx_projects_organization; Type: INDEX; Schema: public; Owner: -\n--\n\nCREATE INDEX idx_projects_organization ON public.projects USING btree (organization_id);\n\n\n--\n-- Name: idx_projects_slug; Type: INDEX; Schema: public; Owner: -\n--\n\nCREATE INDEX idx_projects_slug ON public.projects USING btree (slug);\n\n\n--\n-- Name: idx_projects_status; Type: INDEX; Schema: public; Owner: -\n--\n\nCREATE INDEX idx_projects_status ON public.projects USING btree (status);\n\n\n--\n-- Name: idx_projects_workspace; Type: INDEX; Schema: public; Owner: -\n--\n\nCREATE INDEX idx_projects_workspace ON public.projects USING btree (workspace_id);\n\n\n--\n-- Name: idx_risk_score_history_entity; Type: INDEX; Schema: public; Owner: -\n--\n\nCREATE INDEX idx_risk_score_history_entity ON public.risk_score_history USING btree (entity_type, entity_id);\n\n\n--\n-- Name: idx_risk_score_history_org; Type: INDEX; Schema: public; Owner: -\n--\n\nCREATE INDEX idx_risk_score_history_org ON public.risk_score_history USING btree (organization_id);\n\n\n--\n-- Name: idx_risk_score_history_recorded; Type: INDEX; Schema: public; Owner: -\n--\n\nCREATE INDEX idx_risk_score_history_recorded ON public.risk_score_history USING btree (recorded_at);\n\n\n--\n-- Name: idx_subscriptions_org; Type: INDEX; Schema: public; Owner: -\n--\n\nCREATE INDEX idx_subscriptions_org ON public.subscriptions USING btree (organization_id);\n\n\n--\n-- Name: idx_subscriptions_status; Type: INDEX; Schema: public; Owner: -\n--\n\nCREATE INDEX idx_subscriptions_status ON public.subscriptions USING btree (status);\n\n\n--\n-- Name: idx_suppliers_priority; Type: INDEX; Schema: public; Owner: -\n--\n\nCREATE INDEX idx_suppliers_priority ON public.suppliers USING btree (priority);\n\n\n--\n-- Name: idx_suppliers_slug; Type: INDEX; Schema: public; Owner: -\n--\n\nCREATE INDEX idx_suppliers_slug ON public.suppliers USING btree (slug);\n\n\n--\n-- Name: idx_usage_records_org; Type: INDEX; Schema: public; Owner: -\n--\n\nCREATE INDEX idx_usage_records_org ON public.usage_records USING btree (organization_id);\n\n\n--\n-- Name: idx_usage_records_period; Type: INDEX; Schema: public; Owner: -\n--\n\nCREATE INDEX idx_usage_records_period ON public.usage_records USING btree (period_start, period_end);\n\n\n--\n-- Name: idx_usage_records_type; Type: INDEX; Schema: public; Owner: -\n--\n\nCREATE INDEX idx_usage_records_type ON public.usage_records USING btree (usage_type);\n\n\n--\n-- Name: idx_users_auth0_id; Type: INDEX; Schema: public; Owner: -\n--\n\nCREATE INDEX idx_users_auth0_id ON public.users USING btree (auth0_user_id) WHERE (auth0_user_id IS NOT NULL);\n\n\n--\n-- Name: idx_users_email; Type: INDEX; Schema: public; Owner: -\n--\n\nCREATE INDEX idx_users_email ON public.users USING btree (email);\n\n\n--\n-- Name: idx_users_is_platform_admin; Type: INDEX; Schema: public; Owner: -\n--\n\nCREATE INDEX idx_users_is_platform_admin ON public.users USING btree (is_platform_admin) WHERE (is_platform_admin = true);\n\n\n--\n-- Name: idx_users_keycloak_id; Type: INDEX; Schema: public; Owner: -\n--\n\nCREATE INDEX idx_users_keycloak_id ON public.users USING btree (keycloak_user_id) WHERE (keycloak_user_id IS NOT NULL);\n\n\n--\n-- Name: idx_workspace_members_user; Type: INDEX; Schema: public; Owner: -\n--\n\nCREATE INDEX idx_workspace_members_user ON public.workspace_members USING btree (user_id);\n\n\n--\n-- Name: idx_workspace_members_workspace; Type: INDEX; Schema: public; Owner: -\n--\n\nCREATE INDEX idx_workspace_members_workspace ON public.workspace_members USING btree (workspace_id);\n\n\n--\n-- Name: idx_workspace_memberships_user; Type: INDEX; Schema: public; Owner: -\n--\n\nCREATE INDEX idx_workspace_memberships_user ON public.workspace_memberships USING btree (user_id);\n\n\n--\n-- Name: idx_workspace_memberships_workspace; Type: INDEX; Schema: public; Owner: -\n--\n\nCREATE INDEX idx_workspace_memberships_workspace ON public.workspace_memberships USING btree (workspace_id);\n\n\n--\n-- Name: idx_workspaces_org; Type: INDEX; Schema: public; Owner: -\n--\n\nCREATE INDEX idx_workspaces_org ON public.workspaces USING btree (organization_id);\n\n\n--\n-- Name: idx_workspaces_slug; Type: INDEX; Schema: public; Owner: -\n--\n\nCREATE INDEX idx_workspaces_slug ON public.workspaces USING btree (slug);\n\n\n--\n-- Name: users auto_add_platform_staff_to_platform_org; Type: TRIGGER; Schema: public; Owner: -\n--\n\nCREATE TRIGGER auto_add_platform_staff_to_platform_org AFTER INSERT OR UPDATE ON public.users FOR EACH ROW EXECUTE FUNCTION public.trigger_auto_add_platform_staff_to_platform_org();\n\n\n--\n-- Name: column_mapping_templates ensure_single_default_template; Type: TRIGGER; Schema: public; Owner: -\n--\n\nCREATE TRIGGER ensure_single_default_template BEFORE INSERT OR UPDATE ON public.column_mapping_templates FOR EACH ROW EXECUTE FUNCTION public.ensure_single_default_template();\n\n\n--\n-- Name: billing_customers update_billing_customers_updated_at; Type: TRIGGER; Schema: public; Owner: -\n--\n\nCREATE TRIGGER update_billing_customers_updated_at BEFORE UPDATE ON public.billing_customers FOR EACH ROW EXECUTE FUNCTION public.trigger_set_timestamp();\n\n\n--\n-- Name: bom_items update_bom_items_updated_at; Type: TRIGGER; Schema: public; Owner: -\n--\n\nCREATE TRIGGER update_bom_items_updated_at BEFORE UPDATE ON public.bom_items FOR EACH ROW EXECUTE FUNCTION public.update_bom_items_updated_at();\n\n\n--\n-- Name: bom_jobs update_bom_jobs_updated_at; Type: TRIGGER; Schema: public; Owner: -\n--\n\nCREATE TRIGGER update_bom_jobs_updated_at BEFORE UPDATE ON public.bom_jobs FOR EACH ROW EXECUTE FUNCTION public.update_bom_jobs_updated_at();\n\n\n--\n-- Name: bom_line_items update_bom_line_items_updated_at; Type: TRIGGER; Schema: public; Owner: -\n--\n\nCREATE TRIGGER update_bom_line_items_updated_at BEFORE UPDATE ON public.bom_line_items FOR EACH ROW EXECUTE FUNCTION public.trigger_set_timestamp();\n\n\n--\n-- Name: bom_processing_jobs update_bom_processing_jobs_updated_at; Type: TRIGGER; Schema: public; Owner: -\n--\n\nCREATE TRIGGER update_bom_processing_jobs_updated_at BEFORE UPDATE ON public.bom_processing_jobs FOR EACH ROW EXECUTE FUNCTION public.update_bom_processing_jobs_updated_at();\n\n\n--\n-- Name: bom_risk_summaries update_bom_risk_summaries_updated_at; Type: TRIGGER; Schema: public; Owner: -\n--\n\nCREATE TRIGGER update_bom_risk_summaries_updated_at BEFORE UPDATE ON public.bom_risk_summaries FOR EACH ROW EXECUTE FUNCTION public.trigger_set_timestamp();\n\n\n--\n-- Name: bom_uploads update_bom_uploads_updated_at; Type: TRIGGER; Schema: public; Owner: -\n--\n\nCREATE TRIGGER update_bom_uploads_updated_at BEFORE UPDATE ON public.bom_uploads FOR EACH ROW EXECUTE FUNCTION public.trigger_set_timestamp();\n\n\n--\n-- Name: boms update_boms_updated_at; Type: TRIGGER; Schema: public; Owner: -\n--\n\nCREATE TRIGGER update_boms_updated_at BEFORE UPDATE ON public.boms FOR EACH ROW EXECUTE FUNCTION public.trigger_set_timestamp();\n\n\n--\n-- Name: cns_bulk_uploads update_cns_bulk_uploads_updated_at; Type: TRIGGER; Schema: public; Owner: -\n--\n\nCREATE TRIGGER update_cns_bulk_uploads_updated_at BEFORE UPDATE ON public.cns_bulk_uploads FOR EACH ROW EXECUTE FUNCTION public.trigger_set_timestamp();\n\n\n--\n-- Name: column_mapping_templates update_column_mapping_templates_updated_at; Type: TRIGGER; Schema: public; Owner: -\n--\n\nCREATE TRIGGER update_column_mapping_templates_updated_at BEFORE UPDATE ON public.column_mapping_templates FOR EACH ROW EXECUTE FUNCTION public.update_column_mapping_templates_updated_at();\n\n\n--\n-- Name: components update_component_search; Type: TRIGGER; Schema: public; Owner: -\n--\n\nCREATE TRIGGER update_component_search BEFORE INSERT OR UPDATE ON public.components FOR EACH ROW EXECUTE FUNCTION public.update_component_search_vector();\n\n\n--\n-- Name: components update_components_updated_at; Type: TRIGGER; Schema: public; Owner: -\n--\n\nCREATE TRIGGER update_components_updated_at BEFORE UPDATE ON public.components FOR EACH ROW EXECUTE FUNCTION public.trigger_set_timestamp();\n\n\n--\n-- Name: invoices update_invoices_updated_at; Type: TRIGGER; Schema: public; Owner: -\n--\n\nCREATE TRIGGER update_invoices_updated_at BEFORE UPDATE ON public.invoices FOR EACH ROW EXECUTE FUNCTION public.trigger_set_timestamp();\n\n\n--\n-- Name: organization_memberships update_org_memberships_updated_at; Type: TRIGGER; Schema: public; Owner: -\n--\n\nCREATE TRIGGER update_org_memberships_updated_at BEFORE UPDATE ON public.organization_memberships FOR EACH ROW EXECUTE FUNCTION public.trigger_set_timestamp();\n\n\n--\n-- Name: organization_risk_profiles update_org_risk_profiles_updated_at; Type: TRIGGER; Schema: public; Owner: -\n--\n\nCREATE TRIGGER update_org_risk_profiles_updated_at BEFORE UPDATE ON public.organization_risk_profiles FOR EACH ROW EXECUTE FUNCTION public.trigger_set_timestamp();\n\n\n--\n-- Name: organizations update_organizations_updated_at; Type: TRIGGER; Schema: public; Owner: -\n--\n\nCREATE TRIGGER update_organizations_updated_at BEFORE UPDATE ON public.organizations FOR EACH ROW EXECUTE FUNCTION public.trigger_set_timestamp();\n\n\n--\n-- Name: payment_methods update_payment_methods_updated_at; Type: TRIGGER; Schema: public; Owner: -\n--\n\nCREATE TRIGGER update_payment_methods_updated_at BEFORE UPDATE ON public.payment_methods FOR EACH ROW EXECUTE FUNCTION public.trigger_set_timestamp();\n\n\n--\n-- Name: payments update_payments_updated_at; Type: TRIGGER; Schema: public; Owner: -\n--\n\nCREATE TRIGGER update_payments_updated_at BEFORE UPDATE ON public.payments FOR EACH ROW EXECUTE FUNCTION public.trigger_set_timestamp();\n\n\n--\n-- Name: project_risk_summaries update_project_risk_summaries_updated_at; Type: TRIGGER; Schema: public; Owner: -\n--\n\nCREATE TRIGGER update_project_risk_summaries_updated_at BEFORE UPDATE ON public.project_risk_summaries FOR EACH ROW EXECUTE FUNCTION public.trigger_set_timestamp();\n\n\n--\n-- Name: projects update_projects_updated_at; Type: TRIGGER; Schema: public; Owner: -\n--\n\nCREATE TRIGGER update_projects_updated_at BEFORE UPDATE ON public.projects FOR EACH ROW EXECUTE FUNCTION public.trigger_set_timestamp();\n\n\n--\n-- Name: subscriptions update_subscriptions_updated_at; Type: TRIGGER; Schema: public; Owner: -\n--\n\nCREATE TRIGGER update_subscriptions_updated_at BEFORE UPDATE ON public.subscriptions FOR EACH ROW EXECUTE FUNCTION public.trigger_set_timestamp();\n\n\n--\n-- Name: usage_records update_usage_records_updated_at; Type: TRIGGER; Schema: public; Owner: -\n--\n\nCREATE TRIGGER update_usage_records_updated_at BEFORE UPDATE ON public.usage_records FOR EACH ROW EXECUTE FUNCTION public.trigger_set_timestamp();\n\n\n--\n-- Name: users update_users_updated_at; Type: TRIGGER; Schema: public; Owner: -\n--\n\nCREATE TRIGGER update_users_updated_at BEFORE UPDATE ON public.users FOR EACH ROW EXECUTE FUNCTION public.trigger_set_timestamp();\n\n\n--\n-- Name: workspace_memberships update_workspace_memberships_updated_at; Type: TRIGGER; Schema: public; Owner: -\n--\n\nCREATE TRIGGER update_workspace_memberships_updated_at BEFORE UPDATE ON public.workspace_memberships FOR EACH ROW EXECUTE FUNCTION public.trigger_set_timestamp();\n\n\n--\n-- Name: workspaces update_workspaces_updated_at; Type: TRIGGER; Schema: public; Owner: -\n--\n\nCREATE TRIGGER update_workspaces_updated_at BEFORE UPDATE ON public.workspaces FOR EACH ROW EXECUTE FUNCTION public.trigger_set_timestamp();\n\n\n--\n-- Name: account_deletion_audit account_deletion_audit_organization_id_fkey; Type: FK CONSTRAINT; Schema: public; Owner: -\n--\n\nALTER TABLE ONLY public.account_deletion_audit\n    ADD CONSTRAINT account_deletion_audit_organization_id_fkey FOREIGN KEY (organization_id) REFERENCES public.organizations(id) ON DELETE CASCADE;\n\n\n--\n-- Name: alert_deliveries alert_deliveries_alert_id_fkey; Type: FK CONSTRAINT; Schema: public; Owner: -\n--\n\nALTER TABLE ONLY public.alert_deliveries\n    ADD CONSTRAINT alert_deliveries_alert_id_fkey FOREIGN KEY (alert_id) REFERENCES public.alerts(id) ON DELETE CASCADE;\n\n\n--\n-- Name: alert_preferences alert_preferences_organization_id_fkey; Type: FK CONSTRAINT; Schema: public; Owner: -\n--\n\nALTER TABLE ONLY public.alert_preferences\n    ADD CONSTRAINT alert_preferences_organization_id_fkey FOREIGN KEY (organization_id) REFERENCES public.organizations(id) ON DELETE CASCADE;\n\n\n--\n-- Name: alert_preferences alert_preferences_user_id_fkey; Type: FK CONSTRAINT; Schema: public; Owner: -\n--\n\nALTER TABLE ONLY public.alert_preferences\n    ADD CONSTRAINT alert_preferences_user_id_fkey FOREIGN KEY (user_id) REFERENCES public.users(id) ON DELETE CASCADE;\n\n\n--\n-- Name: alerts alerts_component_id_fkey; Type: FK CONSTRAINT; Schema: public; Owner: -\n--\n\nALTER TABLE ONLY public.alerts\n    ADD CONSTRAINT alerts_component_id_fkey FOREIGN KEY (component_id) REFERENCES public.components(id) ON DELETE SET NULL;\n\n\n--\n-- Name: alerts alerts_organization_id_fkey; Type: FK CONSTRAINT; Schema: public; Owner: -\n--\n\nALTER TABLE ONLY public.alerts\n    ADD CONSTRAINT alerts_organization_id_fkey FOREIGN KEY (organization_id) REFERENCES public.organizations(id) ON DELETE CASCADE;\n\n\n--\n-- Name: alerts alerts_user_id_fkey; Type: FK CONSTRAINT; Schema: public; Owner: -\n--\n\nALTER TABLE ONLY public.alerts\n    ADD CONSTRAINT alerts_user_id_fkey FOREIGN KEY (user_id) REFERENCES public.users(id);\n\n\n--\n-- Name: attributes attributes_component_id_fkey; Type: FK CONSTRAINT; Schema: public; Owner: -\n--\n\nALTER TABLE ONLY public.attributes\n    ADD CONSTRAINT attributes_component_id_fkey FOREIGN KEY (component_id) REFERENCES public.components(id) ON DELETE CASCADE;\n\n\n--\n-- Name: audit_field_comparisons audit_field_comparisons_enrichment_run_id_fkey; Type: FK CONSTRAINT; Schema: public; Owner: -\n--\n\nALTER TABLE ONLY public.audit_field_comparisons\n    ADD CONSTRAINT audit_field_comparisons_enrichment_run_id_fkey FOREIGN KEY (enrichment_run_id) REFERENCES public.audit_enrichment_runs(id) ON DELETE CASCADE;\n\n\n--\n-- Name: audit_logs audit_logs_organization_id_fkey; Type: FK CONSTRAINT; Schema: public; Owner: -\n--\n\nALTER TABLE ONLY public.audit_logs\n    ADD CONSTRAINT audit_logs_organization_id_fkey FOREIGN KEY (organization_id) REFERENCES public.organizations(id) ON DELETE CASCADE;\n\n\n--\n-- Name: billing_customers billing_customers_organization_id_fkey; Type: FK CONSTRAINT; Schema: public; Owner: -\n--\n\nALTER TABLE ONLY public.billing_customers\n    ADD CONSTRAINT billing_customers_organization_id_fkey FOREIGN KEY (organization_id) REFERENCES public.organizations(id) ON DELETE CASCADE;\n\n\n--\n-- Name: bom_line_item_risk_scores bom_line_item_risk_scores_bom_line_item_id_fkey; Type: FK CONSTRAINT; Schema: public; Owner: -\n--\n\nALTER TABLE ONLY public.bom_line_item_risk_scores\n    ADD CONSTRAINT bom_line_item_risk_scores_bom_line_item_id_fkey FOREIGN KEY (bom_line_item_id) REFERENCES public.bom_line_items(id) ON DELETE CASCADE;\n\n\n--\n-- Name: bom_line_item_risk_scores bom_line_item_risk_scores_organization_id_fkey; Type: FK CONSTRAINT; Schema: public; Owner: -\n--\n\nALTER TABLE ONLY public.bom_line_item_risk_scores\n    ADD CONSTRAINT bom_line_item_risk_scores_organization_id_fkey FOREIGN KEY (organization_id) REFERENCES public.organizations(id) ON DELETE CASCADE;\n\n\n--\n-- Name: bom_line_items bom_line_items_bom_id_fkey; Type: FK CONSTRAINT; Schema: public; Owner: -\n--\n\nALTER TABLE ONLY public.bom_line_items\n    ADD CONSTRAINT bom_line_items_bom_id_fkey FOREIGN KEY (bom_id) REFERENCES public.boms(id) ON DELETE CASCADE;\n\n\n--\n-- Name: bom_processing_jobs bom_processing_jobs_bom_id_fkey; Type: FK CONSTRAINT; Schema: public; Owner: -\n--\n\nALTER TABLE ONLY public.bom_processing_jobs\n    ADD CONSTRAINT bom_processing_jobs_bom_id_fkey FOREIGN KEY (bom_id) REFERENCES public.boms(id) ON DELETE CASCADE;\n\n\n--\n-- Name: bom_processing_jobs bom_processing_jobs_organization_id_fkey; Type: FK CONSTRAINT; Schema: public; Owner: -\n--\n\nALTER TABLE ONLY public.bom_processing_jobs\n    ADD CONSTRAINT bom_processing_jobs_organization_id_fkey FOREIGN KEY (organization_id) REFERENCES public.organizations(id) ON DELETE CASCADE;\n\n\n--\n-- Name: bom_risk_summaries bom_risk_summaries_bom_id_fkey; Type: FK CONSTRAINT; Schema: public; Owner: -\n--\n\nALTER TABLE ONLY public.bom_risk_summaries\n    ADD CONSTRAINT bom_risk_summaries_bom_id_fkey FOREIGN KEY (bom_id) REFERENCES public.boms(id) ON DELETE CASCADE;\n\n\n--\n-- Name: bom_risk_summaries bom_risk_summaries_organization_id_fkey; Type: FK CONSTRAINT; Schema: public; Owner: -\n--\n\nALTER TABLE ONLY public.bom_risk_summaries\n    ADD CONSTRAINT bom_risk_summaries_organization_id_fkey FOREIGN KEY (organization_id) REFERENCES public.organizations(id) ON DELETE CASCADE;\n\n\n--\n-- Name: bom_uploads bom_uploads_bom_id_fkey; Type: FK CONSTRAINT; Schema: public; Owner: -\n--\n\nALTER TABLE ONLY public.bom_uploads\n    ADD CONSTRAINT bom_uploads_bom_id_fkey FOREIGN KEY (bom_id) REFERENCES public.boms(id) ON DELETE SET NULL;\n\n\n--\n-- Name: bom_uploads bom_uploads_organization_id_fkey; Type: FK CONSTRAINT; Schema: public; Owner: -\n--\n\nALTER TABLE ONLY public.bom_uploads\n    ADD CONSTRAINT bom_uploads_organization_id_fkey FOREIGN KEY (organization_id) REFERENCES public.organizations(id) ON DELETE CASCADE;\n\n\n--\n-- Name: bom_uploads bom_uploads_project_id_fkey; Type: FK CONSTRAINT; Schema: public; Owner: -\n--\n\nALTER TABLE ONLY public.bom_uploads\n    ADD CONSTRAINT bom_uploads_project_id_fkey FOREIGN KEY (project_id) REFERENCES public.projects(id) ON DELETE SET NULL;\n\n\n--\n-- Name: bom_uploads bom_uploads_uploaded_by_fkey; Type: FK CONSTRAINT; Schema: public; Owner: -\n--\n\nALTER TABLE ONLY public.bom_uploads\n    ADD CONSTRAINT bom_uploads_uploaded_by_fkey FOREIGN KEY (uploaded_by) REFERENCES public.users(id);\n\n\n--\n-- Name: boms boms_organization_id_fkey; Type: FK CONSTRAINT; Schema: public; Owner: -\n--\n\nALTER TABLE ONLY public.boms\n    ADD CONSTRAINT boms_organization_id_fkey FOREIGN KEY (organization_id) REFERENCES public.organizations(id) ON DELETE CASCADE;\n\n\n--\n-- Name: boms boms_project_id_fkey; Type: FK CONSTRAINT; Schema: public; Owner: -\n--\n\nALTER TABLE ONLY public.boms\n    ADD CONSTRAINT boms_project_id_fkey FOREIGN KEY (project_id) REFERENCES public.projects(id) ON DELETE SET NULL;\n\n\n--\n-- Name: categories categories_parent_id_fkey; Type: FK CONSTRAINT; Schema: public; Owner: -\n--\n\nALTER TABLE ONLY public.categories\n    ADD CONSTRAINT categories_parent_id_fkey FOREIGN KEY (parent_id) REFERENCES public.categories(id) ON DELETE CASCADE;\n\n\n--\n-- Name: cns_bulk_uploads cns_bulk_uploads_organization_id_fkey; Type: FK CONSTRAINT; Schema: public; Owner: -\n--\n\nALTER TABLE ONLY public.cns_bulk_uploads\n    ADD CONSTRAINT cns_bulk_uploads_organization_id_fkey FOREIGN KEY (organization_id) REFERENCES public.organizations(id) ON DELETE CASCADE;\n\n\n--\n-- Name: cns_bulk_uploads cns_bulk_uploads_project_id_fkey; Type: FK CONSTRAINT; Schema: public; Owner: -\n--\n\nALTER TABLE ONLY public.cns_bulk_uploads\n    ADD CONSTRAINT cns_bulk_uploads_project_id_fkey FOREIGN KEY (project_id) REFERENCES public.projects(id);\n\n\n--\n-- Name: cns_processing_events cns_processing_events_bom_id_fkey; Type: FK CONSTRAINT; Schema: public; Owner: -\n--\n\nALTER TABLE ONLY public.cns_processing_events\n    ADD CONSTRAINT cns_processing_events_bom_id_fkey FOREIGN KEY (bom_id) REFERENCES public.boms(id) ON DELETE CASCADE;\n\n\n--\n-- Name: cns_processing_events cns_processing_events_organization_id_fkey; Type: FK CONSTRAINT; Schema: public; Owner: -\n--\n\nALTER TABLE ONLY public.cns_processing_events\n    ADD CONSTRAINT cns_processing_events_organization_id_fkey FOREIGN KEY (organization_id) REFERENCES public.organizations(id) ON DELETE CASCADE;\n\n\n--\n-- Name: column_mapping_templates column_mapping_templates_created_by_fkey; Type: FK CONSTRAINT; Schema: public; Owner: -\n--\n\nALTER TABLE ONLY public.column_mapping_templates\n    ADD CONSTRAINT column_mapping_templates_created_by_fkey FOREIGN KEY (created_by) REFERENCES public.users(id);\n\n\n--\n-- Name: column_mapping_templates column_mapping_templates_organization_id_fkey; Type: FK CONSTRAINT; Schema: public; Owner: -\n--\n\nALTER TABLE ONLY public.column_mapping_templates\n    ADD CONSTRAINT column_mapping_templates_organization_id_fkey FOREIGN KEY (organization_id) REFERENCES public.organizations(id) ON DELETE CASCADE;\n\n\n--\n-- Name: component_base_risk_scores component_base_risk_scores_component_id_fkey; Type: FK CONSTRAINT; Schema: public; Owner: -\n--\n\nALTER TABLE ONLY public.component_base_risk_scores\n    ADD CONSTRAINT component_base_risk_scores_component_id_fkey FOREIGN KEY (component_id) REFERENCES public.components(id) ON DELETE CASCADE;\n\n\n--\n-- Name: component_watches component_watches_component_id_fkey; Type: FK CONSTRAINT; Schema: public; Owner: -\n--\n\nALTER TABLE ONLY public.component_watches\n    ADD CONSTRAINT component_watches_component_id_fkey FOREIGN KEY (component_id) REFERENCES public.components(id) ON DELETE CASCADE;\n\n\n--\n-- Name: component_watches component_watches_organization_id_fkey; Type: FK CONSTRAINT; Schema: public; Owner: -\n--\n\nALTER TABLE ONLY public.component_watches\n    ADD CONSTRAINT component_watches_organization_id_fkey FOREIGN KEY (organization_id) REFERENCES public.organizations(id) ON DELETE CASCADE;\n\n\n--\n-- Name: component_watches component_watches_user_id_fkey; Type: FK CONSTRAINT; Schema: public; Owner: -\n--\n\nALTER TABLE ONLY public.component_watches\n    ADD CONSTRAINT component_watches_user_id_fkey FOREIGN KEY (user_id) REFERENCES public.users(id) ON DELETE CASCADE;\n\n\n--\n-- Name: components components_category_id_fkey; Type: FK CONSTRAINT; Schema: public; Owner: -\n--\n\nALTER TABLE ONLY public.components\n    ADD CONSTRAINT components_category_id_fkey FOREIGN KEY (category_id) REFERENCES public.categories(id) ON DELETE SET NULL;\n\n\n--\n-- Name: components components_manufacturer_id_fkey; Type: FK CONSTRAINT; Schema: public; Owner: -\n--\n\nALTER TABLE ONLY public.components\n    ADD CONSTRAINT components_manufacturer_id_fkey FOREIGN KEY (manufacturer_id) REFERENCES public.manufacturers(id) ON DELETE SET NULL;\n\n\n--\n-- Name: components components_organization_id_fkey; Type: FK CONSTRAINT; Schema: public; Owner: -\n--\n\nALTER TABLE ONLY public.components\n    ADD CONSTRAINT components_organization_id_fkey FOREIGN KEY (organization_id) REFERENCES public.organizations(id) ON DELETE CASCADE;\n\n\n--\n-- Name: enrichment_audit_log enrichment_audit_log_bom_id_fkey; Type: FK CONSTRAINT; Schema: public; Owner: -\n--\n\nALTER TABLE ONLY public.enrichment_audit_log\n    ADD CONSTRAINT enrichment_audit_log_bom_id_fkey FOREIGN KEY (bom_id) REFERENCES public.boms(id) ON DELETE CASCADE;\n\n\n--\n-- Name: enrichment_audit_log enrichment_audit_log_organization_id_fkey; Type: FK CONSTRAINT; Schema: public; Owner: -\n--\n\nALTER TABLE ONLY public.enrichment_audit_log\n    ADD CONSTRAINT enrichment_audit_log_organization_id_fkey FOREIGN KEY (organization_id) REFERENCES public.organizations(id) ON DELETE CASCADE;\n\n\n--\n-- Name: enrichment_queue enrichment_queue_bom_id_fkey; Type: FK CONSTRAINT; Schema: public; Owner: -\n--\n\nALTER TABLE ONLY public.enrichment_queue\n    ADD CONSTRAINT enrichment_queue_bom_id_fkey FOREIGN KEY (bom_id) REFERENCES public.boms(id) ON DELETE CASCADE;\n\n\n--\n-- Name: enrichment_queue enrichment_queue_organization_id_fkey; Type: FK CONSTRAINT; Schema: public; Owner: -\n--\n\nALTER TABLE ONLY public.enrichment_queue\n    ADD CONSTRAINT enrichment_queue_organization_id_fkey FOREIGN KEY (organization_id) REFERENCES public.organizations(id) ON DELETE CASCADE;\n\n\n--\n-- Name: invoice_line_items invoice_line_items_invoice_id_fkey; Type: FK CONSTRAINT; Schema: public; Owner: -\n--\n\nALTER TABLE ONLY public.invoice_line_items\n    ADD CONSTRAINT invoice_line_items_invoice_id_fkey FOREIGN KEY (invoice_id) REFERENCES public.invoices(id) ON DELETE CASCADE;\n\n\n--\n-- Name: invoices invoices_billing_customer_id_fkey; Type: FK CONSTRAINT; Schema: public; Owner: -\n--\n\nALTER TABLE ONLY public.invoices\n    ADD CONSTRAINT invoices_billing_customer_id_fkey FOREIGN KEY (billing_customer_id) REFERENCES public.billing_customers(id) ON DELETE RESTRICT;\n\n\n--\n-- Name: invoices invoices_organization_id_fkey; Type: FK CONSTRAINT; Schema: public; Owner: -\n--\n\nALTER TABLE ONLY public.invoices\n    ADD CONSTRAINT invoices_organization_id_fkey FOREIGN KEY (organization_id) REFERENCES public.organizations(id) ON DELETE CASCADE;\n\n\n--\n-- Name: invoices invoices_subscription_id_fkey; Type: FK CONSTRAINT; Schema: public; Owner: -\n--\n\nALTER TABLE ONLY public.invoices\n    ADD CONSTRAINT invoices_subscription_id_fkey FOREIGN KEY (subscription_id) REFERENCES public.subscriptions(id);\n\n\n--\n-- Name: notifications notifications_organization_id_fkey; Type: FK CONSTRAINT; Schema: public; Owner: -\n--\n\nALTER TABLE ONLY public.notifications\n    ADD CONSTRAINT notifications_organization_id_fkey FOREIGN KEY (organization_id) REFERENCES public.organizations(id) ON DELETE CASCADE;\n\n\n--\n-- Name: notifications notifications_user_id_fkey; Type: FK CONSTRAINT; Schema: public; Owner: -\n--\n\nALTER TABLE ONLY public.notifications\n    ADD CONSTRAINT notifications_user_id_fkey FOREIGN KEY (user_id) REFERENCES public.users(id) ON DELETE CASCADE;\n\n\n--\n-- Name: onboarding_events onboarding_events_organization_id_fkey; Type: FK CONSTRAINT; Schema: public; Owner: -\n--\n\nALTER TABLE ONLY public.onboarding_events\n    ADD CONSTRAINT onboarding_events_organization_id_fkey FOREIGN KEY (organization_id) REFERENCES public.organizations(id) ON DELETE CASCADE;\n\n\n--\n-- Name: onboarding_events onboarding_events_user_id_fkey; Type: FK CONSTRAINT; Schema: public; Owner: -\n--\n\nALTER TABLE ONLY public.onboarding_events\n    ADD CONSTRAINT onboarding_events_user_id_fkey FOREIGN KEY (user_id) REFERENCES public.users(id) ON DELETE CASCADE;\n\n\n--\n-- Name: organization_memberships organization_memberships_invited_by_fkey; Type: FK CONSTRAINT; Schema: public; Owner: -\n--\n\nALTER TABLE ONLY public.organization_memberships\n    ADD CONSTRAINT organization_memberships_invited_by_fkey FOREIGN KEY (invited_by) REFERENCES public.users(id);\n\n\n--\n-- Name: organization_memberships organization_memberships_organization_id_fkey; Type: FK CONSTRAINT; Schema: public; Owner: -\n--\n\nALTER TABLE ONLY public.organization_memberships\n    ADD CONSTRAINT organization_memberships_organization_id_fkey FOREIGN KEY (organization_id) REFERENCES public.organizations(id) ON DELETE CASCADE;\n\n\n--\n-- Name: organization_memberships organization_memberships_user_id_fkey; Type: FK CONSTRAINT; Schema: public; Owner: -\n--\n\nALTER TABLE ONLY public.organization_memberships\n    ADD CONSTRAINT organization_memberships_user_id_fkey FOREIGN KEY (user_id) REFERENCES public.users(id) ON DELETE CASCADE;\n\n\n--\n-- Name: organization_risk_profiles organization_risk_profiles_created_by_fkey; Type: FK CONSTRAINT; Schema: public; Owner: -\n--\n\nALTER TABLE ONLY public.organization_risk_profiles\n    ADD CONSTRAINT organization_risk_profiles_created_by_fkey FOREIGN KEY (created_by) REFERENCES public.users(id);\n\n\n--\n-- Name: organization_risk_profiles organization_risk_profiles_organization_id_fkey; Type: FK CONSTRAINT; Schema: public; Owner: -\n--\n\nALTER TABLE ONLY public.organization_risk_profiles\n    ADD CONSTRAINT organization_risk_profiles_organization_id_fkey FOREIGN KEY (organization_id) REFERENCES public.organizations(id) ON DELETE CASCADE;\n\n\n--\n-- Name: organization_risk_profiles organization_risk_profiles_updated_by_fkey; Type: FK CONSTRAINT; Schema: public; Owner: -\n--\n\nALTER TABLE ONLY public.organization_risk_profiles\n    ADD CONSTRAINT organization_risk_profiles_updated_by_fkey FOREIGN KEY (updated_by) REFERENCES public.users(id);\n\n\n--\n-- Name: organization_settings_audit organization_settings_audit_organization_id_fkey; Type: FK CONSTRAINT; Schema: public; Owner: -\n--\n\nALTER TABLE ONLY public.organization_settings_audit\n    ADD CONSTRAINT organization_settings_audit_organization_id_fkey FOREIGN KEY (organization_id) REFERENCES public.organizations(id) ON DELETE CASCADE;\n\n\n--\n-- Name: payment_methods payment_methods_billing_customer_id_fkey; Type: FK CONSTRAINT; Schema: public; Owner: -\n--\n\nALTER TABLE ONLY public.payment_methods\n    ADD CONSTRAINT payment_methods_billing_customer_id_fkey FOREIGN KEY (billing_customer_id) REFERENCES public.billing_customers(id) ON DELETE CASCADE;\n\n\n--\n-- Name: payments payments_billing_customer_id_fkey; Type: FK CONSTRAINT; Schema: public; Owner: -\n--\n\nALTER TABLE ONLY public.payments\n    ADD CONSTRAINT payments_billing_customer_id_fkey FOREIGN KEY (billing_customer_id) REFERENCES public.billing_customers(id) ON DELETE RESTRICT;\n\n\n--\n-- Name: payments payments_invoice_id_fkey; Type: FK CONSTRAINT; Schema: public; Owner: -\n--\n\nALTER TABLE ONLY public.payments\n    ADD CONSTRAINT payments_invoice_id_fkey FOREIGN KEY (invoice_id) REFERENCES public.invoices(id);\n\n\n--\n-- Name: payments payments_payment_method_id_fkey; Type: FK CONSTRAINT; Schema: public; Owner: -\n--\n\nALTER TABLE ONLY public.payments\n    ADD CONSTRAINT payments_payment_method_id_fkey FOREIGN KEY (payment_method_id) REFERENCES public.payment_methods(id);\n\n\n--\n-- Name: payments payments_subscription_id_fkey; Type: FK CONSTRAINT; Schema: public; Owner: -\n--\n\nALTER TABLE ONLY public.payments\n    ADD CONSTRAINT payments_subscription_id_fkey FOREIGN KEY (subscription_id) REFERENCES public.subscriptions(id);\n\n\n--\n-- Name: project_members project_members_project_id_fkey; Type: FK CONSTRAINT; Schema: public; Owner: -\n--\n\nALTER TABLE ONLY public.project_members\n    ADD CONSTRAINT project_members_project_id_fkey FOREIGN KEY (project_id) REFERENCES public.projects(id) ON DELETE CASCADE;\n\n\n--\n-- Name: project_members project_members_user_id_fkey; Type: FK CONSTRAINT; Schema: public; Owner: -\n--\n\nALTER TABLE ONLY public.project_members\n    ADD CONSTRAINT project_members_user_id_fkey FOREIGN KEY (user_id) REFERENCES public.users(id) ON DELETE CASCADE;\n\n\n--\n-- Name: project_risk_summaries project_risk_summaries_organization_id_fkey; Type: FK CONSTRAINT; Schema: public; Owner: -\n--\n\nALTER TABLE ONLY public.project_risk_summaries\n    ADD CONSTRAINT project_risk_summaries_organization_id_fkey FOREIGN KEY (organization_id) REFERENCES public.organizations(id) ON DELETE CASCADE;\n\n\n--\n-- Name: project_risk_summaries project_risk_summaries_project_id_fkey; Type: FK CONSTRAINT; Schema: public; Owner: -\n--\n\nALTER TABLE ONLY public.project_risk_summaries\n    ADD CONSTRAINT project_risk_summaries_project_id_fkey FOREIGN KEY (project_id) REFERENCES public.projects(id) ON DELETE CASCADE;\n\n\n--\n-- Name: projects projects_created_by_fkey; Type: FK CONSTRAINT; Schema: public; Owner: -\n--\n\nALTER TABLE ONLY public.projects\n    ADD CONSTRAINT projects_created_by_fkey FOREIGN KEY (created_by) REFERENCES public.users(id);\n\n\n--\n-- Name: projects projects_organization_id_fkey; Type: FK CONSTRAINT; Schema: public; Owner: -\n--\n\nALTER TABLE ONLY public.projects\n    ADD CONSTRAINT projects_organization_id_fkey FOREIGN KEY (organization_id) REFERENCES public.organizations(id) ON DELETE CASCADE;\n\n\n--\n-- Name: projects projects_workspace_id_fkey; Type: FK CONSTRAINT; Schema: public; Owner: -\n--\n\nALTER TABLE ONLY public.projects\n    ADD CONSTRAINT projects_workspace_id_fkey FOREIGN KEY (workspace_id) REFERENCES public.workspaces(id) ON DELETE CASCADE;\n\n\n--\n-- Name: risk_score_history risk_score_history_organization_id_fkey; Type: FK CONSTRAINT; Schema: public; Owner: -\n--\n\nALTER TABLE ONLY public.risk_score_history\n    ADD CONSTRAINT risk_score_history_organization_id_fkey FOREIGN KEY (organization_id) REFERENCES public.organizations(id) ON DELETE CASCADE;\n\n\n--\n-- Name: subscriptions subscriptions_organization_id_fkey; Type: FK CONSTRAINT; Schema: public; Owner: -\n--\n\nALTER TABLE ONLY public.subscriptions\n    ADD CONSTRAINT subscriptions_organization_id_fkey FOREIGN KEY (organization_id) REFERENCES public.organizations(id) ON DELETE CASCADE;\n\n\n--\n-- Name: subscriptions subscriptions_plan_id_fkey; Type: FK CONSTRAINT; Schema: public; Owner: -\n--\n\nALTER TABLE ONLY public.subscriptions\n    ADD CONSTRAINT subscriptions_plan_id_fkey FOREIGN KEY (plan_id) REFERENCES public.subscription_plans(id);\n\n\n--\n-- Name: usage_records usage_records_organization_id_fkey; Type: FK CONSTRAINT; Schema: public; Owner: -\n--\n\nALTER TABLE ONLY public.usage_records\n    ADD CONSTRAINT usage_records_organization_id_fkey FOREIGN KEY (organization_id) REFERENCES public.organizations(id) ON DELETE CASCADE;\n\n\n--\n-- Name: usage_records usage_records_subscription_id_fkey; Type: FK CONSTRAINT; Schema: public; Owner: -\n--\n\nALTER TABLE ONLY public.usage_records\n    ADD CONSTRAINT usage_records_subscription_id_fkey FOREIGN KEY (subscription_id) REFERENCES public.subscriptions(id);\n\n\n--\n-- Name: user_preferences user_preferences_last_organization_id_fkey; Type: FK CONSTRAINT; Schema: public; Owner: -\n--\n\nALTER TABLE ONLY public.user_preferences\n    ADD CONSTRAINT user_preferences_last_organization_id_fkey FOREIGN KEY (last_organization_id) REFERENCES public.organizations(id) ON DELETE SET NULL;\n\n\n--\n-- Name: user_preferences user_preferences_user_id_fkey; Type: FK CONSTRAINT; Schema: public; Owner: -\n--\n\nALTER TABLE ONLY public.user_preferences\n    ADD CONSTRAINT user_preferences_user_id_fkey FOREIGN KEY (user_id) REFERENCES public.users(id) ON DELETE CASCADE;\n\n\n--\n-- Name: workspace_members workspace_members_user_id_fkey; Type: FK CONSTRAINT; Schema: public; Owner: -\n--\n\nALTER TABLE ONLY public.workspace_members\n    ADD CONSTRAINT workspace_members_user_id_fkey FOREIGN KEY (user_id) REFERENCES public.users(id) ON DELETE CASCADE;\n\n\n--\n-- Name: workspace_members workspace_members_workspace_id_fkey; Type: FK CONSTRAINT; Schema: public; Owner: -\n--\n\nALTER TABLE ONLY public.workspace_members\n    ADD CONSTRAINT workspace_members_workspace_id_fkey FOREIGN KEY (workspace_id) REFERENCES public.workspaces(id) ON DELETE CASCADE;\n\n\n--\n-- Name: workspace_memberships workspace_memberships_user_id_fkey; Type: FK CONSTRAINT; Schema: public; Owner: -\n--\n\nALTER TABLE ONLY public.workspace_memberships\n    ADD CONSTRAINT workspace_memberships_user_id_fkey FOREIGN KEY (user_id) REFERENCES public.users(id) ON DELETE CASCADE;\n\n\n--\n-- Name: workspace_memberships workspace_memberships_workspace_id_fkey; Type: FK CONSTRAINT; Schema: public; Owner: -\n--\n\nALTER TABLE ONLY public.workspace_memberships\n    ADD CONSTRAINT workspace_memberships_workspace_id_fkey FOREIGN KEY (workspace_id) REFERENCES public.workspaces(id) ON DELETE CASCADE;\n\n\n--\n-- Name: workspaces workspaces_created_by_fkey; Type: FK CONSTRAINT; Schema: public; Owner: -\n--\n\nALTER TABLE ONLY public.workspaces\n    ADD CONSTRAINT workspaces_created_by_fkey FOREIGN KEY (created_by) REFERENCES public.users(id);\n\n\n--\n-- Name: workspaces workspaces_organization_id_fkey; Type: FK CONSTRAINT; Schema: public; Owner: -\n--\n\nALTER TABLE ONLY public.workspaces\n    ADD CONSTRAINT workspaces_organization_id_fkey FOREIGN KEY (organization_id) REFERENCES public.organizations(id) ON DELETE CASCADE;\n\n\n--\n-- PostgreSQL database dump complete\n--\n\n",
              "002_COMPONENTS_V2_MASTER.sql": "--\n-- PostgreSQL database dump\n--\n\n\\restrict hPan59i0usRaeno6ymYELAxBJwHbFaS4Fw1d0qUCZN8VX1AjFUnGxxnICRj1gi4\n\n-- Dumped from database version 15.15\n-- Dumped by pg_dump version 15.15\n\nSET statement_timeout = 0;\nSET lock_timeout = 0;\nSET idle_in_transaction_session_timeout = 0;\nSET client_encoding = 'UTF8';\nSET standard_conforming_strings = on;\nSELECT pg_catalog.set_config('search_path', '', false);\nSET check_function_bodies = false;\nSET xmloption = content;\nSET client_min_messages = warning;\nSET row_security = off;\n\nALTER TABLE IF EXISTS ONLY public.vendor_category_mappings DROP CONSTRAINT IF EXISTS vendor_category_mappings_canonical_category_id_fkey;\nALTER TABLE IF EXISTS ONLY public.supplier_settings DROP CONSTRAINT IF EXISTS supplier_settings_supplier_id_fkey;\nALTER TABLE IF EXISTS ONLY public.supplier_performance_metrics DROP CONSTRAINT IF EXISTS supplier_performance_metrics_supplier_id_fkey;\nALTER TABLE IF EXISTS ONLY public.enrichment_queue DROP CONSTRAINT IF EXISTS enrichment_queue_batch_job_id_fkey;\nALTER TABLE IF EXISTS ONLY public.components DROP CONSTRAINT IF EXISTS components_manufacturer_id_fkey;\nALTER TABLE IF EXISTS ONLY public.components DROP CONSTRAINT IF EXISTS components_category_id_fkey;\nALTER TABLE IF EXISTS ONLY public.component_pricing DROP CONSTRAINT IF EXISTS component_pricing_supplier_id_fkey;\nALTER TABLE IF EXISTS ONLY public.component_pricing DROP CONSTRAINT IF EXISTS component_pricing_component_id_fkey;\nALTER TABLE IF EXISTS ONLY public.component_lifecycle DROP CONSTRAINT IF EXISTS component_lifecycle_component_id_fkey;\nALTER TABLE IF EXISTS ONLY public.categories DROP CONSTRAINT IF EXISTS categories_parent_id_fkey;\nALTER TABLE IF EXISTS ONLY public.catalog_category_mappings DROP CONSTRAINT IF EXISTS catalog_category_mappings_normalized_category_id_fkey;\nALTER TABLE IF EXISTS ONLY public.catalog_categories DROP CONSTRAINT IF EXISTS catalog_categories_parent_id_fkey;\nALTER TABLE IF EXISTS ONLY public.audit_field_comparisons DROP CONSTRAINT IF EXISTS audit_field_comparisons_enrichment_run_id_fkey;\nDROP TRIGGER IF EXISTS update_suppliers_updated_at ON public.suppliers;\nDROP TRIGGER IF EXISTS update_manufacturers_updated_at ON public.manufacturers;\nDROP TRIGGER IF EXISTS update_components_updated_at ON public.components;\nDROP TRIGGER IF EXISTS update_component_pricing_updated_at ON public.component_pricing;\nDROP TRIGGER IF EXISTS update_categories_updated_at ON public.categories;\nDROP TRIGGER IF EXISTS trg_ensure_single_default_template ON public.column_mapping_templates;\nDROP TRIGGER IF EXISTS trg_component_catalog_updated_at ON public.component_catalog;\nDROP TRIGGER IF EXISTS trg_column_mapping_templates_updated_at ON public.column_mapping_templates;\nDROP TRIGGER IF EXISTS audit_supplier_quality_updated_at ON public.audit_supplier_quality;\nDROP TRIGGER IF EXISTS audit_enrichment_runs_updated_at ON public.audit_enrichment_runs;\nDROP INDEX IF EXISTS public.idx_vcm_vendor;\nDROP INDEX IF EXISTS public.idx_vcm_canonical;\nDROP INDEX IF EXISTS public.idx_suppliers_name;\nDROP INDEX IF EXISTS public.idx_supplier_tokens_expires_at;\nDROP INDEX IF EXISTS public.idx_supplier_responses_line;\nDROP INDEX IF EXISTS public.idx_supplier_responses_job;\nDROP INDEX IF EXISTS public.idx_supplier_performance_date;\nDROP INDEX IF EXISTS public.idx_redis_component_snapshot_status;\nDROP INDEX IF EXISTS public.idx_redis_component_snapshot_mpn;\nDROP INDEX IF EXISTS public.idx_pricing_supplier;\nDROP INDEX IF EXISTS public.idx_pricing_component;\nDROP INDEX IF EXISTS public.idx_manufacturers_name;\nDROP INDEX IF EXISTS public.idx_enrichment_queue_status;\nDROP INDEX IF EXISTS public.idx_enrichment_queue_priority;\nDROP INDEX IF EXISTS public.idx_enrichment_history_status;\nDROP INDEX IF EXISTS public.idx_enrichment_history_mpn;\nDROP INDEX IF EXISTS public.idx_enrichment_batch_jobs_status;\nDROP INDEX IF EXISTS public.idx_enrichment_batch_jobs_org;\nDROP INDEX IF EXISTS public.idx_components_specs;\nDROP INDEX IF EXISTS public.idx_components_quality;\nDROP INDEX IF EXISTS public.idx_components_mpn;\nDROP INDEX IF EXISTS public.idx_components_manufacturer;\nDROP INDEX IF EXISTS public.idx_components_lifecycle;\nDROP INDEX IF EXISTS public.idx_components_confidence;\nDROP INDEX IF EXISTS public.idx_components_category;\nDROP INDEX IF EXISTS public.idx_component_storage_tracking_mpn;\nDROP INDEX IF EXISTS public.idx_component_storage_tracking_location;\nDROP INDEX IF EXISTS public.idx_component_lifecycle_status;\nDROP INDEX IF EXISTS public.idx_component_lifecycle_mpn;\nDROP INDEX IF EXISTS public.idx_component_catalog_usage;\nDROP INDEX IF EXISTS public.idx_component_catalog_supplier_data;\nDROP INDEX IF EXISTS public.idx_component_catalog_specs;\nDROP INDEX IF EXISTS public.idx_component_catalog_quality;\nDROP INDEX IF EXISTS public.idx_component_catalog_mpn_mfr;\nDROP INDEX IF EXISTS public.idx_component_catalog_mpn;\nDROP INDEX IF EXISTS public.idx_component_catalog_manufacturer;\nDROP INDEX IF EXISTS public.idx_component_catalog_lifecycle;\nDROP INDEX IF EXISTS public.idx_component_catalog_category;\nDROP INDEX IF EXISTS public.idx_column_mapping_org;\nDROP INDEX IF EXISTS public.idx_column_mapping_mappings;\nDROP INDEX IF EXISTS public.idx_column_mapping_default;\nDROP INDEX IF EXISTS public.idx_column_mapping_created;\nDROP INDEX IF EXISTS public.idx_cns_config_key;\nDROP INDEX IF EXISTS public.idx_cns_config_category;\nDROP INDEX IF EXISTS public.idx_categories_path;\nDROP INDEX IF EXISTS public.idx_categories_parent;\nDROP INDEX IF EXISTS public.idx_categories_name;\nDROP INDEX IF EXISTS public.idx_categories_level;\nDROP INDEX IF EXISTS public.idx_categories_digikey_id;\nDROP INDEX IF EXISTS public.idx_catalog_manufacturers_name;\nDROP INDEX IF EXISTS public.idx_catalog_components_table_mpn;\nDROP INDEX IF EXISTS public.idx_catalog_components_table_manufacturer;\nDROP INDEX IF EXISTS public.idx_catalog_category_mappings_vendor;\nDROP INDEX IF EXISTS public.idx_catalog_categories_parent;\nDROP INDEX IF EXISTS public.idx_catalog_categories_name;\nDROP INDEX IF EXISTS public.idx_audit_supplier_quality_supplier;\nDROP INDEX IF EXISTS public.idx_audit_supplier_quality_date;\nDROP INDEX IF EXISTS public.idx_audit_field_comparisons_run;\nDROP INDEX IF EXISTS public.idx_audit_field_comparisons_field;\nDROP INDEX IF EXISTS public.idx_audit_field_comparisons_changed;\nDROP INDEX IF EXISTS public.idx_audit_field_comparisons_category;\nDROP INDEX IF EXISTS public.idx_audit_enrichment_runs_upload_id;\nDROP INDEX IF EXISTS public.idx_audit_enrichment_runs_timestamp;\nDROP INDEX IF EXISTS public.idx_audit_enrichment_runs_supplier;\nDROP INDEX IF EXISTS public.idx_audit_enrichment_runs_quality;\nDROP INDEX IF EXISTS public.idx_audit_enrichment_runs_needs_review;\nDROP INDEX IF EXISTS public.idx_audit_enrichment_runs_mpn;\nDROP INDEX IF EXISTS public.idx_audit_enrichment_runs_line_id;\nALTER TABLE IF EXISTS ONLY public.vendor_category_mappings DROP CONSTRAINT IF EXISTS vendor_category_mappings_pkey;\nALTER TABLE IF EXISTS ONLY public.column_mapping_templates DROP CONSTRAINT IF EXISTS uq_org_template_name;\nALTER TABLE IF EXISTS ONLY public.component_catalog DROP CONSTRAINT IF EXISTS uq_component_catalog_mpn_mfr;\nALTER TABLE IF EXISTS ONLY public.audit_supplier_quality DROP CONSTRAINT IF EXISTS uq_audit_supplier_quality_date_supplier;\nALTER TABLE IF EXISTS ONLY public.vendor_category_mappings DROP CONSTRAINT IF EXISTS unique_vendor_category;\nALTER TABLE IF EXISTS ONLY public.components DROP CONSTRAINT IF EXISTS unique_mpn_manufacturer;\nALTER TABLE IF EXISTS ONLY public.suppliers DROP CONSTRAINT IF EXISTS suppliers_pkey;\nALTER TABLE IF EXISTS ONLY public.suppliers DROP CONSTRAINT IF EXISTS suppliers_name_key;\nALTER TABLE IF EXISTS ONLY public.supplier_tokens DROP CONSTRAINT IF EXISTS supplier_tokens_pkey;\nALTER TABLE IF EXISTS ONLY public.supplier_settings DROP CONSTRAINT IF EXISTS supplier_settings_supplier_name_key;\nALTER TABLE IF EXISTS ONLY public.supplier_settings DROP CONSTRAINT IF EXISTS supplier_settings_pkey;\nALTER TABLE IF EXISTS ONLY public.supplier_rate_limits DROP CONSTRAINT IF EXISTS supplier_rate_limits_supplier_name_key;\nALTER TABLE IF EXISTS ONLY public.supplier_rate_limits DROP CONSTRAINT IF EXISTS supplier_rate_limits_pkey;\nALTER TABLE IF EXISTS ONLY public.supplier_performance_metrics DROP CONSTRAINT IF EXISTS supplier_performance_metrics_supplier_name_date_key;\nALTER TABLE IF EXISTS ONLY public.supplier_performance_metrics DROP CONSTRAINT IF EXISTS supplier_performance_metrics_pkey;\nALTER TABLE IF EXISTS ONLY public.supplier_enrichment_responses DROP CONSTRAINT IF EXISTS supplier_enrichment_responses_pkey;\nALTER TABLE IF EXISTS ONLY public.service_connectivity_matrix DROP CONSTRAINT IF EXISTS service_connectivity_matrix_source_service_target_service_key;\nALTER TABLE IF EXISTS ONLY public.service_connectivity_matrix DROP CONSTRAINT IF EXISTS service_connectivity_matrix_pkey;\nALTER TABLE IF EXISTS ONLY public.s3_cache_config DROP CONSTRAINT IF EXISTS s3_cache_config_pkey;\nALTER TABLE IF EXISTS ONLY public.redis_temporal_config DROP CONSTRAINT IF EXISTS redis_temporal_config_pkey;\nALTER TABLE IF EXISTS ONLY public.redis_sync_log DROP CONSTRAINT IF EXISTS redis_sync_log_pkey;\nALTER TABLE IF EXISTS ONLY public.redis_sync_lock DROP CONSTRAINT IF EXISTS redis_sync_lock_pkey;\nALTER TABLE IF EXISTS ONLY public.redis_s3_metadata_config DROP CONSTRAINT IF EXISTS redis_s3_metadata_config_pkey;\nALTER TABLE IF EXISTS ONLY public.redis_rate_limits DROP CONSTRAINT IF EXISTS redis_rate_limits_pkey;\nALTER TABLE IF EXISTS ONLY public.redis_key_expiration_policy DROP CONSTRAINT IF EXISTS redis_key_expiration_policy_pkey;\nALTER TABLE IF EXISTS ONLY public.redis_health_checks DROP CONSTRAINT IF EXISTS redis_health_checks_pkey;\nALTER TABLE IF EXISTS ONLY public.redis_health_check DROP CONSTRAINT IF EXISTS redis_health_check_pkey;\nALTER TABLE IF EXISTS ONLY public.redis_directus_config DROP CONSTRAINT IF EXISTS redis_directus_config_pkey;\nALTER TABLE IF EXISTS ONLY public.redis_connection_config DROP CONSTRAINT IF EXISTS redis_connection_config_pkey;\nALTER TABLE IF EXISTS ONLY public.redis_component_snapshot DROP CONSTRAINT IF EXISTS redis_component_snapshot_pkey;\nALTER TABLE IF EXISTS ONLY public.redis_component_cache_config DROP CONSTRAINT IF EXISTS redis_component_cache_config_pkey;\nALTER TABLE IF EXISTS ONLY public.redis_cns_config DROP CONSTRAINT IF EXISTS redis_cns_config_pkey;\nALTER TABLE IF EXISTS ONLY public.redis_circuit_breakers DROP CONSTRAINT IF EXISTS redis_circuit_breakers_pkey;\nALTER TABLE IF EXISTS ONLY public.redis_cache_config DROP CONSTRAINT IF EXISTS redis_cache_config_pkey;\nALTER TABLE IF EXISTS ONLY public.rate_limit_config DROP CONSTRAINT IF EXISTS rate_limit_config_service_name_key;\nALTER TABLE IF EXISTS ONLY public.rate_limit_config DROP CONSTRAINT IF EXISTS rate_limit_config_pkey;\nALTER TABLE IF EXISTS ONLY public.manufacturers DROP CONSTRAINT IF EXISTS manufacturers_pkey;\nALTER TABLE IF EXISTS ONLY public.manufacturers DROP CONSTRAINT IF EXISTS manufacturers_name_key;\nALTER TABLE IF EXISTS ONLY public.enrichment_queue DROP CONSTRAINT IF EXISTS enrichment_queue_pkey;\nALTER TABLE IF EXISTS ONLY public.enrichment_history DROP CONSTRAINT IF EXISTS enrichment_history_pkey;\nALTER TABLE IF EXISTS ONLY public.enrichment_config DROP CONSTRAINT IF EXISTS enrichment_config_pkey;\nALTER TABLE IF EXISTS ONLY public.enrichment_batch_jobs DROP CONSTRAINT IF EXISTS enrichment_batch_jobs_pkey;\nALTER TABLE IF EXISTS ONLY public.components DROP CONSTRAINT IF EXISTS components_pkey;\nALTER TABLE IF EXISTS ONLY public.component_storage_tracking DROP CONSTRAINT IF EXISTS component_storage_tracking_pkey;\nALTER TABLE IF EXISTS ONLY public.component_pricing DROP CONSTRAINT IF EXISTS component_pricing_pkey;\nALTER TABLE IF EXISTS ONLY public.component_lifecycle DROP CONSTRAINT IF EXISTS component_lifecycle_pkey;\nALTER TABLE IF EXISTS ONLY public.component_catalog DROP CONSTRAINT IF EXISTS component_catalog_pkey;\nALTER TABLE IF EXISTS ONLY public.column_mapping_templates DROP CONSTRAINT IF EXISTS column_mapping_templates_pkey;\nALTER TABLE IF EXISTS ONLY public.cns_supplier_settings DROP CONSTRAINT IF EXISTS cns_supplier_settings_supplier_name_key;\nALTER TABLE IF EXISTS ONLY public.cns_supplier_settings DROP CONSTRAINT IF EXISTS cns_supplier_settings_pkey;\nALTER TABLE IF EXISTS ONLY public.cns_enrichment_config DROP CONSTRAINT IF EXISTS cns_enrichment_config_pkey;\nALTER TABLE IF EXISTS ONLY public.cns_enrichment_config_history DROP CONSTRAINT IF EXISTS cns_enrichment_config_history_pkey;\nALTER TABLE IF EXISTS ONLY public.cns_enrichment_config DROP CONSTRAINT IF EXISTS cns_enrichment_config_config_key_key;\nALTER TABLE IF EXISTS ONLY public.cns_cache_config DROP CONSTRAINT IF EXISTS cns_cache_config_pkey;\nALTER TABLE IF EXISTS ONLY public.category_source_snapshot DROP CONSTRAINT IF EXISTS category_source_snapshot_pkey;\nALTER TABLE IF EXISTS ONLY public.category_snapshot_audit DROP CONSTRAINT IF EXISTS category_snapshot_audit_pkey;\nALTER TABLE IF EXISTS ONLY public.categories DROP CONSTRAINT IF EXISTS categories_pkey;\nALTER TABLE IF EXISTS ONLY public.categories DROP CONSTRAINT IF EXISTS categories_digikey_id_key;\nALTER TABLE IF EXISTS ONLY public.catalog_manufacturers DROP CONSTRAINT IF EXISTS catalog_manufacturers_pkey;\nALTER TABLE IF EXISTS ONLY public.catalog_components_table DROP CONSTRAINT IF EXISTS catalog_components_table_pkey;\nALTER TABLE IF EXISTS ONLY public.catalog_component_manufacturers DROP CONSTRAINT IF EXISTS catalog_component_manufacturers_pkey;\nALTER TABLE IF EXISTS ONLY public.catalog_category_mappings DROP CONSTRAINT IF EXISTS catalog_category_mappings_pkey;\nALTER TABLE IF EXISTS ONLY public.catalog_categories DROP CONSTRAINT IF EXISTS catalog_categories_pkey;\nALTER TABLE IF EXISTS ONLY public.bom_queue_config DROP CONSTRAINT IF EXISTS bom_queue_config_queue_name_key;\nALTER TABLE IF EXISTS ONLY public.bom_queue_config DROP CONSTRAINT IF EXISTS bom_queue_config_pkey;\nALTER TABLE IF EXISTS ONLY public.audit_supplier_quality DROP CONSTRAINT IF EXISTS audit_supplier_quality_pkey;\nALTER TABLE IF EXISTS ONLY public.audit_field_comparisons DROP CONSTRAINT IF EXISTS audit_field_comparisons_pkey;\nALTER TABLE IF EXISTS ONLY public.audit_enrichment_runs DROP CONSTRAINT IF EXISTS audit_enrichment_runs_pkey;\nALTER TABLE IF EXISTS ONLY public.ai_prompts DROP CONSTRAINT IF EXISTS ai_prompts_pkey;\nALTER TABLE IF EXISTS ONLY public.ai_prompts DROP CONSTRAINT IF EXISTS ai_prompts_name_key;\nALTER TABLE IF EXISTS public.vendor_category_mappings ALTER COLUMN id DROP DEFAULT;\nALTER TABLE IF EXISTS public.suppliers ALTER COLUMN id DROP DEFAULT;\nALTER TABLE IF EXISTS public.supplier_settings ALTER COLUMN id DROP DEFAULT;\nALTER TABLE IF EXISTS public.supplier_rate_limits ALTER COLUMN id DROP DEFAULT;\nALTER TABLE IF EXISTS public.supplier_performance_metrics ALTER COLUMN id DROP DEFAULT;\nALTER TABLE IF EXISTS public.service_connectivity_matrix ALTER COLUMN id DROP DEFAULT;\nALTER TABLE IF EXISTS public.s3_cache_config ALTER COLUMN id DROP DEFAULT;\nALTER TABLE IF EXISTS public.redis_temporal_config ALTER COLUMN id DROP DEFAULT;\nALTER TABLE IF EXISTS public.redis_sync_log ALTER COLUMN id DROP DEFAULT;\nALTER TABLE IF EXISTS public.redis_s3_metadata_config ALTER COLUMN id DROP DEFAULT;\nALTER TABLE IF EXISTS public.redis_rate_limits ALTER COLUMN id DROP DEFAULT;\nALTER TABLE IF EXISTS public.redis_key_expiration_policy ALTER COLUMN id DROP DEFAULT;\nALTER TABLE IF EXISTS public.redis_health_checks ALTER COLUMN id DROP DEFAULT;\nALTER TABLE IF EXISTS public.redis_health_check ALTER COLUMN id DROP DEFAULT;\nALTER TABLE IF EXISTS public.redis_directus_config ALTER COLUMN id DROP DEFAULT;\nALTER TABLE IF EXISTS public.redis_connection_config ALTER COLUMN id DROP DEFAULT;\nALTER TABLE IF EXISTS public.redis_component_cache_config ALTER COLUMN id DROP DEFAULT;\nALTER TABLE IF EXISTS public.redis_cns_config ALTER COLUMN id DROP DEFAULT;\nALTER TABLE IF EXISTS public.redis_circuit_breakers ALTER COLUMN id DROP DEFAULT;\nALTER TABLE IF EXISTS public.redis_cache_config ALTER COLUMN id DROP DEFAULT;\nALTER TABLE IF EXISTS public.rate_limit_config ALTER COLUMN id DROP DEFAULT;\nALTER TABLE IF EXISTS public.manufacturers ALTER COLUMN id DROP DEFAULT;\nALTER TABLE IF EXISTS public.enrichment_history ALTER COLUMN id DROP DEFAULT;\nALTER TABLE IF EXISTS public.component_pricing ALTER COLUMN id DROP DEFAULT;\nALTER TABLE IF EXISTS public.cns_supplier_settings ALTER COLUMN id DROP DEFAULT;\nALTER TABLE IF EXISTS public.cns_enrichment_config ALTER COLUMN id DROP DEFAULT;\nALTER TABLE IF EXISTS public.cns_cache_config ALTER COLUMN id DROP DEFAULT;\nALTER TABLE IF EXISTS public.category_snapshot_audit ALTER COLUMN id DROP DEFAULT;\nALTER TABLE IF EXISTS public.categories ALTER COLUMN id DROP DEFAULT;\nALTER TABLE IF EXISTS public.bom_queue_config ALTER COLUMN id DROP DEFAULT;\nALTER TABLE IF EXISTS public.ai_prompts ALTER COLUMN id DROP DEFAULT;\nDROP SEQUENCE IF EXISTS public.vendor_category_mappings_id_seq;\nDROP TABLE IF EXISTS public.vendor_category_mappings;\nDROP SEQUENCE IF EXISTS public.suppliers_id_seq;\nDROP TABLE IF EXISTS public.suppliers;\nDROP TABLE IF EXISTS public.supplier_tokens;\nDROP SEQUENCE IF EXISTS public.supplier_settings_id_seq;\nDROP TABLE IF EXISTS public.supplier_settings;\nDROP SEQUENCE IF EXISTS public.supplier_rate_limits_id_seq;\nDROP TABLE IF EXISTS public.supplier_rate_limits;\nDROP SEQUENCE IF EXISTS public.supplier_performance_metrics_id_seq;\nDROP TABLE IF EXISTS public.supplier_performance_metrics;\nDROP TABLE IF EXISTS public.supplier_enrichment_responses;\nDROP SEQUENCE IF EXISTS public.service_connectivity_matrix_id_seq;\nDROP TABLE IF EXISTS public.service_connectivity_matrix;\nDROP SEQUENCE IF EXISTS public.s3_cache_config_id_seq;\nDROP TABLE IF EXISTS public.s3_cache_config;\nDROP SEQUENCE IF EXISTS public.redis_temporal_config_id_seq;\nDROP TABLE IF EXISTS public.redis_temporal_config;\nDROP SEQUENCE IF EXISTS public.redis_sync_log_id_seq;\nDROP TABLE IF EXISTS public.redis_sync_log;\nDROP TABLE IF EXISTS public.redis_sync_lock;\nDROP SEQUENCE IF EXISTS public.redis_s3_metadata_config_id_seq;\nDROP TABLE IF EXISTS public.redis_s3_metadata_config;\nDROP SEQUENCE IF EXISTS public.redis_rate_limits_id_seq;\nDROP TABLE IF EXISTS public.redis_rate_limits;\nDROP SEQUENCE IF EXISTS public.redis_key_expiration_policy_id_seq;\nDROP TABLE IF EXISTS public.redis_key_expiration_policy;\nDROP SEQUENCE IF EXISTS public.redis_health_checks_id_seq;\nDROP TABLE IF EXISTS public.redis_health_checks;\nDROP SEQUENCE IF EXISTS public.redis_health_check_id_seq;\nDROP TABLE IF EXISTS public.redis_health_check;\nDROP SEQUENCE IF EXISTS public.redis_directus_config_id_seq;\nDROP TABLE IF EXISTS public.redis_directus_config;\nDROP SEQUENCE IF EXISTS public.redis_connection_config_id_seq;\nDROP TABLE IF EXISTS public.redis_connection_config;\nDROP SEQUENCE IF EXISTS public.redis_component_cache_config_id_seq;\nDROP TABLE IF EXISTS public.redis_component_cache_config;\nDROP SEQUENCE IF EXISTS public.redis_cns_config_id_seq;\nDROP TABLE IF EXISTS public.redis_cns_config;\nDROP SEQUENCE IF EXISTS public.redis_circuit_breakers_id_seq;\nDROP TABLE IF EXISTS public.redis_circuit_breakers;\nDROP SEQUENCE IF EXISTS public.redis_cache_config_id_seq;\nDROP TABLE IF EXISTS public.redis_cache_config;\nDROP SEQUENCE IF EXISTS public.rate_limit_config_id_seq;\nDROP TABLE IF EXISTS public.rate_limit_config;\nDROP SEQUENCE IF EXISTS public.manufacturers_id_seq;\nDROP TABLE IF EXISTS public.manufacturers;\nDROP TABLE IF EXISTS public.enrichment_queue;\nDROP SEQUENCE IF EXISTS public.enrichment_history_id_seq;\nDROP TABLE IF EXISTS public.enrichment_history;\nDROP TABLE IF EXISTS public.enrichment_config;\nDROP TABLE IF EXISTS public.enrichment_batch_jobs;\nDROP VIEW IF EXISTS public.directus_redis_components;\nDROP TABLE IF EXISTS public.redis_component_snapshot;\nDROP TABLE IF EXISTS public.components;\nDROP TABLE IF EXISTS public.component_storage_tracking;\nDROP SEQUENCE IF EXISTS public.component_pricing_id_seq;\nDROP TABLE IF EXISTS public.component_pricing;\nDROP TABLE IF EXISTS public.component_lifecycle;\nDROP TABLE IF EXISTS public.column_mapping_templates;\nDROP SEQUENCE IF EXISTS public.cns_supplier_settings_id_seq;\nDROP TABLE IF EXISTS public.cns_supplier_settings;\nDROP SEQUENCE IF EXISTS public.cns_enrichment_config_id_seq;\nDROP TABLE IF EXISTS public.cns_enrichment_config_history;\nDROP TABLE IF EXISTS public.cns_enrichment_config;\nDROP SEQUENCE IF EXISTS public.cns_cache_config_id_seq;\nDROP TABLE IF EXISTS public.cns_cache_config;\nDROP TABLE IF EXISTS public.category_source_snapshot;\nDROP SEQUENCE IF EXISTS public.category_snapshot_audit_id_seq;\nDROP TABLE IF EXISTS public.category_snapshot_audit;\nDROP SEQUENCE IF EXISTS public.categories_id_seq;\nDROP TABLE IF EXISTS public.categories;\nDROP TABLE IF EXISTS public.catalog_manufacturers;\nDROP TABLE IF EXISTS public.catalog_components_table;\nDROP VIEW IF EXISTS public.catalog_components;\nDROP TABLE IF EXISTS public.component_catalog;\nDROP TABLE IF EXISTS public.catalog_component_manufacturers;\nDROP TABLE IF EXISTS public.catalog_category_mappings;\nDROP TABLE IF EXISTS public.catalog_categories;\nDROP SEQUENCE IF EXISTS public.bom_queue_config_id_seq;\nDROP TABLE IF EXISTS public.bom_queue_config;\nDROP TABLE IF EXISTS public.audit_supplier_quality;\nDROP TABLE IF EXISTS public.audit_field_comparisons;\nDROP TABLE IF EXISTS public.audit_enrichment_runs;\nDROP SEQUENCE IF EXISTS public.ai_prompts_id_seq;\nDROP TABLE IF EXISTS public.ai_prompts;\nDROP FUNCTION IF EXISTS public.update_updated_at_column();\nDROP FUNCTION IF EXISTS public.update_supplier_quality_stats(target_date date);\nDROP FUNCTION IF EXISTS public.update_search_vector();\nDROP FUNCTION IF EXISTS public.update_modified_timestamp();\nDROP FUNCTION IF EXISTS public.update_component_catalog_updated_at();\nDROP FUNCTION IF EXISTS public.update_column_mapping_templates_updated_at();\nDROP FUNCTION IF EXISTS public.ensure_single_default_template();\n--\n-- Name: SCHEMA public; Type: COMMENT; Schema: -; Owner: -\n--\n\nCOMMENT ON SCHEMA public IS '';\n\n\n--\n-- Name: ensure_single_default_template(); Type: FUNCTION; Schema: public; Owner: -\n--\n\nCREATE FUNCTION public.ensure_single_default_template() RETURNS trigger\n    LANGUAGE plpgsql\n    AS $$\r\nBEGIN\r\n    IF NEW.is_default = TRUE THEN\r\n        UPDATE column_mapping_templates\r\n        SET is_default = FALSE\r\n        WHERE organization_id = NEW.organization_id\r\n          AND id != NEW.id\r\n          AND is_default = TRUE;\r\n    END IF;\r\n    RETURN NEW;\r\nEND;\r\n$$;\n\n\n--\n-- Name: update_column_mapping_templates_updated_at(); Type: FUNCTION; Schema: public; Owner: -\n--\n\nCREATE FUNCTION public.update_column_mapping_templates_updated_at() RETURNS trigger\n    LANGUAGE plpgsql\n    AS $$\r\nBEGIN\r\n    NEW.updated_at = NOW();\r\n    RETURN NEW;\r\nEND;\r\n$$;\n\n\n--\n-- Name: update_component_catalog_updated_at(); Type: FUNCTION; Schema: public; Owner: -\n--\n\nCREATE FUNCTION public.update_component_catalog_updated_at() RETURNS trigger\n    LANGUAGE plpgsql\n    AS $$\r\nBEGIN\r\n    NEW.updated_at = NOW();\r\n    RETURN NEW;\r\nEND;\r\n$$;\n\n\n--\n-- Name: update_modified_timestamp(); Type: FUNCTION; Schema: public; Owner: -\n--\n\nCREATE FUNCTION public.update_modified_timestamp() RETURNS trigger\n    LANGUAGE plpgsql\n    AS $$\r\nBEGIN\r\n    NEW.updated_at = NOW();\r\n    RETURN NEW;\r\nEND;\r\n$$;\n\n\n--\n-- Name: update_search_vector(); Type: FUNCTION; Schema: public; Owner: -\n--\n\nCREATE FUNCTION public.update_search_vector() RETURNS trigger\n    LANGUAGE plpgsql\n    AS $$\r\nBEGIN\r\n    NEW.search_vector := to_tsvector('english',\r\n        COALESCE(NEW.mpn, '') || ' ' ||\r\n        COALESCE(NEW.description, '')\r\n    );\r\n    RETURN NEW;\r\nEND;\r\n$$;\n\n\n--\n-- Name: update_supplier_quality_stats(date); Type: FUNCTION; Schema: public; Owner: -\n--\n\nCREATE FUNCTION public.update_supplier_quality_stats(target_date date DEFAULT CURRENT_DATE) RETURNS void\n    LANGUAGE plpgsql\n    AS $$\r\nBEGIN\r\n    INSERT INTO audit_supplier_quality (\r\n        date, supplier_name,\r\n        total_requests, successful_requests, failed_requests,\r\n        avg_quality_score, avg_match_confidence, avg_processing_time_ms,\r\n        fields_changed_count, fields_missing_count, fields_invalid_count\r\n    )\r\n    SELECT\r\n        target_date,\r\n        r.supplier_name,\r\n        COUNT(*) as total_requests,\r\n        COUNT(*) FILTER (WHERE r.successful = TRUE) as successful_requests,\r\n        COUNT(*) FILTER (WHERE r.successful = FALSE) as failed_requests,\r\n        AVG(r.quality_score) as avg_quality_score,\r\n        AVG(r.supplier_match_confidence) as avg_match_confidence,\r\n        AVG(r.processing_time_ms)::INTEGER as avg_processing_time_ms,\r\n        COUNT(fc.id) FILTER (WHERE fc.changed = TRUE) as fields_changed_count,\r\n        COUNT(fc.id) FILTER (WHERE fc.supplier_data_quality = 'missing') as fields_missing_count,\r\n        COUNT(fc.id) FILTER (WHERE fc.supplier_data_quality = 'invalid') as fields_invalid_count\r\n    FROM audit_enrichment_runs r\r\n    LEFT JOIN audit_field_comparisons fc ON fc.enrichment_run_id = r.id\r\n    WHERE DATE(r.enrichment_timestamp) = target_date\r\n    GROUP BY r.supplier_name\r\n    ON CONFLICT (date, supplier_name) DO UPDATE SET\r\n        total_requests = EXCLUDED.total_requests,\r\n        successful_requests = EXCLUDED.successful_requests,\r\n        failed_requests = EXCLUDED.failed_requests,\r\n        avg_quality_score = EXCLUDED.avg_quality_score,\r\n        avg_match_confidence = EXCLUDED.avg_match_confidence,\r\n        avg_processing_time_ms = EXCLUDED.avg_processing_time_ms,\r\n        fields_changed_count = EXCLUDED.fields_changed_count,\r\n        fields_missing_count = EXCLUDED.fields_missing_count,\r\n        fields_invalid_count = EXCLUDED.fields_invalid_count,\r\n        updated_at = NOW();\r\nEND;\r\n$$;\n\n\n--\n-- Name: update_updated_at_column(); Type: FUNCTION; Schema: public; Owner: -\n--\n\nCREATE FUNCTION public.update_updated_at_column() RETURNS trigger\n    LANGUAGE plpgsql\n    AS $$\r\nBEGIN\r\n    NEW.updated_at = CURRENT_TIMESTAMP;\r\n    RETURN NEW;\r\nEND;\r\n$$;\n\n\nSET default_tablespace = '';\n\nSET default_table_access_method = heap;\n\n--\n-- Name: ai_prompts; Type: TABLE; Schema: public; Owner: -\n--\n\nCREATE TABLE public.ai_prompts (\n    id integer NOT NULL,\n    name character varying(255) NOT NULL,\n    description text,\n    system_prompt text,\n    messages json,\n    model character varying(100) DEFAULT 'gpt-4'::character varying,\n    temperature numeric(3,2) DEFAULT 0.7,\n    max_tokens integer DEFAULT 2000,\n    is_active boolean DEFAULT true,\n    created_at timestamp with time zone DEFAULT CURRENT_TIMESTAMP,\n    updated_at timestamp with time zone DEFAULT CURRENT_TIMESTAMP\n);\n\n\n--\n-- Name: ai_prompts_id_seq; Type: SEQUENCE; Schema: public; Owner: -\n--\n\nCREATE SEQUENCE public.ai_prompts_id_seq\n    AS integer\n    START WITH 1\n    INCREMENT BY 1\n    NO MINVALUE\n    NO MAXVALUE\n    CACHE 1;\n\n\n--\n-- Name: ai_prompts_id_seq; Type: SEQUENCE OWNED BY; Schema: public; Owner: -\n--\n\nALTER SEQUENCE public.ai_prompts_id_seq OWNED BY public.ai_prompts.id;\n\n\n--\n-- Name: audit_enrichment_runs; Type: TABLE; Schema: public; Owner: -\n--\n\nCREATE TABLE public.audit_enrichment_runs (\n    id uuid DEFAULT gen_random_uuid() NOT NULL,\n    upload_id text NOT NULL,\n    line_id text NOT NULL,\n    mpn text NOT NULL,\n    manufacturer text,\n    enrichment_timestamp timestamp with time zone DEFAULT now() NOT NULL,\n    successful boolean DEFAULT false NOT NULL,\n    quality_score numeric(5,2),\n    storage_location text,\n    supplier_name text NOT NULL,\n    supplier_match_confidence numeric(5,2),\n    processing_time_ms integer,\n    error_message text,\n    needs_review boolean DEFAULT false,\n    review_notes text,\n    reviewed_by text,\n    reviewed_at timestamp with time zone,\n    created_at timestamp with time zone DEFAULT now(),\n    updated_at timestamp with time zone DEFAULT now()\n);\n\n\n--\n-- Name: TABLE audit_enrichment_runs; Type: COMMENT; Schema: public; Owner: -\n--\n\nCOMMENT ON TABLE public.audit_enrichment_runs IS 'Master record for each enrichment operation';\n\n\n--\n-- Name: audit_field_comparisons; Type: TABLE; Schema: public; Owner: -\n--\n\nCREATE TABLE public.audit_field_comparisons (\n    id uuid DEFAULT gen_random_uuid() NOT NULL,\n    enrichment_run_id uuid NOT NULL,\n    field_name text NOT NULL,\n    field_category text,\n    supplier_value text,\n    normalized_value text,\n    changed boolean DEFAULT false,\n    change_type text,\n    change_reason text,\n    confidence numeric(5,2),\n    supplier_data_quality text,\n    normalization_applied boolean DEFAULT false,\n    created_at timestamp with time zone DEFAULT now()\n);\n\n\n--\n-- Name: TABLE audit_field_comparisons; Type: COMMENT; Schema: public; Owner: -\n--\n\nCOMMENT ON TABLE public.audit_field_comparisons IS 'Field-level comparison records for enrichment audit';\n\n\n--\n-- Name: audit_supplier_quality; Type: TABLE; Schema: public; Owner: -\n--\n\nCREATE TABLE public.audit_supplier_quality (\n    id uuid DEFAULT gen_random_uuid() NOT NULL,\n    date date NOT NULL,\n    supplier_name text NOT NULL,\n    total_requests integer DEFAULT 0,\n    successful_requests integer DEFAULT 0,\n    failed_requests integer DEFAULT 0,\n    avg_quality_score numeric(5,2),\n    avg_match_confidence numeric(5,2),\n    avg_processing_time_ms integer,\n    fields_changed_count integer DEFAULT 0,\n    fields_missing_count integer DEFAULT 0,\n    fields_invalid_count integer DEFAULT 0,\n    created_at timestamp with time zone DEFAULT now(),\n    updated_at timestamp with time zone DEFAULT now()\n);\n\n\n--\n-- Name: TABLE audit_supplier_quality; Type: COMMENT; Schema: public; Owner: -\n--\n\nCOMMENT ON TABLE public.audit_supplier_quality IS 'Daily supplier quality aggregates';\n\n\n--\n-- Name: bom_queue_config; Type: TABLE; Schema: public; Owner: -\n--\n\nCREATE TABLE public.bom_queue_config (\n    id integer NOT NULL,\n    queue_name character varying(100) NOT NULL,\n    max_concurrent_jobs integer DEFAULT 5,\n    retry_attempts integer DEFAULT 3,\n    retry_delay_seconds integer DEFAULT 60,\n    priority_boost_threshold integer DEFAULT 80,\n    enabled boolean DEFAULT true,\n    created_at timestamp with time zone DEFAULT CURRENT_TIMESTAMP,\n    updated_at timestamp with time zone DEFAULT CURRENT_TIMESTAMP\n);\n\n\n--\n-- Name: bom_queue_config_id_seq; Type: SEQUENCE; Schema: public; Owner: -\n--\n\nCREATE SEQUENCE public.bom_queue_config_id_seq\n    AS integer\n    START WITH 1\n    INCREMENT BY 1\n    NO MINVALUE\n    NO MAXVALUE\n    CACHE 1;\n\n\n--\n-- Name: bom_queue_config_id_seq; Type: SEQUENCE OWNED BY; Schema: public; Owner: -\n--\n\nALTER SEQUENCE public.bom_queue_config_id_seq OWNED BY public.bom_queue_config.id;\n\n\n--\n-- Name: catalog_categories; Type: TABLE; Schema: public; Owner: -\n--\n\nCREATE TABLE public.catalog_categories (\n    id uuid DEFAULT gen_random_uuid() NOT NULL,\n    name character varying(255) NOT NULL,\n    slug character varying(255),\n    description text,\n    parent_id uuid,\n    created_at timestamp with time zone DEFAULT now(),\n    updated_at timestamp with time zone DEFAULT now()\n);\n\n\n--\n-- Name: catalog_category_mappings; Type: TABLE; Schema: public; Owner: -\n--\n\nCREATE TABLE public.catalog_category_mappings (\n    id uuid DEFAULT gen_random_uuid() NOT NULL,\n    vendor_name character varying(100) NOT NULL,\n    vendor_category character varying(255) NOT NULL,\n    normalized_category_id uuid,\n    created_at timestamp with time zone DEFAULT now(),\n    updated_at timestamp with time zone DEFAULT now()\n);\n\n\n--\n-- Name: catalog_component_manufacturers; Type: TABLE; Schema: public; Owner: -\n--\n\nCREATE TABLE public.catalog_component_manufacturers (\n    component_id uuid NOT NULL,\n    manufacturer_id uuid NOT NULL\n);\n\n\n--\n-- Name: component_catalog; Type: TABLE; Schema: public; Owner: -\n--\n\nCREATE TABLE public.component_catalog (\n    id uuid DEFAULT gen_random_uuid() NOT NULL,\n    manufacturer_part_number character varying(255) NOT NULL,\n    manufacturer character varying(255) NOT NULL,\n    category character varying(255),\n    subcategory character varying(255),\n    category_path text,\n    product_family character varying(255),\n    product_series character varying(255),\n    description text,\n    datasheet_url text,\n    image_url text,\n    model_3d_url text,\n    package character varying(100),\n    lifecycle_status character varying(50) DEFAULT 'Active'::character varying,\n    risk_level character varying(50),\n    rohs_compliant boolean,\n    reach_compliant boolean,\n    halogen_free boolean,\n    aec_qualified boolean,\n    eccn_code character varying(50),\n    unit_price numeric(12,4),\n    currency character varying(3) DEFAULT 'USD'::character varying,\n    price_breaks jsonb DEFAULT '[]'::jsonb,\n    moq integer,\n    lead_time_days integer,\n    stock_status character varying(50),\n    stock_quantity integer,\n    specifications jsonb DEFAULT '{}'::jsonb,\n    quality_score numeric(5,2),\n    quality_metadata jsonb DEFAULT '{}'::jsonb,\n    supplier_data jsonb DEFAULT '{}'::jsonb,\n    ai_metadata jsonb DEFAULT '{}'::jsonb,\n    enrichment_source character varying(50),\n    last_enriched_at timestamp with time zone,\n    enrichment_count integer DEFAULT 0,\n    usage_count integer DEFAULT 0,\n    last_used_at timestamp with time zone,\n    created_at timestamp with time zone DEFAULT now(),\n    updated_at timestamp with time zone DEFAULT now()\n);\n\n\n--\n-- Name: TABLE component_catalog; Type: COMMENT; Schema: public; Owner: -\n--\n\nCOMMENT ON TABLE public.component_catalog IS 'Central component catalog - master data for electronic components used by CNS enrichment';\n\n\n--\n-- Name: COLUMN component_catalog.manufacturer_part_number; Type: COMMENT; Schema: public; Owner: -\n--\n\nCOMMENT ON COLUMN public.component_catalog.manufacturer_part_number IS 'Manufacturer Part Number (MPN) - primary identifier';\n\n\n--\n-- Name: COLUMN component_catalog.manufacturer; Type: COMMENT; Schema: public; Owner: -\n--\n\nCOMMENT ON COLUMN public.component_catalog.manufacturer IS 'Component manufacturer name';\n\n\n--\n-- Name: COLUMN component_catalog.price_breaks; Type: COMMENT; Schema: public; Owner: -\n--\n\nCOMMENT ON COLUMN public.component_catalog.price_breaks IS 'JSON array of price breaks: [{\"quantity\": 1, \"price\": 0.50}, ...]';\n\n\n--\n-- Name: COLUMN component_catalog.quality_score; Type: COMMENT; Schema: public; Owner: -\n--\n\nCOMMENT ON COLUMN public.component_catalog.quality_score IS 'Data completeness score (0-100). Components \u003e= 95 are auto-approved.';\n\n\n--\n-- Name: COLUMN component_catalog.supplier_data; Type: COMMENT; Schema: public; Owner: -\n--\n\nCOMMENT ON COLUMN public.component_catalog.supplier_data IS 'JSON object with supplier-specific data keyed by supplier name';\n\n\n--\n-- Name: COLUMN component_catalog.enrichment_source; Type: COMMENT; Schema: public; Owner: -\n--\n\nCOMMENT ON COLUMN public.component_catalog.enrichment_source IS 'Source of enrichment data: mouser, digikey, element14, ai, manual, fallback';\n\n\n--\n-- Name: COLUMN component_catalog.usage_count; Type: COMMENT; Schema: public; Owner: -\n--\n\nCOMMENT ON COLUMN public.component_catalog.usage_count IS 'Number of times this component was looked up (for popularity ranking)';\n\n\n--\n-- Name: catalog_components; Type: VIEW; Schema: public; Owner: -\n--\n\nCREATE VIEW public.catalog_components AS\n SELECT component_catalog.id,\n    component_catalog.manufacturer_part_number AS mpn,\n    component_catalog.manufacturer,\n    NULL::character varying(255) AS normalized_mpn,\n    NULL::character varying(255) AS normalized_manufacturer,\n    component_catalog.category,\n    component_catalog.subcategory,\n    component_catalog.category_path,\n    component_catalog.product_family,\n    component_catalog.product_series,\n    component_catalog.description,\n    component_catalog.datasheet_url,\n    component_catalog.image_url,\n    component_catalog.lifecycle_status,\n    component_catalog.package,\n    component_catalog.unit_price,\n    component_catalog.currency,\n    component_catalog.price_breaks,\n    component_catalog.moq,\n    component_catalog.lead_time_days,\n    component_catalog.stock_status,\n    component_catalog.supplier_data,\n    component_catalog.specifications,\n    NULL::jsonb AS extracted_specs,\n    component_catalog.rohs_compliant,\n    component_catalog.reach_compliant,\n    component_catalog.halogen_free,\n    component_catalog.aec_qualified,\n    component_catalog.eccn_code,\n    component_catalog.quality_score,\n    component_catalog.quality_metadata,\n    component_catalog.ai_metadata,\n    component_catalog.enrichment_source,\n    component_catalog.enrichment_source AS api_source,\n    component_catalog.created_at,\n    component_catalog.updated_at\n   FROM public.component_catalog;\n\n\n--\n-- Name: VIEW catalog_components; Type: COMMENT; Schema: public; Owner: -\n--\n\nCOMMENT ON VIEW public.catalog_components IS 'ORM compatibility view mapping to component_catalog table. Used by SQLAlchemy CatalogComponent model.';\n\n\n--\n-- Name: catalog_components_table; Type: TABLE; Schema: public; Owner: -\n--\n\nCREATE TABLE public.catalog_components_table (\n    id uuid DEFAULT gen_random_uuid() NOT NULL,\n    mpn character varying(255) NOT NULL,\n    manufacturer character varying(255),\n    normalized_mpn character varying(255),\n    normalized_manufacturer character varying(255),\n    description text,\n    category character varying(255),\n    subcategory character varying(255),\n    category_path text,\n    product_family character varying(255),\n    product_series character varying(255),\n    datasheet_url text,\n    image_url text,\n    lifecycle_status character varying(50),\n    package character varying(100),\n    unit_price numeric,\n    currency character varying(10),\n    price_breaks jsonb,\n    moq integer,\n    lead_time_days integer,\n    stock_status character varying(50),\n    supplier_data jsonb,\n    specifications jsonb,\n    extracted_specs jsonb,\n    quality_score numeric,\n    quality_metadata jsonb,\n    ai_metadata jsonb,\n    rohs_compliant boolean,\n    reach_compliant boolean,\n    halogen_free boolean,\n    aec_qualified boolean,\n    eccn_code character varying(50),\n    enrichment_source character varying(50),\n    api_source character varying(50),\n    created_at timestamp with time zone DEFAULT now(),\n    updated_at timestamp with time zone DEFAULT now()\n);\n\n\n--\n-- Name: catalog_manufacturers; Type: TABLE; Schema: public; Owner: -\n--\n\nCREATE TABLE public.catalog_manufacturers (\n    id uuid DEFAULT gen_random_uuid() NOT NULL,\n    name character varying(255) NOT NULL,\n    normalized_name character varying(255),\n    website text,\n    supplier_codes jsonb DEFAULT '{}'::jsonb,\n    created_at timestamp with time zone DEFAULT now(),\n    updated_at timestamp with time zone DEFAULT now()\n);\n\n\n--\n-- Name: categories; Type: TABLE; Schema: public; Owner: -\n--\n\nCREATE TABLE public.categories (\n    id integer NOT NULL,\n    name character varying(255) NOT NULL,\n    parent_id integer,\n    digikey_id integer,\n    level integer DEFAULT 1,\n    path character varying(1024),\n    product_count integer DEFAULT 0,\n    description text,\n    created_at timestamp without time zone DEFAULT CURRENT_TIMESTAMP,\n    updated_at timestamp without time zone DEFAULT CURRENT_TIMESTAMP\n);\n\n\n--\n-- Name: TABLE categories; Type: COMMENT; Schema: public; Owner: -\n--\n\nCOMMENT ON TABLE public.categories IS 'Hierarchical component taxonomy (DigiKey structure)';\n\n\n--\n-- Name: categories_id_seq; Type: SEQUENCE; Schema: public; Owner: -\n--\n\nCREATE SEQUENCE public.categories_id_seq\n    AS integer\n    START WITH 1\n    INCREMENT BY 1\n    NO MINVALUE\n    NO MAXVALUE\n    CACHE 1;\n\n\n--\n-- Name: categories_id_seq; Type: SEQUENCE OWNED BY; Schema: public; Owner: -\n--\n\nALTER SEQUENCE public.categories_id_seq OWNED BY public.categories.id;\n\n\n--\n-- Name: category_snapshot_audit; Type: TABLE; Schema: public; Owner: -\n--\n\nCREATE TABLE public.category_snapshot_audit (\n    id bigint NOT NULL,\n    run_started timestamp with time zone NOT NULL,\n    run_completed timestamp with time zone NOT NULL,\n    source_path text NOT NULL,\n    truncated boolean DEFAULT false NOT NULL,\n    rows_before bigint NOT NULL,\n    rows_after bigint NOT NULL,\n    rows_delta bigint NOT NULL,\n    rows_flattened bigint NOT NULL,\n    note text\n);\n\n\n--\n-- Name: TABLE category_snapshot_audit; Type: COMMENT; Schema: public; Owner: -\n--\n\nCOMMENT ON TABLE public.category_snapshot_audit IS 'Audit trail for category snapshot loader runs';\n\n\n--\n-- Name: COLUMN category_snapshot_audit.run_started; Type: COMMENT; Schema: public; Owner: -\n--\n\nCOMMENT ON COLUMN public.category_snapshot_audit.run_started IS 'When the snapshot load started';\n\n\n--\n-- Name: COLUMN category_snapshot_audit.run_completed; Type: COMMENT; Schema: public; Owner: -\n--\n\nCOMMENT ON COLUMN public.category_snapshot_audit.run_completed IS 'When the snapshot load completed';\n\n\n--\n-- Name: COLUMN category_snapshot_audit.source_path; Type: COMMENT; Schema: public; Owner: -\n--\n\nCOMMENT ON COLUMN public.category_snapshot_audit.source_path IS 'Path to source JSON file';\n\n\n--\n-- Name: COLUMN category_snapshot_audit.truncated; Type: COMMENT; Schema: public; Owner: -\n--\n\nCOMMENT ON COLUMN public.category_snapshot_audit.truncated IS 'Whether the table was truncated before load';\n\n\n--\n-- Name: COLUMN category_snapshot_audit.rows_flattened; Type: COMMENT; Schema: public; Owner: -\n--\n\nCOMMENT ON COLUMN public.category_snapshot_audit.rows_flattened IS 'Number of categories flattened from source';\n\n\n--\n-- Name: category_snapshot_audit_id_seq; Type: SEQUENCE; Schema: public; Owner: -\n--\n\nCREATE SEQUENCE public.category_snapshot_audit_id_seq\n    START WITH 1\n    INCREMENT BY 1\n    NO MINVALUE\n    NO MAXVALUE\n    CACHE 1;\n\n\n--\n-- Name: category_snapshot_audit_id_seq; Type: SEQUENCE OWNED BY; Schema: public; Owner: -\n--\n\nALTER SEQUENCE public.category_snapshot_audit_id_seq OWNED BY public.category_snapshot_audit.id;\n\n\n--\n-- Name: category_source_snapshot; Type: TABLE; Schema: public; Owner: -\n--\n\nCREATE TABLE public.category_source_snapshot (\n    source_id bigint NOT NULL,\n    parent_id bigint,\n    name text NOT NULL,\n    depth integer NOT NULL,\n    path text NOT NULL,\n    product_count integer,\n    raw_payload jsonb NOT NULL,\n    ingested_at timestamp with time zone DEFAULT now() NOT NULL\n);\n\n\n--\n-- Name: cns_cache_config; Type: TABLE; Schema: public; Owner: -\n--\n\nCREATE TABLE public.cns_cache_config (\n    id integer NOT NULL,\n    cache_type character varying(100) NOT NULL,\n    redis_key_pattern character varying(255),\n    ttl_seconds integer DEFAULT 3600,\n    max_size_mb integer DEFAULT 100,\n    enabled boolean DEFAULT true,\n    created_at timestamp with time zone DEFAULT CURRENT_TIMESTAMP\n);\n\n\n--\n-- Name: cns_cache_config_id_seq; Type: SEQUENCE; Schema: public; Owner: -\n--\n\nCREATE SEQUENCE public.cns_cache_config_id_seq\n    AS integer\n    START WITH 1\n    INCREMENT BY 1\n    NO MINVALUE\n    NO MAXVALUE\n    CACHE 1;\n\n\n--\n-- Name: cns_cache_config_id_seq; Type: SEQUENCE OWNED BY; Schema: public; Owner: -\n--\n\nALTER SEQUENCE public.cns_cache_config_id_seq OWNED BY public.cns_cache_config.id;\n\n\n--\n-- Name: cns_enrichment_config; Type: TABLE; Schema: public; Owner: -\n--\n\nCREATE TABLE public.cns_enrichment_config (\n    id integer NOT NULL,\n    config_key character varying(100) NOT NULL,\n    config_value text NOT NULL,\n    value_type character varying(20) DEFAULT 'string'::character varying,\n    category character varying(50) DEFAULT 'general'::character varying,\n    description text,\n    default_value text,\n    min_value numeric(20,4),\n    max_value numeric(20,4),\n    requires_restart boolean DEFAULT false,\n    deprecated boolean DEFAULT false,\n    updated_at timestamp without time zone DEFAULT CURRENT_TIMESTAMP,\n    updated_by character varying(100),\n    CONSTRAINT cns_enrichment_config_value_type_check CHECK (((value_type)::text = ANY (ARRAY[('string'::character varying)::text, ('integer'::character varying)::text, ('float'::character varying)::text, ('boolean'::character varying)::text, ('json'::character varying)::text])))\n);\n\n\n--\n-- Name: TABLE cns_enrichment_config; Type: COMMENT; Schema: public; Owner: -\n--\n\nCOMMENT ON TABLE public.cns_enrichment_config IS 'Runtime configuration for CNS enrichment service';\n\n\n--\n-- Name: cns_enrichment_config_history; Type: TABLE; Schema: public; Owner: -\n--\n\nCREATE TABLE public.cns_enrichment_config_history (\n    id uuid DEFAULT gen_random_uuid() NOT NULL,\n    config_key text NOT NULL,\n    old_value text,\n    new_value text NOT NULL,\n    changed_by text NOT NULL,\n    changed_at timestamp with time zone DEFAULT now(),\n    change_reason text,\n    ip_address text\n);\n\n\n--\n-- Name: TABLE cns_enrichment_config_history; Type: COMMENT; Schema: public; Owner: -\n--\n\nCOMMENT ON TABLE public.cns_enrichment_config_history IS 'Audit trail of enrichment configuration changes';\n\n\n--\n-- Name: cns_enrichment_config_id_seq; Type: SEQUENCE; Schema: public; Owner: -\n--\n\nCREATE SEQUENCE public.cns_enrichment_config_id_seq\n    AS integer\n    START WITH 1\n    INCREMENT BY 1\n    NO MINVALUE\n    NO MAXVALUE\n    CACHE 1;\n\n\n--\n-- Name: cns_enrichment_config_id_seq; Type: SEQUENCE OWNED BY; Schema: public; Owner: -\n--\n\nALTER SEQUENCE public.cns_enrichment_config_id_seq OWNED BY public.cns_enrichment_config.id;\n\n\n--\n-- Name: cns_supplier_settings; Type: TABLE; Schema: public; Owner: -\n--\n\nCREATE TABLE public.cns_supplier_settings (\n    id integer NOT NULL,\n    supplier_name character varying(50) NOT NULL,\n    display_name character varying(100),\n    supplier_url character varying(255),\n    enabled boolean DEFAULT true,\n    priority integer DEFAULT 0,\n    api_key text,\n    api_secret text,\n    base_url text NOT NULL,\n    rate_limit_per_minute integer,\n    timeout_seconds integer DEFAULT 10,\n    supports_parametric_search boolean DEFAULT false,\n    supports_lifecycle_data boolean DEFAULT true,\n    supports_compliance_data boolean DEFAULT true,\n    supports_pricing_breaks boolean DEFAULT true,\n    avg_response_time_ms integer,\n    avg_match_confidence numeric(5,2),\n    avg_quality_score numeric(5,2),\n    success_rate numeric(5,2),\n    total_requests_30d integer DEFAULT 0,\n    created_at timestamp with time zone DEFAULT now(),\n    updated_at timestamp with time zone DEFAULT now(),\n    created_by text,\n    notes text\n);\n\n\n--\n-- Name: TABLE cns_supplier_settings; Type: COMMENT; Schema: public; Owner: -\n--\n\nCOMMENT ON TABLE public.cns_supplier_settings IS 'Supplier API configuration managed via Directus UI (replaces hardcoded config.py settings)';\n\n\n--\n-- Name: COLUMN cns_supplier_settings.priority; Type: COMMENT; Schema: public; Owner: -\n--\n\nCOMMENT ON COLUMN public.cns_supplier_settings.priority IS 'Try suppliers in order: 1=first, 2=second, etc. (0=disabled)';\n\n\n--\n-- Name: COLUMN cns_supplier_settings.api_key; Type: COMMENT; Schema: public; Owner: -\n--\n\nCOMMENT ON COLUMN public.cns_supplier_settings.api_key IS 'Encrypted API key - handled by application';\n\n\n--\n-- Name: cns_supplier_settings_id_seq; Type: SEQUENCE; Schema: public; Owner: -\n--\n\nCREATE SEQUENCE public.cns_supplier_settings_id_seq\n    AS integer\n    START WITH 1\n    INCREMENT BY 1\n    NO MINVALUE\n    NO MAXVALUE\n    CACHE 1;\n\n\n--\n-- Name: cns_supplier_settings_id_seq; Type: SEQUENCE OWNED BY; Schema: public; Owner: -\n--\n\nALTER SEQUENCE public.cns_supplier_settings_id_seq OWNED BY public.cns_supplier_settings.id;\n\n\n--\n-- Name: column_mapping_templates; Type: TABLE; Schema: public; Owner: -\n--\n\nCREATE TABLE public.column_mapping_templates (\n    id uuid DEFAULT gen_random_uuid() NOT NULL,\n    organization_id uuid NOT NULL,\n    name character varying(255) NOT NULL,\n    description text,\n    mappings jsonb NOT NULL,\n    is_default boolean DEFAULT false,\n    created_by uuid,\n    created_at timestamp with time zone DEFAULT now(),\n    updated_at timestamp with time zone DEFAULT now()\n);\n\n\n--\n-- Name: TABLE column_mapping_templates; Type: COMMENT; Schema: public; Owner: -\n--\n\nCOMMENT ON TABLE public.column_mapping_templates IS 'Organization-scoped column mapping templates for BOM uploads';\n\n\n--\n-- Name: COLUMN column_mapping_templates.mappings; Type: COMMENT; Schema: public; Owner: -\n--\n\nCOMMENT ON COLUMN public.column_mapping_templates.mappings IS 'JSON mapping of internal fields to Excel column names';\n\n\n--\n-- Name: COLUMN column_mapping_templates.is_default; Type: COMMENT; Schema: public; Owner: -\n--\n\nCOMMENT ON COLUMN public.column_mapping_templates.is_default IS 'Whether this is the default template for the organization';\n\n\n--\n-- Name: component_lifecycle; Type: TABLE; Schema: public; Owner: -\n--\n\nCREATE TABLE public.component_lifecycle (\n    id uuid DEFAULT gen_random_uuid() NOT NULL,\n    component_id uuid,\n    mpn text NOT NULL,\n    manufacturer text,\n    lifecycle_status character varying(50) DEFAULT 'active'::character varying,\n    introduction_date date,\n    end_of_life_date date,\n    last_buy_date date,\n    replacement_mpn text,\n    notes text,\n    data_source character varying(100),\n    confidence_score numeric(5,2),\n    created_at timestamp with time zone DEFAULT CURRENT_TIMESTAMP,\n    updated_at timestamp with time zone DEFAULT CURRENT_TIMESTAMP\n);\n\n\n--\n-- Name: component_pricing; Type: TABLE; Schema: public; Owner: -\n--\n\nCREATE TABLE public.component_pricing (\n    id integer NOT NULL,\n    component_id uuid NOT NULL,\n    supplier_id integer,\n    supplier_part_number character varying(255),\n    price numeric(12,4),\n    quantity_break integer DEFAULT 1,\n    currency character varying(3) DEFAULT 'USD'::character varying,\n    stock_quantity integer DEFAULT 0,\n    lead_time_days integer,\n    minimum_order_qty integer DEFAULT 1,\n    price_updated_at timestamp without time zone DEFAULT CURRENT_TIMESTAMP,\n    created_at timestamp without time zone DEFAULT CURRENT_TIMESTAMP,\n    updated_at timestamp without time zone DEFAULT CURRENT_TIMESTAMP\n);\n\n\n--\n-- Name: TABLE component_pricing; Type: COMMENT; Schema: public; Owner: -\n--\n\nCOMMENT ON TABLE public.component_pricing IS 'Component pricing from various suppliers';\n\n\n--\n-- Name: component_pricing_id_seq; Type: SEQUENCE; Schema: public; Owner: -\n--\n\nCREATE SEQUENCE public.component_pricing_id_seq\n    AS integer\n    START WITH 1\n    INCREMENT BY 1\n    NO MINVALUE\n    NO MAXVALUE\n    CACHE 1;\n\n\n--\n-- Name: component_pricing_id_seq; Type: SEQUENCE OWNED BY; Schema: public; Owner: -\n--\n\nALTER SEQUENCE public.component_pricing_id_seq OWNED BY public.component_pricing.id;\n\n\n--\n-- Name: component_storage_tracking; Type: TABLE; Schema: public; Owner: -\n--\n\nCREATE TABLE public.component_storage_tracking (\n    id uuid DEFAULT gen_random_uuid() NOT NULL,\n    manufacturer_part_number text NOT NULL,\n    manufacturer text NOT NULL,\n    line_id text NOT NULL,\n    storage_location text NOT NULL,\n    component_catalog_id uuid,\n    redis_key text,\n    quality_score numeric(5,2),\n    metadata jsonb DEFAULT '{}'::jsonb,\n    created_at timestamp with time zone DEFAULT now(),\n    updated_at timestamp with time zone DEFAULT now(),\n    redis_ttl_seconds integer DEFAULT 259200,\n    expires_at timestamp with time zone,\n    CONSTRAINT component_storage_tracking_storage_location_check CHECK ((storage_location = ANY (ARRAY['database'::text, 'redis'::text])))\n);\n\n\n--\n-- Name: TABLE component_storage_tracking; Type: COMMENT; Schema: public; Owner: -\n--\n\nCOMMENT ON TABLE public.component_storage_tracking IS 'Tracks storage location (database vs Redis) for each enriched component. Used to route lookups and manage Redis TTL for low-quality components.';\n\n\n--\n-- Name: COLUMN component_storage_tracking.line_id; Type: COMMENT; Schema: public; Owner: -\n--\n\nCOMMENT ON COLUMN public.component_storage_tracking.line_id IS 'Unique identifier for the BOM line item (not the BOM line item UUID)';\n\n\n--\n-- Name: COLUMN component_storage_tracking.quality_score; Type: COMMENT; Schema: public; Owner: -\n--\n\nCOMMENT ON COLUMN public.component_storage_tracking.quality_score IS 'Quality score (0-100) that determined storage routing: \u003e= 80: database (permanent), \u003c 80: redis (temporary, 72hr TTL)';\n\n\n--\n-- Name: components; Type: TABLE; Schema: public; Owner: -\n--\n\nCREATE TABLE public.components (\n    id uuid DEFAULT gen_random_uuid() NOT NULL,\n    mpn character varying(255) NOT NULL,\n    manufacturer_id integer,\n    category_id integer,\n    description text,\n    datasheet_url character varying(1024),\n    image_url character varying(1024),\n    lifecycle_status character varying(50) DEFAULT 'active'::character varying,\n    specifications jsonb DEFAULT '{}'::jsonb,\n    category_mouser character varying(512),\n    category_digikey character varying(512),\n    category_element14 character varying(512),\n    rohs_status character varying(50) DEFAULT 'unknown'::character varying,\n    rohs_version character varying(20),\n    reach_status character varying(50) DEFAULT 'unknown'::character varying,\n    reach_svhc_count integer DEFAULT 0,\n    conflict_mineral_status character varying(50) DEFAULT 'unknown'::character varying,\n    china_rohs_compliant boolean,\n    halogen_free boolean,\n    eccn_code character varying(50),\n    hts_code character varying(50),\n    country_of_origin character varying(2),\n    package_type character varying(100),\n    package_variant character varying(100),\n    mounting_type character varying(50),\n    pin_count integer,\n    length_mm numeric(10,4),\n    width_mm numeric(10,4),\n    height_mm numeric(10,4),\n    pitch_mm numeric(10,4),\n    jedec_designation character varying(50),\n    msl_level character varying(10),\n    msl_peak_temp_c integer,\n    lead_free boolean,\n    termination_finish character varying(50),\n    max_reflow_temp_c integer,\n    storage_temp_max_c integer,\n    confidence_score integer DEFAULT 0,\n    quality_score integer DEFAULT 0,\n    data_sources jsonb DEFAULT '[]'::jsonb,\n    last_enriched_at timestamp without time zone,\n    created_at timestamp without time zone DEFAULT CURRENT_TIMESTAMP,\n    updated_at timestamp without time zone DEFAULT CURRENT_TIMESTAMP,\n    CONSTRAINT components_confidence_score_check CHECK (((confidence_score \u003e= 0) AND (confidence_score \u003c= 100))),\n    CONSTRAINT components_lifecycle_status_check CHECK (((lifecycle_status)::text = ANY (ARRAY[('active'::character varying)::text, ('nrnd'::character varying)::text, ('eol'::character varying)::text, ('obsolete'::character varying)::text, ('preview'::character varying)::text, ('discontinued'::character varying)::text]))),\n    CONSTRAINT components_mounting_type_check CHECK (((mounting_type)::text = ANY (ARRAY[('smd'::character varying)::text, ('through_hole'::character varying)::text, ('chassis'::character varying)::text, ('panel'::character varying)::text, ('wire_lead'::character varying)::text]))),\n    CONSTRAINT components_quality_score_check CHECK (((quality_score \u003e= 0) AND (quality_score \u003c= 100))),\n    CONSTRAINT components_reach_status_check CHECK (((reach_status)::text = ANY (ARRAY[('compliant'::character varying)::text, ('contains_svhc'::character varying)::text, ('non_compliant'::character varying)::text, ('unknown'::character varying)::text]))),\n    CONSTRAINT components_rohs_status_check CHECK (((rohs_status)::text = ANY (ARRAY[('compliant'::character varying)::text, ('non_compliant'::character varying)::text, ('exempt'::character varying)::text, ('unknown'::character varying)::text])))\n);\n\n\n--\n-- Name: TABLE components; Type: COMMENT; Schema: public; Owner: -\n--\n\nCOMMENT ON TABLE public.components IS 'Central component catalog - Single Source of Truth (SSOT)';\n\n\n--\n-- Name: redis_component_snapshot; Type: TABLE; Schema: public; Owner: -\n--\n\nCREATE TABLE public.redis_component_snapshot (\n    id uuid DEFAULT gen_random_uuid() NOT NULL,\n    redis_key text NOT NULL,\n    line_id text NOT NULL,\n    mpn text,\n    manufacturer text,\n    quality_score numeric(5,2),\n    component_data jsonb NOT NULL,\n    storage_ttl_seconds integer,\n    expires_at timestamp with time zone,\n    reason_for_redis text,\n    can_promote boolean DEFAULT true,\n    promotion_notes text,\n    last_synced_at timestamp with time zone DEFAULT now(),\n    sync_status text DEFAULT 'active'::text,\n    created_at timestamp with time zone DEFAULT now()\n);\n\n\n--\n-- Name: TABLE redis_component_snapshot; Type: COMMENT; Schema: public; Owner: -\n--\n\nCOMMENT ON TABLE public.redis_component_snapshot IS 'Snapshot of components stored in Redis (temporary, low-quality) for Directus visibility';\n\n\n--\n-- Name: COLUMN redis_component_snapshot.can_promote; Type: COMMENT; Schema: public; Owner: -\n--\n\nCOMMENT ON COLUMN public.redis_component_snapshot.can_promote IS 'Whether admin can manually promote this component to permanent storage';\n\n\n--\n-- Name: directus_redis_components; Type: VIEW; Schema: public; Owner: -\n--\n\nCREATE VIEW public.directus_redis_components AS\n SELECT redis_component_snapshot.id,\n    redis_component_snapshot.mpn,\n    redis_component_snapshot.manufacturer,\n    redis_component_snapshot.quality_score,\n    'redis'::text AS storage_location,\n        CASE\n            WHEN (redis_component_snapshot.sync_status = 'expired'::text) THEN 'Expired'::text\n            WHEN (redis_component_snapshot.expires_at \u003c now()) THEN 'Expired'::text\n            WHEN (redis_component_snapshot.expires_at \u003c (now() + '24:00:00'::interval)) THEN 'Expiring Soon'::text\n            ELSE 'Temporary'::text\n        END AS storage_status,\n    redis_component_snapshot.expires_at,\n    (EXTRACT(epoch FROM (redis_component_snapshot.expires_at - now())) / (3600)::numeric) AS ttl_hours,\n    false AS is_permanent,\n    redis_component_snapshot.reason_for_redis,\n    redis_component_snapshot.can_promote,\n    redis_component_snapshot.promotion_notes,\n    redis_component_snapshot.sync_status,\n    redis_component_snapshot.created_at,\n    redis_component_snapshot.last_synced_at AS updated_at,\n    redis_component_snapshot.component_data\n   FROM public.redis_component_snapshot\n  WHERE (redis_component_snapshot.sync_status = ANY (ARRAY['active'::text, 'expired'::text]));\n\n\n--\n-- Name: VIEW directus_redis_components; Type: COMMENT; Schema: public; Owner: -\n--\n\nCOMMENT ON VIEW public.directus_redis_components IS 'Redis components view for Directus dashboard (Directus-only)';\n\n\n--\n-- Name: enrichment_batch_jobs; Type: TABLE; Schema: public; Owner: -\n--\n\nCREATE TABLE public.enrichment_batch_jobs (\n    id uuid DEFAULT gen_random_uuid() NOT NULL,\n    organization_id uuid,\n    bom_id uuid,\n    status character varying(50) DEFAULT 'pending'::character varying NOT NULL,\n    total_items integer DEFAULT 0,\n    processed_items integer DEFAULT 0,\n    successful_items integer DEFAULT 0,\n    failed_items integer DEFAULT 0,\n    start_time timestamp with time zone,\n    end_time timestamp with time zone,\n    error_message text,\n    temporal_workflow_id text,\n    created_at timestamp with time zone DEFAULT CURRENT_TIMESTAMP,\n    updated_at timestamp with time zone DEFAULT CURRENT_TIMESTAMP\n);\n\n\n--\n-- Name: enrichment_config; Type: TABLE; Schema: public; Owner: -\n--\n\nCREATE TABLE public.enrichment_config (\n    id uuid DEFAULT gen_random_uuid() NOT NULL,\n    organization_id uuid,\n    enable_enrichment_audit boolean DEFAULT true,\n    tier1_enabled boolean DEFAULT true,\n    tier2_enabled boolean DEFAULT true,\n    tier3_enabled boolean DEFAULT false,\n    tier4_enabled boolean DEFAULT false,\n    quality_threshold_redis numeric(5,2) DEFAULT 80.0,\n    quality_threshold_catalog numeric(5,2) DEFAULT 95.0,\n    supplier_priority jsonb DEFAULT '[\"mouser\", \"digikey\", \"element14\"]'::jsonb,\n    circuit_breaker_enabled boolean DEFAULT false,\n    circuit_breaker_failure_threshold integer DEFAULT 5,\n    circuit_breaker_timeout_seconds integer DEFAULT 60,\n    circuit_breaker_success_threshold integer DEFAULT 2,\n    retry_enabled boolean DEFAULT false,\n    retry_max_attempts integer DEFAULT 3,\n    retry_initial_delay_seconds numeric(5,2) DEFAULT 1.0,\n    retry_exponential_base numeric(5,2) DEFAULT 2.0,\n    retry_max_delay_seconds numeric(5,2) DEFAULT 30.0,\n    retry_jitter_enabled boolean DEFAULT true,\n    is_active boolean DEFAULT true,\n    created_at timestamp with time zone DEFAULT now(),\n    updated_at timestamp with time zone DEFAULT now()\n);\n\n\n--\n-- Name: TABLE enrichment_config; Type: COMMENT; Schema: public; Owner: -\n--\n\nCOMMENT ON TABLE public.enrichment_config IS 'Per-organization enrichment configuration';\n\n\n--\n-- Name: enrichment_history; Type: TABLE; Schema: public; Owner: -\n--\n\nCREATE TABLE public.enrichment_history (\n    id integer NOT NULL,\n    mpn character varying(255) NOT NULL,\n    manufacturer character varying(255),\n    enrichment_data jsonb,\n    quality_score numeric(5,2),\n    status character varying(50) NOT NULL,\n    rejection_reason text,\n    error_message text,\n    issues jsonb DEFAULT '[]'::jsonb,\n    enrichment_source character varying(50),\n    bom_job_id character varying(100),\n    api_calls jsonb DEFAULT '[]'::jsonb,\n    processing_time_ms integer,\n    tier_reached integer,\n    created_at timestamp with time zone DEFAULT now(),\n    created_by uuid\n);\n\n\n--\n-- Name: TABLE enrichment_history; Type: COMMENT; Schema: public; Owner: -\n--\n\nCOMMENT ON TABLE public.enrichment_history IS 'Audit log of all enrichment attempts (approved, rejected, errors)';\n\n\n--\n-- Name: enrichment_history_id_seq; Type: SEQUENCE; Schema: public; Owner: -\n--\n\nCREATE SEQUENCE public.enrichment_history_id_seq\n    AS integer\n    START WITH 1\n    INCREMENT BY 1\n    NO MINVALUE\n    NO MAXVALUE\n    CACHE 1;\n\n\n--\n-- Name: enrichment_history_id_seq; Type: SEQUENCE OWNED BY; Schema: public; Owner: -\n--\n\nALTER SEQUENCE public.enrichment_history_id_seq OWNED BY public.enrichment_history.id;\n\n\n--\n-- Name: enrichment_queue; Type: TABLE; Schema: public; Owner: -\n--\n\nCREATE TABLE public.enrichment_queue (\n    id uuid DEFAULT gen_random_uuid() NOT NULL,\n    mpn text NOT NULL,\n    manufacturer text,\n    priority integer DEFAULT 5,\n    status character varying(50) DEFAULT 'pending'::character varying NOT NULL,\n    source character varying(50) DEFAULT 'manual'::character varying,\n    organization_id uuid,\n    bom_id uuid,\n    batch_job_id uuid,\n    attempts integer DEFAULT 0,\n    last_attempt_at timestamp with time zone,\n    error_message text,\n    created_at timestamp with time zone DEFAULT CURRENT_TIMESTAMP,\n    updated_at timestamp with time zone DEFAULT CURRENT_TIMESTAMP,\n    CONSTRAINT enrichment_queue_priority_check CHECK (((priority \u003e= 1) AND (priority \u003c= 10)))\n);\n\n\n--\n-- Name: manufacturers; Type: TABLE; Schema: public; Owner: -\n--\n\nCREATE TABLE public.manufacturers (\n    id integer NOT NULL,\n    name character varying(255) NOT NULL,\n    website character varying(512),\n    aliases jsonb DEFAULT '[]'::jsonb,\n    logo_url character varying(1024),\n    created_at timestamp without time zone DEFAULT CURRENT_TIMESTAMP,\n    updated_at timestamp without time zone DEFAULT CURRENT_TIMESTAMP\n);\n\n\n--\n-- Name: TABLE manufacturers; Type: COMMENT; Schema: public; Owner: -\n--\n\nCOMMENT ON TABLE public.manufacturers IS 'Component manufacturers master list';\n\n\n--\n-- Name: manufacturers_id_seq; Type: SEQUENCE; Schema: public; Owner: -\n--\n\nCREATE SEQUENCE public.manufacturers_id_seq\n    AS integer\n    START WITH 1\n    INCREMENT BY 1\n    NO MINVALUE\n    NO MAXVALUE\n    CACHE 1;\n\n\n--\n-- Name: manufacturers_id_seq; Type: SEQUENCE OWNED BY; Schema: public; Owner: -\n--\n\nALTER SEQUENCE public.manufacturers_id_seq OWNED BY public.manufacturers.id;\n\n\n--\n-- Name: rate_limit_config; Type: TABLE; Schema: public; Owner: -\n--\n\nCREATE TABLE public.rate_limit_config (\n    id integer NOT NULL,\n    service_name character varying(100) NOT NULL,\n    endpoint_pattern character varying(255),\n    max_requests_per_minute integer DEFAULT 60,\n    max_requests_per_hour integer DEFAULT 1000,\n    burst_size integer DEFAULT 10,\n    enabled boolean DEFAULT true,\n    created_at timestamp with time zone DEFAULT CURRENT_TIMESTAMP\n);\n\n\n--\n-- Name: rate_limit_config_id_seq; Type: SEQUENCE; Schema: public; Owner: -\n--\n\nCREATE SEQUENCE public.rate_limit_config_id_seq\n    AS integer\n    START WITH 1\n    INCREMENT BY 1\n    NO MINVALUE\n    NO MAXVALUE\n    CACHE 1;\n\n\n--\n-- Name: rate_limit_config_id_seq; Type: SEQUENCE OWNED BY; Schema: public; Owner: -\n--\n\nALTER SEQUENCE public.rate_limit_config_id_seq OWNED BY public.rate_limit_config.id;\n\n\n--\n-- Name: redis_cache_config; Type: TABLE; Schema: public; Owner: -\n--\n\nCREATE TABLE public.redis_cache_config (\n    id integer NOT NULL,\n    service_name character varying(100) NOT NULL,\n    redis_namespace character varying(255) NOT NULL,\n    ttl_seconds integer DEFAULT 3600,\n    enabled boolean DEFAULT true,\n    created_at timestamp with time zone DEFAULT CURRENT_TIMESTAMP,\n    updated_at timestamp with time zone DEFAULT CURRENT_TIMESTAMP\n);\n\n\n--\n-- Name: redis_cache_config_id_seq; Type: SEQUENCE; Schema: public; Owner: -\n--\n\nCREATE SEQUENCE public.redis_cache_config_id_seq\n    AS integer\n    START WITH 1\n    INCREMENT BY 1\n    NO MINVALUE\n    NO MAXVALUE\n    CACHE 1;\n\n\n--\n-- Name: redis_cache_config_id_seq; Type: SEQUENCE OWNED BY; Schema: public; Owner: -\n--\n\nALTER SEQUENCE public.redis_cache_config_id_seq OWNED BY public.redis_cache_config.id;\n\n\n--\n-- Name: redis_circuit_breakers; Type: TABLE; Schema: public; Owner: -\n--\n\nCREATE TABLE public.redis_circuit_breakers (\n    id integer NOT NULL,\n    service_name character varying(100) NOT NULL,\n    state character varying(20) DEFAULT 'closed'::character varying NOT NULL,\n    failure_count integer DEFAULT 0,\n    failure_threshold integer DEFAULT 5 NOT NULL,\n    last_failure_time timestamp with time zone,\n    recovery_attempt_time timestamp with time zone,\n    opened_at timestamp with time zone,\n    created_at timestamp with time zone DEFAULT CURRENT_TIMESTAMP,\n    updated_at timestamp with time zone DEFAULT CURRENT_TIMESTAMP\n);\n\n\n--\n-- Name: redis_circuit_breakers_id_seq; Type: SEQUENCE; Schema: public; Owner: -\n--\n\nCREATE SEQUENCE public.redis_circuit_breakers_id_seq\n    AS integer\n    START WITH 1\n    INCREMENT BY 1\n    NO MINVALUE\n    NO MAXVALUE\n    CACHE 1;\n\n\n--\n-- Name: redis_circuit_breakers_id_seq; Type: SEQUENCE OWNED BY; Schema: public; Owner: -\n--\n\nALTER SEQUENCE public.redis_circuit_breakers_id_seq OWNED BY public.redis_circuit_breakers.id;\n\n\n--\n-- Name: redis_cns_config; Type: TABLE; Schema: public; Owner: -\n--\n\nCREATE TABLE public.redis_cns_config (\n    id integer NOT NULL,\n    service_name character varying(50) DEFAULT 'cns-service'::character varying NOT NULL,\n    cache_ttl_seconds integer DEFAULT 3600 NOT NULL,\n    lookup_cache_ttl_seconds integer DEFAULT 86400 NOT NULL,\n    batch_cache_ttl_seconds integer DEFAULT 1800 NOT NULL,\n    compression_enabled boolean DEFAULT true NOT NULL,\n    max_cache_size_mb integer DEFAULT 2048 NOT NULL,\n    created_at timestamp with time zone DEFAULT CURRENT_TIMESTAMP\n);\n\n\n--\n-- Name: redis_cns_config_id_seq; Type: SEQUENCE; Schema: public; Owner: -\n--\n\nCREATE SEQUENCE public.redis_cns_config_id_seq\n    AS integer\n    START WITH 1\n    INCREMENT BY 1\n    NO MINVALUE\n    NO MAXVALUE\n    CACHE 1;\n\n\n--\n-- Name: redis_cns_config_id_seq; Type: SEQUENCE OWNED BY; Schema: public; Owner: -\n--\n\nALTER SEQUENCE public.redis_cns_config_id_seq OWNED BY public.redis_cns_config.id;\n\n\n--\n-- Name: redis_component_cache_config; Type: TABLE; Schema: public; Owner: -\n--\n\nCREATE TABLE public.redis_component_cache_config (\n    id integer NOT NULL,\n    entity_type character varying(50) NOT NULL,\n    ttl_seconds integer DEFAULT 86400 NOT NULL,\n    update_on_write boolean DEFAULT true NOT NULL,\n    update_on_read boolean DEFAULT false NOT NULL,\n    compression_enabled boolean DEFAULT true NOT NULL,\n    created_at timestamp with time zone DEFAULT CURRENT_TIMESTAMP\n);\n\n\n--\n-- Name: redis_component_cache_config_id_seq; Type: SEQUENCE; Schema: public; Owner: -\n--\n\nCREATE SEQUENCE public.redis_component_cache_config_id_seq\n    AS integer\n    START WITH 1\n    INCREMENT BY 1\n    NO MINVALUE\n    NO MAXVALUE\n    CACHE 1;\n\n\n--\n-- Name: redis_component_cache_config_id_seq; Type: SEQUENCE OWNED BY; Schema: public; Owner: -\n--\n\nALTER SEQUENCE public.redis_component_cache_config_id_seq OWNED BY public.redis_component_cache_config.id;\n\n\n--\n-- Name: redis_connection_config; Type: TABLE; Schema: public; Owner: -\n--\n\nCREATE TABLE public.redis_connection_config (\n    id integer NOT NULL,\n    config_name character varying(100) NOT NULL,\n    host character varying(255) DEFAULT 'redis'::character varying,\n    port integer DEFAULT 6379,\n    database integer DEFAULT 0,\n    password_encrypted character varying(500),\n    connection_pool_size integer DEFAULT 10,\n    max_overflow integer DEFAULT 5,\n    timeout_seconds integer DEFAULT 5,\n    retry_on_timeout boolean DEFAULT true,\n    ssl_enabled boolean DEFAULT false,\n    created_at timestamp with time zone DEFAULT CURRENT_TIMESTAMP,\n    updated_at timestamp with time zone DEFAULT CURRENT_TIMESTAMP\n);\n\n\n--\n-- Name: redis_connection_config_id_seq; Type: SEQUENCE; Schema: public; Owner: -\n--\n\nCREATE SEQUENCE public.redis_connection_config_id_seq\n    AS integer\n    START WITH 1\n    INCREMENT BY 1\n    NO MINVALUE\n    NO MAXVALUE\n    CACHE 1;\n\n\n--\n-- Name: redis_connection_config_id_seq; Type: SEQUENCE OWNED BY; Schema: public; Owner: -\n--\n\nALTER SEQUENCE public.redis_connection_config_id_seq OWNED BY public.redis_connection_config.id;\n\n\n--\n-- Name: redis_directus_config; Type: TABLE; Schema: public; Owner: -\n--\n\nCREATE TABLE public.redis_directus_config (\n    id integer NOT NULL,\n    collection_name character varying(100) NOT NULL,\n    ttl_seconds integer DEFAULT 3600 NOT NULL,\n    invalidate_on_webhook boolean DEFAULT true NOT NULL,\n    batch_operations boolean DEFAULT true NOT NULL,\n    created_at timestamp with time zone DEFAULT CURRENT_TIMESTAMP\n);\n\n\n--\n-- Name: redis_directus_config_id_seq; Type: SEQUENCE; Schema: public; Owner: -\n--\n\nCREATE SEQUENCE public.redis_directus_config_id_seq\n    AS integer\n    START WITH 1\n    INCREMENT BY 1\n    NO MINVALUE\n    NO MAXVALUE\n    CACHE 1;\n\n\n--\n-- Name: redis_directus_config_id_seq; Type: SEQUENCE OWNED BY; Schema: public; Owner: -\n--\n\nALTER SEQUENCE public.redis_directus_config_id_seq OWNED BY public.redis_directus_config.id;\n\n\n--\n-- Name: redis_health_check; Type: TABLE; Schema: public; Owner: -\n--\n\nCREATE TABLE public.redis_health_check (\n    id integer NOT NULL,\n    service_name character varying(100),\n    redis_db integer,\n    connection_status character varying(50),\n    response_time_ms integer,\n    memory_used_mb numeric(10,2),\n    keys_count integer,\n    last_check timestamp with time zone,\n    created_at timestamp with time zone DEFAULT CURRENT_TIMESTAMP\n);\n\n\n--\n-- Name: redis_health_check_id_seq; Type: SEQUENCE; Schema: public; Owner: -\n--\n\nCREATE SEQUENCE public.redis_health_check_id_seq\n    AS integer\n    START WITH 1\n    INCREMENT BY 1\n    NO MINVALUE\n    NO MAXVALUE\n    CACHE 1;\n\n\n--\n-- Name: redis_health_check_id_seq; Type: SEQUENCE OWNED BY; Schema: public; Owner: -\n--\n\nALTER SEQUENCE public.redis_health_check_id_seq OWNED BY public.redis_health_check.id;\n\n\n--\n-- Name: redis_health_checks; Type: TABLE; Schema: public; Owner: -\n--\n\nCREATE TABLE public.redis_health_checks (\n    id integer NOT NULL,\n    check_timestamp timestamp with time zone DEFAULT CURRENT_TIMESTAMP,\n    service_name character varying(50) NOT NULL,\n    status character varying(20) NOT NULL,\n    response_time_ms integer,\n    last_error text,\n    created_at timestamp with time zone DEFAULT CURRENT_TIMESTAMP\n);\n\n\n--\n-- Name: redis_health_checks_id_seq; Type: SEQUENCE; Schema: public; Owner: -\n--\n\nCREATE SEQUENCE public.redis_health_checks_id_seq\n    AS integer\n    START WITH 1\n    INCREMENT BY 1\n    NO MINVALUE\n    NO MAXVALUE\n    CACHE 1;\n\n\n--\n-- Name: redis_health_checks_id_seq; Type: SEQUENCE OWNED BY; Schema: public; Owner: -\n--\n\nALTER SEQUENCE public.redis_health_checks_id_seq OWNED BY public.redis_health_checks.id;\n\n\n--\n-- Name: redis_key_expiration_policy; Type: TABLE; Schema: public; Owner: -\n--\n\nCREATE TABLE public.redis_key_expiration_policy (\n    id integer NOT NULL,\n    key_pattern character varying(255) NOT NULL,\n    ttl_seconds integer NOT NULL,\n    eviction_policy character varying(50) DEFAULT 'allkeys-lru'::character varying,\n    description text,\n    created_at timestamp with time zone DEFAULT CURRENT_TIMESTAMP\n);\n\n\n--\n-- Name: redis_key_expiration_policy_id_seq; Type: SEQUENCE; Schema: public; Owner: -\n--\n\nCREATE SEQUENCE public.redis_key_expiration_policy_id_seq\n    AS integer\n    START WITH 1\n    INCREMENT BY 1\n    NO MINVALUE\n    NO MAXVALUE\n    CACHE 1;\n\n\n--\n-- Name: redis_key_expiration_policy_id_seq; Type: SEQUENCE OWNED BY; Schema: public; Owner: -\n--\n\nALTER SEQUENCE public.redis_key_expiration_policy_id_seq OWNED BY public.redis_key_expiration_policy.id;\n\n\n--\n-- Name: redis_rate_limits; Type: TABLE; Schema: public; Owner: -\n--\n\nCREATE TABLE public.redis_rate_limits (\n    id integer NOT NULL,\n    supplier_name character varying(100) NOT NULL,\n    requests_per_hour integer DEFAULT 10000 NOT NULL,\n    requests_per_minute integer DEFAULT 200 NOT NULL,\n    burst_allowance integer DEFAULT 10 NOT NULL,\n    throttle_duration_ms integer DEFAULT 1000 NOT NULL,\n    enabled boolean DEFAULT true NOT NULL,\n    created_at timestamp with time zone DEFAULT CURRENT_TIMESTAMP,\n    updated_at timestamp with time zone DEFAULT CURRENT_TIMESTAMP\n);\n\n\n--\n-- Name: redis_rate_limits_id_seq; Type: SEQUENCE; Schema: public; Owner: -\n--\n\nCREATE SEQUENCE public.redis_rate_limits_id_seq\n    AS integer\n    START WITH 1\n    INCREMENT BY 1\n    NO MINVALUE\n    NO MAXVALUE\n    CACHE 1;\n\n\n--\n-- Name: redis_rate_limits_id_seq; Type: SEQUENCE OWNED BY; Schema: public; Owner: -\n--\n\nALTER SEQUENCE public.redis_rate_limits_id_seq OWNED BY public.redis_rate_limits.id;\n\n\n--\n-- Name: redis_s3_metadata_config; Type: TABLE; Schema: public; Owner: -\n--\n\nCREATE TABLE public.redis_s3_metadata_config (\n    id integer NOT NULL,\n    bucket_name character varying(100) NOT NULL,\n    ttl_seconds integer DEFAULT 3600 NOT NULL,\n    cache_headers boolean DEFAULT true NOT NULL,\n    cache_tags boolean DEFAULT true NOT NULL,\n    max_object_size_mb integer DEFAULT 100 NOT NULL,\n    created_at timestamp with time zone DEFAULT CURRENT_TIMESTAMP\n);\n\n\n--\n-- Name: redis_s3_metadata_config_id_seq; Type: SEQUENCE; Schema: public; Owner: -\n--\n\nCREATE SEQUENCE public.redis_s3_metadata_config_id_seq\n    AS integer\n    START WITH 1\n    INCREMENT BY 1\n    NO MINVALUE\n    NO MAXVALUE\n    CACHE 1;\n\n\n--\n-- Name: redis_s3_metadata_config_id_seq; Type: SEQUENCE OWNED BY; Schema: public; Owner: -\n--\n\nALTER SEQUENCE public.redis_s3_metadata_config_id_seq OWNED BY public.redis_s3_metadata_config.id;\n\n\n--\n-- Name: redis_sync_lock; Type: TABLE; Schema: public; Owner: -\n--\n\nCREATE TABLE public.redis_sync_lock (\n    lock_name text NOT NULL,\n    locked_by text NOT NULL,\n    locked_at timestamp with time zone DEFAULT now(),\n    expires_at timestamp with time zone NOT NULL\n);\n\n\n--\n-- Name: TABLE redis_sync_lock; Type: COMMENT; Schema: public; Owner: -\n--\n\nCOMMENT ON TABLE public.redis_sync_lock IS 'Advisory locks for Redis sync operations to prevent race conditions';\n\n\n--\n-- Name: redis_sync_log; Type: TABLE; Schema: public; Owner: -\n--\n\nCREATE TABLE public.redis_sync_log (\n    id integer NOT NULL,\n    service_name character varying(100),\n    operation character varying(50),\n    redis_key character varying(500),\n    data_size_bytes integer,\n    success boolean,\n    error_message text,\n    sync_time integer,\n    created_at timestamp with time zone DEFAULT CURRENT_TIMESTAMP\n);\n\n\n--\n-- Name: redis_sync_log_id_seq; Type: SEQUENCE; Schema: public; Owner: -\n--\n\nCREATE SEQUENCE public.redis_sync_log_id_seq\n    AS integer\n    START WITH 1\n    INCREMENT BY 1\n    NO MINVALUE\n    NO MAXVALUE\n    CACHE 1;\n\n\n--\n-- Name: redis_sync_log_id_seq; Type: SEQUENCE OWNED BY; Schema: public; Owner: -\n--\n\nALTER SEQUENCE public.redis_sync_log_id_seq OWNED BY public.redis_sync_log.id;\n\n\n--\n-- Name: redis_temporal_config; Type: TABLE; Schema: public; Owner: -\n--\n\nCREATE TABLE public.redis_temporal_config (\n    id integer NOT NULL,\n    service_name character varying(50) NOT NULL,\n    redis_host character varying(100) DEFAULT 'localhost'::character varying NOT NULL,\n    redis_port integer DEFAULT 6379 NOT NULL,\n    redis_db integer DEFAULT 0 NOT NULL,\n    connection_pool_size integer DEFAULT 10 NOT NULL,\n    timeout_ms integer DEFAULT 5000 NOT NULL,\n    retry_policy jsonb DEFAULT '{\"backoff_ms\": 100, \"max_retries\": 3, \"backoff_multiplier\": 2.0}'::jsonb NOT NULL,\n    created_at timestamp with time zone DEFAULT CURRENT_TIMESTAMP,\n    updated_at timestamp with time zone DEFAULT CURRENT_TIMESTAMP\n);\n\n\n--\n-- Name: redis_temporal_config_id_seq; Type: SEQUENCE; Schema: public; Owner: -\n--\n\nCREATE SEQUENCE public.redis_temporal_config_id_seq\n    AS integer\n    START WITH 1\n    INCREMENT BY 1\n    NO MINVALUE\n    NO MAXVALUE\n    CACHE 1;\n\n\n--\n-- Name: redis_temporal_config_id_seq; Type: SEQUENCE OWNED BY; Schema: public; Owner: -\n--\n\nALTER SEQUENCE public.redis_temporal_config_id_seq OWNED BY public.redis_temporal_config.id;\n\n\n--\n-- Name: s3_cache_config; Type: TABLE; Schema: public; Owner: -\n--\n\nCREATE TABLE public.s3_cache_config (\n    id integer NOT NULL,\n    bucket_name character varying(100) NOT NULL,\n    cache_path character varying(255),\n    ttl_seconds integer DEFAULT 86400 NOT NULL,\n    max_file_size_mb integer DEFAULT 100,\n    compression_enabled boolean DEFAULT true,\n    created_at timestamp with time zone DEFAULT CURRENT_TIMESTAMP\n);\n\n\n--\n-- Name: s3_cache_config_id_seq; Type: SEQUENCE; Schema: public; Owner: -\n--\n\nCREATE SEQUENCE public.s3_cache_config_id_seq\n    AS integer\n    START WITH 1\n    INCREMENT BY 1\n    NO MINVALUE\n    NO MAXVALUE\n    CACHE 1;\n\n\n--\n-- Name: s3_cache_config_id_seq; Type: SEQUENCE OWNED BY; Schema: public; Owner: -\n--\n\nALTER SEQUENCE public.s3_cache_config_id_seq OWNED BY public.s3_cache_config.id;\n\n\n--\n-- Name: service_connectivity_matrix; Type: TABLE; Schema: public; Owner: -\n--\n\nCREATE TABLE public.service_connectivity_matrix (\n    id integer NOT NULL,\n    source_service character varying(100) NOT NULL,\n    target_service character varying(100) NOT NULL,\n    connection_type character varying(50) DEFAULT 'http'::character varying,\n    is_required boolean DEFAULT true,\n    health_endpoint character varying(255),\n    last_check_status character varying(50),\n    last_check_time timestamp with time zone,\n    created_at timestamp with time zone DEFAULT CURRENT_TIMESTAMP\n);\n\n\n--\n-- Name: service_connectivity_matrix_id_seq; Type: SEQUENCE; Schema: public; Owner: -\n--\n\nCREATE SEQUENCE public.service_connectivity_matrix_id_seq\n    AS integer\n    START WITH 1\n    INCREMENT BY 1\n    NO MINVALUE\n    NO MAXVALUE\n    CACHE 1;\n\n\n--\n-- Name: service_connectivity_matrix_id_seq; Type: SEQUENCE OWNED BY; Schema: public; Owner: -\n--\n\nALTER SEQUENCE public.service_connectivity_matrix_id_seq OWNED BY public.service_connectivity_matrix.id;\n\n\n--\n-- Name: supplier_enrichment_responses; Type: TABLE; Schema: public; Owner: -\n--\n\nCREATE TABLE public.supplier_enrichment_responses (\n    id uuid DEFAULT gen_random_uuid() NOT NULL,\n    job_id uuid,\n    line_id uuid,\n    mpn text,\n    manufacturer text,\n    vendor text,\n    payload jsonb NOT NULL,\n    normalized jsonb,\n    created_at timestamp with time zone DEFAULT now()\n);\n\n\n--\n-- Name: TABLE supplier_enrichment_responses; Type: COMMENT; Schema: public; Owner: -\n--\n\nCOMMENT ON TABLE public.supplier_enrichment_responses IS 'Raw supplier API responses for enrichment jobs';\n\n\n--\n-- Name: supplier_performance_metrics; Type: TABLE; Schema: public; Owner: -\n--\n\nCREATE TABLE public.supplier_performance_metrics (\n    id integer NOT NULL,\n    supplier_id integer,\n    supplier_name character varying(100) NOT NULL,\n    date date NOT NULL,\n    total_requests integer DEFAULT 0,\n    successful_requests integer DEFAULT 0,\n    failed_requests integer DEFAULT 0,\n    avg_response_time_ms integer,\n    avg_quality_score numeric(5,2),\n    uptime_percentage numeric(5,2),\n    created_at timestamp with time zone DEFAULT CURRENT_TIMESTAMP\n);\n\n\n--\n-- Name: supplier_performance_metrics_id_seq; Type: SEQUENCE; Schema: public; Owner: -\n--\n\nCREATE SEQUENCE public.supplier_performance_metrics_id_seq\n    AS integer\n    START WITH 1\n    INCREMENT BY 1\n    NO MINVALUE\n    NO MAXVALUE\n    CACHE 1;\n\n\n--\n-- Name: supplier_performance_metrics_id_seq; Type: SEQUENCE OWNED BY; Schema: public; Owner: -\n--\n\nALTER SEQUENCE public.supplier_performance_metrics_id_seq OWNED BY public.supplier_performance_metrics.id;\n\n\n--\n-- Name: supplier_rate_limits; Type: TABLE; Schema: public; Owner: -\n--\n\nCREATE TABLE public.supplier_rate_limits (\n    id integer NOT NULL,\n    supplier_name character varying(50) NOT NULL,\n    requests_per_second integer DEFAULT 10,\n    requests_per_minute integer DEFAULT 60,\n    requests_per_hour integer DEFAULT 1000,\n    concurrent_requests integer DEFAULT 5,\n    burst_limit integer DEFAULT 20,\n    created_at timestamp with time zone DEFAULT CURRENT_TIMESTAMP,\n    updated_at timestamp with time zone DEFAULT CURRENT_TIMESTAMP\n);\n\n\n--\n-- Name: supplier_rate_limits_id_seq; Type: SEQUENCE; Schema: public; Owner: -\n--\n\nCREATE SEQUENCE public.supplier_rate_limits_id_seq\n    AS integer\n    START WITH 1\n    INCREMENT BY 1\n    NO MINVALUE\n    NO MAXVALUE\n    CACHE 1;\n\n\n--\n-- Name: supplier_rate_limits_id_seq; Type: SEQUENCE OWNED BY; Schema: public; Owner: -\n--\n\nALTER SEQUENCE public.supplier_rate_limits_id_seq OWNED BY public.supplier_rate_limits.id;\n\n\n--\n-- Name: supplier_settings; Type: TABLE; Schema: public; Owner: -\n--\n\nCREATE TABLE public.supplier_settings (\n    id integer NOT NULL,\n    supplier_id integer,\n    supplier_name character varying(100) NOT NULL,\n    enabled boolean DEFAULT true,\n    priority integer DEFAULT 5,\n    timeout_ms integer DEFAULT 30000,\n    retry_count integer DEFAULT 3,\n    rate_limit_per_minute integer DEFAULT 60,\n    custom_settings jsonb DEFAULT '{}'::jsonb,\n    created_at timestamp with time zone DEFAULT CURRENT_TIMESTAMP,\n    updated_at timestamp with time zone DEFAULT CURRENT_TIMESTAMP\n);\n\n\n--\n-- Name: supplier_settings_id_seq; Type: SEQUENCE; Schema: public; Owner: -\n--\n\nCREATE SEQUENCE public.supplier_settings_id_seq\n    AS integer\n    START WITH 1\n    INCREMENT BY 1\n    NO MINVALUE\n    NO MAXVALUE\n    CACHE 1;\n\n\n--\n-- Name: supplier_settings_id_seq; Type: SEQUENCE OWNED BY; Schema: public; Owner: -\n--\n\nALTER SEQUENCE public.supplier_settings_id_seq OWNED BY public.supplier_settings.id;\n\n\n--\n-- Name: supplier_tokens; Type: TABLE; Schema: public; Owner: -\n--\n\nCREATE TABLE public.supplier_tokens (\n    supplier_name text NOT NULL,\n    access_token text,\n    refresh_token text,\n    expires_at timestamp with time zone,\n    updated_at timestamp with time zone DEFAULT now(),\n    created_at timestamp with time zone DEFAULT now()\n);\n\n\n--\n-- Name: TABLE supplier_tokens; Type: COMMENT; Schema: public; Owner: -\n--\n\nCOMMENT ON TABLE public.supplier_tokens IS 'OAuth tokens for supplier APIs (DigiKey, Mouser, etc.)';\n\n\n--\n-- Name: suppliers; Type: TABLE; Schema: public; Owner: -\n--\n\nCREATE TABLE public.suppliers (\n    id integer NOT NULL,\n    name character varying(255) NOT NULL,\n    website character varying(512),\n    api_enabled boolean DEFAULT false,\n    api_key_env_var character varying(100),\n    rate_limit_per_minute integer DEFAULT 60,\n    created_at timestamp without time zone DEFAULT CURRENT_TIMESTAMP,\n    updated_at timestamp without time zone DEFAULT CURRENT_TIMESTAMP\n);\n\n\n--\n-- Name: TABLE suppliers; Type: COMMENT; Schema: public; Owner: -\n--\n\nCOMMENT ON TABLE public.suppliers IS 'Component suppliers/distributors';\n\n\n--\n-- Name: suppliers_id_seq; Type: SEQUENCE; Schema: public; Owner: -\n--\n\nCREATE SEQUENCE public.suppliers_id_seq\n    AS integer\n    START WITH 1\n    INCREMENT BY 1\n    NO MINVALUE\n    NO MAXVALUE\n    CACHE 1;\n\n\n--\n-- Name: suppliers_id_seq; Type: SEQUENCE OWNED BY; Schema: public; Owner: -\n--\n\nALTER SEQUENCE public.suppliers_id_seq OWNED BY public.suppliers.id;\n\n\n--\n-- Name: vendor_category_mappings; Type: TABLE; Schema: public; Owner: -\n--\n\nCREATE TABLE public.vendor_category_mappings (\n    id integer NOT NULL,\n    vendor character varying(50) NOT NULL,\n    vendor_category_path character varying(1024) NOT NULL,\n    canonical_category_id integer,\n    confidence_score numeric(5,4) DEFAULT 0.0,\n    is_verified boolean DEFAULT false,\n    match_count integer DEFAULT 0,\n    created_at timestamp without time zone DEFAULT CURRENT_TIMESTAMP,\n    updated_at timestamp without time zone DEFAULT CURRENT_TIMESTAMP\n);\n\n\n--\n-- Name: TABLE vendor_category_mappings; Type: COMMENT; Schema: public; Owner: -\n--\n\nCOMMENT ON TABLE public.vendor_category_mappings IS 'Maps vendor categories to canonical taxonomy';\n\n\n--\n-- Name: vendor_category_mappings_id_seq; Type: SEQUENCE; Schema: public; Owner: -\n--\n\nCREATE SEQUENCE public.vendor_category_mappings_id_seq\n    AS integer\n    START WITH 1\n    INCREMENT BY 1\n    NO MINVALUE\n    NO MAXVALUE\n    CACHE 1;\n\n\n--\n-- Name: vendor_category_mappings_id_seq; Type: SEQUENCE OWNED BY; Schema: public; Owner: -\n--\n\nALTER SEQUENCE public.vendor_category_mappings_id_seq OWNED BY public.vendor_category_mappings.id;\n\n\n--\n-- Name: ai_prompts id; Type: DEFAULT; Schema: public; Owner: -\n--\n\nALTER TABLE ONLY public.ai_prompts ALTER COLUMN id SET DEFAULT nextval('public.ai_prompts_id_seq'::regclass);\n\n\n--\n-- Name: bom_queue_config id; Type: DEFAULT; Schema: public; Owner: -\n--\n\nALTER TABLE ONLY public.bom_queue_config ALTER COLUMN id SET DEFAULT nextval('public.bom_queue_config_id_seq'::regclass);\n\n\n--\n-- Name: categories id; Type: DEFAULT; Schema: public; Owner: -\n--\n\nALTER TABLE ONLY public.categories ALTER COLUMN id SET DEFAULT nextval('public.categories_id_seq'::regclass);\n\n\n--\n-- Name: category_snapshot_audit id; Type: DEFAULT; Schema: public; Owner: -\n--\n\nALTER TABLE ONLY public.category_snapshot_audit ALTER COLUMN id SET DEFAULT nextval('public.category_snapshot_audit_id_seq'::regclass);\n\n\n--\n-- Name: cns_cache_config id; Type: DEFAULT; Schema: public; Owner: -\n--\n\nALTER TABLE ONLY public.cns_cache_config ALTER COLUMN id SET DEFAULT nextval('public.cns_cache_config_id_seq'::regclass);\n\n\n--\n-- Name: cns_enrichment_config id; Type: DEFAULT; Schema: public; Owner: -\n--\n\nALTER TABLE ONLY public.cns_enrichment_config ALTER COLUMN id SET DEFAULT nextval('public.cns_enrichment_config_id_seq'::regclass);\n\n\n--\n-- Name: cns_supplier_settings id; Type: DEFAULT; Schema: public; Owner: -\n--\n\nALTER TABLE ONLY public.cns_supplier_settings ALTER COLUMN id SET DEFAULT nextval('public.cns_supplier_settings_id_seq'::regclass);\n\n\n--\n-- Name: component_pricing id; Type: DEFAULT; Schema: public; Owner: -\n--\n\nALTER TABLE ONLY public.component_pricing ALTER COLUMN id SET DEFAULT nextval('public.component_pricing_id_seq'::regclass);\n\n\n--\n-- Name: enrichment_history id; Type: DEFAULT; Schema: public; Owner: -\n--\n\nALTER TABLE ONLY public.enrichment_history ALTER COLUMN id SET DEFAULT nextval('public.enrichment_history_id_seq'::regclass);\n\n\n--\n-- Name: manufacturers id; Type: DEFAULT; Schema: public; Owner: -\n--\n\nALTER TABLE ONLY public.manufacturers ALTER COLUMN id SET DEFAULT nextval('public.manufacturers_id_seq'::regclass);\n\n\n--\n-- Name: rate_limit_config id; Type: DEFAULT; Schema: public; Owner: -\n--\n\nALTER TABLE ONLY public.rate_limit_config ALTER COLUMN id SET DEFAULT nextval('public.rate_limit_config_id_seq'::regclass);\n\n\n--\n-- Name: redis_cache_config id; Type: DEFAULT; Schema: public; Owner: -\n--\n\nALTER TABLE ONLY public.redis_cache_config ALTER COLUMN id SET DEFAULT nextval('public.redis_cache_config_id_seq'::regclass);\n\n\n--\n-- Name: redis_circuit_breakers id; Type: DEFAULT; Schema: public; Owner: -\n--\n\nALTER TABLE ONLY public.redis_circuit_breakers ALTER COLUMN id SET DEFAULT nextval('public.redis_circuit_breakers_id_seq'::regclass);\n\n\n--\n-- Name: redis_cns_config id; Type: DEFAULT; Schema: public; Owner: -\n--\n\nALTER TABLE ONLY public.redis_cns_config ALTER COLUMN id SET DEFAULT nextval('public.redis_cns_config_id_seq'::regclass);\n\n\n--\n-- Name: redis_component_cache_config id; Type: DEFAULT; Schema: public; Owner: -\n--\n\nALTER TABLE ONLY public.redis_component_cache_config ALTER COLUMN id SET DEFAULT nextval('public.redis_component_cache_config_id_seq'::regclass);\n\n\n--\n-- Name: redis_connection_config id; Type: DEFAULT; Schema: public; Owner: -\n--\n\nALTER TABLE ONLY public.redis_connection_config ALTER COLUMN id SET DEFAULT nextval('public.redis_connection_config_id_seq'::regclass);\n\n\n--\n-- Name: redis_directus_config id; Type: DEFAULT; Schema: public; Owner: -\n--\n\nALTER TABLE ONLY public.redis_directus_config ALTER COLUMN id SET DEFAULT nextval('public.redis_directus_config_id_seq'::regclass);\n\n\n--\n-- Name: redis_health_check id; Type: DEFAULT; Schema: public; Owner: -\n--\n\nALTER TABLE ONLY public.redis_health_check ALTER COLUMN id SET DEFAULT nextval('public.redis_health_check_id_seq'::regclass);\n\n\n--\n-- Name: redis_health_checks id; Type: DEFAULT; Schema: public; Owner: -\n--\n\nALTER TABLE ONLY public.redis_health_checks ALTER COLUMN id SET DEFAULT nextval('public.redis_health_checks_id_seq'::regclass);\n\n\n--\n-- Name: redis_key_expiration_policy id; Type: DEFAULT; Schema: public; Owner: -\n--\n\nALTER TABLE ONLY public.redis_key_expiration_policy ALTER COLUMN id SET DEFAULT nextval('public.redis_key_expiration_policy_id_seq'::regclass);\n\n\n--\n-- Name: redis_rate_limits id; Type: DEFAULT; Schema: public; Owner: -\n--\n\nALTER TABLE ONLY public.redis_rate_limits ALTER COLUMN id SET DEFAULT nextval('public.redis_rate_limits_id_seq'::regclass);\n\n\n--\n-- Name: redis_s3_metadata_config id; Type: DEFAULT; Schema: public; Owner: -\n--\n\nALTER TABLE ONLY public.redis_s3_metadata_config ALTER COLUMN id SET DEFAULT nextval('public.redis_s3_metadata_config_id_seq'::regclass);\n\n\n--\n-- Name: redis_sync_log id; Type: DEFAULT; Schema: public; Owner: -\n--\n\nALTER TABLE ONLY public.redis_sync_log ALTER COLUMN id SET DEFAULT nextval('public.redis_sync_log_id_seq'::regclass);\n\n\n--\n-- Name: redis_temporal_config id; Type: DEFAULT; Schema: public; Owner: -\n--\n\nALTER TABLE ONLY public.redis_temporal_config ALTER COLUMN id SET DEFAULT nextval('public.redis_temporal_config_id_seq'::regclass);\n\n\n--\n-- Name: s3_cache_config id; Type: DEFAULT; Schema: public; Owner: -\n--\n\nALTER TABLE ONLY public.s3_cache_config ALTER COLUMN id SET DEFAULT nextval('public.s3_cache_config_id_seq'::regclass);\n\n\n--\n-- Name: service_connectivity_matrix id; Type: DEFAULT; Schema: public; Owner: -\n--\n\nALTER TABLE ONLY public.service_connectivity_matrix ALTER COLUMN id SET DEFAULT nextval('public.service_connectivity_matrix_id_seq'::regclass);\n\n\n--\n-- Name: supplier_performance_metrics id; Type: DEFAULT; Schema: public; Owner: -\n--\n\nALTER TABLE ONLY public.supplier_performance_metrics ALTER COLUMN id SET DEFAULT nextval('public.supplier_performance_metrics_id_seq'::regclass);\n\n\n--\n-- Name: supplier_rate_limits id; Type: DEFAULT; Schema: public; Owner: -\n--\n\nALTER TABLE ONLY public.supplier_rate_limits ALTER COLUMN id SET DEFAULT nextval('public.supplier_rate_limits_id_seq'::regclass);\n\n\n--\n-- Name: supplier_settings id; Type: DEFAULT; Schema: public; Owner: -\n--\n\nALTER TABLE ONLY public.supplier_settings ALTER COLUMN id SET DEFAULT nextval('public.supplier_settings_id_seq'::regclass);\n\n\n--\n-- Name: suppliers id; Type: DEFAULT; Schema: public; Owner: -\n--\n\nALTER TABLE ONLY public.suppliers ALTER COLUMN id SET DEFAULT nextval('public.suppliers_id_seq'::regclass);\n\n\n--\n-- Name: vendor_category_mappings id; Type: DEFAULT; Schema: public; Owner: -\n--\n\nALTER TABLE ONLY public.vendor_category_mappings ALTER COLUMN id SET DEFAULT nextval('public.vendor_category_mappings_id_seq'::regclass);\n\n\n--\n-- Name: ai_prompts ai_prompts_name_key; Type: CONSTRAINT; Schema: public; Owner: -\n--\n\nALTER TABLE ONLY public.ai_prompts\n    ADD CONSTRAINT ai_prompts_name_key UNIQUE (name);\n\n\n--\n-- Name: ai_prompts ai_prompts_pkey; Type: CONSTRAINT; Schema: public; Owner: -\n--\n\nALTER TABLE ONLY public.ai_prompts\n    ADD CONSTRAINT ai_prompts_pkey PRIMARY KEY (id);\n\n\n--\n-- Name: audit_enrichment_runs audit_enrichment_runs_pkey; Type: CONSTRAINT; Schema: public; Owner: -\n--\n\nALTER TABLE ONLY public.audit_enrichment_runs\n    ADD CONSTRAINT audit_enrichment_runs_pkey PRIMARY KEY (id);\n\n\n--\n-- Name: audit_field_comparisons audit_field_comparisons_pkey; Type: CONSTRAINT; Schema: public; Owner: -\n--\n\nALTER TABLE ONLY public.audit_field_comparisons\n    ADD CONSTRAINT audit_field_comparisons_pkey PRIMARY KEY (id);\n\n\n--\n-- Name: audit_supplier_quality audit_supplier_quality_pkey; Type: CONSTRAINT; Schema: public; Owner: -\n--\n\nALTER TABLE ONLY public.audit_supplier_quality\n    ADD CONSTRAINT audit_supplier_quality_pkey PRIMARY KEY (id);\n\n\n--\n-- Name: bom_queue_config bom_queue_config_pkey; Type: CONSTRAINT; Schema: public; Owner: -\n--\n\nALTER TABLE ONLY public.bom_queue_config\n    ADD CONSTRAINT bom_queue_config_pkey PRIMARY KEY (id);\n\n\n--\n-- Name: bom_queue_config bom_queue_config_queue_name_key; Type: CONSTRAINT; Schema: public; Owner: -\n--\n\nALTER TABLE ONLY public.bom_queue_config\n    ADD CONSTRAINT bom_queue_config_queue_name_key UNIQUE (queue_name);\n\n\n--\n-- Name: catalog_categories catalog_categories_pkey; Type: CONSTRAINT; Schema: public; Owner: -\n--\n\nALTER TABLE ONLY public.catalog_categories\n    ADD CONSTRAINT catalog_categories_pkey PRIMARY KEY (id);\n\n\n--\n-- Name: catalog_category_mappings catalog_category_mappings_pkey; Type: CONSTRAINT; Schema: public; Owner: -\n--\n\nALTER TABLE ONLY public.catalog_category_mappings\n    ADD CONSTRAINT catalog_category_mappings_pkey PRIMARY KEY (id);\n\n\n--\n-- Name: catalog_component_manufacturers catalog_component_manufacturers_pkey; Type: CONSTRAINT; Schema: public; Owner: -\n--\n\nALTER TABLE ONLY public.catalog_component_manufacturers\n    ADD CONSTRAINT catalog_component_manufacturers_pkey PRIMARY KEY (component_id, manufacturer_id);\n\n\n--\n-- Name: catalog_components_table catalog_components_table_pkey; Type: CONSTRAINT; Schema: public; Owner: -\n--\n\nALTER TABLE ONLY public.catalog_components_table\n    ADD CONSTRAINT catalog_components_table_pkey PRIMARY KEY (id);\n\n\n--\n-- Name: catalog_manufacturers catalog_manufacturers_pkey; Type: CONSTRAINT; Schema: public; Owner: -\n--\n\nALTER TABLE ONLY public.catalog_manufacturers\n    ADD CONSTRAINT catalog_manufacturers_pkey PRIMARY KEY (id);\n\n\n--\n-- Name: categories categories_digikey_id_key; Type: CONSTRAINT; Schema: public; Owner: -\n--\n\nALTER TABLE ONLY public.categories\n    ADD CONSTRAINT categories_digikey_id_key UNIQUE (digikey_id);\n\n\n--\n-- Name: categories categories_pkey; Type: CONSTRAINT; Schema: public; Owner: -\n--\n\nALTER TABLE ONLY public.categories\n    ADD CONSTRAINT categories_pkey PRIMARY KEY (id);\n\n\n--\n-- Name: category_snapshot_audit category_snapshot_audit_pkey; Type: CONSTRAINT; Schema: public; Owner: -\n--\n\nALTER TABLE ONLY public.category_snapshot_audit\n    ADD CONSTRAINT category_snapshot_audit_pkey PRIMARY KEY (id);\n\n\n--\n-- Name: category_source_snapshot category_source_snapshot_pkey; Type: CONSTRAINT; Schema: public; Owner: -\n--\n\nALTER TABLE ONLY public.category_source_snapshot\n    ADD CONSTRAINT category_source_snapshot_pkey PRIMARY KEY (source_id);\n\n\n--\n-- Name: cns_cache_config cns_cache_config_pkey; Type: CONSTRAINT; Schema: public; Owner: -\n--\n\nALTER TABLE ONLY public.cns_cache_config\n    ADD CONSTRAINT cns_cache_config_pkey PRIMARY KEY (id);\n\n\n--\n-- Name: cns_enrichment_config cns_enrichment_config_config_key_key; Type: CONSTRAINT; Schema: public; Owner: -\n--\n\nALTER TABLE ONLY public.cns_enrichment_config\n    ADD CONSTRAINT cns_enrichment_config_config_key_key UNIQUE (config_key);\n\n\n--\n-- Name: cns_enrichment_config_history cns_enrichment_config_history_pkey; Type: CONSTRAINT; Schema: public; Owner: -\n--\n\nALTER TABLE ONLY public.cns_enrichment_config_history\n    ADD CONSTRAINT cns_enrichment_config_history_pkey PRIMARY KEY (id);\n\n\n--\n-- Name: cns_enrichment_config cns_enrichment_config_pkey; Type: CONSTRAINT; Schema: public; Owner: -\n--\n\nALTER TABLE ONLY public.cns_enrichment_config\n    ADD CONSTRAINT cns_enrichment_config_pkey PRIMARY KEY (id);\n\n\n--\n-- Name: cns_supplier_settings cns_supplier_settings_pkey; Type: CONSTRAINT; Schema: public; Owner: -\n--\n\nALTER TABLE ONLY public.cns_supplier_settings\n    ADD CONSTRAINT cns_supplier_settings_pkey PRIMARY KEY (id);\n\n\n--\n-- Name: cns_supplier_settings cns_supplier_settings_supplier_name_key; Type: CONSTRAINT; Schema: public; Owner: -\n--\n\nALTER TABLE ONLY public.cns_supplier_settings\n    ADD CONSTRAINT cns_supplier_settings_supplier_name_key UNIQUE (supplier_name);\n\n\n--\n-- Name: column_mapping_templates column_mapping_templates_pkey; Type: CONSTRAINT; Schema: public; Owner: -\n--\n\nALTER TABLE ONLY public.column_mapping_templates\n    ADD CONSTRAINT column_mapping_templates_pkey PRIMARY KEY (id);\n\n\n--\n-- Name: component_catalog component_catalog_pkey; Type: CONSTRAINT; Schema: public; Owner: -\n--\n\nALTER TABLE ONLY public.component_catalog\n    ADD CONSTRAINT component_catalog_pkey PRIMARY KEY (id);\n\n\n--\n-- Name: component_lifecycle component_lifecycle_pkey; Type: CONSTRAINT; Schema: public; Owner: -\n--\n\nALTER TABLE ONLY public.component_lifecycle\n    ADD CONSTRAINT component_lifecycle_pkey PRIMARY KEY (id);\n\n\n--\n-- Name: component_pricing component_pricing_pkey; Type: CONSTRAINT; Schema: public; Owner: -\n--\n\nALTER TABLE ONLY public.component_pricing\n    ADD CONSTRAINT component_pricing_pkey PRIMARY KEY (id);\n\n\n--\n-- Name: component_storage_tracking component_storage_tracking_pkey; Type: CONSTRAINT; Schema: public; Owner: -\n--\n\nALTER TABLE ONLY public.component_storage_tracking\n    ADD CONSTRAINT component_storage_tracking_pkey PRIMARY KEY (id);\n\n\n--\n-- Name: components components_pkey; Type: CONSTRAINT; Schema: public; Owner: -\n--\n\nALTER TABLE ONLY public.components\n    ADD CONSTRAINT components_pkey PRIMARY KEY (id);\n\n\n--\n-- Name: enrichment_batch_jobs enrichment_batch_jobs_pkey; Type: CONSTRAINT; Schema: public; Owner: -\n--\n\nALTER TABLE ONLY public.enrichment_batch_jobs\n    ADD CONSTRAINT enrichment_batch_jobs_pkey PRIMARY KEY (id);\n\n\n--\n-- Name: enrichment_config enrichment_config_pkey; Type: CONSTRAINT; Schema: public; Owner: -\n--\n\nALTER TABLE ONLY public.enrichment_config\n    ADD CONSTRAINT enrichment_config_pkey PRIMARY KEY (id);\n\n\n--\n-- Name: enrichment_history enrichment_history_pkey; Type: CONSTRAINT; Schema: public; Owner: -\n--\n\nALTER TABLE ONLY public.enrichment_history\n    ADD CONSTRAINT enrichment_history_pkey PRIMARY KEY (id);\n\n\n--\n-- Name: enrichment_queue enrichment_queue_pkey; Type: CONSTRAINT; Schema: public; Owner: -\n--\n\nALTER TABLE ONLY public.enrichment_queue\n    ADD CONSTRAINT enrichment_queue_pkey PRIMARY KEY (id);\n\n\n--\n-- Name: manufacturers manufacturers_name_key; Type: CONSTRAINT; Schema: public; Owner: -\n--\n\nALTER TABLE ONLY public.manufacturers\n    ADD CONSTRAINT manufacturers_name_key UNIQUE (name);\n\n\n--\n-- Name: manufacturers manufacturers_pkey; Type: CONSTRAINT; Schema: public; Owner: -\n--\n\nALTER TABLE ONLY public.manufacturers\n    ADD CONSTRAINT manufacturers_pkey PRIMARY KEY (id);\n\n\n--\n-- Name: rate_limit_config rate_limit_config_pkey; Type: CONSTRAINT; Schema: public; Owner: -\n--\n\nALTER TABLE ONLY public.rate_limit_config\n    ADD CONSTRAINT rate_limit_config_pkey PRIMARY KEY (id);\n\n\n--\n-- Name: rate_limit_config rate_limit_config_service_name_key; Type: CONSTRAINT; Schema: public; Owner: -\n--\n\nALTER TABLE ONLY public.rate_limit_config\n    ADD CONSTRAINT rate_limit_config_service_name_key UNIQUE (service_name);\n\n\n--\n-- Name: redis_cache_config redis_cache_config_pkey; Type: CONSTRAINT; Schema: public; Owner: -\n--\n\nALTER TABLE ONLY public.redis_cache_config\n    ADD CONSTRAINT redis_cache_config_pkey PRIMARY KEY (id);\n\n\n--\n-- Name: redis_circuit_breakers redis_circuit_breakers_pkey; Type: CONSTRAINT; Schema: public; Owner: -\n--\n\nALTER TABLE ONLY public.redis_circuit_breakers\n    ADD CONSTRAINT redis_circuit_breakers_pkey PRIMARY KEY (id);\n\n\n--\n-- Name: redis_cns_config redis_cns_config_pkey; Type: CONSTRAINT; Schema: public; Owner: -\n--\n\nALTER TABLE ONLY public.redis_cns_config\n    ADD CONSTRAINT redis_cns_config_pkey PRIMARY KEY (id);\n\n\n--\n-- Name: redis_component_cache_config redis_component_cache_config_pkey; Type: CONSTRAINT; Schema: public; Owner: -\n--\n\nALTER TABLE ONLY public.redis_component_cache_config\n    ADD CONSTRAINT redis_component_cache_config_pkey PRIMARY KEY (id);\n\n\n--\n-- Name: redis_component_snapshot redis_component_snapshot_pkey; Type: CONSTRAINT; Schema: public; Owner: -\n--\n\nALTER TABLE ONLY public.redis_component_snapshot\n    ADD CONSTRAINT redis_component_snapshot_pkey PRIMARY KEY (id);\n\n\n--\n-- Name: redis_connection_config redis_connection_config_pkey; Type: CONSTRAINT; Schema: public; Owner: -\n--\n\nALTER TABLE ONLY public.redis_connection_config\n    ADD CONSTRAINT redis_connection_config_pkey PRIMARY KEY (id);\n\n\n--\n-- Name: redis_directus_config redis_directus_config_pkey; Type: CONSTRAINT; Schema: public; Owner: -\n--\n\nALTER TABLE ONLY public.redis_directus_config\n    ADD CONSTRAINT redis_directus_config_pkey PRIMARY KEY (id);\n\n\n--\n-- Name: redis_health_check redis_health_check_pkey; Type: CONSTRAINT; Schema: public; Owner: -\n--\n\nALTER TABLE ONLY public.redis_health_check\n    ADD CONSTRAINT redis_health_check_pkey PRIMARY KEY (id);\n\n\n--\n-- Name: redis_health_checks redis_health_checks_pkey; Type: CONSTRAINT; Schema: public; Owner: -\n--\n\nALTER TABLE ONLY public.redis_health_checks\n    ADD CONSTRAINT redis_health_checks_pkey PRIMARY KEY (id);\n\n\n--\n-- Name: redis_key_expiration_policy redis_key_expiration_policy_pkey; Type: CONSTRAINT; Schema: public; Owner: -\n--\n\nALTER TABLE ONLY public.redis_key_expiration_policy\n    ADD CONSTRAINT redis_key_expiration_policy_pkey PRIMARY KEY (id);\n\n\n--\n-- Name: redis_rate_limits redis_rate_limits_pkey; Type: CONSTRAINT; Schema: public; Owner: -\n--\n\nALTER TABLE ONLY public.redis_rate_limits\n    ADD CONSTRAINT redis_rate_limits_pkey PRIMARY KEY (id);\n\n\n--\n-- Name: redis_s3_metadata_config redis_s3_metadata_config_pkey; Type: CONSTRAINT; Schema: public; Owner: -\n--\n\nALTER TABLE ONLY public.redis_s3_metadata_config\n    ADD CONSTRAINT redis_s3_metadata_config_pkey PRIMARY KEY (id);\n\n\n--\n-- Name: redis_sync_lock redis_sync_lock_pkey; Type: CONSTRAINT; Schema: public; Owner: -\n--\n\nALTER TABLE ONLY public.redis_sync_lock\n    ADD CONSTRAINT redis_sync_lock_pkey PRIMARY KEY (lock_name);\n\n\n--\n-- Name: redis_sync_log redis_sync_log_pkey; Type: CONSTRAINT; Schema: public; Owner: -\n--\n\nALTER TABLE ONLY public.redis_sync_log\n    ADD CONSTRAINT redis_sync_log_pkey PRIMARY KEY (id);\n\n\n--\n-- Name: redis_temporal_config redis_temporal_config_pkey; Type: CONSTRAINT; Schema: public; Owner: -\n--\n\nALTER TABLE ONLY public.redis_temporal_config\n    ADD CONSTRAINT redis_temporal_config_pkey PRIMARY KEY (id);\n\n\n--\n-- Name: s3_cache_config s3_cache_config_pkey; Type: CONSTRAINT; Schema: public; Owner: -\n--\n\nALTER TABLE ONLY public.s3_cache_config\n    ADD CONSTRAINT s3_cache_config_pkey PRIMARY KEY (id);\n\n\n--\n-- Name: service_connectivity_matrix service_connectivity_matrix_pkey; Type: CONSTRAINT; Schema: public; Owner: -\n--\n\nALTER TABLE ONLY public.service_connectivity_matrix\n    ADD CONSTRAINT service_connectivity_matrix_pkey PRIMARY KEY (id);\n\n\n--\n-- Name: service_connectivity_matrix service_connectivity_matrix_source_service_target_service_key; Type: CONSTRAINT; Schema: public; Owner: -\n--\n\nALTER TABLE ONLY public.service_connectivity_matrix\n    ADD CONSTRAINT service_connectivity_matrix_source_service_target_service_key UNIQUE (source_service, target_service);\n\n\n--\n-- Name: supplier_enrichment_responses supplier_enrichment_responses_pkey; Type: CONSTRAINT; Schema: public; Owner: -\n--\n\nALTER TABLE ONLY public.supplier_enrichment_responses\n    ADD CONSTRAINT supplier_enrichment_responses_pkey PRIMARY KEY (id);\n\n\n--\n-- Name: supplier_performance_metrics supplier_performance_metrics_pkey; Type: CONSTRAINT; Schema: public; Owner: -\n--\n\nALTER TABLE ONLY public.supplier_performance_metrics\n    ADD CONSTRAINT supplier_performance_metrics_pkey PRIMARY KEY (id);\n\n\n--\n-- Name: supplier_performance_metrics supplier_performance_metrics_supplier_name_date_key; Type: CONSTRAINT; Schema: public; Owner: -\n--\n\nALTER TABLE ONLY public.supplier_performance_metrics\n    ADD CONSTRAINT supplier_performance_metrics_supplier_name_date_key UNIQUE (supplier_name, date);\n\n\n--\n-- Name: supplier_rate_limits supplier_rate_limits_pkey; Type: CONSTRAINT; Schema: public; Owner: -\n--\n\nALTER TABLE ONLY public.supplier_rate_limits\n    ADD CONSTRAINT supplier_rate_limits_pkey PRIMARY KEY (id);\n\n\n--\n-- Name: supplier_rate_limits supplier_rate_limits_supplier_name_key; Type: CONSTRAINT; Schema: public; Owner: -\n--\n\nALTER TABLE ONLY public.supplier_rate_limits\n    ADD CONSTRAINT supplier_rate_limits_supplier_name_key UNIQUE (supplier_name);\n\n\n--\n-- Name: supplier_settings supplier_settings_pkey; Type: CONSTRAINT; Schema: public; Owner: -\n--\n\nALTER TABLE ONLY public.supplier_settings\n    ADD CONSTRAINT supplier_settings_pkey PRIMARY KEY (id);\n\n\n--\n-- Name: supplier_settings supplier_settings_supplier_name_key; Type: CONSTRAINT; Schema: public; Owner: -\n--\n\nALTER TABLE ONLY public.supplier_settings\n    ADD CONSTRAINT supplier_settings_supplier_name_key UNIQUE (supplier_name);\n\n\n--\n-- Name: supplier_tokens supplier_tokens_pkey; Type: CONSTRAINT; Schema: public; Owner: -\n--\n\nALTER TABLE ONLY public.supplier_tokens\n    ADD CONSTRAINT supplier_tokens_pkey PRIMARY KEY (supplier_name);\n\n\n--\n-- Name: suppliers suppliers_name_key; Type: CONSTRAINT; Schema: public; Owner: -\n--\n\nALTER TABLE ONLY public.suppliers\n    ADD CONSTRAINT suppliers_name_key UNIQUE (name);\n\n\n--\n-- Name: suppliers suppliers_pkey; Type: CONSTRAINT; Schema: public; Owner: -\n--\n\nALTER TABLE ONLY public.suppliers\n    ADD CONSTRAINT suppliers_pkey PRIMARY KEY (id);\n\n\n--\n-- Name: components unique_mpn_manufacturer; Type: CONSTRAINT; Schema: public; Owner: -\n--\n\nALTER TABLE ONLY public.components\n    ADD CONSTRAINT unique_mpn_manufacturer UNIQUE (mpn, manufacturer_id);\n\n\n--\n-- Name: vendor_category_mappings unique_vendor_category; Type: CONSTRAINT; Schema: public; Owner: -\n--\n\nALTER TABLE ONLY public.vendor_category_mappings\n    ADD CONSTRAINT unique_vendor_category UNIQUE (vendor, vendor_category_path);\n\n\n--\n-- Name: audit_supplier_quality uq_audit_supplier_quality_date_supplier; Type: CONSTRAINT; Schema: public; Owner: -\n--\n\nALTER TABLE ONLY public.audit_supplier_quality\n    ADD CONSTRAINT uq_audit_supplier_quality_date_supplier UNIQUE (date, supplier_name);\n\n\n--\n-- Name: component_catalog uq_component_catalog_mpn_mfr; Type: CONSTRAINT; Schema: public; Owner: -\n--\n\nALTER TABLE ONLY public.component_catalog\n    ADD CONSTRAINT uq_component_catalog_mpn_mfr UNIQUE (manufacturer_part_number, manufacturer);\n\n\n--\n-- Name: column_mapping_templates uq_org_template_name; Type: CONSTRAINT; Schema: public; Owner: -\n--\n\nALTER TABLE ONLY public.column_mapping_templates\n    ADD CONSTRAINT uq_org_template_name UNIQUE (organization_id, name);\n\n\n--\n-- Name: vendor_category_mappings vendor_category_mappings_pkey; Type: CONSTRAINT; Schema: public; Owner: -\n--\n\nALTER TABLE ONLY public.vendor_category_mappings\n    ADD CONSTRAINT vendor_category_mappings_pkey PRIMARY KEY (id);\n\n\n--\n-- Name: idx_audit_enrichment_runs_line_id; Type: INDEX; Schema: public; Owner: -\n--\n\nCREATE INDEX idx_audit_enrichment_runs_line_id ON public.audit_enrichment_runs USING btree (line_id);\n\n\n--\n-- Name: idx_audit_enrichment_runs_mpn; Type: INDEX; Schema: public; Owner: -\n--\n\nCREATE INDEX idx_audit_enrichment_runs_mpn ON public.audit_enrichment_runs USING btree (mpn);\n\n\n--\n-- Name: idx_audit_enrichment_runs_needs_review; Type: INDEX; Schema: public; Owner: -\n--\n\nCREATE INDEX idx_audit_enrichment_runs_needs_review ON public.audit_enrichment_runs USING btree (needs_review) WHERE (needs_review = true);\n\n\n--\n-- Name: idx_audit_enrichment_runs_quality; Type: INDEX; Schema: public; Owner: -\n--\n\nCREATE INDEX idx_audit_enrichment_runs_quality ON public.audit_enrichment_runs USING btree (quality_score);\n\n\n--\n-- Name: idx_audit_enrichment_runs_supplier; Type: INDEX; Schema: public; Owner: -\n--\n\nCREATE INDEX idx_audit_enrichment_runs_supplier ON public.audit_enrichment_runs USING btree (supplier_name);\n\n\n--\n-- Name: idx_audit_enrichment_runs_timestamp; Type: INDEX; Schema: public; Owner: -\n--\n\nCREATE INDEX idx_audit_enrichment_runs_timestamp ON public.audit_enrichment_runs USING btree (enrichment_timestamp);\n\n\n--\n-- Name: idx_audit_enrichment_runs_upload_id; Type: INDEX; Schema: public; Owner: -\n--\n\nCREATE INDEX idx_audit_enrichment_runs_upload_id ON public.audit_enrichment_runs USING btree (upload_id);\n\n\n--\n-- Name: idx_audit_field_comparisons_category; Type: INDEX; Schema: public; Owner: -\n--\n\nCREATE INDEX idx_audit_field_comparisons_category ON public.audit_field_comparisons USING btree (field_category);\n\n\n--\n-- Name: idx_audit_field_comparisons_changed; Type: INDEX; Schema: public; Owner: -\n--\n\nCREATE INDEX idx_audit_field_comparisons_changed ON public.audit_field_comparisons USING btree (changed);\n\n\n--\n-- Name: idx_audit_field_comparisons_field; Type: INDEX; Schema: public; Owner: -\n--\n\nCREATE INDEX idx_audit_field_comparisons_field ON public.audit_field_comparisons USING btree (field_name);\n\n\n--\n-- Name: idx_audit_field_comparisons_run; Type: INDEX; Schema: public; Owner: -\n--\n\nCREATE INDEX idx_audit_field_comparisons_run ON public.audit_field_comparisons USING btree (enrichment_run_id);\n\n\n--\n-- Name: idx_audit_supplier_quality_date; Type: INDEX; Schema: public; Owner: -\n--\n\nCREATE INDEX idx_audit_supplier_quality_date ON public.audit_supplier_quality USING btree (date);\n\n\n--\n-- Name: idx_audit_supplier_quality_supplier; Type: INDEX; Schema: public; Owner: -\n--\n\nCREATE INDEX idx_audit_supplier_quality_supplier ON public.audit_supplier_quality USING btree (supplier_name);\n\n\n--\n-- Name: idx_catalog_categories_name; Type: INDEX; Schema: public; Owner: -\n--\n\nCREATE INDEX idx_catalog_categories_name ON public.catalog_categories USING btree (name);\n\n\n--\n-- Name: idx_catalog_categories_parent; Type: INDEX; Schema: public; Owner: -\n--\n\nCREATE INDEX idx_catalog_categories_parent ON public.catalog_categories USING btree (parent_id);\n\n\n--\n-- Name: idx_catalog_category_mappings_vendor; Type: INDEX; Schema: public; Owner: -\n--\n\nCREATE INDEX idx_catalog_category_mappings_vendor ON public.catalog_category_mappings USING btree (vendor_name, vendor_category);\n\n\n--\n-- Name: idx_catalog_components_table_manufacturer; Type: INDEX; Schema: public; Owner: -\n--\n\nCREATE INDEX idx_catalog_components_table_manufacturer ON public.catalog_components_table USING btree (manufacturer);\n\n\n--\n-- Name: idx_catalog_components_table_mpn; Type: INDEX; Schema: public; Owner: -\n--\n\nCREATE INDEX idx_catalog_components_table_mpn ON public.catalog_components_table USING btree (mpn);\n\n\n--\n-- Name: idx_catalog_manufacturers_name; Type: INDEX; Schema: public; Owner: -\n--\n\nCREATE UNIQUE INDEX idx_catalog_manufacturers_name ON public.catalog_manufacturers USING btree (name);\n\n\n--\n-- Name: idx_categories_digikey_id; Type: INDEX; Schema: public; Owner: -\n--\n\nCREATE INDEX idx_categories_digikey_id ON public.categories USING btree (digikey_id);\n\n\n--\n-- Name: idx_categories_level; Type: INDEX; Schema: public; Owner: -\n--\n\nCREATE INDEX idx_categories_level ON public.categories USING btree (level);\n\n\n--\n-- Name: idx_categories_name; Type: INDEX; Schema: public; Owner: -\n--\n\nCREATE INDEX idx_categories_name ON public.categories USING btree (name);\n\n\n--\n-- Name: idx_categories_parent; Type: INDEX; Schema: public; Owner: -\n--\n\nCREATE INDEX idx_categories_parent ON public.categories USING btree (parent_id);\n\n\n--\n-- Name: idx_categories_path; Type: INDEX; Schema: public; Owner: -\n--\n\nCREATE INDEX idx_categories_path ON public.categories USING btree (path);\n\n\n--\n-- Name: idx_cns_config_category; Type: INDEX; Schema: public; Owner: -\n--\n\nCREATE INDEX idx_cns_config_category ON public.cns_enrichment_config USING btree (category);\n\n\n--\n-- Name: idx_cns_config_key; Type: INDEX; Schema: public; Owner: -\n--\n\nCREATE INDEX idx_cns_config_key ON public.cns_enrichment_config USING btree (config_key);\n\n\n--\n-- Name: idx_column_mapping_created; Type: INDEX; Schema: public; Owner: -\n--\n\nCREATE INDEX idx_column_mapping_created ON public.column_mapping_templates USING btree (created_at);\n\n\n--\n-- Name: idx_column_mapping_default; Type: INDEX; Schema: public; Owner: -\n--\n\nCREATE INDEX idx_column_mapping_default ON public.column_mapping_templates USING btree (organization_id, is_default) WHERE (is_default = true);\n\n\n--\n-- Name: idx_column_mapping_mappings; Type: INDEX; Schema: public; Owner: -\n--\n\nCREATE INDEX idx_column_mapping_mappings ON public.column_mapping_templates USING gin (mappings);\n\n\n--\n-- Name: idx_column_mapping_org; Type: INDEX; Schema: public; Owner: -\n--\n\nCREATE INDEX idx_column_mapping_org ON public.column_mapping_templates USING btree (organization_id);\n\n\n--\n-- Name: idx_component_catalog_category; Type: INDEX; Schema: public; Owner: -\n--\n\nCREATE INDEX idx_component_catalog_category ON public.component_catalog USING btree (category);\n\n\n--\n-- Name: idx_component_catalog_lifecycle; Type: INDEX; Schema: public; Owner: -\n--\n\nCREATE INDEX idx_component_catalog_lifecycle ON public.component_catalog USING btree (lifecycle_status);\n\n\n--\n-- Name: idx_component_catalog_manufacturer; Type: INDEX; Schema: public; Owner: -\n--\n\nCREATE INDEX idx_component_catalog_manufacturer ON public.component_catalog USING btree (manufacturer);\n\n\n--\n-- Name: idx_component_catalog_mpn; Type: INDEX; Schema: public; Owner: -\n--\n\nCREATE INDEX idx_component_catalog_mpn ON public.component_catalog USING btree (manufacturer_part_number);\n\n\n--\n-- Name: idx_component_catalog_mpn_mfr; Type: INDEX; Schema: public; Owner: -\n--\n\nCREATE INDEX idx_component_catalog_mpn_mfr ON public.component_catalog USING btree (manufacturer_part_number, manufacturer);\n\n\n--\n-- Name: idx_component_catalog_quality; Type: INDEX; Schema: public; Owner: -\n--\n\nCREATE INDEX idx_component_catalog_quality ON public.component_catalog USING btree (quality_score);\n\n\n--\n-- Name: idx_component_catalog_specs; Type: INDEX; Schema: public; Owner: -\n--\n\nCREATE INDEX idx_component_catalog_specs ON public.component_catalog USING gin (specifications);\n\n\n--\n-- Name: idx_component_catalog_supplier_data; Type: INDEX; Schema: public; Owner: -\n--\n\nCREATE INDEX idx_component_catalog_supplier_data ON public.component_catalog USING gin (supplier_data);\n\n\n--\n-- Name: idx_component_catalog_usage; Type: INDEX; Schema: public; Owner: -\n--\n\nCREATE INDEX idx_component_catalog_usage ON public.component_catalog USING btree (usage_count DESC);\n\n\n--\n-- Name: idx_component_lifecycle_mpn; Type: INDEX; Schema: public; Owner: -\n--\n\nCREATE INDEX idx_component_lifecycle_mpn ON public.component_lifecycle USING btree (mpn);\n\n\n--\n-- Name: idx_component_lifecycle_status; Type: INDEX; Schema: public; Owner: -\n--\n\nCREATE INDEX idx_component_lifecycle_status ON public.component_lifecycle USING btree (lifecycle_status);\n\n\n--\n-- Name: idx_component_storage_tracking_location; Type: INDEX; Schema: public; Owner: -\n--\n\nCREATE INDEX idx_component_storage_tracking_location ON public.component_storage_tracking USING btree (storage_location);\n\n\n--\n-- Name: idx_component_storage_tracking_mpn; Type: INDEX; Schema: public; Owner: -\n--\n\nCREATE INDEX idx_component_storage_tracking_mpn ON public.component_storage_tracking USING btree (manufacturer_part_number);\n\n\n--\n-- Name: idx_components_category; Type: INDEX; Schema: public; Owner: -\n--\n\nCREATE INDEX idx_components_category ON public.components USING btree (category_id);\n\n\n--\n-- Name: idx_components_confidence; Type: INDEX; Schema: public; Owner: -\n--\n\nCREATE INDEX idx_components_confidence ON public.components USING btree (confidence_score);\n\n\n--\n-- Name: idx_components_lifecycle; Type: INDEX; Schema: public; Owner: -\n--\n\nCREATE INDEX idx_components_lifecycle ON public.components USING btree (lifecycle_status);\n\n\n--\n-- Name: idx_components_manufacturer; Type: INDEX; Schema: public; Owner: -\n--\n\nCREATE INDEX idx_components_manufacturer ON public.components USING btree (manufacturer_id);\n\n\n--\n-- Name: idx_components_mpn; Type: INDEX; Schema: public; Owner: -\n--\n\nCREATE INDEX idx_components_mpn ON public.components USING btree (mpn);\n\n\n--\n-- Name: idx_components_quality; Type: INDEX; Schema: public; Owner: -\n--\n\nCREATE INDEX idx_components_quality ON public.components USING btree (quality_score);\n\n\n--\n-- Name: idx_components_specs; Type: INDEX; Schema: public; Owner: -\n--\n\nCREATE INDEX idx_components_specs ON public.components USING gin (specifications);\n\n\n--\n-- Name: idx_enrichment_batch_jobs_org; Type: INDEX; Schema: public; Owner: -\n--\n\nCREATE INDEX idx_enrichment_batch_jobs_org ON public.enrichment_batch_jobs USING btree (organization_id);\n\n\n--\n-- Name: idx_enrichment_batch_jobs_status; Type: INDEX; Schema: public; Owner: -\n--\n\nCREATE INDEX idx_enrichment_batch_jobs_status ON public.enrichment_batch_jobs USING btree (status);\n\n\n--\n-- Name: idx_enrichment_history_mpn; Type: INDEX; Schema: public; Owner: -\n--\n\nCREATE INDEX idx_enrichment_history_mpn ON public.enrichment_history USING btree (mpn);\n\n\n--\n-- Name: idx_enrichment_history_status; Type: INDEX; Schema: public; Owner: -\n--\n\nCREATE INDEX idx_enrichment_history_status ON public.enrichment_history USING btree (status);\n\n\n--\n-- Name: idx_enrichment_queue_priority; Type: INDEX; Schema: public; Owner: -\n--\n\nCREATE INDEX idx_enrichment_queue_priority ON public.enrichment_queue USING btree (priority DESC);\n\n\n--\n-- Name: idx_enrichment_queue_status; Type: INDEX; Schema: public; Owner: -\n--\n\nCREATE INDEX idx_enrichment_queue_status ON public.enrichment_queue USING btree (status);\n\n\n--\n-- Name: idx_manufacturers_name; Type: INDEX; Schema: public; Owner: -\n--\n\nCREATE INDEX idx_manufacturers_name ON public.manufacturers USING btree (name);\n\n\n--\n-- Name: idx_pricing_component; Type: INDEX; Schema: public; Owner: -\n--\n\nCREATE INDEX idx_pricing_component ON public.component_pricing USING btree (component_id);\n\n\n--\n-- Name: idx_pricing_supplier; Type: INDEX; Schema: public; Owner: -\n--\n\nCREATE INDEX idx_pricing_supplier ON public.component_pricing USING btree (supplier_id);\n\n\n--\n-- Name: idx_redis_component_snapshot_mpn; Type: INDEX; Schema: public; Owner: -\n--\n\nCREATE INDEX idx_redis_component_snapshot_mpn ON public.redis_component_snapshot USING btree (mpn);\n\n\n--\n-- Name: idx_redis_component_snapshot_status; Type: INDEX; Schema: public; Owner: -\n--\n\nCREATE INDEX idx_redis_component_snapshot_status ON public.redis_component_snapshot USING btree (sync_status);\n\n\n--\n-- Name: idx_supplier_performance_date; Type: INDEX; Schema: public; Owner: -\n--\n\nCREATE INDEX idx_supplier_performance_date ON public.supplier_performance_metrics USING btree (date);\n\n\n--\n-- Name: idx_supplier_responses_job; Type: INDEX; Schema: public; Owner: -\n--\n\nCREATE INDEX idx_supplier_responses_job ON public.supplier_enrichment_responses USING btree (job_id);\n\n\n--\n-- Name: idx_supplier_responses_line; Type: INDEX; Schema: public; Owner: -\n--\n\nCREATE INDEX idx_supplier_responses_line ON public.supplier_enrichment_responses USING btree (line_id);\n\n\n--\n-- Name: idx_supplier_tokens_expires_at; Type: INDEX; Schema: public; Owner: -\n--\n\nCREATE INDEX idx_supplier_tokens_expires_at ON public.supplier_tokens USING btree (expires_at) WHERE (expires_at IS NOT NULL);\n\n\n--\n-- Name: idx_suppliers_name; Type: INDEX; Schema: public; Owner: -\n--\n\nCREATE INDEX idx_suppliers_name ON public.suppliers USING btree (name);\n\n\n--\n-- Name: idx_vcm_canonical; Type: INDEX; Schema: public; Owner: -\n--\n\nCREATE INDEX idx_vcm_canonical ON public.vendor_category_mappings USING btree (canonical_category_id);\n\n\n--\n-- Name: idx_vcm_vendor; Type: INDEX; Schema: public; Owner: -\n--\n\nCREATE INDEX idx_vcm_vendor ON public.vendor_category_mappings USING btree (vendor);\n\n\n--\n-- Name: audit_enrichment_runs audit_enrichment_runs_updated_at; Type: TRIGGER; Schema: public; Owner: -\n--\n\nCREATE TRIGGER audit_enrichment_runs_updated_at BEFORE UPDATE ON public.audit_enrichment_runs FOR EACH ROW EXECUTE FUNCTION public.update_modified_timestamp();\n\n\n--\n-- Name: audit_supplier_quality audit_supplier_quality_updated_at; Type: TRIGGER; Schema: public; Owner: -\n--\n\nCREATE TRIGGER audit_supplier_quality_updated_at BEFORE UPDATE ON public.audit_supplier_quality FOR EACH ROW EXECUTE FUNCTION public.update_modified_timestamp();\n\n\n--\n-- Name: column_mapping_templates trg_column_mapping_templates_updated_at; Type: TRIGGER; Schema: public; Owner: -\n--\n\nCREATE TRIGGER trg_column_mapping_templates_updated_at BEFORE UPDATE ON public.column_mapping_templates FOR EACH ROW EXECUTE FUNCTION public.update_column_mapping_templates_updated_at();\n\n\n--\n-- Name: component_catalog trg_component_catalog_updated_at; Type: TRIGGER; Schema: public; Owner: -\n--\n\nCREATE TRIGGER trg_component_catalog_updated_at BEFORE UPDATE ON public.component_catalog FOR EACH ROW EXECUTE FUNCTION public.update_component_catalog_updated_at();\n\n\n--\n-- Name: column_mapping_templates trg_ensure_single_default_template; Type: TRIGGER; Schema: public; Owner: -\n--\n\nCREATE TRIGGER trg_ensure_single_default_template BEFORE INSERT OR UPDATE ON public.column_mapping_templates FOR EACH ROW EXECUTE FUNCTION public.ensure_single_default_template();\n\n\n--\n-- Name: categories update_categories_updated_at; Type: TRIGGER; Schema: public; Owner: -\n--\n\nCREATE TRIGGER update_categories_updated_at BEFORE UPDATE ON public.categories FOR EACH ROW EXECUTE FUNCTION public.update_updated_at_column();\n\n\n--\n-- Name: component_pricing update_component_pricing_updated_at; Type: TRIGGER; Schema: public; Owner: -\n--\n\nCREATE TRIGGER update_component_pricing_updated_at BEFORE UPDATE ON public.component_pricing FOR EACH ROW EXECUTE FUNCTION public.update_updated_at_column();\n\n\n--\n-- Name: components update_components_updated_at; Type: TRIGGER; Schema: public; Owner: -\n--\n\nCREATE TRIGGER update_components_updated_at BEFORE UPDATE ON public.components FOR EACH ROW EXECUTE FUNCTION public.update_updated_at_column();\n\n\n--\n-- Name: manufacturers update_manufacturers_updated_at; Type: TRIGGER; Schema: public; Owner: -\n--\n\nCREATE TRIGGER update_manufacturers_updated_at BEFORE UPDATE ON public.manufacturers FOR EACH ROW EXECUTE FUNCTION public.update_updated_at_column();\n\n\n--\n-- Name: suppliers update_suppliers_updated_at; Type: TRIGGER; Schema: public; Owner: -\n--\n\nCREATE TRIGGER update_suppliers_updated_at BEFORE UPDATE ON public.suppliers FOR EACH ROW EXECUTE FUNCTION public.update_updated_at_column();\n\n\n--\n-- Name: audit_field_comparisons audit_field_comparisons_enrichment_run_id_fkey; Type: FK CONSTRAINT; Schema: public; Owner: -\n--\n\nALTER TABLE ONLY public.audit_field_comparisons\n    ADD CONSTRAINT audit_field_comparisons_enrichment_run_id_fkey FOREIGN KEY (enrichment_run_id) REFERENCES public.audit_enrichment_runs(id) ON DELETE CASCADE;\n\n\n--\n-- Name: catalog_categories catalog_categories_parent_id_fkey; Type: FK CONSTRAINT; Schema: public; Owner: -\n--\n\nALTER TABLE ONLY public.catalog_categories\n    ADD CONSTRAINT catalog_categories_parent_id_fkey FOREIGN KEY (parent_id) REFERENCES public.catalog_categories(id);\n\n\n--\n-- Name: catalog_category_mappings catalog_category_mappings_normalized_category_id_fkey; Type: FK CONSTRAINT; Schema: public; Owner: -\n--\n\nALTER TABLE ONLY public.catalog_category_mappings\n    ADD CONSTRAINT catalog_category_mappings_normalized_category_id_fkey FOREIGN KEY (normalized_category_id) REFERENCES public.catalog_categories(id);\n\n\n--\n-- Name: categories categories_parent_id_fkey; Type: FK CONSTRAINT; Schema: public; Owner: -\n--\n\nALTER TABLE ONLY public.categories\n    ADD CONSTRAINT categories_parent_id_fkey FOREIGN KEY (parent_id) REFERENCES public.categories(id) ON DELETE CASCADE;\n\n\n--\n-- Name: component_lifecycle component_lifecycle_component_id_fkey; Type: FK CONSTRAINT; Schema: public; Owner: -\n--\n\nALTER TABLE ONLY public.component_lifecycle\n    ADD CONSTRAINT component_lifecycle_component_id_fkey FOREIGN KEY (component_id) REFERENCES public.components(id) ON DELETE CASCADE;\n\n\n--\n-- Name: component_pricing component_pricing_component_id_fkey; Type: FK CONSTRAINT; Schema: public; Owner: -\n--\n\nALTER TABLE ONLY public.component_pricing\n    ADD CONSTRAINT component_pricing_component_id_fkey FOREIGN KEY (component_id) REFERENCES public.components(id) ON DELETE CASCADE;\n\n\n--\n-- Name: component_pricing component_pricing_supplier_id_fkey; Type: FK CONSTRAINT; Schema: public; Owner: -\n--\n\nALTER TABLE ONLY public.component_pricing\n    ADD CONSTRAINT component_pricing_supplier_id_fkey FOREIGN KEY (supplier_id) REFERENCES public.suppliers(id) ON DELETE CASCADE;\n\n\n--\n-- Name: components components_category_id_fkey; Type: FK CONSTRAINT; Schema: public; Owner: -\n--\n\nALTER TABLE ONLY public.components\n    ADD CONSTRAINT components_category_id_fkey FOREIGN KEY (category_id) REFERENCES public.categories(id) ON DELETE SET NULL;\n\n\n--\n-- Name: components components_manufacturer_id_fkey; Type: FK CONSTRAINT; Schema: public; Owner: -\n--\n\nALTER TABLE ONLY public.components\n    ADD CONSTRAINT components_manufacturer_id_fkey FOREIGN KEY (manufacturer_id) REFERENCES public.manufacturers(id) ON DELETE SET NULL;\n\n\n--\n-- Name: enrichment_queue enrichment_queue_batch_job_id_fkey; Type: FK CONSTRAINT; Schema: public; Owner: -\n--\n\nALTER TABLE ONLY public.enrichment_queue\n    ADD CONSTRAINT enrichment_queue_batch_job_id_fkey FOREIGN KEY (batch_job_id) REFERENCES public.enrichment_batch_jobs(id);\n\n\n--\n-- Name: supplier_performance_metrics supplier_performance_metrics_supplier_id_fkey; Type: FK CONSTRAINT; Schema: public; Owner: -\n--\n\nALTER TABLE ONLY public.supplier_performance_metrics\n    ADD CONSTRAINT supplier_performance_metrics_supplier_id_fkey FOREIGN KEY (supplier_id) REFERENCES public.suppliers(id);\n\n\n--\n-- Name: supplier_settings supplier_settings_supplier_id_fkey; Type: FK CONSTRAINT; Schema: public; Owner: -\n--\n\nALTER TABLE ONLY public.supplier_settings\n    ADD CONSTRAINT supplier_settings_supplier_id_fkey FOREIGN KEY (supplier_id) REFERENCES public.suppliers(id);\n\n\n--\n-- Name: vendor_category_mappings vendor_category_mappings_canonical_category_id_fkey; Type: FK CONSTRAINT; Schema: public; Owner: -\n--\n\nALTER TABLE ONLY public.vendor_category_mappings\n    ADD CONSTRAINT vendor_category_mappings_canonical_category_id_fkey FOREIGN KEY (canonical_category_id) REFERENCES public.categories(id) ON DELETE SET NULL;\n\n\n--\n-- PostgreSQL database dump complete\n--\n\n\\unrestrict hPan59i0usRaeno6ymYELAxBJwHbFaS4Fw1d0qUCZN8VX1AjFUnGxxnICRj1gi4\n\n",
              "005_DIRECTUS_ENRICHMENT_TABLES.sql": "-- Migration 010: Create Enrichment Queue and History Tables for Directus-native Supplier API Integration\n-- Created: 2025-11-01\n-- Purpose: Support component enrichment workflow with quality-based routing\n\n-- ============================================================================\n-- ENRICHMENT QUEUE TABLE\n-- Stores components that need admin review (quality score 70-94%)\n-- ============================================================================\n\nCREATE TABLE IF NOT EXISTS enrichment_queue (\n  id UUID PRIMARY KEY DEFAULT gen_random_uuid(),\n  component_id UUID NOT NULL REFERENCES component_catalog(id) ON DELETE CASCADE,\n  mpn TEXT NOT NULL,\n  manufacturer TEXT NOT NULL,\n  status TEXT NOT NULL DEFAULT 'needs_review',\n  quality_score INTEGER NOT NULL CHECK (quality_score \u003e= 0 AND quality_score \u003c= 100),\n  enrichment_data JSONB NOT NULL DEFAULT '{}',\n  original_data JSONB,\n  issues TEXT[],\n  workflow_execution_id TEXT,\n  created_at TIMESTAMPTZ DEFAULT NOW(),\n  reviewed_by UUID,  -- Directus user ID (no FK - directus_users table may not exist yet)\n  reviewed_at TIMESTAMPTZ,\n  notes TEXT,\n\n  -- Indexes for fast lookups\n  CONSTRAINT enrichment_queue_component_id_key UNIQUE (component_id),\n  CONSTRAINT enrichment_queue_status_check CHECK (status IN ('needs_review', 'approved', 'rejected', 'pending'))\n);\n\n-- Index for status filtering\nCREATE INDEX IF NOT EXISTS idx_enrichment_queue_status ON enrichment_queue(status);\n\n-- Index for quality score range queries\nCREATE INDEX IF NOT EXISTS idx_enrichment_queue_quality_score ON enrichment_queue(quality_score);\n\n-- Index for date-based queries\nCREATE INDEX IF NOT EXISTS idx_enrichment_queue_created_at ON enrichment_queue(created_at DESC);\n\n-- Index for MPN searches\nCREATE INDEX IF NOT EXISTS idx_enrichment_queue_mpn ON enrichment_queue(mpn);\n\n-- Index for JSONB enrichment_data searches\nCREATE INDEX IF NOT EXISTS idx_enrichment_queue_enrichment_data ON enrichment_queue USING GIN (enrichment_data);\n\n\n-- ============================================================================\n-- ENRICHMENT HISTORY TABLE\n-- Audit log of all enrichment attempts\n-- ============================================================================\n\nCREATE TABLE IF NOT EXISTS enrichment_history (\n  id SERIAL PRIMARY KEY,\n  component_id UUID NOT NULL REFERENCES component_catalog(id) ON DELETE CASCADE,\n  mpn TEXT NOT NULL,\n  quality_score INTEGER NOT NULL CHECK (quality_score \u003e= 0 AND quality_score \u003c= 100),\n  sources_successful TEXT[] DEFAULT '{}',\n  enrichment_data JSONB NOT NULL DEFAULT '{}',\n  issues TEXT[],\n  status TEXT NOT NULL,\n  timestamp TIMESTAMPTZ DEFAULT NOW(),\n  triggered_by UUID,  -- Directus user ID (no FK - directus_users table may not exist yet)\n  execution_time_ms INTEGER,\n\n  CONSTRAINT enrichment_history_status_check CHECK (status IN ('completed', 'needs_review', 'rejected', 'error'))\n);\n\n-- Index for component_id lookups (history for specific component)\nCREATE INDEX IF NOT EXISTS idx_enrichment_history_component_id ON enrichment_history(component_id);\n\n-- Index for date-based queries\nCREATE INDEX IF NOT EXISTS idx_enrichment_history_timestamp ON enrichment_history(timestamp DESC);\n\n-- Index for status filtering\nCREATE INDEX IF NOT EXISTS idx_enrichment_history_status ON enrichment_history(status);\n\n-- Index for triggered_by (audit trail)\nCREATE INDEX IF NOT EXISTS idx_enrichment_history_triggered_by ON enrichment_history(triggered_by);\n\n-- Index for JSONB enrichment_data searches\nCREATE INDEX IF NOT EXISTS idx_enrichment_history_enrichment_data ON enrichment_history USING GIN (enrichment_data);\n\n\n-- ============================================================================\n-- UPDATE COMPONENT_CATALOG TABLE (the actual table, not the view!)\n-- Add enrichment-related fields\n-- ============================================================================\n\n-- Add enrichment status field to the actual table\n-- Note: component_catalog is the TABLE, catalog_components is a VIEW\nALTER TABLE component_catalog\nADD COLUMN IF NOT EXISTS enrichment_status TEXT DEFAULT 'pending',\nADD COLUMN IF NOT EXISTS enrichment_quality_score INTEGER CHECK (enrichment_quality_score \u003e= 0 AND enrichment_quality_score \u003c= 100),\nADD COLUMN IF NOT EXISTS enrichment_sources TEXT[];\n\n-- Note: last_enriched_at already exists in component_catalog (from migration 002)\n\n-- Index for enrichment status filtering\nCREATE INDEX IF NOT EXISTS idx_component_catalog_enrichment_status ON component_catalog(enrichment_status);\n\n-- Add constraint check for enrichment_status\nALTER TABLE component_catalog\nDROP CONSTRAINT IF EXISTS component_catalog_enrichment_status_check;\n\nALTER TABLE component_catalog\nADD CONSTRAINT component_catalog_enrichment_status_check\nCHECK (enrichment_status IN ('pending', 'enriched', 'needs_review', 'failed'));\n\n\n-- ============================================================================\n-- TRIGGERS\n-- Auto-update timestamps and maintain data consistency\n-- ============================================================================\n\n-- Update reviewed_at timestamp when reviewed_by is set\nCREATE OR REPLACE FUNCTION update_enrichment_queue_reviewed_at()\nRETURNS TRIGGER AS $$\nBEGIN\n  IF NEW.reviewed_by IS NOT NULL AND OLD.reviewed_by IS NULL THEN\n    NEW.reviewed_at := NOW();\n  END IF;\n  RETURN NEW;\nEND;\n$$ LANGUAGE plpgsql;\n\nDROP TRIGGER IF EXISTS trigger_update_enrichment_queue_reviewed_at ON enrichment_queue;\nCREATE TRIGGER trigger_update_enrichment_queue_reviewed_at\n  BEFORE UPDATE ON enrichment_queue\n  FOR EACH ROW\n  EXECUTE FUNCTION update_enrichment_queue_reviewed_at();\n\n\n-- Update component_catalog when enrichment is approved\n-- Note: Updates the actual TABLE (component_catalog), not the VIEW (catalog_components)\nCREATE OR REPLACE FUNCTION apply_approved_enrichment()\nRETURNS TRIGGER AS $$\nBEGIN\n  IF NEW.status = 'approved' AND OLD.status = 'needs_review' THEN\n    -- Update component_catalog with enriched data\n    -- Column names match component_catalog table from migration 002\n    UPDATE component_catalog\n    SET\n      datasheet_url = COALESCE((NEW.enrichment_data-\u003e\u003e'datasheet_url')::TEXT, datasheet_url),\n      image_url = COALESCE((NEW.enrichment_data-\u003e\u003e'image_url')::TEXT, image_url),\n      description = COALESCE((NEW.enrichment_data-\u003e\u003e'description')::TEXT, description),\n      lifecycle_status = COALESCE((NEW.enrichment_data-\u003e\u003e'lifecycle_status')::TEXT, lifecycle_status),\n      package = COALESCE((NEW.enrichment_data-\u003e\u003e'package')::TEXT, package),\n      rohs_compliant = COALESCE((NEW.enrichment_data-\u003e\u003e'rohs_compliant')::BOOLEAN, rohs_compliant),\n      reach_compliant = COALESCE((NEW.enrichment_data-\u003e\u003e'reach_compliant')::BOOLEAN, reach_compliant),\n      lead_time_days = COALESCE((NEW.enrichment_data-\u003e\u003e'lead_time_days')::INTEGER, lead_time_days),\n      price_breaks = COALESCE((NEW.enrichment_data-\u003e'price_breaks')::JSONB, price_breaks),\n      stock_status = COALESCE((NEW.enrichment_data-\u003e\u003e'stock_status')::TEXT, stock_status),\n      stock_quantity = COALESCE((NEW.enrichment_data-\u003e\u003e'stock_quantity')::INTEGER, stock_quantity),\n      enrichment_status = 'enriched',\n      last_enriched_at = NOW(),\n      enrichment_quality_score = NEW.quality_score,\n      enrichment_sources = (\n        SELECT ARRAY(SELECT jsonb_array_elements_text(NEW.enrichment_data-\u003e'sources_successful'))\n      )\n    WHERE id = NEW.component_id;\n  END IF;\n  RETURN NEW;\nEND;\n$$ LANGUAGE plpgsql;\n\nDROP TRIGGER IF EXISTS trigger_apply_approved_enrichment ON enrichment_queue;\nCREATE TRIGGER trigger_apply_approved_enrichment\n  AFTER UPDATE ON enrichment_queue\n  FOR EACH ROW\n  EXECUTE FUNCTION apply_approved_enrichment();\n\n\n-- ============================================================================\n-- VIEWS\n-- Convenient views for common queries\n-- ============================================================================\n\n-- View: Components needing enrichment\nCREATE OR REPLACE VIEW components_needing_enrichment AS\nSELECT\n  c.id,\n  c.mpn,\n  c.manufacturer,\n  c.enrichment_status,\n  c.last_enriched_at,\n  c.enrichment_quality_score,\n  CASE\n    WHEN c.enrichment_status = 'pending' THEN 'Never enriched'\n    WHEN c.last_enriched_at \u003c NOW() - INTERVAL '90 days' THEN 'Stale data (\u003e90 days)'\n    WHEN c.enrichment_quality_score \u003c 70 THEN 'Low quality score'\n    ELSE 'OK'\n  END AS reason\nFROM catalog_components c\nWHERE\n  c.enrichment_status IN ('pending', 'failed')\n  OR c.last_enriched_at IS NULL\n  OR c.last_enriched_at \u003c NOW() - INTERVAL '90 days'\n  OR c.enrichment_quality_score \u003c 70\nORDER BY c.last_enriched_at ASC NULLS FIRST;\n\n\n-- View: Enrichment queue summary\nCREATE OR REPLACE VIEW enrichment_queue_summary AS\nSELECT\n  eq.status,\n  COUNT(*) AS count,\n  AVG(eq.quality_score) AS avg_quality_score,\n  MIN(eq.created_at) AS oldest_entry,\n  MAX(eq.created_at) AS newest_entry\nFROM enrichment_queue eq\nGROUP BY eq.status;\n\n\n-- View: Enrichment success rate\nCREATE OR REPLACE VIEW enrichment_success_rate AS\nSELECT\n  DATE(eh.timestamp) AS date,\n  COUNT(*) FILTER (WHERE eh.status = 'completed') AS completed,\n  COUNT(*) FILTER (WHERE eh.status = 'needs_review') AS needs_review,\n  COUNT(*) FILTER (WHERE eh.status = 'rejected') AS rejected,\n  COUNT(*) FILTER (WHERE eh.status = 'error') AS errors,\n  COUNT(*) AS total,\n  ROUND(\n    (COUNT(*) FILTER (WHERE eh.status = 'completed')::NUMERIC / NULLIF(COUNT(*), 0)) * 100,\n    2\n  ) AS success_rate_percent\nFROM enrichment_history eh\nWHERE eh.timestamp \u003e= NOW() - INTERVAL '30 days'\nGROUP BY DATE(eh.timestamp)\nORDER BY date DESC;\n\n\n-- ============================================================================\n-- COMMENTS\n-- Documentation for tables and columns\n-- ============================================================================\n\nCOMMENT ON TABLE enrichment_queue IS 'Staging queue for enriched components requiring admin review (quality score 70-94%)';\nCOMMENT ON COLUMN enrichment_queue.component_id IS 'Reference to component_catalog.id (UUID)';\nCOMMENT ON COLUMN enrichment_queue.quality_score IS 'Data completeness score (0-100%)';\nCOMMENT ON COLUMN enrichment_queue.enrichment_data IS 'JSON object containing enriched field values';\nCOMMENT ON COLUMN enrichment_queue.original_data IS 'Snapshot of original component data before enrichment';\nCOMMENT ON COLUMN enrichment_queue.issues IS 'Array of validation issues or missing fields';\nCOMMENT ON COLUMN enrichment_queue.status IS 'Review status: needs_review, approved, rejected, pending';\n\nCOMMENT ON TABLE enrichment_history IS 'Audit log of all component enrichment attempts';\nCOMMENT ON COLUMN enrichment_history.sources_successful IS 'Array of successful vendor APIs (mouser, digikey, element14)';\nCOMMENT ON COLUMN enrichment_history.execution_time_ms IS 'Total execution time in milliseconds';\n\nCOMMENT ON VIEW components_needing_enrichment IS 'Lists components that need enrichment or re-enrichment';\nCOMMENT ON VIEW enrichment_queue_summary IS 'Summary statistics for enrichment queue';\nCOMMENT ON VIEW enrichment_success_rate IS 'Daily enrichment success rate over last 30 days';\n\n\n-- ============================================================================\n-- GRANT PERMISSIONS\n-- Allow Directus to access these tables (if directus role exists)\n-- ============================================================================\n\nDO $$\nBEGIN\n    IF EXISTS (SELECT 1 FROM pg_roles WHERE rolname = 'directus') THEN\n        GRANT SELECT, INSERT, UPDATE, DELETE ON enrichment_queue TO directus;\n        GRANT SELECT, INSERT ON enrichment_history TO directus;\n        GRANT SELECT ON components_needing_enrichment TO directus;\n        GRANT SELECT ON enrichment_queue_summary TO directus;\n        GRANT SELECT ON enrichment_success_rate TO directus;\n        GRANT USAGE, SELECT ON SEQUENCE enrichment_history_id_seq TO directus;\n    END IF;\n\n    -- Also grant to postgres for direct access\n    GRANT SELECT, INSERT, UPDATE, DELETE ON enrichment_queue TO postgres;\n    GRANT SELECT, INSERT ON enrichment_history TO postgres;\n    GRANT SELECT ON components_needing_enrichment TO postgres;\n    GRANT SELECT ON enrichment_queue_summary TO postgres;\n    GRANT SELECT ON enrichment_success_rate TO postgres;\n    GRANT USAGE, SELECT ON SEQUENCE enrichment_history_id_seq TO postgres;\nEND $$;\n\n\n-- ============================================================================\n-- INITIAL DATA\n-- Sample data for testing (optional)\n-- ============================================================================\n\n-- No initial data needed\n-- Tables will be populated by the enrich-component operation\n\n\n-- ============================================================================\n-- MIGRATION COMPLETE\n-- ============================================================================\n\n-- Verify tables were created\nDO $$\nBEGIN\n  IF NOT EXISTS (SELECT 1 FROM information_schema.tables WHERE table_name = 'enrichment_queue') THEN\n    RAISE EXCEPTION 'Migration failed: enrichment_queue table not created';\n  END IF;\n\n  IF NOT EXISTS (SELECT 1 FROM information_schema.tables WHERE table_name = 'enrichment_history') THEN\n    RAISE EXCEPTION 'Migration failed: enrichment_history table not created';\n  END IF;\n\n  RAISE NOTICE 'Migration 010 completed successfully';\nEND $$;\n"
            },
            "id": "database-system/ananta-app-plane-migrations",
            "immutable": false,
            "metadata": [
              {
                "annotations": {},
                "generate_name": "",
                "generation": 0,
                "labels": {
                  "app.kubernetes.io/managed-by": "terraform",
                  "app.kubernetes.io/part-of": "ananta-platform",
                  "environment": "local"
                },
                "name": "ananta-app-plane-migrations",
                "namespace": "database-system",
                "resource_version": "663911",
                "uid": "faa7010e-1458-4f42-bb1e-1bbe8fca24db"
              }
            ]
          },
          "sensitive_attributes": [],
          "identity_schema_version": 1,
          "identity": {
            "api_version": "v1",
            "kind": "ConfigMap",
            "name": "ananta-app-plane-migrations",
            "namespace": "database-system"
          },
          "private": "bnVsbA==",
          "dependencies": [
            "kubernetes_namespace.namespaces"
          ]
        }
      ]
    },
    {
      "mode": "managed",
      "type": "kubernetes_config_map",
      "name": "db_migrations",
      "provider": "provider[\"registry.terraform.io/hashicorp/kubernetes\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "binary_data": {},
            "data": {
              "003_ARC_SAAS_MASTER.sql": "-- ============================================================================\n-- ULTIMATE MASTER MIGRATION: Arc-SaaS Control Plane Database (COMPLETE)\n-- ============================================================================\n-- Version: 2.0.0\n-- Updated: 2025-12-27\n-- Database: arc-saas-postgres (arc_saas database)\n-- Port: 5432\n--\n-- This consolidated migration includes ALL tables, columns, functions, types,\n-- indexes, constraints, and seed data from the Arc-SaaS Control Plane.\n--\n-- VERIFIED AGAINST LIVE DATABASE: December 27, 2025\n-- Total tables: 29 (22 in main, 3 in subscription, 4 in public)\n--\n-- USE THIS FOR:\n-- - Fresh database setup\n-- - Complete schema verification\n-- - Reference documentation\n-- - Database recovery/rebuild\n--\n-- IMPORTANT: This migration is IDEMPOTENT - safe to run multiple times.\n-- ============================================================================\n\nBEGIN;\n\n-- ============================================================================\n-- SECTION 1: EXTENSIONS\n-- ============================================================================\n\nCREATE EXTENSION IF NOT EXISTS \"uuid-ossp\";\nCREATE EXTENSION IF NOT EXISTS \"pgcrypto\";\n\n-- ============================================================================\n-- SECTION 2: SCHEMAS\n-- ============================================================================\n\nCREATE SCHEMA IF NOT EXISTS main;\nCREATE SCHEMA IF NOT EXISTS subscription;\n\n-- ============================================================================\n-- SECTION 3: CUSTOM TYPES (Subscription Schema)\n-- ============================================================================\n\nDO $$ BEGIN\n    CREATE TYPE subscription.billing_interval AS ENUM (\n        'monthly',\n        'yearly',\n        'one_time'\n    );\nEXCEPTION\n    WHEN duplicate_object THEN NULL;\nEND $$;\n\nDO $$ BEGIN\n    CREATE TYPE subscription.subscription_status AS ENUM (\n        'trialing',\n        'active',\n        'past_due',\n        'canceled',\n        'expired'\n    );\nEXCEPTION\n    WHEN duplicate_object THEN NULL;\nEND $$;\n\n-- ============================================================================\n-- SECTION 4: CORE FUNCTIONS\n-- ============================================================================\n\n-- Function: Create Tenant Schema (main schema)\nCREATE OR REPLACE FUNCTION main.create_tenant_schema(tenant_key VARCHAR)\nRETURNS VOID AS $$\nDECLARE\n    schema_name TEXT;\nBEGIN\n    schema_name := 'tenant_' || tenant_key;\n\n    -- Create the schema\n    EXECUTE format('CREATE SCHEMA IF NOT EXISTS %I', schema_name);\n\n    -- Create tenant-specific tables\n    EXECUTE format('\n        CREATE TABLE IF NOT EXISTS %I.users (\n            id UUID PRIMARY KEY DEFAULT gen_random_uuid(),\n            email VARCHAR(255) NOT NULL,\n            first_name VARCHAR(100),\n            last_name VARCHAR(100),\n            role VARCHAR(50) DEFAULT ''user'',\n            is_active BOOLEAN DEFAULT true,\n            created_at TIMESTAMP WITH TIME ZONE DEFAULT NOW(),\n            updated_at TIMESTAMP WITH TIME ZONE DEFAULT NOW()\n        )', schema_name);\n\n    EXECUTE format('\n        CREATE TABLE IF NOT EXISTS %I.settings (\n            id UUID PRIMARY KEY DEFAULT gen_random_uuid(),\n            key VARCHAR(255) NOT NULL UNIQUE,\n            value JSONB,\n            created_at TIMESTAMP WITH TIME ZONE DEFAULT NOW(),\n            updated_at TIMESTAMP WITH TIME ZONE DEFAULT NOW()\n        )', schema_name);\n\n    EXECUTE format('\n        CREATE TABLE IF NOT EXISTS %I.audit_logs (\n            id UUID PRIMARY KEY DEFAULT gen_random_uuid(),\n            user_id UUID,\n            action VARCHAR(100) NOT NULL,\n            entity_type VARCHAR(100),\n            entity_id UUID,\n            old_value JSONB,\n            new_value JSONB,\n            ip_address VARCHAR(45),\n            created_at TIMESTAMP WITH TIME ZONE DEFAULT NOW()\n        )', schema_name);\n\n    EXECUTE format('\n        CREATE TABLE IF NOT EXISTS %I.orders (\n            id UUID PRIMARY KEY DEFAULT gen_random_uuid(),\n            order_number VARCHAR(50) NOT NULL,\n            status VARCHAR(50) DEFAULT ''pending'',\n            total_amount DECIMAL(15,2),\n            currency VARCHAR(3) DEFAULT ''USD'',\n            customer_id UUID,\n            created_at TIMESTAMP WITH TIME ZONE DEFAULT NOW(),\n            updated_at TIMESTAMP WITH TIME ZONE DEFAULT NOW()\n        )', schema_name);\n\n    EXECUTE format('\n        CREATE TABLE IF NOT EXISTS %I.customers (\n            id UUID PRIMARY KEY DEFAULT gen_random_uuid(),\n            name VARCHAR(255) NOT NULL,\n            email VARCHAR(255),\n            phone VARCHAR(50),\n            address JSONB,\n            created_at TIMESTAMP WITH TIME ZONE DEFAULT NOW(),\n            updated_at TIMESTAMP WITH TIME ZONE DEFAULT NOW()\n        )', schema_name);\n\n    EXECUTE format('\n        CREATE TABLE IF NOT EXISTS %I.products (\n            id UUID PRIMARY KEY DEFAULT gen_random_uuid(),\n            name VARCHAR(255) NOT NULL,\n            sku VARCHAR(100),\n            description TEXT,\n            price DECIMAL(15,2),\n            stock_quantity INTEGER DEFAULT 0,\n            is_active BOOLEAN DEFAULT true,\n            created_at TIMESTAMP WITH TIME ZONE DEFAULT NOW(),\n            updated_at TIMESTAMP WITH TIME ZONE DEFAULT NOW()\n        )', schema_name);\n\n    EXECUTE format('\n        CREATE TABLE IF NOT EXISTS %I.order_items (\n            id UUID PRIMARY KEY DEFAULT gen_random_uuid(),\n            order_id UUID REFERENCES %I.orders(id),\n            product_id UUID REFERENCES %I.products(id),\n            quantity INTEGER NOT NULL,\n            unit_price DECIMAL(15,2),\n            created_at TIMESTAMP WITH TIME ZONE DEFAULT NOW()\n        )', schema_name, schema_name, schema_name);\n\n    EXECUTE format('\n        CREATE TABLE IF NOT EXISTS %I.notifications (\n            id UUID PRIMARY KEY DEFAULT gen_random_uuid(),\n            user_id UUID,\n            type VARCHAR(50) NOT NULL,\n            title VARCHAR(255),\n            message TEXT,\n            is_read BOOLEAN DEFAULT false,\n            created_at TIMESTAMP WITH TIME ZONE DEFAULT NOW()\n        )', schema_name);\n\n    RAISE NOTICE 'Created schema % with tenant tables', schema_name;\nEND;\n$$ LANGUAGE plpgsql;\n\n-- Function: Drop Tenant Schema (main schema)\nCREATE OR REPLACE FUNCTION main.drop_tenant_schema(tenant_key VARCHAR)\nRETURNS VOID AS $$\nDECLARE\n    schema_name TEXT;\nBEGIN\n    schema_name := 'tenant_' || tenant_key;\n    EXECUTE format('DROP SCHEMA IF EXISTS %I CASCADE', schema_name);\n    RAISE NOTICE 'Dropped schema %', schema_name;\nEND;\n$$ LANGUAGE plpgsql;\n\n-- Function: Create Tenant Schema (public schema - backward compatibility)\nCREATE OR REPLACE FUNCTION public.create_tenant_schema(tenant_key VARCHAR)\nRETURNS VOID AS $$\nDECLARE\n    schema_name VARCHAR;\nBEGIN\n    schema_name := 'tenant_' || tenant_key;\n\n    EXECUTE format('CREATE SCHEMA IF NOT EXISTS %I', schema_name);\n    EXECUTE format('GRANT ALL PRIVILEGES ON SCHEMA %I TO postgres', schema_name);\n\n    -- Create base tables for the tenant\n    EXECUTE format('\n        CREATE TABLE IF NOT EXISTS %I.users (\n            id UUID PRIMARY KEY DEFAULT gen_random_uuid(),\n            email VARCHAR(255) UNIQUE NOT NULL,\n            name VARCHAR(255),\n            role VARCHAR(50) DEFAULT ''user'',\n            status VARCHAR(50) DEFAULT ''active'',\n            created_at TIMESTAMP WITH TIME ZONE DEFAULT NOW(),\n            updated_at TIMESTAMP WITH TIME ZONE DEFAULT NOW()\n        )', schema_name);\n\n    RAISE NOTICE 'Created tenant schema: %', schema_name;\nEND;\n$$ LANGUAGE plpgsql;\n\n-- Function: Drop Tenant Schema (public schema - backward compatibility)\nCREATE OR REPLACE FUNCTION public.drop_tenant_schema(tenant_key VARCHAR)\nRETURNS VOID AS $$\nDECLARE\n    schema_name VARCHAR;\nBEGIN\n    schema_name := 'tenant_' || tenant_key;\n    EXECUTE format('DROP SCHEMA IF EXISTS %I CASCADE', schema_name);\n    RAISE NOTICE 'Dropped tenant schema: %', schema_name;\nEND;\n$$ LANGUAGE plpgsql;\n\n-- ============================================================================\n-- SECTION 5: MAIN SCHEMA TABLES\n-- ============================================================================\n\n-- Table: addresses\nCREATE TABLE IF NOT EXISTS main.addresses (\n    id UUID DEFAULT (md5((random()::text || clock_timestamp()::text)))::uuid NOT NULL PRIMARY KEY,\n    address VARCHAR(500),\n    city VARCHAR(100),\n    state VARCHAR(100),\n    zip VARCHAR(25),\n    country VARCHAR(25),\n    created_on TIMESTAMPTZ DEFAULT CURRENT_TIMESTAMP NOT NULL,\n    modified_on TIMESTAMPTZ DEFAULT CURRENT_TIMESTAMP NOT NULL,\n    deleted BOOLEAN DEFAULT false NOT NULL,\n    deleted_on TIMESTAMPTZ,\n    deleted_by UUID,\n    created_by UUID,\n    modified_by UUID\n);\n\nCOMMENT ON TABLE main.addresses IS 'represents the addresses of leads and tenants';\n\n-- Table: tenants\nCREATE TABLE IF NOT EXISTS main.tenants (\n    id UUID DEFAULT (md5((random()::text || clock_timestamp()::text)))::uuid NOT NULL PRIMARY KEY,\n    name VARCHAR(100) NOT NULL,\n    key VARCHAR(20) NOT NULL UNIQUE,\n    status SMALLINT DEFAULT 0 NOT NULL,\n    domains VARCHAR[] DEFAULT '{}'::VARCHAR[] NOT NULL,\n    metadata JSONB DEFAULT '{}'::jsonb,\n    identity_provider VARCHAR(50) DEFAULT 'keycloak'::VARCHAR NOT NULL\n        CHECK (identity_provider IN ('keycloak', 'auth0', 'cognito')),\n    schema_name VARCHAR(100),\n    spoc_user_id UUID,\n    lead_id UUID,\n    address_id UUID,\n    created_on TIMESTAMPTZ DEFAULT CURRENT_TIMESTAMP NOT NULL,\n    modified_on TIMESTAMPTZ DEFAULT CURRENT_TIMESTAMP NOT NULL,\n    created_by UUID,\n    modified_by UUID,\n    deleted BOOLEAN DEFAULT false NOT NULL,\n    deleted_on TIMESTAMPTZ,\n    deleted_by UUID,\n    CONSTRAINT fk_tenants_address FOREIGN KEY (address_id) REFERENCES main.addresses(id)\n);\n\nCOMMENT ON TABLE main.tenants IS 'represents the tenants in the multi-tenant platform';\nCOMMENT ON COLUMN main.tenants.identity_provider IS 'Identity provider type: keycloak, auth0, or cognito';\nCOMMENT ON COLUMN main.tenants.status IS 'status of a tenant, it can be - 0(active), 1(provisioning),2(deprovisioning),3(inactive)';\nCOMMENT ON COLUMN main.tenants.key IS 'a short string used to identify a tenant. This is also used as the namespace and subdomain for this particular tenant';\n\nCREATE INDEX IF NOT EXISTS idx_tenants_key ON main.tenants(key) WHERE deleted = false;\nCREATE INDEX IF NOT EXISTS idx_tenants_status ON main.tenants(status) WHERE deleted = false;\n\n-- Table: leads\nCREATE TABLE IF NOT EXISTS main.leads (\n    id UUID DEFAULT (md5((random()::text || clock_timestamp()::text)))::uuid NOT NULL PRIMARY KEY,\n    first_name VARCHAR(100) NOT NULL,\n    last_name VARCHAR(100) NOT NULL,\n    email VARCHAR(100) NOT NULL UNIQUE,\n    company_name VARCHAR(100),\n    is_validated BOOLEAN DEFAULT false NOT NULL,\n    address_id UUID,\n    created_on TIMESTAMPTZ DEFAULT CURRENT_TIMESTAMP NOT NULL,\n    modified_on TIMESTAMPTZ DEFAULT CURRENT_TIMESTAMP NOT NULL,\n    deleted BOOLEAN DEFAULT false NOT NULL,\n    deleted_on TIMESTAMPTZ,\n    deleted_by UUID,\n    created_by UUID,\n    modified_by UUID,\n    CONSTRAINT fk_leads_address FOREIGN KEY (address_id) REFERENCES main.addresses(id)\n);\n\nCOMMENT ON TABLE main.leads IS 'represents the leads that could or could not lead to an actual tenant as a customer for application.';\n\nCREATE INDEX IF NOT EXISTS idx_leads_email ON main.leads(email) WHERE deleted = false;\n\n-- Table: contacts\nCREATE TABLE IF NOT EXISTS main.contacts (\n    id UUID DEFAULT (md5((random()::text || clock_timestamp()::text)))::uuid NOT NULL PRIMARY KEY,\n    first_name VARCHAR(100) NOT NULL,\n    last_name VARCHAR(100) NOT NULL,\n    email VARCHAR(100) NOT NULL,\n    contact_type VARCHAR(100),\n    is_primary BOOLEAN DEFAULT false NOT NULL,\n    tenant_id UUID NOT NULL REFERENCES main.tenants(id),\n    created_on TIMESTAMPTZ DEFAULT CURRENT_TIMESTAMP NOT NULL,\n    modified_on TIMESTAMPTZ,\n    created_by UUID,\n    modified_by UUID,\n    deleted BOOLEAN DEFAULT false NOT NULL,\n    deleted_by UUID,\n    deleted_on TIMESTAMPTZ\n);\n\nCOMMENT ON TABLE main.contacts IS 'represents contacts of a tenant';\n\nCREATE INDEX IF NOT EXISTS idx_contacts_tenant_id ON main.contacts(tenant_id) WHERE deleted = false;\n\n-- Table: branding_metadata\nCREATE TABLE IF NOT EXISTS main.branding_metadata (\n    id UUID DEFAULT (md5((random()::text || clock_timestamp()::text)))::uuid NOT NULL PRIMARY KEY,\n    theme_metadata JSONB,\n    description VARCHAR(500),\n    logo VARCHAR(500),\n    website VARCHAR(500),\n    tenant_id UUID NOT NULL,\n    CONSTRAINT fk_branding_metadata_tenants FOREIGN KEY (tenant_id) REFERENCES main.tenants(id)\n);\n\nCOMMENT ON TABLE main.branding_metadata IS 'Branding and theme customization for tenants';\n\n-- Table: users\nCREATE TABLE IF NOT EXISTS main.users (\n    id UUID DEFAULT (md5((random()::text || clock_timestamp()::text)))::uuid NOT NULL PRIMARY KEY,\n    email VARCHAR(255) NOT NULL,\n    first_name VARCHAR(100) NOT NULL,\n    last_name VARCHAR(100) NOT NULL,\n    auth_id VARCHAR(255),\n    keycloak_user_id VARCHAR(255),\n    status SMALLINT DEFAULT 0 NOT NULL,\n    role VARCHAR(50) DEFAULT 'user',\n    is_active BOOLEAN DEFAULT true,\n    permissions JSONB DEFAULT '[]'::jsonb,\n    tenant_id UUID NOT NULL REFERENCES main.tenants(id),\n    phone VARCHAR(50),\n    avatar_url VARCHAR(500),\n    last_login TIMESTAMPTZ,\n    created_on TIMESTAMPTZ DEFAULT CURRENT_TIMESTAMP NOT NULL,\n    modified_on TIMESTAMPTZ DEFAULT CURRENT_TIMESTAMP NOT NULL,\n    created_by UUID,\n    modified_by UUID,\n    deleted BOOLEAN DEFAULT false NOT NULL,\n    deleted_on TIMESTAMPTZ,\n    deleted_by UUID,\n    CONSTRAINT uk_users_email_tenant UNIQUE (email, tenant_id)\n);\n\nCOMMENT ON TABLE main.users IS 'User accounts with multi-tenant support and Keycloak SSO integration';\nCOMMENT ON COLUMN main.users.auth_id IS 'Keycloak user UUID for SSO authentication';\nCOMMENT ON COLUMN main.users.keycloak_user_id IS 'Keycloak username/email for SSO lookup';\nCOMMENT ON COLUMN main.users.role IS 'User role: super_admin, owner, admin, engineer, analyst';\nCOMMENT ON COLUMN main.users.is_active IS 'Whether the user account is active';\nCOMMENT ON COLUMN main.users.permissions IS 'JSON array of additional permissions';\nCOMMENT ON COLUMN main.users.status IS '0=pending, 1=active, 2=suspended, 3=deactivated';\n\nCREATE INDEX IF NOT EXISTS idx_users_email ON main.users(email) WHERE deleted = false;\nCREATE INDEX IF NOT EXISTS idx_users_status ON main.users(status) WHERE deleted = false;\nCREATE INDEX IF NOT EXISTS idx_users_tenant_id ON main.users(tenant_id) WHERE deleted = false;\nCREATE UNIQUE INDEX IF NOT EXISTS uk_users_auth_id ON main.users(auth_id) WHERE auth_id IS NOT NULL;\n\n-- Table: user_roles\nCREATE TABLE IF NOT EXISTS main.user_roles (\n    id UUID DEFAULT (md5((random()::text || clock_timestamp()::text)))::uuid NOT NULL PRIMARY KEY,\n    user_id UUID NOT NULL REFERENCES main.users(id) ON DELETE CASCADE,\n    role_key VARCHAR(50) NOT NULL,\n    permissions TEXT[],\n    scope_type VARCHAR(50) DEFAULT 'tenant'::VARCHAR NOT NULL,\n    scope_id UUID,\n    tenant_id UUID NOT NULL REFERENCES main.tenants(id),\n    created_on TIMESTAMPTZ DEFAULT CURRENT_TIMESTAMP NOT NULL,\n    modified_on TIMESTAMPTZ DEFAULT CURRENT_TIMESTAMP NOT NULL,\n    created_by UUID,\n    modified_by UUID,\n    deleted BOOLEAN DEFAULT false NOT NULL,\n    deleted_on TIMESTAMPTZ,\n    deleted_by UUID,\n    CONSTRAINT uk_user_roles_unique UNIQUE (user_id, role_key, scope_type, scope_id)\n);\n\nCOMMENT ON TABLE main.user_roles IS 'User role assignments with support for tenant, workspace, and project level permissions';\nCOMMENT ON COLUMN main.user_roles.role_key IS 'Role identifier (super_admin, owner, admin, engineer, analyst)';\nCOMMENT ON COLUMN main.user_roles.permissions IS 'Array of permission codes granted by this role';\nCOMMENT ON COLUMN main.user_roles.scope_type IS 'Scope of the role: tenant (org-wide), workspace, or project';\nCOMMENT ON COLUMN main.user_roles.scope_id IS 'NULL for tenant-level roles, otherwise references workspace or project';\n\nCREATE INDEX IF NOT EXISTS idx_user_roles_user_id ON main.user_roles(user_id) WHERE deleted = false;\nCREATE INDEX IF NOT EXISTS idx_user_roles_role_key ON main.user_roles(role_key) WHERE deleted = false;\nCREATE INDEX IF NOT EXISTS idx_user_roles_scope ON main.user_roles(scope_type, scope_id) WHERE deleted = false;\nCREATE INDEX IF NOT EXISTS idx_user_roles_tenant_id ON main.user_roles(tenant_id) WHERE deleted = false;\n\n-- Table: user_invitations\nCREATE TABLE IF NOT EXISTS main.user_invitations (\n    id UUID DEFAULT (md5((random()::text || clock_timestamp()::text)))::uuid NOT NULL PRIMARY KEY,\n    email VARCHAR(255) NOT NULL,\n    token VARCHAR(255) NOT NULL UNIQUE,\n    role_key VARCHAR(50) NOT NULL,\n    invited_by UUID NOT NULL REFERENCES main.users(id),\n    tenant_id UUID NOT NULL REFERENCES main.tenants(id),\n    expires_at TIMESTAMPTZ NOT NULL,\n    status SMALLINT DEFAULT 0 NOT NULL,\n    accepted_at TIMESTAMPTZ,\n    accepted_by UUID REFERENCES main.users(id),\n    first_name VARCHAR(100),\n    last_name VARCHAR(100),\n    custom_message TEXT,\n    last_email_sent_at TIMESTAMPTZ,\n    resend_count INTEGER DEFAULT 0 NOT NULL,\n    created_on TIMESTAMPTZ DEFAULT CURRENT_TIMESTAMP NOT NULL,\n    modified_on TIMESTAMPTZ DEFAULT CURRENT_TIMESTAMP NOT NULL,\n    created_by UUID,\n    modified_by UUID,\n    deleted BOOLEAN DEFAULT false NOT NULL,\n    deleted_on TIMESTAMPTZ,\n    deleted_by UUID,\n    CONSTRAINT ck_user_invitations_expires_future CHECK (expires_at \u003e created_on),\n    CONSTRAINT ck_user_invitations_token_length CHECK (length(token) \u003e= 32)\n);\n\nCOMMENT ON TABLE main.user_invitations IS 'User invitation tokens with role assignment and expiration tracking';\nCOMMENT ON COLUMN main.user_invitations.token IS 'Secure random token embedded in invitation link';\nCOMMENT ON COLUMN main.user_invitations.expires_at IS 'Invitation expiration timestamp (typically created_on + 7 days)';\nCOMMENT ON COLUMN main.user_invitations.status IS '0=pending, 1=accepted, 2=expired, 3=revoked';\n\nCREATE INDEX IF NOT EXISTS idx_user_invitations_email ON main.user_invitations(email) WHERE deleted = false;\nCREATE INDEX IF NOT EXISTS idx_user_invitations_token ON main.user_invitations(token) WHERE deleted = false AND status = 0;\nCREATE INDEX IF NOT EXISTS idx_user_invitations_tenant_id ON main.user_invitations(tenant_id) WHERE deleted = false;\nCREATE INDEX IF NOT EXISTS idx_user_invitations_status ON main.user_invitations(status) WHERE deleted = false;\n\n-- Table: user_activities\nCREATE TABLE IF NOT EXISTS main.user_activities (\n    id UUID DEFAULT (md5((random()::text || clock_timestamp()::text)))::uuid NOT NULL PRIMARY KEY,\n    user_id UUID NOT NULL REFERENCES main.users(id) ON DELETE CASCADE,\n    tenant_id UUID NOT NULL REFERENCES main.tenants(id),\n    action VARCHAR(100) NOT NULL,\n    entity_type VARCHAR(50),\n    entity_id UUID,\n    metadata JSONB,\n    ip_address VARCHAR(45),\n    user_agent TEXT,\n    occurred_at TIMESTAMPTZ DEFAULT CURRENT_TIMESTAMP NOT NULL\n);\n\nCOMMENT ON TABLE main.user_activities IS 'User activity log for audit trail and user behavior tracking';\nCOMMENT ON COLUMN main.user_activities.action IS 'Action identifier (e.g., user.created, user.login, user.role_changed)';\nCOMMENT ON COLUMN main.user_activities.entity_type IS 'Type of entity affected by the action';\nCOMMENT ON COLUMN main.user_activities.entity_id IS 'UUID of the affected entity';\nCOMMENT ON COLUMN main.user_activities.metadata IS 'JSON metadata containing additional context (changed fields, IP, user agent, etc.)';\nCOMMENT ON COLUMN main.user_activities.occurred_at IS 'Timestamp when the activity occurred';\n\nCREATE INDEX IF NOT EXISTS idx_user_activities_user_id ON main.user_activities(user_id);\nCREATE INDEX IF NOT EXISTS idx_user_activities_tenant_id ON main.user_activities(tenant_id);\nCREATE INDEX IF NOT EXISTS idx_user_activities_occurred_at ON main.user_activities(occurred_at);\nCREATE INDEX IF NOT EXISTS idx_user_activities_action ON main.user_activities(action);\n\n-- Table: audit_logs\nCREATE TABLE IF NOT EXISTS main.audit_logs (\n    id UUID DEFAULT gen_random_uuid() NOT NULL PRIMARY KEY,\n    action VARCHAR(100) NOT NULL,\n    actor_id UUID NOT NULL,\n    actor_name VARCHAR(200),\n    actor_email VARCHAR(255),\n    target_type VARCHAR(50),\n    target_id UUID,\n    target_name VARCHAR(200),\n    tenant_id UUID,\n    tenant_name VARCHAR(200),\n    details JSONB,\n    ip_address VARCHAR(45),\n    user_agent TEXT,\n    status VARCHAR(20) DEFAULT 'success'::VARCHAR NOT NULL,\n    timestamp TIMESTAMPTZ DEFAULT now() NOT NULL\n);\n\nCOMMENT ON TABLE main.audit_logs IS 'System-wide audit log for security and compliance tracking';\n\nCREATE INDEX IF NOT EXISTS idx_audit_logs_actor_id ON main.audit_logs(actor_id);\nCREATE INDEX IF NOT EXISTS idx_audit_logs_tenant_id ON main.audit_logs(tenant_id);\nCREATE INDEX IF NOT EXISTS idx_audit_logs_timestamp ON main.audit_logs(timestamp);\nCREATE INDEX IF NOT EXISTS idx_audit_logs_action ON main.audit_logs(action);\n\n-- Table: plans\nCREATE TABLE IF NOT EXISTS main.plans (\n    id VARCHAR(100) PRIMARY KEY,\n    name VARCHAR(255) NOT NULL,\n    description TEXT,\n    tier VARCHAR(50) NOT NULL,\n    price DECIMAL(10, 2) NOT NULL DEFAULT 0,\n    billing_cycle VARCHAR(20) NOT NULL DEFAULT 'month',\n    features JSONB DEFAULT '[]'::jsonb,\n    is_active BOOLEAN DEFAULT true,\n    limits JSONB DEFAULT '{}'::jsonb,\n    trial_enabled BOOLEAN DEFAULT false,\n    trial_duration INTEGER DEFAULT 14,\n    trial_duration_unit VARCHAR(20) DEFAULT 'days',\n    stripe_product_id VARCHAR(255),\n    stripe_price_id VARCHAR(255),\n    is_popular BOOLEAN DEFAULT false,\n    sort_order INTEGER DEFAULT 0,\n    created_on TIMESTAMPTZ DEFAULT CURRENT_TIMESTAMP,\n    modified_on TIMESTAMPTZ DEFAULT CURRENT_TIMESTAMP,\n    created_by VARCHAR(255),\n    modified_by VARCHAR(255),\n    deleted BOOLEAN DEFAULT false,\n    deleted_on TIMESTAMPTZ,\n    deleted_by VARCHAR(255)\n);\n\nCOMMENT ON TABLE main.plans IS 'Subscription plans with pricing and feature definitions';\n\nCREATE INDEX IF NOT EXISTS idx_plans_tier ON main.plans(tier);\nCREATE INDEX IF NOT EXISTS idx_plans_is_active ON main.plans(is_active);\nCREATE INDEX IF NOT EXISTS idx_plans_sort_order ON main.plans(sort_order);\n\n-- Table: subscriptions\nCREATE TABLE IF NOT EXISTS main.subscriptions (\n    id UUID DEFAULT gen_random_uuid() NOT NULL PRIMARY KEY,\n    tenant_id UUID REFERENCES main.tenants(id),\n    planid VARCHAR(100) NOT NULL,\n    planname VARCHAR(100) NOT NULL,\n    plantier VARCHAR(50) NOT NULL,\n    status VARCHAR(50) DEFAULT 'active'::VARCHAR NOT NULL,\n    current_period_start TIMESTAMPTZ NOT NULL,\n    current_period_end TIMESTAMPTZ NOT NULL,\n    trial_start TIMESTAMPTZ,\n    trial_end TIMESTAMPTZ,\n    amount DECIMAL(10,2) NOT NULL,\n    currency VARCHAR(3) DEFAULT 'USD'::VARCHAR NOT NULL,\n    billing_cycle VARCHAR(20) DEFAULT 'monthly'::VARCHAR NOT NULL,\n    cancel_at_period_end BOOLEAN DEFAULT false,\n    canceled_at TIMESTAMPTZ,\n    cancel_reason TEXT,\n    metadata JSONB,\n    deleted BOOLEAN DEFAULT false,\n    deleted_on TIMESTAMPTZ,\n    deleted_by UUID,\n    created_on TIMESTAMPTZ DEFAULT CURRENT_TIMESTAMP,\n    modified_on TIMESTAMPTZ DEFAULT CURRENT_TIMESTAMP,\n    created_by UUID,\n    modified_by UUID\n);\n\nCOMMENT ON TABLE main.subscriptions IS 'Tenant subscription records with billing details';\n\nCREATE INDEX IF NOT EXISTS idx_subscriptions_tenant_id ON main.subscriptions(tenant_id) WHERE deleted = false;\nCREATE INDEX IF NOT EXISTS idx_subscriptions_status ON main.subscriptions(status) WHERE deleted = false;\n\n-- Table: invoices\nCREATE TABLE IF NOT EXISTS main.invoices (\n    id UUID DEFAULT gen_random_uuid() NOT NULL PRIMARY KEY,\n    tenant_id UUID NOT NULL REFERENCES main.tenants(id),\n    start_date VARCHAR(50) NOT NULL,\n    end_date VARCHAR(50) NOT NULL,\n    amount DECIMAL(10,2) NOT NULL,\n    currency_code VARCHAR(10) NOT NULL,\n    invoice_file VARCHAR(500),\n    due_date VARCHAR(50) NOT NULL,\n    status INTEGER DEFAULT 0 NOT NULL,\n    deleted BOOLEAN DEFAULT false,\n    deleted_on TIMESTAMPTZ,\n    deleted_by UUID,\n    created_on TIMESTAMPTZ DEFAULT CURRENT_TIMESTAMP,\n    modified_on TIMESTAMPTZ DEFAULT CURRENT_TIMESTAMP,\n    created_by UUID,\n    modified_by UUID\n);\n\nCOMMENT ON TABLE main.invoices IS 'Invoices for tenant billing';\nCOMMENT ON COLUMN main.invoices.status IS 'status of the invoice, 0 - pending, 1 - paid';\n\nCREATE INDEX IF NOT EXISTS idx_invoices_tenant_id ON main.invoices(tenant_id) WHERE deleted = false;\nCREATE INDEX IF NOT EXISTS idx_invoices_status ON main.invoices(status) WHERE deleted = false;\n\n-- Table: payment_methods\nCREATE TABLE IF NOT EXISTS main.payment_methods (\n    id UUID DEFAULT gen_random_uuid() NOT NULL PRIMARY KEY,\n    tenant_id UUID NOT NULL REFERENCES main.tenants(id),\n    stripe_payment_method_id VARCHAR(255) NOT NULL,\n    stripe_customer_id VARCHAR(255),\n    type VARCHAR(50) NOT NULL,\n    card_details JSONB,\n    bank_account_details JSONB,\n    is_default BOOLEAN DEFAULT false,\n    billing_name VARCHAR(255),\n    billing_email VARCHAR(255),\n    billing_address JSONB,\n    metadata JSONB,\n    deleted BOOLEAN DEFAULT false,\n    deleted_on TIMESTAMPTZ,\n    deleted_by UUID,\n    created_on TIMESTAMPTZ DEFAULT CURRENT_TIMESTAMP,\n    modified_on TIMESTAMPTZ DEFAULT CURRENT_TIMESTAMP,\n    created_by UUID,\n    modified_by UUID\n);\n\nCOMMENT ON TABLE main.payment_methods IS 'Stores payment methods (cards, bank accounts) for tenant billing via Stripe';\n\nCREATE INDEX IF NOT EXISTS idx_payment_methods_tenant_id ON main.payment_methods(tenant_id) WHERE deleted = false;\nCREATE INDEX IF NOT EXISTS idx_payment_methods_stripe_id ON main.payment_methods(stripe_payment_method_id);\n\n-- Table: payment_intents\nCREATE TABLE IF NOT EXISTS main.payment_intents (\n    id UUID DEFAULT gen_random_uuid() NOT NULL PRIMARY KEY,\n    tenant_id UUID NOT NULL REFERENCES main.tenants(id),\n    invoice_id UUID REFERENCES main.invoices(id),\n    stripe_payment_intent_id VARCHAR(255) NOT NULL,\n    stripe_customer_id VARCHAR(255),\n    stripe_payment_method_id VARCHAR(255),\n    amount INTEGER NOT NULL,\n    currency VARCHAR(3) DEFAULT 'usd'::VARCHAR NOT NULL,\n    status VARCHAR(50) DEFAULT 'requires_payment_method'::VARCHAR NOT NULL,\n    client_secret VARCHAR(500),\n    description TEXT,\n    receipt_email VARCHAR(255),\n    failure_code VARCHAR(100),\n    failure_message TEXT,\n    succeeded_at TIMESTAMPTZ,\n    cancelled_at TIMESTAMPTZ,\n    cancellation_reason VARCHAR(100),\n    amount_received INTEGER,\n    metadata JSONB,\n    deleted BOOLEAN DEFAULT false,\n    deleted_on TIMESTAMPTZ,\n    deleted_by UUID,\n    created_on TIMESTAMPTZ DEFAULT CURRENT_TIMESTAMP,\n    modified_on TIMESTAMPTZ DEFAULT CURRENT_TIMESTAMP,\n    created_by UUID,\n    modified_by UUID\n);\n\nCOMMENT ON TABLE main.payment_intents IS 'Tracks Stripe payment intents for invoice payments';\n\nCREATE INDEX IF NOT EXISTS idx_payment_intents_tenant_id ON main.payment_intents(tenant_id) WHERE deleted = false;\nCREATE INDEX IF NOT EXISTS idx_payment_intents_stripe_id ON main.payment_intents(stripe_payment_intent_id);\nCREATE INDEX IF NOT EXISTS idx_payment_intents_status ON main.payment_intents(status);\n\n-- Table: settings\nCREATE TABLE IF NOT EXISTS main.settings (\n    id UUID DEFAULT public.uuid_generate_v4() NOT NULL PRIMARY KEY,\n    config_key VARCHAR(100) NOT NULL UNIQUE,\n    config_value TEXT,\n    value_type VARCHAR(20) DEFAULT 'string'::VARCHAR,\n    description TEXT,\n    category VARCHAR(50),\n    is_public BOOLEAN DEFAULT false,\n    created_on TIMESTAMPTZ DEFAULT CURRENT_TIMESTAMP,\n    modified_on TIMESTAMPTZ DEFAULT CURRENT_TIMESTAMP,\n    created_by UUID,\n    modified_by UUID,\n    deleted BOOLEAN DEFAULT false,\n    deleted_on TIMESTAMPTZ,\n    deleted_by UUID\n);\n\nCOMMENT ON TABLE main.settings IS 'Platform-wide configuration settings';\nCOMMENT ON COLUMN main.settings.config_key IS 'Unique key for the setting (e.g., platform.name, email.sender)';\nCOMMENT ON COLUMN main.settings.config_value IS 'Value of the setting';\nCOMMENT ON COLUMN main.settings.value_type IS 'Data type: string, number, boolean, json';\nCOMMENT ON COLUMN main.settings.category IS 'Category for grouping settings (e.g., general, email, billing)';\nCOMMENT ON COLUMN main.settings.is_public IS 'Whether this setting is visible to non-admin users';\n\nCREATE INDEX IF NOT EXISTS idx_settings_category ON main.settings(category) WHERE deleted = false;\n\n-- Table: resources\nCREATE TABLE IF NOT EXISTS main.resources (\n    id UUID DEFAULT (md5((random()::text || clock_timestamp()::text)))::uuid NOT NULL PRIMARY KEY,\n    type VARCHAR(100) NOT NULL,\n    metadata JSONB NOT NULL,\n    external_identifier VARCHAR(200) NOT NULL,\n    tenant_id UUID NOT NULL REFERENCES main.tenants(id),\n    created_on TIMESTAMPTZ DEFAULT CURRENT_TIMESTAMP NOT NULL,\n    modified_on TIMESTAMPTZ DEFAULT CURRENT_TIMESTAMP NOT NULL,\n    created_by UUID,\n    modified_by UUID,\n    deleted BOOLEAN DEFAULT false NOT NULL,\n    deleted_on TIMESTAMPTZ,\n    deleted_by UUID,\n    CONSTRAINT idx_resource_ext_id UNIQUE (external_identifier, tenant_id)\n);\n\nCOMMENT ON TABLE main.resources IS 'model for resources that are provisioned for a tenant';\nCOMMENT ON COLUMN main.resources.type IS 'type of the resource like storage, compute, etc';\nCOMMENT ON COLUMN main.resources.metadata IS 'any type specific metadata of the resource like connection info, size, etc';\nCOMMENT ON COLUMN main.resources.external_identifier IS 'identifier for the resource in the external system it was provisioned';\n\nCREATE INDEX IF NOT EXISTS idx_resources_tenant_id ON main.resources(tenant_id) WHERE deleted = false;\nCREATE INDEX IF NOT EXISTS idx_resources_type ON main.resources(type) WHERE deleted = false;\n\n-- Table: platform_config\nCREATE TABLE IF NOT EXISTS main.platform_config (\n    id UUID DEFAULT public.uuid_generate_v4() NOT NULL PRIMARY KEY,\n    key VARCHAR(100) NOT NULL UNIQUE,\n    value JSONB DEFAULT '{}'::jsonb NOT NULL,\n    description TEXT,\n    created_at TIMESTAMPTZ DEFAULT now(),\n    updated_at TIMESTAMPTZ DEFAULT now()\n);\n\nCOMMENT ON TABLE main.platform_config IS 'Platform-level configuration for features and integrations';\n\n-- Table: feature_flags\nCREATE TABLE IF NOT EXISTS main.feature_flags (\n    id UUID DEFAULT public.uuid_generate_v4() NOT NULL PRIMARY KEY,\n    name VARCHAR(100) NOT NULL UNIQUE,\n    enabled BOOLEAN DEFAULT false,\n    description TEXT,\n    metadata JSONB DEFAULT '{}'::jsonb,\n    created_at TIMESTAMPTZ DEFAULT now(),\n    updated_at TIMESTAMPTZ DEFAULT now()\n);\n\nCOMMENT ON TABLE main.feature_flags IS 'Feature flags for enabling/disabling platform features';\n\n-- Table: notification_history\nCREATE TABLE IF NOT EXISTS main.notification_history (\n    id UUID DEFAULT gen_random_uuid() NOT NULL PRIMARY KEY,\n    tenant_id UUID NOT NULL REFERENCES main.tenants(id),\n    workflow_id VARCHAR(255) NOT NULL,\n    workflow_name VARCHAR(255),\n    subscriber_id VARCHAR(255) NOT NULL,\n    channel VARCHAR(50) NOT NULL CHECK (channel IN ('email', 'sms', 'push', 'in_app', 'webhook')),\n    status VARCHAR(50) DEFAULT 'pending'::VARCHAR NOT NULL\n        CHECK (status IN ('pending', 'sent', 'delivered', 'failed', 'bounced', 'opened', 'clicked')),\n    recipient_email VARCHAR(255),\n    recipient_phone VARCHAR(50),\n    subject VARCHAR(500),\n    payload JSONB,\n    transaction_id VARCHAR(255),\n    novu_message_id VARCHAR(255),\n    attempts INTEGER DEFAULT 1,\n    error_message TEXT,\n    error_code VARCHAR(100),\n    sent_at TIMESTAMPTZ,\n    delivered_at TIMESTAMPTZ,\n    opened_at TIMESTAMPTZ,\n    clicked_at TIMESTAMPTZ,\n    category VARCHAR(100),\n    metadata JSONB,\n    created_by UUID,\n    modified_by UUID,\n    created_on TIMESTAMPTZ DEFAULT now(),\n    modified_on TIMESTAMPTZ DEFAULT now(),\n    deleted BOOLEAN DEFAULT false,\n    deleted_on TIMESTAMPTZ,\n    deleted_by UUID\n);\n\nCOMMENT ON TABLE main.notification_history IS 'History of all notifications sent via Novu';\n\nCREATE INDEX IF NOT EXISTS idx_notification_history_tenant_id ON main.notification_history(tenant_id);\nCREATE INDEX IF NOT EXISTS idx_notification_history_status ON main.notification_history(status);\nCREATE INDEX IF NOT EXISTS idx_notification_history_workflow_id ON main.notification_history(workflow_id);\n\n-- Table: tenant_quotas\nCREATE TABLE IF NOT EXISTS main.tenant_quotas (\n    id UUID DEFAULT gen_random_uuid() NOT NULL PRIMARY KEY,\n    tenant_id UUID NOT NULL REFERENCES main.tenants(id),\n    metric_type VARCHAR(50) NOT NULL\n        CHECK (metric_type IN ('api_calls', 'storage_gb', 'users', 'workflows', 'integrations', 'custom')),\n    metric_name VARCHAR(100),\n    soft_limit DECIMAL(20,4) NOT NULL,\n    hard_limit DECIMAL(20,4) NOT NULL,\n    current_usage DECIMAL(20,4) DEFAULT 0,\n    unit VARCHAR(50) DEFAULT 'units'::VARCHAR,\n    reset_period VARCHAR(20) DEFAULT 'monthly'::VARCHAR\n        CHECK (reset_period IN ('hourly', 'daily', 'weekly', 'monthly', 'yearly', 'never')),\n    last_reset TIMESTAMPTZ,\n    next_reset TIMESTAMPTZ,\n    overage_rate DECIMAL(10,4) DEFAULT 0,\n    allow_overage BOOLEAN DEFAULT false,\n    is_active BOOLEAN DEFAULT true,\n    metadata JSONB,\n    created_by UUID,\n    modified_by UUID,\n    created_on TIMESTAMPTZ DEFAULT now(),\n    modified_on TIMESTAMPTZ DEFAULT now(),\n    deleted BOOLEAN DEFAULT false,\n    deleted_on TIMESTAMPTZ,\n    deleted_by UUID\n);\n\nCOMMENT ON TABLE main.tenant_quotas IS 'Usage quotas and limits for each tenant';\n\nCREATE INDEX IF NOT EXISTS idx_tenant_quotas_tenant_id ON main.tenant_quotas(tenant_id) WHERE deleted = false;\nCREATE INDEX IF NOT EXISTS idx_tenant_quotas_metric_type ON main.tenant_quotas(metric_type);\n\n-- Table: usage_events\nCREATE TABLE IF NOT EXISTS main.usage_events (\n    id UUID DEFAULT gen_random_uuid() NOT NULL PRIMARY KEY,\n    tenant_id UUID NOT NULL REFERENCES main.tenants(id),\n    metric_type VARCHAR(50) NOT NULL\n        CHECK (metric_type IN ('api_calls', 'storage_gb', 'users', 'workflows', 'integrations', 'custom')),\n    metric_name VARCHAR(100),\n    quantity DECIMAL(20,4) DEFAULT 1 NOT NULL,\n    unit VARCHAR(50) DEFAULT 'units'::VARCHAR,\n    event_timestamp TIMESTAMPTZ DEFAULT now() NOT NULL,\n    billing_period VARCHAR(7),\n    source VARCHAR(100),\n    resource_id VARCHAR(255),\n    metadata JSONB,\n    created_by UUID,\n    modified_by UUID,\n    created_on TIMESTAMPTZ DEFAULT now(),\n    modified_on TIMESTAMPTZ DEFAULT now(),\n    deleted BOOLEAN DEFAULT false,\n    deleted_on TIMESTAMPTZ,\n    deleted_by UUID\n);\n\nCOMMENT ON TABLE main.usage_events IS 'Individual usage events for billing and analytics';\n\nCREATE INDEX IF NOT EXISTS idx_usage_events_tenant_id ON main.usage_events(tenant_id);\nCREATE INDEX IF NOT EXISTS idx_usage_events_timestamp ON main.usage_events(event_timestamp);\nCREATE INDEX IF NOT EXISTS idx_usage_events_billing_period ON main.usage_events(billing_period);\n\n-- Table: usage_summaries\nCREATE TABLE IF NOT EXISTS main.usage_summaries (\n    id UUID DEFAULT gen_random_uuid() NOT NULL PRIMARY KEY,\n    tenant_id UUID NOT NULL REFERENCES main.tenants(id),\n    metric_type VARCHAR(50) NOT NULL\n        CHECK (metric_type IN ('api_calls', 'storage_gb', 'users', 'workflows', 'integrations', 'custom')),\n    billing_period VARCHAR(7) NOT NULL,\n    total_quantity DECIMAL(20,4) DEFAULT 0 NOT NULL,\n    included_quantity DECIMAL(20,4) DEFAULT 0,\n    overage_quantity DECIMAL(20,4) DEFAULT 0,\n    overage_amount DECIMAL(20,4) DEFAULT 0,\n    unit VARCHAR(50) DEFAULT 'units'::VARCHAR,\n    event_count INTEGER DEFAULT 0,\n    peak_usage DECIMAL(20,4),\n    average_usage DECIMAL(20,4),\n    period_start TIMESTAMPTZ,\n    period_end TIMESTAMPTZ,\n    last_updated TIMESTAMPTZ DEFAULT now(),\n    metadata JSONB,\n    created_by UUID,\n    modified_by UUID,\n    created_on TIMESTAMPTZ DEFAULT now(),\n    modified_on TIMESTAMPTZ DEFAULT now(),\n    deleted BOOLEAN DEFAULT false,\n    deleted_on TIMESTAMPTZ,\n    deleted_by UUID\n);\n\nCOMMENT ON TABLE main.usage_summaries IS 'Aggregated usage summaries per tenant per billing period';\n\nCREATE INDEX IF NOT EXISTS idx_usage_summaries_tenant_id ON main.usage_summaries(tenant_id);\nCREATE INDEX IF NOT EXISTS idx_usage_summaries_period ON main.usage_summaries(billing_period);\n\n-- ============================================================================\n-- SECTION 6: SUBSCRIPTION SCHEMA TABLES\n-- ============================================================================\n\n-- Table: subscription.plans\nCREATE TABLE IF NOT EXISTS subscription.plans (\n    id UUID DEFAULT uuid_generate_v4() NOT NULL PRIMARY KEY,\n    name VARCHAR(100) NOT NULL,\n    description TEXT,\n    tier VARCHAR(50) NOT NULL,\n    price DECIMAL(10,2) NOT NULL DEFAULT 0,\n    billing_interval subscription.billing_interval DEFAULT 'monthly'::subscription.billing_interval,\n    features JSONB DEFAULT '[]'::jsonb,\n    is_active BOOLEAN DEFAULT true,\n    metadata JSONB DEFAULT '{}'::jsonb,\n    created_at TIMESTAMPTZ DEFAULT now(),\n    updated_at TIMESTAMPTZ DEFAULT now()\n);\n\nCOMMENT ON TABLE subscription.plans IS 'Subscription plan definitions (subscription schema)';\n\nCREATE INDEX IF NOT EXISTS idx_subscription_plans_tier ON subscription.plans(tier);\nCREATE INDEX IF NOT EXISTS idx_subscription_plans_is_active ON subscription.plans(is_active);\n\n-- Table: subscription.subscriptions\nCREATE TABLE IF NOT EXISTS subscription.subscriptions (\n    id UUID DEFAULT uuid_generate_v4() NOT NULL PRIMARY KEY,\n    tenant_id UUID NOT NULL,\n    plan_id UUID NOT NULL REFERENCES subscription.plans(id),\n    status subscription.subscription_status DEFAULT 'active'::subscription.subscription_status,\n    billing_interval subscription.billing_interval DEFAULT 'monthly'::subscription.billing_interval,\n    start_date TIMESTAMPTZ DEFAULT now(),\n    end_date TIMESTAMPTZ,\n    trial_end_date TIMESTAMPTZ,\n    canceled_at TIMESTAMPTZ,\n    current_period_start TIMESTAMPTZ,\n    current_period_end TIMESTAMPTZ,\n    stripe_subscription_id VARCHAR(200),\n    stripe_customer_id VARCHAR(200),\n    created_at TIMESTAMPTZ DEFAULT now(),\n    updated_at TIMESTAMPTZ DEFAULT now()\n);\n\nCOMMENT ON TABLE subscription.subscriptions IS 'Active subscriptions (subscription schema)';\n\nCREATE INDEX IF NOT EXISTS idx_subscriptions_tenant ON subscription.subscriptions(tenant_id);\nCREATE INDEX IF NOT EXISTS idx_subscriptions_status ON subscription.subscriptions(status);\n\n-- Table: subscription.invoices\nCREATE TABLE IF NOT EXISTS subscription.invoices (\n    id UUID DEFAULT uuid_generate_v4() NOT NULL PRIMARY KEY,\n    subscription_id UUID REFERENCES subscription.subscriptions(id),\n    tenant_id UUID NOT NULL,\n    amount DECIMAL(10,2) NOT NULL,\n    currency VARCHAR(3) DEFAULT 'USD'::VARCHAR,\n    status VARCHAR(50) DEFAULT 'pending'::VARCHAR,\n    due_date TIMESTAMPTZ,\n    paid_at TIMESTAMPTZ,\n    invoice_number VARCHAR(100),\n    stripe_invoice_id VARCHAR(200),\n    metadata JSONB DEFAULT '{}'::jsonb,\n    created_at TIMESTAMPTZ DEFAULT now(),\n    updated_at TIMESTAMPTZ DEFAULT now()\n);\n\nCOMMENT ON TABLE subscription.invoices IS 'Subscription invoices (subscription schema)';\n\nCREATE INDEX IF NOT EXISTS idx_subscription_invoices_tenant ON subscription.invoices(tenant_id);\nCREATE INDEX IF NOT EXISTS idx_subscription_invoices_status ON subscription.invoices(status);\n\n-- ============================================================================\n-- SECTION 7: PUBLIC SCHEMA TABLES (Migration tracking)\n-- ============================================================================\n\n-- Table: public.migrations (db-migrate framework table)\nCREATE TABLE IF NOT EXISTS public.migrations (\n    id SERIAL PRIMARY KEY,\n    name VARCHAR(255) NOT NULL UNIQUE,\n    run_on TIMESTAMPTZ DEFAULT now() NOT NULL\n);\n\nCOMMENT ON TABLE public.migrations IS 'db-migrate framework migration tracking';\n\n-- Table: public.migrations_state (db-migrate framework table)\nCREATE TABLE IF NOT EXISTS public.migrations_state (\n    id SERIAL PRIMARY KEY,\n    current VARCHAR(255),\n    last_run TIMESTAMPTZ DEFAULT now()\n);\n\nCOMMENT ON TABLE public.migrations_state IS 'db-migrate framework state tracking';\n\n-- Table: public.audit_logs (legacy, may be duplicated with main.audit_logs)\nCREATE TABLE IF NOT EXISTS public.audit_logs (\n    id UUID DEFAULT gen_random_uuid() NOT NULL PRIMARY KEY,\n    action VARCHAR(100) NOT NULL,\n    actor_id UUID NOT NULL,\n    actor_name VARCHAR(200),\n    actor_email VARCHAR(255),\n    target_type VARCHAR(50),\n    target_id UUID,\n    target_name VARCHAR(200),\n    tenant_id UUID,\n    tenant_name VARCHAR(200),\n    details JSONB,\n    ip_address VARCHAR(45),\n    user_agent TEXT,\n    status VARCHAR(20) DEFAULT 'success'::VARCHAR NOT NULL,\n    timestamp TIMESTAMPTZ DEFAULT now() NOT NULL\n);\n\nCOMMENT ON TABLE public.audit_logs IS 'Legacy audit logs (public schema) - may be deprecated in favor of main.audit_logs';\n\n-- Table: public.notification_history (legacy, may be duplicated with main.notification_history)\nCREATE TABLE IF NOT EXISTS public.notification_history (\n    id UUID DEFAULT gen_random_uuid() NOT NULL PRIMARY KEY,\n    tenant_id UUID NOT NULL,\n    workflow_id VARCHAR(255) NOT NULL,\n    workflow_name VARCHAR(255),\n    subscriber_id VARCHAR(255) NOT NULL,\n    channel VARCHAR(50) NOT NULL CHECK (channel IN ('email', 'sms', 'push', 'in_app', 'webhook')),\n    status VARCHAR(50) DEFAULT 'pending'::VARCHAR NOT NULL\n        CHECK (status IN ('pending', 'sent', 'delivered', 'failed', 'bounced', 'opened', 'clicked')),\n    recipient_email VARCHAR(255),\n    recipient_phone VARCHAR(50),\n    subject VARCHAR(500),\n    payload JSONB,\n    transaction_id VARCHAR(255),\n    novu_message_id VARCHAR(255),\n    attempts INTEGER DEFAULT 1,\n    error_message TEXT,\n    error_code VARCHAR(100),\n    sent_at TIMESTAMPTZ,\n    delivered_at TIMESTAMPTZ,\n    opened_at TIMESTAMPTZ,\n    clicked_at TIMESTAMPTZ,\n    category VARCHAR(100),\n    metadata JSONB,\n    created_by UUID,\n    modified_by UUID,\n    created_on TIMESTAMPTZ DEFAULT now(),\n    modified_on TIMESTAMPTZ DEFAULT now(),\n    deleted BOOLEAN DEFAULT false,\n    deleted_on TIMESTAMPTZ,\n    deleted_by UUID\n);\n\nCOMMENT ON TABLE public.notification_history IS 'Legacy notification history (public schema) - may be deprecated in favor of main.notification_history';\n\n-- ============================================================================\n-- SECTION 8: SEED DATA\n-- ============================================================================\n\n-- ============================================================================\n-- TENANT SEED DATA (3 tenants - aligned with Supabase organizations)\n-- ============================================================================\n-- UUID Alignment with Supabase:\n--   Arc-SaaS tenant.id = Supabase organization.id\n--   Platform Admin:  a0000000-0000-0000-0000-000000000001\n--   CNS Staff:       a0000000-0000-0000-0000-000000000002\n--   Demo Org:        a0000000-0000-0000-0000-000000000000\n-- ============================================================================\n\n-- Tenant 1: Platform Admin (for super_admin users)\nINSERT INTO main.tenants (\n    id,\n    name,\n    key,\n    status,\n    domains,\n    identity_provider,\n    created_on,\n    modified_on\n) VALUES (\n    'a0000000-0000-0000-0000-000000000001',\n    'Platform Admin',\n    'platform',\n    0,\n    ARRAY['platform.ananta.dev', 'admin.ananta.dev'],\n    'keycloak',\n    NOW(),\n    NOW()\n) ON CONFLICT (id) DO UPDATE SET\n    name = EXCLUDED.name,\n    key = EXCLUDED.key,\n    status = 0,\n    modified_on = NOW();\n\n-- Tenant 2: CNS Staff (for CNS service team)\nINSERT INTO main.tenants (\n    id,\n    name,\n    key,\n    status,\n    domains,\n    identity_provider,\n    created_on,\n    modified_on\n) VALUES (\n    'a0000000-0000-0000-0000-000000000002',\n    'CNS Staff',\n    'cns-staff',\n    0,\n    ARRAY['cns.ananta.dev'],\n    'keycloak',\n    NOW(),\n    NOW()\n) ON CONFLICT (id) DO UPDATE SET\n    name = EXCLUDED.name,\n    key = EXCLUDED.key,\n    status = 0,\n    modified_on = NOW();\n\n-- Tenant 3: Demo Organization (for demo/trial users)\nINSERT INTO main.tenants (\n    id,\n    name,\n    key,\n    status,\n    domains,\n    identity_provider,\n    created_on,\n    modified_on\n) VALUES (\n    'a0000000-0000-0000-0000-000000000000',\n    'Demo Organization',\n    'demo-org',\n    0,\n    ARRAY['demo.ananta.dev'],\n    'keycloak',\n    NOW(),\n    NOW()\n) ON CONFLICT (id) DO UPDATE SET\n    name = EXCLUDED.name,\n    key = EXCLUDED.key,\n    status = 0,\n    modified_on = NOW();\n\n-- ============================================================================\n-- CONTACT SEED DATA (Primary contacts for each tenant)\n-- ============================================================================\n\n-- Contact 1: Platform Admin primary contact\nINSERT INTO main.contacts (\n    id,\n    first_name,\n    last_name,\n    email,\n    is_primary,\n    tenant_id,\n    created_on\n) VALUES (\n    'c0000000-0000-0000-0000-000000000001',\n    'Platform',\n    'Admin',\n    'superadmin@ananta.dev',\n    TRUE,\n    'a0000000-0000-0000-0000-000000000001',\n    NOW()\n) ON CONFLICT (id) DO NOTHING;\n\n-- Contact 2: CNS Staff primary contact\nINSERT INTO main.contacts (\n    id,\n    first_name,\n    last_name,\n    email,\n    is_primary,\n    tenant_id,\n    created_on\n) VALUES (\n    'c0000000-0000-0000-0000-000000000002',\n    'CNS',\n    'Lead',\n    'cns-lead@ananta.dev',\n    TRUE,\n    'a0000000-0000-0000-0000-000000000002',\n    NOW()\n) ON CONFLICT (id) DO NOTHING;\n\n-- Contact 3: Demo Org primary contact\nINSERT INTO main.contacts (\n    id,\n    first_name,\n    last_name,\n    email,\n    is_primary,\n    tenant_id,\n    created_on\n) VALUES (\n    'c0000000-0000-0000-0000-000000000003',\n    'Demo',\n    'Owner',\n    'demo-owner@example.com',\n    TRUE,\n    'a0000000-0000-0000-0000-000000000000',\n    NOW()\n) ON CONFLICT (id) DO NOTHING;\n\n-- Seed: Platform Configuration\nINSERT INTO main.settings (\n    config_key,\n    config_value,\n    value_type,\n    description,\n    category,\n    is_public\n) VALUES\n    (\n        'platform.super_admin_tenant_id',\n        'a0000000-0000-0000-0000-000000000001',\n        'string',\n        'The tenant ID for the Platform Super Admin organization. This is a system tenant for platform administration.',\n        'platform',\n        FALSE\n    ),\n    (\n        'platform.name',\n        'Ananta Platform SaaS',\n        'string',\n        'Platform name displayed in UI',\n        'general',\n        TRUE\n    ),\n    (\n        'platform.version',\n        '1.0.0',\n        'string',\n        'Platform version',\n        'general',\n        TRUE\n    )\nON CONFLICT (config_key) DO UPDATE SET\n    config_value = EXCLUDED.config_value,\n    description = EXCLUDED.description;\n\n-- Seed: Default Plans\nINSERT INTO main.plans (\n    id,\n    name,\n    description,\n    tier,\n    price,\n    billing_cycle,\n    features,\n    is_active,\n    limits,\n    trial_enabled,\n    trial_duration,\n    trial_duration_unit,\n    is_popular,\n    sort_order,\n    created_on,\n    modified_on\n) VALUES\n    (\n        'plan-free',\n        'Free',\n        'Get started for free - perfect for personal projects',\n        'FREE',\n        0.00,\n        'month',\n        '[\"1 user\", \"1 GB storage\", \"Community support\", \"Basic analytics\"]'::jsonb,\n        TRUE,\n        '{\"maxUsers\": 1, \"maxStorage\": 1, \"maxApiCalls\": 1000, \"maxProjects\": 3}'::jsonb,\n        FALSE,\n        14,\n        'days',\n        FALSE,\n        0,\n        NOW(),\n        NOW()\n    ),\n    (\n        'plan-basic',\n        'Basic',\n        'Perfect for small teams getting started',\n        'BASIC',\n        29.00,\n        'month',\n        '[\"Up to 5 users\", \"10 GB storage\", \"Email support\", \"Basic analytics\", \"API access\"]'::jsonb,\n        TRUE,\n        '{\"maxUsers\": 5, \"maxStorage\": 10, \"maxApiCalls\": 10000, \"maxProjects\": 10}'::jsonb,\n        FALSE,\n        14,\n        'days',\n        FALSE,\n        1,\n        NOW(),\n        NOW()\n    ),\n    (\n        'plan-standard',\n        'Standard',\n        'Best for growing businesses',\n        'STANDARD',\n        79.00,\n        'month',\n        '[\"Up to 25 users\", \"100 GB storage\", \"Priority email support\", \"Advanced analytics\", \"API access\", \"Custom integrations\", \"SSO authentication\"]'::jsonb,\n        TRUE,\n        '{\"maxUsers\": 25, \"maxStorage\": 100, \"maxApiCalls\": 100000, \"maxProjects\": 50}'::jsonb,\n        FALSE,\n        14,\n        'days',\n        TRUE,\n        2,\n        NOW(),\n        NOW()\n    ),\n    (\n        'plan-premium',\n        'Premium',\n        'For enterprises with advanced needs',\n        'PREMIUM',\n        199.00,\n        'month',\n        '[\"Unlimited users\", \"1 TB storage\", \"24/7 phone \u0026 email support\", \"Enterprise analytics\", \"Unlimited API access\", \"Custom integrations\", \"SSO authentication\", \"Dedicated account manager\", \"Custom SLA\", \"On-premise deployment option\"]'::jsonb,\n        TRUE,\n        '{\"maxUsers\": null, \"maxStorage\": 1000, \"maxApiCalls\": null, \"maxProjects\": null}'::jsonb,\n        FALSE,\n        14,\n        'days',\n        FALSE,\n        3,\n        NOW(),\n        NOW()\n    )\nON CONFLICT (id) DO UPDATE SET\n    name = EXCLUDED.name,\n    description = EXCLUDED.description,\n    price = EXCLUDED.price,\n    features = EXCLUDED.features,\n    limits = EXCLUDED.limits,\n    is_popular = EXCLUDED.is_popular,\n    modified_on = NOW();\n\n-- Seed: Feature Flags\nINSERT INTO main.feature_flags (name, enabled, description) VALUES\n    ('workflows', TRUE, 'Enable Temporal workflow management'),\n    ('billing', TRUE, 'Enable billing and payment features'),\n    ('auditLogs', TRUE, 'Enable audit log viewing'),\n    ('monitoring', TRUE, 'Enable system monitoring dashboards'),\n    ('notifications', TRUE, 'Enable notification system'),\n    ('quotas', TRUE, 'Enable usage quotas and limits')\nON CONFLICT (name) DO UPDATE SET\n    enabled = EXCLUDED.enabled,\n    description = EXCLUDED.description;\n\n-- ============================================================================\n-- USER SEED DATA (5 users - aligned with Supabase users)\n-- ============================================================================\n-- UUID Alignment with Supabase:\n--   Arc-SaaS user.id = Supabase user.id\n--   All users match keycloak_user_id for SSO\n-- ============================================================================\n\n-- User 1: Platform Super Admin (super_admin role)\nINSERT INTO main.users (\n    id,\n    tenant_id,\n    first_name,\n    last_name,\n    email,\n    status,\n    role,\n    is_active,\n    permissions,\n    keycloak_user_id,\n    created_on,\n    modified_on\n) VALUES (\n    'c0000000-0000-0000-0000-000000000001',\n    'a0000000-0000-0000-0000-000000000001',\n    'Platform',\n    'Admin',\n    'superadmin@ananta.dev',\n    0,\n    'super_admin',\n    TRUE,\n    '[\"*\"]'::jsonb,\n    'superadmin@ananta.dev',\n    NOW(),\n    NOW()\n) ON CONFLICT (id) DO UPDATE SET\n    email = EXCLUDED.email,\n    role = EXCLUDED.role,\n    permissions = EXCLUDED.permissions,\n    modified_on = NOW();\n\n-- User 2: CNS Lead (owner role for CNS Staff org)\nINSERT INTO main.users (\n    id,\n    tenant_id,\n    first_name,\n    last_name,\n    email,\n    status,\n    role,\n    is_active,\n    permissions,\n    keycloak_user_id,\n    created_on,\n    modified_on\n) VALUES (\n    'c0000000-0000-0000-0000-000000000002',\n    'a0000000-0000-0000-0000-000000000002',\n    'CNS',\n    'Lead',\n    'cns-lead@ananta.dev',\n    0,\n    'owner',\n    TRUE,\n    '[\"tenant:*\", \"subscription:*\", \"user:*\"]'::jsonb,\n    'cns-lead@ananta.dev',\n    NOW(),\n    NOW()\n) ON CONFLICT (id) DO UPDATE SET\n    email = EXCLUDED.email,\n    role = EXCLUDED.role,\n    permissions = EXCLUDED.permissions,\n    modified_on = NOW();\n\n-- User 3: CNS Engineer (engineer role for CNS Staff org)\nINSERT INTO main.users (\n    id,\n    tenant_id,\n    first_name,\n    last_name,\n    email,\n    status,\n    role,\n    is_active,\n    permissions,\n    keycloak_user_id,\n    created_on,\n    modified_on\n) VALUES (\n    'c0000000-0000-0000-0000-000000000003',\n    'a0000000-0000-0000-0000-000000000002',\n    'CNS',\n    'Engineer',\n    'cns-engineer@ananta.dev',\n    0,\n    'engineer',\n    TRUE,\n    '[\"component:*\", \"bom:*\", \"enrichment:*\"]'::jsonb,\n    'cns-engineer@ananta.dev',\n    NOW(),\n    NOW()\n) ON CONFLICT (id) DO UPDATE SET\n    email = EXCLUDED.email,\n    role = EXCLUDED.role,\n    permissions = EXCLUDED.permissions,\n    modified_on = NOW();\n\n-- User 4: Demo Owner (owner role for Demo org)\nINSERT INTO main.users (\n    id,\n    tenant_id,\n    first_name,\n    last_name,\n    email,\n    status,\n    role,\n    is_active,\n    permissions,\n    keycloak_user_id,\n    created_on,\n    modified_on\n) VALUES (\n    'c0000000-0000-0000-0000-000000000004',\n    'a0000000-0000-0000-0000-000000000000',\n    'Demo',\n    'Owner',\n    'demo-owner@example.com',\n    0,\n    'owner',\n    TRUE,\n    '[\"tenant:read\", \"tenant:update\", \"user:*\"]'::jsonb,\n    'demo-owner@example.com',\n    NOW(),\n    NOW()\n) ON CONFLICT (id) DO UPDATE SET\n    email = EXCLUDED.email,\n    role = EXCLUDED.role,\n    permissions = EXCLUDED.permissions,\n    modified_on = NOW();\n\n-- User 5: Demo Engineer (engineer role for Demo org)\nINSERT INTO main.users (\n    id,\n    tenant_id,\n    first_name,\n    last_name,\n    email,\n    status,\n    role,\n    is_active,\n    permissions,\n    keycloak_user_id,\n    created_on,\n    modified_on\n) VALUES (\n    'c0000000-0000-0000-0000-000000000005',\n    'a0000000-0000-0000-0000-000000000000',\n    'Demo',\n    'Engineer',\n    'demo-engineer@example.com',\n    0,\n    'engineer',\n    TRUE,\n    '[\"component:read\", \"bom:*\"]'::jsonb,\n    'demo-engineer@example.com',\n    NOW(),\n    NOW()\n) ON CONFLICT (id) DO UPDATE SET\n    email = EXCLUDED.email,\n    role = EXCLUDED.role,\n    permissions = EXCLUDED.permissions,\n    modified_on = NOW();\n\n-- User 6: CBP Admin (super_admin role for Platform org)\nINSERT INTO main.users (\n    id,\n    tenant_id,\n    first_name,\n    last_name,\n    email,\n    status,\n    role,\n    is_active,\n    permissions,\n    keycloak_user_id,\n    created_on,\n    modified_on\n) VALUES (\n    'c0000000-0000-0000-0000-000000000010',\n    'a0000000-0000-0000-0000-000000000001',\n    'CBP',\n    'Admin',\n    'cbpadmin@ananta.dev',\n    0,\n    'super_admin',\n    TRUE,\n    '[\"*\"]'::jsonb,\n    'cbpadmin@ananta.dev',\n    NOW(),\n    NOW()\n) ON CONFLICT (id) DO UPDATE SET\n    email = EXCLUDED.email,\n    role = EXCLUDED.role,\n    permissions = EXCLUDED.permissions,\n    modified_on = NOW();\n\n-- User 7: CNS Staff (engineer role for CNS Staff org)\nINSERT INTO main.users (\n    id,\n    tenant_id,\n    first_name,\n    last_name,\n    email,\n    status,\n    role,\n    is_active,\n    permissions,\n    keycloak_user_id,\n    created_on,\n    modified_on\n) VALUES (\n    'c0000000-0000-0000-0000-000000000011',\n    'a0000000-0000-0000-0000-000000000002',\n    'CNS',\n    'Staff',\n    'cnsstaff@ananta.dev',\n    0,\n    'engineer',\n    TRUE,\n    '[\"component:read\", \"bom:*\", \"enrichment:*\"]'::jsonb,\n    'cnsstaff@ananta.dev',\n    NOW(),\n    NOW()\n) ON CONFLICT (id) DO UPDATE SET\n    email = EXCLUDED.email,\n    role = EXCLUDED.role,\n    permissions = EXCLUDED.permissions,\n    modified_on = NOW();\n\n-- User 8: Backstage Admin (admin role for Platform org)\nINSERT INTO main.users (\n    id,\n    tenant_id,\n    first_name,\n    last_name,\n    email,\n    status,\n    role,\n    is_active,\n    permissions,\n    keycloak_user_id,\n    created_on,\n    modified_on\n) VALUES (\n    'c0000000-0000-0000-0000-000000000012',\n    'a0000000-0000-0000-0000-000000000001',\n    'Backstage',\n    'Admin',\n    'backstage-admin@ananta.dev',\n    0,\n    'admin',\n    TRUE,\n    '[\"tenant:read\", \"user:*\", \"subscription:read\"]'::jsonb,\n    'backstage-admin@ananta.dev',\n    NOW(),\n    NOW()\n) ON CONFLICT (id) DO UPDATE SET\n    email = EXCLUDED.email,\n    role = EXCLUDED.role,\n    permissions = EXCLUDED.permissions,\n    modified_on = NOW();\n\n-- User 9: Demo Analyst (analyst role for Demo org)\nINSERT INTO main.users (\n    id,\n    tenant_id,\n    first_name,\n    last_name,\n    email,\n    status,\n    role,\n    is_active,\n    permissions,\n    keycloak_user_id,\n    created_on,\n    modified_on\n) VALUES (\n    'c0000000-0000-0000-0000-000000000013',\n    'a0000000-0000-0000-0000-000000000000',\n    'Demo',\n    'Analyst',\n    'demo-analyst@example.com',\n    0,\n    'analyst',\n    TRUE,\n    '[\"component:read\", \"bom:read\", \"report:read\"]'::jsonb,\n    'demo-analyst@example.com',\n    NOW(),\n    NOW()\n) ON CONFLICT (id) DO UPDATE SET\n    email = EXCLUDED.email,\n    role = EXCLUDED.role,\n    permissions = EXCLUDED.permissions,\n    modified_on = NOW();\n\n-- ============================================================================\n-- USER ROLE ASSIGNMENTS\n-- ============================================================================\n\n-- Super Admin role assignment\nINSERT INTO main.user_roles (\n    id,\n    user_id,\n    role_key,\n    tenant_id,\n    created_on\n) VALUES (\n    'd0000000-0000-0000-0000-000000000001',\n    'c0000000-0000-0000-0000-000000000001',\n    'super_admin',\n    'a0000000-0000-0000-0000-000000000001',\n    NOW()\n) ON CONFLICT (id) DO NOTHING;\n\n-- CNS Lead role assignment\nINSERT INTO main.user_roles (\n    id,\n    user_id,\n    role_key,\n    tenant_id,\n    created_on\n) VALUES (\n    'd0000000-0000-0000-0000-000000000002',\n    'c0000000-0000-0000-0000-000000000002',\n    'owner',\n    'a0000000-0000-0000-0000-000000000002',\n    NOW()\n) ON CONFLICT (id) DO NOTHING;\n\n-- CNS Engineer role assignment\nINSERT INTO main.user_roles (\n    id,\n    user_id,\n    role_key,\n    tenant_id,\n    created_on\n) VALUES (\n    'd0000000-0000-0000-0000-000000000003',\n    'c0000000-0000-0000-0000-000000000003',\n    'engineer',\n    'a0000000-0000-0000-0000-000000000002',\n    NOW()\n) ON CONFLICT (id) DO NOTHING;\n\n-- Demo Owner role assignment\nINSERT INTO main.user_roles (\n    id,\n    user_id,\n    role_key,\n    tenant_id,\n    created_on\n) VALUES (\n    'd0000000-0000-0000-0000-000000000004',\n    'c0000000-0000-0000-0000-000000000004',\n    'owner',\n    'a0000000-0000-0000-0000-000000000000',\n    NOW()\n) ON CONFLICT (id) DO NOTHING;\n\n-- Demo Engineer role assignment\nINSERT INTO main.user_roles (\n    id,\n    user_id,\n    role_key,\n    tenant_id,\n    created_on\n) VALUES (\n    'd0000000-0000-0000-0000-000000000005',\n    'c0000000-0000-0000-0000-000000000005',\n    'engineer',\n    'a0000000-0000-0000-0000-000000000000',\n    NOW()\n) ON CONFLICT (id) DO NOTHING;\n\n-- CBP Admin role assignment\nINSERT INTO main.user_roles (\n    id,\n    user_id,\n    role_key,\n    tenant_id,\n    created_on\n) VALUES (\n    'd0000000-0000-0000-0000-000000000010',\n    'c0000000-0000-0000-0000-000000000010',\n    'super_admin',\n    'a0000000-0000-0000-0000-000000000001',\n    NOW()\n) ON CONFLICT (id) DO NOTHING;\n\n-- CNS Staff role assignment\nINSERT INTO main.user_roles (\n    id,\n    user_id,\n    role_key,\n    tenant_id,\n    created_on\n) VALUES (\n    'd0000000-0000-0000-0000-000000000011',\n    'c0000000-0000-0000-0000-000000000011',\n    'engineer',\n    'a0000000-0000-0000-0000-000000000002',\n    NOW()\n) ON CONFLICT (id) DO NOTHING;\n\n-- Backstage Admin role assignment\nINSERT INTO main.user_roles (\n    id,\n    user_id,\n    role_key,\n    tenant_id,\n    created_on\n) VALUES (\n    'd0000000-0000-0000-0000-000000000012',\n    'c0000000-0000-0000-0000-000000000012',\n    'admin',\n    'a0000000-0000-0000-0000-000000000001',\n    NOW()\n) ON CONFLICT (id) DO NOTHING;\n\n-- Demo Analyst role assignment\nINSERT INTO main.user_roles (\n    id,\n    user_id,\n    role_key,\n    tenant_id,\n    created_on\n) VALUES (\n    'd0000000-0000-0000-0000-000000000013',\n    'c0000000-0000-0000-0000-000000000013',\n    'analyst',\n    'a0000000-0000-0000-0000-000000000000',\n    NOW()\n) ON CONFLICT (id) DO NOTHING;\n\n-- ============================================================================\n-- SUBSCRIPTION SEED DATA (Active subscriptions for all tenants)\n-- ============================================================================\n\n-- Subscription 1: Platform Admin - Premium (unlimited)\nINSERT INTO main.subscriptions (\n    id,\n    tenant_id,\n    planid,\n    planname,\n    plantier,\n    status,\n    amount,\n    current_period_start,\n    current_period_end,\n    created_on,\n    modified_on\n) VALUES (\n    'e0000000-0000-0000-0000-000000000001',\n    'a0000000-0000-0000-0000-000000000001',\n    'plan-premium',\n    'Premium',\n    'premium',\n    'active',\n    199.00,\n    NOW(),\n    NOW() + INTERVAL '100 years',\n    NOW(),\n    NOW()\n) ON CONFLICT (id) DO UPDATE SET\n    status = 'active',\n    modified_on = NOW();\n\n-- Subscription 2: CNS Staff - Premium (unlimited)\nINSERT INTO main.subscriptions (\n    id,\n    tenant_id,\n    planid,\n    planname,\n    plantier,\n    status,\n    amount,\n    current_period_start,\n    current_period_end,\n    created_on,\n    modified_on\n) VALUES (\n    'e0000000-0000-0000-0000-000000000002',\n    'a0000000-0000-0000-0000-000000000002',\n    'plan-premium',\n    'Premium',\n    'premium',\n    'active',\n    199.00,\n    NOW(),\n    NOW() + INTERVAL '100 years',\n    NOW(),\n    NOW()\n) ON CONFLICT (id) DO UPDATE SET\n    status = 'active',\n    modified_on = NOW();\n\n-- Subscription 3: Demo Org - Standard (trial)\nINSERT INTO main.subscriptions (\n    id,\n    tenant_id,\n    planid,\n    planname,\n    plantier,\n    status,\n    amount,\n    trial_start,\n    trial_end,\n    current_period_start,\n    current_period_end,\n    created_on,\n    modified_on\n) VALUES (\n    'e0000000-0000-0000-0000-000000000003',\n    'a0000000-0000-0000-0000-000000000000',\n    'plan-standard',\n    'Standard',\n    'standard',\n    'trialing',\n    79.00,\n    NOW(),\n    NOW() + INTERVAL '14 days',\n    NOW(),\n    NOW() + INTERVAL '1 month',\n    NOW(),\n    NOW()\n) ON CONFLICT (id) DO UPDATE SET\n    status = 'trialing',\n    trial_end = NOW() + INTERVAL '14 days',\n    modified_on = NOW();\n\n-- ============================================================================\n-- TENANT QUOTA SEED DATA (using flexible metric_type schema)\n-- ============================================================================\n\n-- Quota for Platform Admin - Users (unlimited)\nINSERT INTO main.tenant_quotas (\n    id, tenant_id, metric_type, metric_name, soft_limit, hard_limit, current_usage\n) VALUES (\n    'f0000000-0000-0000-0000-000000000001',\n    'a0000000-0000-0000-0000-000000000001',\n    'users', 'User Accounts', 999999, 999999, 1\n) ON CONFLICT (id) DO NOTHING;\n\n-- Quota for CNS Staff - Users (unlimited)\nINSERT INTO main.tenant_quotas (\n    id, tenant_id, metric_type, metric_name, soft_limit, hard_limit, current_usage\n) VALUES (\n    'f0000000-0000-0000-0000-000000000002',\n    'a0000000-0000-0000-0000-000000000002',\n    'users', 'User Accounts', 999999, 999999, 2\n) ON CONFLICT (id) DO NOTHING;\n\n-- Quota for Demo Org - Users (Standard plan: 25 users)\nINSERT INTO main.tenant_quotas (\n    id, tenant_id, metric_type, metric_name, soft_limit, hard_limit, current_usage\n) VALUES (\n    'f0000000-0000-0000-0000-000000000003',\n    'a0000000-0000-0000-0000-000000000000',\n    'users', 'User Accounts', 20, 25, 2\n) ON CONFLICT (id) DO NOTHING;\n\nCOMMIT;\n\n-- ============================================================================\n-- MIGRATION COMPLETE\n-- ============================================================================\n-- Summary:\n-- - Schemas: main, subscription, public\n-- - Main schema tables: 23 (addresses, tenants, leads, contacts, branding_metadata,\n--   users, user_roles, user_invitations, user_activities, audit_logs, plans,\n--   subscriptions, invoices, payment_methods, payment_intents, settings, resources,\n--   platform_config, feature_flags, notification_history, tenant_quotas,\n--   usage_events, usage_summaries)\n-- - Subscription schema tables: 3 (plans, subscriptions, invoices)\n-- - Public schema tables: 4 (migrations, migrations_state, audit_logs, notification_history)\n-- - Custom types: 2 (billing_interval, subscription_status)\n-- - Functions: 4 (create_tenant_schema, drop_tenant_schema in main and public)\n-- - Extensions: 2 (uuid-ossp, pgcrypto)\n--\n-- SEED DATA (out-of-box ready):\n-- - Tenants: 3 (Platform Admin, CNS Staff, Demo Org) - UUID aligned with Supabase\n-- - Contacts: 3 (one primary contact per tenant)\n-- - Users: 5 (super_admin, 2x owner, 2x engineer) - UUID aligned with Supabase\n-- - User Roles: 5 role assignments\n-- - Plans: 4 (Free, Basic, Standard, Premium)\n-- - Subscriptions: 3 (Premium for internal orgs, Standard trial for demo)\n-- - Quotas: 3 (unlimited for internal, limits for demo)\n-- - Feature Flags: 6 (all enabled)\n-- - Platform Settings: 3\n--\n-- UUID ALIGNMENT WITH SUPABASE:\n-- - tenant.id = organization.id\n-- - user.id matches across both databases\n-- - Platform Admin: a0000000-0000-0000-0000-000000000001\n-- - CNS Staff:      a0000000-0000-0000-0000-000000000002\n-- - Demo Org:       a0000000-0000-0000-0000-000000000000\n--\n-- Total verified tables: 30 (matches live database)\n-- ============================================================================\n",
              "006_DIRECTUS_CNS_ENRICHMENT_CONFIG.sql": "-- ====================================================================\n-- CNS Enrichment Configuration (Migration 010)\n-- Stores UI-configurable settings for AI and web scraping\n-- ====================================================================\n\n-- ====================================================================\n-- 1. CNS Enrichment Configuration Table\n-- ====================================================================\n\nCREATE TABLE IF NOT EXISTS cns_enrichment_config (\n    id SERIAL PRIMARY KEY,\n    tenant_id UUID REFERENCES main.tenants(id) ON DELETE CASCADE,\n\n    -- General settings\n    config_name VARCHAR(255) NOT NULL DEFAULT 'default',\n    is_active BOOLEAN NOT NULL DEFAULT true,\n    is_global BOOLEAN NOT NULL DEFAULT false,  -- Global config vs tenant-specific\n\n    -- Tier 2: Supplier APIs\n    enable_suppliers BOOLEAN NOT NULL DEFAULT true,\n    preferred_suppliers TEXT[],  -- Array of supplier names: [\"mouser\", \"digikey\"]\n    supplier_min_confidence NUMERIC(5,2) DEFAULT 90.0,\n\n    -- Tier 3: AI Enhancement (OPTIONAL - UI toggle)\n    enable_ai BOOLEAN NOT NULL DEFAULT false,  -- OFF by default\n    ai_provider VARCHAR(50),  -- \"ollama\", \"openai\", \"claude\", \"langflow\"\n    ai_operations TEXT[] DEFAULT ARRAY['category', 'specs'],  -- What to use AI for\n    ai_min_confidence NUMERIC(5,2) DEFAULT 70.0,\n    ai_cost_limit_monthly NUMERIC(10,2),  -- Monthly budget limit for paid AI\n\n    -- Tier 4: Web Scraping (OPTIONAL - UI toggle)\n    enable_web_scraping BOOLEAN NOT NULL DEFAULT false,  -- OFF by default\n    scraping_sources TEXT[] DEFAULT ARRAY['manufacturer', 'datasheet'],\n    scraping_timeout_seconds INTEGER DEFAULT 10,\n    scraping_rate_limit INTEGER DEFAULT 10,  -- Max requests per minute\n\n    -- Quality routing thresholds\n    quality_reject_threshold INTEGER DEFAULT 70,\n    quality_staging_threshold INTEGER DEFAULT 94,\n    quality_auto_approve_threshold INTEGER DEFAULT 95,\n\n    -- Processing options\n    batch_size INTEGER DEFAULT 100,\n    max_retries INTEGER DEFAULT 2,\n    enable_parallel_processing BOOLEAN DEFAULT true,\n\n    -- Cost tracking (for paid services)\n    ai_cost_current_month NUMERIC(10,2) DEFAULT 0.0,\n    ai_requests_current_month INTEGER DEFAULT 0,\n    web_scraping_requests_current_month INTEGER DEFAULT 0,\n\n    -- Metadata\n    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,\n    updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,\n    created_by UUID,\n    updated_by UUID,\n\n    UNIQUE(tenant_id, config_name)\n);\n\n-- Indexes\nCREATE INDEX idx_cns_config_tenant ON cns_enrichment_config(tenant_id);\nCREATE INDEX idx_cns_config_active ON cns_enrichment_config(is_active);\nCREATE INDEX idx_cns_config_global ON cns_enrichment_config(is_global);\n\n-- Auto-update timestamp trigger\nCREATE OR REPLACE FUNCTION update_cns_config_timestamp()\nRETURNS TRIGGER AS $$\nBEGIN\n    NEW.updated_at = CURRENT_TIMESTAMP;\n    RETURN NEW;\nEND;\n$$ LANGUAGE plpgsql;\n\nCREATE TRIGGER cns_config_updated_at\n    BEFORE UPDATE ON cns_enrichment_config\n    FOR EACH ROW\n    EXECUTE FUNCTION update_cns_config_timestamp();\n\n-- ====================================================================\n-- 2. CNS Enrichment Audit Log\n-- ====================================================================\n\nCREATE TABLE IF NOT EXISTS cns_enrichment_audit (\n    id SERIAL PRIMARY KEY,\n    tenant_id UUID REFERENCES main.tenants(id) ON DELETE CASCADE,\n    config_id INTEGER REFERENCES cns_enrichment_config(id) ON DELETE SET NULL,\n\n    -- Component info\n    mpn VARCHAR(255) NOT NULL,\n    manufacturer VARCHAR(255),\n\n    -- Enrichment results\n    success BOOLEAN NOT NULL,\n    quality_score NUMERIC(5,2),\n    routing_destination VARCHAR(50),  -- \"production\", \"staging\", \"rejected\"\n\n    -- Tiers used\n    tier_catalog_used BOOLEAN DEFAULT false,\n    tier_suppliers_used BOOLEAN DEFAULT false,\n    tier_ai_used BOOLEAN DEFAULT false,\n    tier_web_scraping_used BOOLEAN DEFAULT false,\n\n    -- AI details (if used)\n    ai_provider VARCHAR(50),\n    ai_cost_usd NUMERIC(10,6),\n    ai_tokens_used INTEGER,\n\n    -- Web scraping details (if used)\n    web_scraping_source VARCHAR(255),\n    web_scraping_duration_ms INTEGER,\n\n    -- Performance\n    processing_time_ms NUMERIC(10,2),\n    error_message TEXT,\n\n    -- Metadata\n    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP\n);\n\n-- Indexes\nCREATE INDEX idx_cns_audit_tenant ON cns_enrichment_audit(tenant_id);\nCREATE INDEX idx_cns_audit_mpn ON cns_enrichment_audit(mpn);\nCREATE INDEX idx_cns_audit_created ON cns_enrichment_audit(created_at DESC);\nCREATE INDEX idx_cns_audit_ai_used ON cns_enrichment_audit(tier_ai_used) WHERE tier_ai_used = true;\nCREATE INDEX idx_cns_audit_web_used ON cns_enrichment_audit(tier_web_scraping_used) WHERE tier_web_scraping_used = true;\n\n-- ====================================================================\n-- 3. Insert Default Global Configuration\n-- ====================================================================\n\nINSERT INTO cns_enrichment_config (\n    tenant_id,\n    config_name,\n    is_active,\n    is_global,\n    enable_suppliers,\n    preferred_suppliers,\n    enable_ai,\n    enable_web_scraping,\n    quality_reject_threshold,\n    quality_staging_threshold,\n    quality_auto_approve_threshold\n) VALUES (\n    NULL,  -- Global config (no tenant)\n    'global_default',\n    true,\n    true,\n    true,  -- Suppliers enabled by default\n    ARRAY['mouser', 'digikey', 'element14'],\n    false,  -- AI disabled by default (user must enable in UI)\n    false,  -- Web scraping disabled by default\n    70,\n    94,\n    95\n) ON CONFLICT (tenant_id, config_name) DO NOTHING;\n\n-- ====================================================================\n-- 4. CNS Cost Tracking View\n-- ====================================================================\n\nCREATE OR REPLACE VIEW cns_cost_tracking AS\nSELECT\n    DATE_TRUNC('month', created_at) AS month,\n    tenant_id,\n    COUNT(*) AS total_enrichments,\n    COUNT(*) FILTER (WHERE tier_ai_used) AS ai_enrichments,\n    COUNT(*) FILTER (WHERE tier_web_scraping_used) AS web_scraping_enrichments,\n    SUM(ai_cost_usd) AS total_ai_cost,\n    AVG(processing_time_ms) AS avg_processing_time_ms,\n    AVG(quality_score) AS avg_quality_score,\n    COUNT(*) FILTER (WHERE routing_destination = 'production') AS routed_production,\n    COUNT(*) FILTER (WHERE routing_destination = 'staging') AS routed_staging,\n    COUNT(*) FILTER (WHERE routing_destination = 'rejected') AS routed_rejected\nFROM cns_enrichment_audit\nGROUP BY DATE_TRUNC('month', created_at), tenant_id;\n\n-- ====================================================================\n-- 5. Function: Get Active Config for Tenant\n-- ====================================================================\n\nCREATE OR REPLACE FUNCTION get_active_cns_config(p_tenant_id UUID)\nRETURNS TABLE (\n    id INTEGER,\n    config_name VARCHAR(255),\n    enable_suppliers BOOLEAN,\n    enable_ai BOOLEAN,\n    enable_web_scraping BOOLEAN,\n    ai_provider VARCHAR(50),\n    ai_cost_limit_monthly NUMERIC(10,2),\n    ai_cost_current_month NUMERIC(10,2)\n) AS $$\nBEGIN\n    RETURN QUERY\n    SELECT\n        c.id,\n        c.config_name,\n        c.enable_suppliers,\n        c.enable_ai,\n        c.enable_web_scraping,\n        c.ai_provider,\n        c.ai_cost_limit_monthly,\n        c.ai_cost_current_month\n    FROM cns_enrichment_config c\n    WHERE (c.tenant_id = p_tenant_id OR (c.tenant_id IS NULL AND c.is_global = true))\n      AND c.is_active = true\n    ORDER BY c.tenant_id NULLS LAST  -- Tenant-specific config takes precedence over global\n    LIMIT 1;\nEND;\n$$ LANGUAGE plpgsql;\n\n-- ====================================================================\n-- 6. Grant Permissions\n-- ====================================================================\n\n-- Grant to ananta_app role (Control Plane application user)\n-- Note: service_role/authenticated are Supabase-specific, not available here\nDO $$\nBEGIN\n    IF EXISTS (SELECT 1 FROM pg_roles WHERE rolname = 'ananta_app') THEN\n        GRANT SELECT, INSERT, UPDATE ON cns_enrichment_config TO ananta_app;\n        GRANT SELECT, INSERT ON cns_enrichment_audit TO ananta_app;\n        GRANT SELECT ON cns_cost_tracking TO ananta_app;\n        GRANT USAGE ON SEQUENCE cns_enrichment_config_id_seq TO ananta_app;\n        GRANT USAGE ON SEQUENCE cns_enrichment_audit_id_seq TO ananta_app;\n    END IF;\nEND $$;\n\nCOMMENT ON TABLE cns_enrichment_config IS 'UI-configurable settings for CNS enrichment tiers (AI, web scraping)';\nCOMMENT ON TABLE cns_enrichment_audit IS 'Audit log of all enrichment operations with tier usage and costs';\nCOMMENT ON VIEW cns_cost_tracking IS 'Monthly cost tracking for AI and web scraping enrichment';\n"
            },
            "id": "database-system/ananta-db-migrations",
            "immutable": false,
            "metadata": [
              {
                "annotations": {},
                "generate_name": "",
                "generation": 0,
                "labels": {
                  "app.kubernetes.io/managed-by": "terraform",
                  "app.kubernetes.io/part-of": "ananta-platform",
                  "environment": "local"
                },
                "name": "ananta-db-migrations",
                "namespace": "database-system",
                "resource_version": "517582",
                "uid": "abcf3761-9984-4d36-b1d4-242d350297d3"
              }
            ]
          },
          "sensitive_attributes": [],
          "identity_schema_version": 1,
          "identity": {
            "api_version": "v1",
            "kind": "ConfigMap",
            "name": "ananta-db-migrations",
            "namespace": "database-system"
          },
          "private": "bnVsbA==",
          "dependencies": [
            "kubernetes_namespace.namespaces"
          ]
        }
      ]
    },
    {
      "mode": "managed",
      "type": "kubernetes_config_map",
      "name": "keycloak_realm",
      "provider": "provider[\"registry.terraform.io/hashicorp/kubernetes\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "binary_data": {},
            "data": {
              "ananta-saas-realm.json": "{\n  \"realm\": \"ananta-saas\",\n  \"enabled\": true,\n  \"displayName\": \"Ananta SaaS Platform\",\n  \"displayNameHtml\": \"\u003cdiv class=\\\"kc-logo-text\\\"\u003e\u003cspan\u003eAnanta SaaS\u003c/span\u003e\u003c/div\u003e\",\n  \"sslRequired\": \"external\",\n  \"registrationAllowed\": false,\n  \"loginWithEmailAllowed\": true,\n  \"duplicateEmailsAllowed\": false,\n  \"resetPasswordAllowed\": true,\n  \"editUsernameAllowed\": false,\n  \"bruteForceProtected\": true,\n  \"permanentLockout\": false,\n  \"maxFailureWaitSeconds\": 900,\n  \"minimumQuickLoginWaitSeconds\": 60,\n  \"waitIncrementSeconds\": 60,\n  \"quickLoginCheckMilliSeconds\": 1000,\n  \"maxDeltaTimeSeconds\": 43200,\n  \"failureFactor\": 5,\n  \"defaultSignatureAlgorithm\": \"RS256\",\n  \"accessTokenLifespan\": 300,\n  \"accessTokenLifespanForImplicitFlow\": 900,\n  \"ssoSessionIdleTimeout\": 1800,\n  \"ssoSessionMaxLifespan\": 36000,\n  \"offlineSessionIdleTimeout\": 2592000,\n  \"accessCodeLifespan\": 60,\n  \"accessCodeLifespanUserAction\": 300,\n  \"accessCodeLifespanLogin\": 1800,\n  \"actionTokenGeneratedByAdminLifespan\": 43200,\n  \"actionTokenGeneratedByUserLifespan\": 300,\n  \"roles\": {\n    \"realm\": [\n      {\n        \"name\": \"super_admin\",\n        \"description\": \"Platform administrator with full access\",\n        \"composite\": false,\n        \"clientRole\": false\n      },\n      {\n        \"name\": \"owner\",\n        \"description\": \"Organization owner with billing access\",\n        \"composite\": false,\n        \"clientRole\": false\n      },\n      {\n        \"name\": \"admin\",\n        \"description\": \"Organization admin for user management\",\n        \"composite\": false,\n        \"clientRole\": false\n      },\n      {\n        \"name\": \"engineer\",\n        \"description\": \"Technical user for managing BOMs and components\",\n        \"composite\": false,\n        \"clientRole\": false\n      },\n      {\n        \"name\": \"analyst\",\n        \"description\": \"Read-only user for viewing data and reports\",\n        \"composite\": false,\n        \"clientRole\": false\n      }\n    ],\n    \"client\": {\n      \"ananta-saas-admin\": [\n        {\n          \"name\": \"manage-realm\",\n          \"description\": \"Manage realm configuration\",\n          \"composite\": false,\n          \"clientRole\": true\n        }\n      ]\n    }\n  },\n  \"groups\": [\n    {\n      \"name\": \"Platform Admins\",\n      \"path\": \"/Platform Admins\",\n      \"realmRoles\": [\"super_admin\"]\n    },\n    {\n      \"name\": \"Organization Owners\",\n      \"path\": \"/Organization Owners\",\n      \"realmRoles\": [\"owner\"]\n    },\n    {\n      \"name\": \"Organization Admins\",\n      \"path\": \"/Organization Admins\",\n      \"realmRoles\": [\"admin\"]\n    },\n    {\n      \"name\": \"Engineers\",\n      \"path\": \"/Engineers\",\n      \"realmRoles\": [\"engineer\"]\n    },\n    {\n      \"name\": \"Analysts\",\n      \"path\": \"/Analysts\",\n      \"realmRoles\": [\"analyst\"]\n    }\n  ],\n  \"clients\": [\n    {\n      \"clientId\": \"ananta-saas-admin\",\n      \"name\": \"Ananta SaaS Admin Portal\",\n      \"description\": \"Admin application for platform management\",\n      \"enabled\": true,\n      \"publicClient\": true,\n      \"standardFlowEnabled\": true,\n      \"implicitFlowEnabled\": false,\n      \"directAccessGrantsEnabled\": true,\n      \"serviceAccountsEnabled\": false,\n      \"authorizationServicesEnabled\": false,\n      \"fullScopeAllowed\": true,\n      \"rootUrl\": \"http://localhost:27555\",\n      \"baseUrl\": \"/\",\n      \"adminUrl\": \"\",\n      \"redirectUris\": [\n        \"http://localhost:27555/*\",\n        \"http://localhost:14000/*\",\n        \"http://localhost:3000/*\"\n      ],\n      \"webOrigins\": [\n        \"http://localhost:27555\",\n        \"http://localhost:14000\",\n        \"http://localhost:3000\"\n      ],\n      \"defaultClientScopes\": [\n        \"web-origins\",\n        \"acr\",\n        \"profile\",\n        \"roles\",\n        \"email\"\n      ],\n      \"optionalClientScopes\": [\n        \"address\",\n        \"phone\",\n        \"offline_access\",\n        \"microprofile-jwt\"\n      ],\n      \"protocolMappers\": [\n        {\n          \"name\": \"tenant-id-mapper\",\n          \"protocol\": \"openid-connect\",\n          \"protocolMapper\": \"oidc-usermodel-attribute-mapper\",\n          \"consentRequired\": false,\n          \"config\": {\n            \"userinfo.token.claim\": \"true\",\n            \"user.attribute\": \"tenant_id\",\n            \"id.token.claim\": \"true\",\n            \"access.token.claim\": \"true\",\n            \"claim.name\": \"tenant_id\",\n            \"jsonType.label\": \"String\"\n          }\n        }\n      ]\n    },\n    {\n      \"clientId\": \"ananta-saas-api\",\n      \"name\": \"Ananta SaaS Backend API\",\n      \"description\": \"Backend API service\",\n      \"enabled\": true,\n      \"publicClient\": false,\n      \"bearerOnly\": true,\n      \"standardFlowEnabled\": false,\n      \"implicitFlowEnabled\": false,\n      \"directAccessGrantsEnabled\": false,\n      \"serviceAccountsEnabled\": false,\n      \"fullScopeAllowed\": true\n    },\n    {\n      \"clientId\": \"ananta-saas-customer-portal\",\n      \"name\": \"Customer Portal (Legacy)\",\n      \"description\": \"Customer-facing portal (legacy client ID)\",\n      \"enabled\": true,\n      \"publicClient\": true,\n      \"standardFlowEnabled\": true,\n      \"directAccessGrantsEnabled\": true,\n      \"rootUrl\": \"http://localhost:27100\",\n      \"redirectUris\": [\n        \"http://localhost:27100/*\"\n      ],\n      \"webOrigins\": [\n        \"http://localhost:27100\"\n      ],\n      \"defaultClientScopes\": [\n        \"web-origins\",\n        \"acr\",\n        \"profile\",\n        \"roles\",\n        \"email\"\n      ]\n    },\n    {\n      \"clientId\": \"cbp-frontend\",\n      \"name\": \"Customer Business Portal Frontend\",\n      \"description\": \"Customer Portal SPA (arc-saas/apps/customer-portal)\",\n      \"enabled\": true,\n      \"publicClient\": true,\n      \"standardFlowEnabled\": true,\n      \"implicitFlowEnabled\": false,\n      \"directAccessGrantsEnabled\": true,\n      \"serviceAccountsEnabled\": false,\n      \"authorizationServicesEnabled\": false,\n      \"fullScopeAllowed\": true,\n      \"rootUrl\": \"http://localhost:27100\",\n      \"baseUrl\": \"/\",\n      \"adminUrl\": \"\",\n      \"redirectUris\": [\n        \"http://localhost:27100/*\",\n        \"http://localhost:27100/authentication/callback\",\n        \"http://localhost:27100/silent-refresh.html\"\n      ],\n      \"webOrigins\": [\n        \"http://localhost:27100\",\n        \"+\"\n      ],\n      \"defaultClientScopes\": [\n        \"web-origins\",\n        \"acr\",\n        \"profile\",\n        \"roles\",\n        \"email\",\n        \"tenant\"\n      ],\n      \"optionalClientScopes\": [\n        \"address\",\n        \"phone\",\n        \"offline_access\",\n        \"microprofile-jwt\"\n      ],\n      \"protocolMappers\": [\n        {\n          \"name\": \"tenant-id-mapper\",\n          \"protocol\": \"openid-connect\",\n          \"protocolMapper\": \"oidc-usermodel-attribute-mapper\",\n          \"consentRequired\": false,\n          \"config\": {\n            \"userinfo.token.claim\": \"true\",\n            \"user.attribute\": \"tenant_id\",\n            \"id.token.claim\": \"true\",\n            \"access.token.claim\": \"true\",\n            \"claim.name\": \"tenant_id\",\n            \"jsonType.label\": \"String\"\n          }\n        },\n        {\n          \"name\": \"tenant-key-mapper\",\n          \"protocol\": \"openid-connect\",\n          \"protocolMapper\": \"oidc-usermodel-attribute-mapper\",\n          \"consentRequired\": false,\n          \"config\": {\n            \"userinfo.token.claim\": \"true\",\n            \"user.attribute\": \"tenant_key\",\n            \"id.token.claim\": \"true\",\n            \"access.token.claim\": \"true\",\n            \"claim.name\": \"tenant_key\",\n            \"jsonType.label\": \"String\"\n          }\n        },\n        {\n          \"name\": \"audience-mapper\",\n          \"protocol\": \"openid-connect\",\n          \"protocolMapper\": \"oidc-audience-mapper\",\n          \"consentRequired\": false,\n          \"config\": {\n            \"included.client.audience\": \"cbp-frontend\",\n            \"id.token.claim\": \"true\",\n            \"access.token.claim\": \"true\"\n          }\n        }\n      ]\n    },\n    {\n      \"clientId\": \"admin-app\",\n      \"name\": \"Admin App (Default)\",\n      \"description\": \"Admin application using default client ID (arc-saas/apps/admin-app)\",\n      \"enabled\": true,\n      \"publicClient\": true,\n      \"standardFlowEnabled\": true,\n      \"implicitFlowEnabled\": false,\n      \"directAccessGrantsEnabled\": true,\n      \"serviceAccountsEnabled\": false,\n      \"authorizationServicesEnabled\": false,\n      \"fullScopeAllowed\": true,\n      \"rootUrl\": \"http://localhost:27555\",\n      \"baseUrl\": \"/\",\n      \"adminUrl\": \"\",\n      \"redirectUris\": [\n        \"http://localhost:27555/*\",\n        \"http://localhost:27555/authentication/callback\",\n        \"http://localhost:14000/*\",\n        \"http://localhost:3000/*\"\n      ],\n      \"webOrigins\": [\n        \"http://localhost:27555\",\n        \"http://localhost:14000\",\n        \"http://localhost:3000\",\n        \"+\"\n      ],\n      \"defaultClientScopes\": [\n        \"web-origins\",\n        \"acr\",\n        \"profile\",\n        \"roles\",\n        \"email\",\n        \"tenant\"\n      ],\n      \"optionalClientScopes\": [\n        \"address\",\n        \"phone\",\n        \"offline_access\",\n        \"microprofile-jwt\"\n      ],\n      \"protocolMappers\": [\n        {\n          \"name\": \"tenant-id-mapper\",\n          \"protocol\": \"openid-connect\",\n          \"protocolMapper\": \"oidc-usermodel-attribute-mapper\",\n          \"consentRequired\": false,\n          \"config\": {\n            \"userinfo.token.claim\": \"true\",\n            \"user.attribute\": \"tenant_id\",\n            \"id.token.claim\": \"true\",\n            \"access.token.claim\": \"true\",\n            \"claim.name\": \"tenant_id\",\n            \"jsonType.label\": \"String\"\n          }\n        },\n        {\n          \"name\": \"tenant-key-mapper\",\n          \"protocol\": \"openid-connect\",\n          \"protocolMapper\": \"oidc-usermodel-attribute-mapper\",\n          \"consentRequired\": false,\n          \"config\": {\n            \"userinfo.token.claim\": \"true\",\n            \"user.attribute\": \"tenant_key\",\n            \"id.token.claim\": \"true\",\n            \"access.token.claim\": \"true\",\n            \"claim.name\": \"tenant_key\",\n            \"jsonType.label\": \"String\"\n          }\n        },\n        {\n          \"name\": \"audience-mapper\",\n          \"protocol\": \"openid-connect\",\n          \"protocolMapper\": \"oidc-audience-mapper\",\n          \"consentRequired\": false,\n          \"config\": {\n            \"included.client.audience\": \"admin-app\",\n            \"id.token.claim\": \"true\",\n            \"access.token.claim\": \"true\"\n          }\n        }\n      ]\n    }\n  ],\n  \"clientScopes\": [\n    {\n      \"name\": \"roles\",\n      \"description\": \"OpenID Connect scope for add user roles to the access token\",\n      \"protocol\": \"openid-connect\",\n      \"attributes\": {\n        \"include.in.token.scope\": \"true\",\n        \"display.on.consent.screen\": \"true\",\n        \"consent.screen.text\": \"${rolesScopeConsentText}\"\n      },\n      \"protocolMappers\": [\n        {\n          \"name\": \"realm roles\",\n          \"protocol\": \"openid-connect\",\n          \"protocolMapper\": \"oidc-usermodel-realm-role-mapper\",\n          \"consentRequired\": false,\n          \"config\": {\n            \"multivalued\": \"true\",\n            \"userinfo.token.claim\": \"true\",\n            \"id.token.claim\": \"true\",\n            \"access.token.claim\": \"true\",\n            \"claim.name\": \"realm_access.roles\",\n            \"jsonType.label\": \"String\"\n          }\n        },\n        {\n          \"name\": \"client roles\",\n          \"protocol\": \"openid-connect\",\n          \"protocolMapper\": \"oidc-usermodel-client-role-mapper\",\n          \"consentRequired\": false,\n          \"config\": {\n            \"multivalued\": \"true\",\n            \"userinfo.token.claim\": \"true\",\n            \"id.token.claim\": \"true\",\n            \"access.token.claim\": \"true\",\n            \"claim.name\": \"resource_access.${client_id}.roles\",\n            \"jsonType.label\": \"String\"\n          }\n        }\n      ]\n    },\n    {\n      \"name\": \"tenant\",\n      \"description\": \"Tenant context scope\",\n      \"protocol\": \"openid-connect\",\n      \"attributes\": {\n        \"include.in.token.scope\": \"true\",\n        \"display.on.consent.screen\": \"false\"\n      },\n      \"protocolMappers\": [\n        {\n          \"name\": \"tenant_id\",\n          \"protocol\": \"openid-connect\",\n          \"protocolMapper\": \"oidc-usermodel-attribute-mapper\",\n          \"consentRequired\": false,\n          \"config\": {\n            \"userinfo.token.claim\": \"true\",\n            \"user.attribute\": \"tenant_id\",\n            \"id.token.claim\": \"true\",\n            \"access.token.claim\": \"true\",\n            \"claim.name\": \"tenant_id\",\n            \"jsonType.label\": \"String\"\n          }\n        },\n        {\n          \"name\": \"tenant_key\",\n          \"protocol\": \"openid-connect\",\n          \"protocolMapper\": \"oidc-usermodel-attribute-mapper\",\n          \"consentRequired\": false,\n          \"config\": {\n            \"userinfo.token.claim\": \"true\",\n            \"user.attribute\": \"tenant_key\",\n            \"id.token.claim\": \"true\",\n            \"access.token.claim\": \"true\",\n            \"claim.name\": \"tenant_key\",\n            \"jsonType.label\": \"String\"\n          }\n        }\n      ]\n    }\n  ],\n  \"users\": [\n    {\n      \"id\": \"c0000000-0000-0000-0000-000000000001\",\n      \"username\": \"superadmin\",\n      \"email\": \"superadmin@ananta.dev\",\n      \"enabled\": true,\n      \"emailVerified\": true,\n      \"firstName\": \"Platform\",\n      \"lastName\": \"Admin\",\n      \"credentials\": [\n        {\n          \"type\": \"password\",\n          \"value\": \"Test1234!\",\n          \"temporary\": false\n        }\n      ],\n      \"realmRoles\": [\"super_admin\"],\n      \"groups\": [\"/Platform Admins\"],\n      \"attributes\": {\n        \"tenant_id\": [\"a0000000-0000-0000-0000-000000000001\"],\n        \"tenant_key\": [\"platform\"]\n      }\n    },\n    {\n      \"id\": \"c0000000-0000-0000-0000-000000000002\",\n      \"username\": \"cns-lead\",\n      \"email\": \"cns-lead@ananta.dev\",\n      \"enabled\": true,\n      \"emailVerified\": true,\n      \"firstName\": \"CNS\",\n      \"lastName\": \"Lead\",\n      \"credentials\": [\n        {\n          \"type\": \"password\",\n          \"value\": \"Test1234!\",\n          \"temporary\": false\n        }\n      ],\n      \"realmRoles\": [\"owner\"],\n      \"groups\": [\"/Organization Owners\"],\n      \"attributes\": {\n        \"tenant_id\": [\"a0000000-0000-0000-0000-000000000002\"],\n        \"tenant_key\": [\"cns-staff\"]\n      }\n    },\n    {\n      \"id\": \"c0000000-0000-0000-0000-000000000003\",\n      \"username\": \"cns-engineer\",\n      \"email\": \"cns-engineer@ananta.dev\",\n      \"enabled\": true,\n      \"emailVerified\": true,\n      \"firstName\": \"CNS\",\n      \"lastName\": \"Engineer\",\n      \"credentials\": [\n        {\n          \"type\": \"password\",\n          \"value\": \"Test1234!\",\n          \"temporary\": false\n        }\n      ],\n      \"realmRoles\": [\"engineer\"],\n      \"groups\": [\"/Engineers\"],\n      \"attributes\": {\n        \"tenant_id\": [\"a0000000-0000-0000-0000-000000000002\"],\n        \"tenant_key\": [\"cns-staff\"]\n      }\n    },\n    {\n      \"id\": \"c0000000-0000-0000-0000-000000000004\",\n      \"username\": \"demo-owner\",\n      \"email\": \"demo-owner@example.com\",\n      \"enabled\": true,\n      \"emailVerified\": true,\n      \"firstName\": \"Demo\",\n      \"lastName\": \"Owner\",\n      \"credentials\": [\n        {\n          \"type\": \"password\",\n          \"value\": \"Test1234!\",\n          \"temporary\": false\n        }\n      ],\n      \"realmRoles\": [\"owner\"],\n      \"groups\": [\"/Organization Owners\"],\n      \"attributes\": {\n        \"tenant_id\": [\"a0000000-0000-0000-0000-000000000000\"],\n        \"tenant_key\": [\"demo-org\"]\n      }\n    },\n    {\n      \"id\": \"c0000000-0000-0000-0000-000000000005\",\n      \"username\": \"demo-engineer\",\n      \"email\": \"demo-engineer@example.com\",\n      \"enabled\": true,\n      \"emailVerified\": true,\n      \"firstName\": \"Demo\",\n      \"lastName\": \"Engineer\",\n      \"credentials\": [\n        {\n          \"type\": \"password\",\n          \"value\": \"Test1234!\",\n          \"temporary\": false\n        }\n      ],\n      \"realmRoles\": [\"engineer\"],\n      \"groups\": [\"/Engineers\"],\n      \"attributes\": {\n        \"tenant_id\": [\"a0000000-0000-0000-0000-000000000000\"],\n        \"tenant_key\": [\"demo-org\"]\n      }\n    },\n    {\n      \"id\": \"c0000000-0000-0000-0000-000000000010\",\n      \"username\": \"cbpadmin\",\n      \"email\": \"cbpadmin@ananta.dev\",\n      \"enabled\": true,\n      \"emailVerified\": true,\n      \"firstName\": \"CBP\",\n      \"lastName\": \"Admin\",\n      \"credentials\": [\n        {\n          \"type\": \"password\",\n          \"value\": \"Test1234!\",\n          \"temporary\": false\n        }\n      ],\n      \"realmRoles\": [\"super_admin\"],\n      \"groups\": [\"/Platform Admins\"],\n      \"attributes\": {\n        \"tenant_id\": [\"a0000000-0000-0000-0000-000000000001\"],\n        \"tenant_key\": [\"platform\"]\n      }\n    },\n    {\n      \"id\": \"c0000000-0000-0000-0000-000000000011\",\n      \"username\": \"cnsstaff\",\n      \"email\": \"cnsstaff@ananta.dev\",\n      \"enabled\": true,\n      \"emailVerified\": true,\n      \"firstName\": \"CNS\",\n      \"lastName\": \"Staff\",\n      \"credentials\": [\n        {\n          \"type\": \"password\",\n          \"value\": \"Test1234!\",\n          \"temporary\": false\n        }\n      ],\n      \"realmRoles\": [\"engineer\"],\n      \"groups\": [\"/Engineers\"],\n      \"attributes\": {\n        \"tenant_id\": [\"a0000000-0000-0000-0000-000000000002\"],\n        \"tenant_key\": [\"cns-staff\"]\n      }\n    },\n    {\n      \"id\": \"c0000000-0000-0000-0000-000000000012\",\n      \"username\": \"backstage-admin\",\n      \"email\": \"backstage-admin@ananta.dev\",\n      \"enabled\": true,\n      \"emailVerified\": true,\n      \"firstName\": \"Backstage\",\n      \"lastName\": \"Admin\",\n      \"credentials\": [\n        {\n          \"type\": \"password\",\n          \"value\": \"Test1234!\",\n          \"temporary\": false\n        }\n      ],\n      \"realmRoles\": [\"admin\"],\n      \"groups\": [\"/Organization Admins\"],\n      \"attributes\": {\n        \"tenant_id\": [\"a0000000-0000-0000-0000-000000000001\"],\n        \"tenant_key\": [\"platform\"]\n      }\n    },\n    {\n      \"id\": \"c0000000-0000-0000-0000-000000000013\",\n      \"username\": \"demo-analyst\",\n      \"email\": \"demo-analyst@example.com\",\n      \"enabled\": true,\n      \"emailVerified\": true,\n      \"firstName\": \"Demo\",\n      \"lastName\": \"Analyst\",\n      \"credentials\": [\n        {\n          \"type\": \"password\",\n          \"value\": \"Test1234!\",\n          \"temporary\": false\n        }\n      ],\n      \"realmRoles\": [\"analyst\"],\n      \"groups\": [\"/Analysts\"],\n      \"attributes\": {\n        \"tenant_id\": [\"a0000000-0000-0000-0000-000000000000\"],\n        \"tenant_key\": [\"demo-org\"]\n      }\n    }\n  ],\n  \"identityProviders\": [],\n  \"components\": {\n    \"org.keycloak.keys.KeyProvider\": [\n      {\n        \"name\": \"rsa-generated\",\n        \"providerId\": \"rsa-generated\",\n        \"subComponents\": {},\n        \"config\": {\n          \"priority\": [\"100\"],\n          \"keySize\": [\"2048\"]\n        }\n      },\n      {\n        \"name\": \"hmac-generated\",\n        \"providerId\": \"hmac-generated\",\n        \"subComponents\": {},\n        \"config\": {\n          \"priority\": [\"100\"],\n          \"algorithm\": [\"HS256\"]\n        }\n      }\n    ]\n  },\n  \"browserSecurityHeaders\": {\n    \"contentSecurityPolicyReportOnly\": \"\",\n    \"xContentTypeOptions\": \"nosniff\",\n    \"xRobotsTag\": \"none\",\n    \"xFrameOptions\": \"SAMEORIGIN\",\n    \"contentSecurityPolicy\": \"frame-src 'self'; frame-ancestors 'self'; object-src 'none';\",\n    \"xXSSProtection\": \"1; mode=block\",\n    \"strictTransportSecurity\": \"max-age=31536000; includeSubDomains\"\n  }\n}\n\n"
            },
            "id": "auth-system/ananta-keycloak-realm",
            "immutable": false,
            "metadata": [
              {
                "annotations": {},
                "generate_name": "",
                "generation": 0,
                "labels": {
                  "app.kubernetes.io/managed-by": "terraform",
                  "app.kubernetes.io/part-of": "ananta-platform",
                  "environment": "local"
                },
                "name": "ananta-keycloak-realm",
                "namespace": "auth-system",
                "resource_version": "517581",
                "uid": "a913af9a-1c99-4bce-a7ae-cbdb821ad90b"
              }
            ]
          },
          "sensitive_attributes": [],
          "identity_schema_version": 1,
          "identity": {
            "api_version": "v1",
            "kind": "ConfigMap",
            "name": "ananta-keycloak-realm",
            "namespace": "auth-system"
          },
          "private": "bnVsbA==",
          "dependencies": [
            "kubernetes_namespace.namespaces"
          ]
        }
      ]
    },
    {
      "mode": "managed",
      "type": "kubernetes_job",
      "name": "db_migration",
      "provider": "provider[\"registry.terraform.io/hashicorp/kubernetes\"]",
      "instances": [
        {
          "schema_version": 1,
          "attributes": {
            "id": "database-system/ananta-db-migration",
            "metadata": [
              {
                "annotations": null,
                "generate_name": "",
                "generation": 0,
                "labels": {
                  "app.kubernetes.io/managed-by": "terraform",
                  "app.kubernetes.io/part-of": "ananta-platform",
                  "environment": "local"
                },
                "name": "ananta-db-migration",
                "namespace": "database-system",
                "resource_version": "",
                "uid": ""
              }
            ],
            "spec": [
              {
                "active_deadline_seconds": 0,
                "backoff_limit": 5,
                "backoff_limit_per_index": 0,
                "completion_mode": "",
                "completions": 1,
                "manual_selector": false,
                "max_failed_indexes": 0,
                "parallelism": 1,
                "pod_failure_policy": [],
                "selector": [],
                "template": [
                  {
                    "metadata": [
                      {
                        "annotations": null,
                        "generate_name": "",
                        "generation": 0,
                        "labels": {
                          "app.kubernetes.io/managed-by": "terraform",
                          "app.kubernetes.io/part-of": "ananta-platform",
                          "environment": "local"
                        },
                        "name": "",
                        "resource_version": "",
                        "uid": ""
                      }
                    ],
                    "spec": [
                      {
                        "active_deadline_seconds": 0,
                        "affinity": [],
                        "automount_service_account_token": true,
                        "container": [
                          {
                            "args": [
                              "            echo \"Waiting for PostgreSQL to be ready...\"\n            # Wait for PostgreSQL service\n            MAX_RETRIES=60\n            RETRY_COUNT=0\n            until pg_isready -h ananta-local-pg-rw.database-system.svc.cluster.local -p 5432 -U postgres 2\u003e/dev/null; do\n              RETRY_COUNT=$((RETRY_COUNT + 1))\n              if [ $RETRY_COUNT -ge $MAX_RETRIES ]; then\n                echo \"Timeout waiting for PostgreSQL after $MAX_RETRIES attempts\"\n                exit 1\n              fi\n              echo \"Attempt $RETRY_COUNT/$MAX_RETRIES: PostgreSQL not ready, waiting 5s...\"\n              sleep 5\n            done\n            echo \"PostgreSQL is ready!\"\n\n            # Create databases for other services\n            echo \"Creating databases for Keycloak and Temporal...\"\n            PGPASSWORD=$POSTGRES_PASSWORD psql -h ananta-local-pg-rw.database-system.svc.cluster.local -p 5432 -U postgres \u003c\u003cEOF\n            -- Create keycloak database and user\n            SELECT 'CREATE DATABASE keycloak' WHERE NOT EXISTS (SELECT FROM pg_database WHERE datname = 'keycloak')\\gexec\n            DO \\$\\$\n            BEGIN\n              IF NOT EXISTS (SELECT FROM pg_roles WHERE rolname = 'keycloak') THEN\n                CREATE ROLE keycloak WITH LOGIN PASSWORD '$KEYCLOAK_DB_PASSWORD';\n              END IF;\n            END\n            \\$\\$;\n            GRANT ALL PRIVILEGES ON DATABASE keycloak TO keycloak;\n\n            -- Create temporal database and user\n            SELECT 'CREATE DATABASE temporal' WHERE NOT EXISTS (SELECT FROM pg_database WHERE datname = 'temporal')\\gexec\n            DO \\$\\$\n            BEGIN\n              IF NOT EXISTS (SELECT FROM pg_roles WHERE rolname = 'temporal') THEN\n                CREATE ROLE temporal WITH LOGIN PASSWORD '$TEMPORAL_DB_PASSWORD';\n              END IF;\n            END\n            \\$\\$;\n            GRANT ALL PRIVILEGES ON DATABASE temporal TO temporal;\n\n            -- Create temporal_visibility database\n            SELECT 'CREATE DATABASE temporal_visibility' WHERE NOT EXISTS (SELECT FROM pg_database WHERE datname = 'temporal_visibility')\\gexec\n            GRANT ALL PRIVILEGES ON DATABASE temporal_visibility TO temporal;\n\n            -- Create arc_saas database for control plane\n            SELECT 'CREATE DATABASE arc_saas' WHERE NOT EXISTS (SELECT FROM pg_database WHERE datname = 'arc_saas')\\gexec\n            GRANT ALL PRIVILEGES ON DATABASE arc_saas TO ananta_app;\nEOF\n\n            echo \"Databases created successfully!\"\n\n            # Run the Arc-SaaS migration on the arc_saas database\n            echo \"Running Arc-SaaS control plane migration...\"\n            PGPASSWORD=$POSTGRES_PASSWORD psql -h ananta-local-pg-rw.database-system.svc.cluster.local -p 5432 -U postgres -d arc_saas -f /migrations/003_ARC_SAAS_MASTER.sql\n\n            echo \"Migration completed successfully!\"\n"
                            ],
                            "command": [
                              "/bin/sh",
                              "-c"
                            ],
                            "env": [
                              {
                                "name": "POSTGRES_PASSWORD",
                                "value": "",
                                "value_from": [
                                  {
                                    "config_map_key_ref": [],
                                    "field_ref": [],
                                    "resource_field_ref": [],
                                    "secret_key_ref": [
                                      {
                                        "key": "password",
                                        "name": "ananta-local-pg-superuser",
                                        "optional": false
                                      }
                                    ]
                                  }
                                ]
                              },
                              {
                                "name": "KEYCLOAK_DB_PASSWORD",
                                "value": "keycloak123",
                                "value_from": []
                              },
                              {
                                "name": "TEMPORAL_DB_PASSWORD",
                                "value": "temporal123",
                                "value_from": []
                              }
                            ],
                            "env_from": [],
                            "image": "postgres:15-alpine",
                            "image_pull_policy": "",
                            "lifecycle": [],
                            "liveness_probe": [],
                            "name": "migration",
                            "port": [],
                            "readiness_probe": [],
                            "resources": [],
                            "restart_policy": "",
                            "security_context": [],
                            "startup_probe": [],
                            "stdin": false,
                            "stdin_once": false,
                            "termination_message_path": "/dev/termination-log",
                            "termination_message_policy": "",
                            "tty": false,
                            "volume_device": [],
                            "volume_mount": [
                              {
                                "mount_path": "/migrations",
                                "mount_propagation": "None",
                                "name": "migrations",
                                "read_only": false,
                                "sub_path": "",
                                "sub_path_expr": ""
                              }
                            ],
                            "working_dir": ""
                          }
                        ],
                        "dns_config": [],
                        "dns_policy": "ClusterFirst",
                        "enable_service_links": true,
                        "host_aliases": [],
                        "host_ipc": false,
                        "host_network": false,
                        "host_pid": false,
                        "hostname": "",
                        "image_pull_secrets": [],
                        "init_container": [],
                        "node_name": "",
                        "node_selector": null,
                        "os": [],
                        "priority_class_name": "",
                        "readiness_gate": [],
                        "restart_policy": "OnFailure",
                        "runtime_class_name": "",
                        "scheduler_name": "",
                        "security_context": [],
                        "service_account_name": "",
                        "share_process_namespace": false,
                        "subdomain": "",
                        "termination_grace_period_seconds": 30,
                        "toleration": [],
                        "topology_spread_constraint": [],
                        "volume": [
                          {
                            "aws_elastic_block_store": [],
                            "azure_disk": [],
                            "azure_file": [],
                            "ceph_fs": [],
                            "cinder": [],
                            "config_map": [
                              {
                                "default_mode": "0644",
                                "items": [],
                                "name": "ananta-db-migrations",
                                "optional": false
                              }
                            ],
                            "csi": [],
                            "downward_api": [],
                            "empty_dir": [],
                            "ephemeral": [],
                            "fc": [],
                            "flex_volume": [],
                            "flocker": [],
                            "gce_persistent_disk": [],
                            "git_repo": [],
                            "glusterfs": [],
                            "host_path": [],
                            "iscsi": [],
                            "local": [],
                            "name": "migrations",
                            "nfs": [],
                            "persistent_volume_claim": [],
                            "photon_persistent_disk": [],
                            "projected": [],
                            "quobyte": [],
                            "rbd": [],
                            "secret": [],
                            "vsphere_volume": []
                          }
                        ]
                      }
                    ]
                  }
                ],
                "ttl_seconds_after_finished": "600"
              }
            ],
            "timeouts": null,
            "wait_for_completion": true
          },
          "sensitive_attributes": [],
          "identity_schema_version": 1,
          "identity": {
            "api_version": "batch/v1",
            "kind": "Job",
            "name": "ananta-db-migration",
            "namespace": "database-system"
          },
          "private": "eyJlMmJmYjczMC1lY2FhLTExZTYtOGY4OC0zNDM2M2JjN2M0YzAiOnsiY3JlYXRlIjo2MDAwMDAwMDAwMCwiZGVsZXRlIjo2MDAwMDAwMDAwMCwidXBkYXRlIjo2MDAwMDAwMDAwMH0sInNjaGVtYV92ZXJzaW9uIjoiMSJ9",
          "dependencies": [
            "kubernetes_config_map.db_migrations",
            "kubernetes_namespace.namespaces",
            "module.database.helm_release.cloudnative_pg",
            "module.database.kubernetes_namespace.database",
            "module.database.kubernetes_secret.app_user",
            "module.database.kubernetes_secret.superuser",
            "module.database.kubernetes_service.database",
            "module.database.local_file.cluster_manifest",
            "module.database.null_resource.cluster",
            "module.database.random_password.app_user",
            "module.database.random_password.superuser",
            "module.vault.helm_release.vault",
            "module.vault.kubernetes_config_map.vault_agent_config",
            "module.vault.kubernetes_job.vault_init",
            "module.vault.kubernetes_job.vault_seed"
          ]
        }
      ]
    },
    {
      "mode": "managed",
      "type": "kubernetes_namespace",
      "name": "app_plane",
      "provider": "provider[\"registry.terraform.io/hashicorp/kubernetes\"]",
      "instances": [
        {
          "index_key": 0,
          "schema_version": 0,
          "attributes": {
            "id": "app-plane",
            "metadata": [
              {
                "annotations": {},
                "generate_name": "",
                "generation": 0,
                "labels": {
                  "app.kubernetes.io/component": "app-plane",
                  "app.kubernetes.io/managed-by": "terraform",
                  "app.kubernetes.io/part-of": "ananta-platform",
                  "environment": "local"
                },
                "name": "app-plane",
                "resource_version": "88737",
                "uid": "678d87ed-e6fe-49f4-8d37-80c54fb2ff6f"
              }
            ],
            "timeouts": null,
            "wait_for_default_service_account": false
          },
          "sensitive_attributes": [],
          "identity_schema_version": 1,
          "identity": {
            "api_version": "v1",
            "kind": "Namespace",
            "name": "app-plane"
          },
          "private": "eyJlMmJmYjczMC1lY2FhLTExZTYtOGY4OC0zNDM2M2JjN2M0YzAiOnsiZGVsZXRlIjozMDAwMDAwMDAwMDB9fQ=="
        }
      ]
    },
    {
      "mode": "managed",
      "type": "kubernetes_namespace",
      "name": "namespaces",
      "provider": "provider[\"registry.terraform.io/hashicorp/kubernetes\"]",
      "instances": [
        {
          "index_key": "auth",
          "schema_version": 0,
          "attributes": {
            "id": "auth-system",
            "metadata": [
              {
                "annotations": {},
                "generate_name": "",
                "generation": 0,
                "labels": {
                  "app.kubernetes.io/component": "auth",
                  "app.kubernetes.io/managed-by": "terraform",
                  "app.kubernetes.io/part-of": "ananta-platform",
                  "environment": "local"
                },
                "name": "auth-system",
                "resource_version": "21388",
                "uid": "c739b208-b517-4ffc-98fe-8e8f56f67c9e"
              }
            ],
            "timeouts": null,
            "wait_for_default_service_account": false
          },
          "sensitive_attributes": [],
          "identity_schema_version": 1,
          "identity": {
            "api_version": "v1",
            "kind": "Namespace",
            "name": "auth-system"
          },
          "private": "eyJlMmJmYjczMC1lY2FhLTExZTYtOGY4OC0zNDM2M2JjN2M0YzAiOnsiZGVsZXRlIjozMDAwMDAwMDAwMDB9fQ=="
        },
        {
          "index_key": "cache",
          "schema_version": 0,
          "attributes": {
            "id": "cache-system",
            "metadata": [
              {
                "annotations": {},
                "generate_name": "",
                "generation": 0,
                "labels": {
                  "app.kubernetes.io/component": "cache",
                  "app.kubernetes.io/managed-by": "terraform",
                  "app.kubernetes.io/part-of": "ananta-platform",
                  "environment": "local"
                },
                "name": "cache-system",
                "resource_version": "21390",
                "uid": "d36d38e4-9829-4f92-a92f-fafe8165357d"
              }
            ],
            "timeouts": null,
            "wait_for_default_service_account": false
          },
          "sensitive_attributes": [],
          "identity_schema_version": 1,
          "identity": {
            "api_version": "v1",
            "kind": "Namespace",
            "name": "cache-system"
          },
          "private": "eyJlMmJmYjczMC1lY2FhLTExZTYtOGY4OC0zNDM2M2JjN2M0YzAiOnsiZGVsZXRlIjozMDAwMDAwMDAwMDB9fQ=="
        },
        {
          "index_key": "control_plane",
          "schema_version": 0,
          "attributes": {
            "id": "control-plane",
            "metadata": [
              {
                "annotations": {},
                "generate_name": "",
                "generation": 0,
                "labels": {
                  "app.kubernetes.io/component": "control_plane",
                  "app.kubernetes.io/managed-by": "terraform",
                  "app.kubernetes.io/part-of": "ananta-platform",
                  "environment": "local"
                },
                "name": "control-plane",
                "resource_version": "21389",
                "uid": "b7b92070-f299-4b74-82d6-45f4342ae4f3"
              }
            ],
            "timeouts": null,
            "wait_for_default_service_account": false
          },
          "sensitive_attributes": [],
          "identity_schema_version": 1,
          "identity": {
            "api_version": "v1",
            "kind": "Namespace",
            "name": "control-plane"
          },
          "private": "eyJlMmJmYjczMC1lY2FhLTExZTYtOGY4OC0zNDM2M2JjN2M0YzAiOnsiZGVsZXRlIjozMDAwMDAwMDAwMDB9fQ=="
        },
        {
          "index_key": "database",
          "schema_version": 0,
          "attributes": {
            "id": "database-system",
            "metadata": [
              {
                "annotations": {},
                "generate_name": "",
                "generation": 0,
                "labels": {
                  "app.kubernetes.io/component": "database",
                  "app.kubernetes.io/managed-by": "terraform",
                  "app.kubernetes.io/part-of": "ananta-platform",
                  "environment": "local"
                },
                "name": "database-system",
                "resource_version": "21391",
                "uid": "6ace28e7-0a90-4f28-889b-01f412068983"
              }
            ],
            "timeouts": null,
            "wait_for_default_service_account": false
          },
          "sensitive_attributes": [],
          "identity_schema_version": 1,
          "identity": {
            "api_version": "v1",
            "kind": "Namespace",
            "name": "database-system"
          },
          "private": "eyJlMmJmYjczMC1lY2FhLTExZTYtOGY4OC0zNDM2M2JjN2M0YzAiOnsiZGVsZXRlIjozMDAwMDAwMDAwMDB9fQ=="
        },
        {
          "index_key": "monitoring",
          "schema_version": 0,
          "attributes": {
            "id": "monitoring-system",
            "metadata": [
              {
                "annotations": {},
                "generate_name": "",
                "generation": 0,
                "labels": {
                  "app.kubernetes.io/component": "monitoring",
                  "app.kubernetes.io/managed-by": "terraform",
                  "app.kubernetes.io/part-of": "ananta-platform",
                  "environment": "local"
                },
                "name": "monitoring-system",
                "resource_version": "21006",
                "uid": "e98be668-ad9d-4f88-a652-b4c9d49ec251"
              }
            ],
            "timeouts": null,
            "wait_for_default_service_account": false
          },
          "sensitive_attributes": [],
          "identity_schema_version": 1,
          "identity": {
            "api_version": "v1",
            "kind": "Namespace",
            "name": "monitoring-system"
          },
          "private": "eyJlMmJmYjczMC1lY2FhLTExZTYtOGY4OC0zNDM2M2JjN2M0YzAiOnsiZGVsZXRlIjozMDAwMDAwMDAwMDB9fQ=="
        },
        {
          "index_key": "temporal",
          "schema_version": 0,
          "attributes": {
            "id": "temporal-system",
            "metadata": [
              {
                "annotations": {},
                "generate_name": "",
                "generation": 0,
                "labels": {
                  "app.kubernetes.io/component": "temporal",
                  "app.kubernetes.io/managed-by": "terraform",
                  "app.kubernetes.io/part-of": "ananta-platform",
                  "environment": "local"
                },
                "name": "temporal-system",
                "resource_version": "21392",
                "uid": "e8ca14c3-2af1-4866-9699-6dc8d0f3c8f1"
              }
            ],
            "timeouts": null,
            "wait_for_default_service_account": false
          },
          "sensitive_attributes": [],
          "identity_schema_version": 1,
          "identity": {
            "api_version": "v1",
            "kind": "Namespace",
            "name": "temporal-system"
          },
          "private": "eyJlMmJmYjczMC1lY2FhLTExZTYtOGY4OC0zNDM2M2JjN2M0YzAiOnsiZGVsZXRlIjozMDAwMDAwMDAwMDB9fQ=="
        },
        {
          "index_key": "vault",
          "schema_version": 0,
          "attributes": {
            "id": "vault-system",
            "metadata": [
              {
                "annotations": {},
                "generate_name": "",
                "generation": 0,
                "labels": {
                  "app.kubernetes.io/component": "vault",
                  "app.kubernetes.io/managed-by": "terraform",
                  "app.kubernetes.io/part-of": "ananta-platform",
                  "environment": "local"
                },
                "name": "vault-system",
                "resource_version": "21005",
                "uid": "d9e6d660-b5c5-4a9e-8cd5-a15e853119f1"
              }
            ],
            "timeouts": null,
            "wait_for_default_service_account": false
          },
          "sensitive_attributes": [],
          "identity_schema_version": 1,
          "identity": {
            "api_version": "v1",
            "kind": "Namespace",
            "name": "vault-system"
          },
          "private": "eyJlMmJmYjczMC1lY2FhLTExZTYtOGY4OC0zNDM2M2JjN2M0YzAiOnsiZGVsZXRlIjozMDAwMDAwMDAwMDB9fQ=="
        }
      ]
    },
    {
      "module": "module.app_plane[0]",
      "mode": "managed",
      "type": "kubernetes_config_map",
      "name": "cns_service",
      "provider": "provider[\"registry.terraform.io/hashicorp/kubernetes\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "binary_data": {},
            "data": {
              "ARROW_ENABLED": "true",
              "AUTH0_AUDIENCE": "cbp-frontend",
              "AUTH0_DOMAIN": "keycloak.auth-system.svc.cluster.local:8080/realms/ananta-saas",
              "AUTH0_ENABLED": "true",
              "COMPONENTS_DB_HOST": "components-db",
              "COMPONENTS_DB_NAME": "components_v2",
              "COMPONENTS_DB_PORT": "5432",
              "COMPONENTS_DB_USER": "postgres",
              "COMPONENTS_V2_DATABASE_URL": "postgresql://postgres:postgres@components-db.app-plane.svc.cluster.local:5432/components_v2",
              "DATABASE_URL": "postgresql://postgres:postgres@supabase-db.app-plane.svc.cluster.local:5432/postgres",
              "DIGIKEY_ENABLED": "true",
              "ELEMENT14_ENABLED": "true",
              "LOG_LEVEL": "INFO",
              "MINIO_ENDPOINT": "minio:9000",
              "MINIO_USE_SSL": "false",
              "MOUSER_ENABLED": "true",
              "RABBITMQ_HOST": "rabbitmq",
              "RABBITMQ_PORT": "5672",
              "REDIS_HOST": "redis",
              "REDIS_PORT": "6379",
              "SUPABASE_DB_HOST": "supabase-db",
              "SUPABASE_DB_NAME": "postgres",
              "SUPABASE_DB_PORT": "5432",
              "SUPABASE_DB_USER": "postgres",
              "SUPABASE_URL": "http://supabase-api:3000",
              "TEMPORAL_ADDRESS": "temporal.temporal-system.svc.cluster.local:7233",
              "TEMPORAL_NAMESPACE": "enrichment"
            },
            "id": "app-plane/ananta-cns-service-config",
            "immutable": false,
            "metadata": [
              {
                "annotations": {},
                "generate_name": "",
                "generation": 0,
                "labels": {
                  "app.kubernetes.io/managed-by": "terraform",
                  "app.kubernetes.io/part-of": "ananta-app-plane",
                  "environment": "local"
                },
                "name": "ananta-cns-service-config",
                "namespace": "app-plane",
                "resource_version": "668955",
                "uid": "c03a69d7-ac71-4830-9e1e-95eb28804f1a"
              }
            ]
          },
          "sensitive_attributes": [
            [
              {
                "type": "get_attr",
                "value": "data"
              },
              {
                "type": "index",
                "value": {
                  "value": "COMPONENTS_V2_DATABASE_URL",
                  "type": "string"
                }
              }
            ],
            [
              {
                "type": "get_attr",
                "value": "data"
              },
              {
                "type": "index",
                "value": {
                  "value": "DATABASE_URL",
                  "type": "string"
                }
              }
            ]
          ],
          "identity_schema_version": 1,
          "identity": {
            "api_version": "v1",
            "kind": "ConfigMap",
            "name": "ananta-cns-service-config",
            "namespace": "app-plane"
          },
          "private": "bnVsbA==",
          "dependencies": [
            "kubernetes_config_map.db_migrations",
            "kubernetes_job.db_migration",
            "kubernetes_namespace.app_plane",
            "kubernetes_namespace.namespaces",
            "module.cache.helm_release.redis_operator",
            "module.cache.kubernetes_manifest.prometheus_rules",
            "module.cache.kubernetes_manifest.redis_failover",
            "module.cache.kubernetes_manifest.service_monitor",
            "module.cache.kubernetes_namespace.redis",
            "module.cache.kubernetes_secret.redis_auth",
            "module.cache.kubernetes_service.redis",
            "module.cache.kubernetes_stateful_set.redis_standalone",
            "module.cache.random_password.redis_password",
            "module.database.helm_release.cloudnative_pg",
            "module.database.kubernetes_namespace.database",
            "module.database.kubernetes_secret.app_user",
            "module.database.kubernetes_secret.superuser",
            "module.database.kubernetes_service.database",
            "module.database.local_file.cluster_manifest",
            "module.database.null_resource.cluster",
            "module.database.random_password.app_user",
            "module.database.random_password.superuser",
            "module.temporal.kubernetes_config_map.temporal",
            "module.temporal.kubernetes_deployment.temporal",
            "module.temporal.kubernetes_deployment.temporal_ui",
            "module.temporal.kubernetes_job.create_namespaces",
            "module.temporal.kubernetes_secret.temporal",
            "module.temporal.kubernetes_service.temporal",
            "module.temporal.kubernetes_service.temporal_ui",
            "module.temporal.kubernetes_service_account.temporal",
            "module.vault.helm_release.vault",
            "module.vault.kubernetes_config_map.vault_agent_config",
            "module.vault.kubernetes_job.vault_init",
            "module.vault.kubernetes_job.vault_seed"
          ]
        }
      ]
    },
    {
      "module": "module.app_plane[0]",
      "mode": "managed",
      "type": "kubernetes_config_map",
      "name": "grafana_datasources",
      "provider": "provider[\"registry.terraform.io/hashicorp/kubernetes\"]",
      "instances": []
    },
    {
      "module": "module.app_plane[0]",
      "mode": "managed",
      "type": "kubernetes_config_map",
      "name": "prometheus",
      "provider": "provider[\"registry.terraform.io/hashicorp/kubernetes\"]",
      "instances": []
    },
    {
      "module": "module.app_plane[0]",
      "mode": "managed",
      "type": "kubernetes_config_map",
      "name": "supabase_init",
      "provider": "provider[\"registry.terraform.io/hashicorp/kubernetes\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "binary_data": {},
            "data": {
              "01-init-extensions.sql": "-- =============================================================================\n-- Supabase Required Roles and Extensions\n-- =============================================================================\n-- The supabase/postgres image requires these roles to exist before migrations\n-- can run. This script creates them idempotently.\n\n-- Enable required extensions for Supabase\nCREATE EXTENSION IF NOT EXISTS \"uuid-ossp\";\nCREATE EXTENSION IF NOT EXISTS \"pgcrypto\";\nCREATE EXTENSION IF NOT EXISTS \"pg_stat_statements\";\nCREATE EXTENSION IF NOT EXISTS \"pgjwt\" SCHEMA extensions;\n\n-- Create supabase_admin role (superuser for migrations)\nDO $$\nBEGIN\n  IF NOT EXISTS (SELECT FROM pg_roles WHERE rolname = 'supabase_admin') THEN\n    CREATE ROLE supabase_admin WITH LOGIN SUPERUSER PASSWORD 'postgres';\n  END IF;\nEND\n$$;\n\n-- Create authenticator role (PostgREST connection role)\nDO $$\nBEGIN\n  IF NOT EXISTS (SELECT FROM pg_roles WHERE rolname = 'authenticator') THEN\n    CREATE ROLE authenticator WITH LOGIN NOINHERIT PASSWORD 'postgres';\n  END IF;\nEND\n$$;\n\n-- Create anon role (anonymous/public access)\nDO $$\nBEGIN\n  IF NOT EXISTS (SELECT FROM pg_roles WHERE rolname = 'anon') THEN\n    CREATE ROLE anon NOLOGIN NOINHERIT;\n  END IF;\nEND\n$$;\n\n-- Create authenticated role (logged-in users)\nDO $$\nBEGIN\n  IF NOT EXISTS (SELECT FROM pg_roles WHERE rolname = 'authenticated') THEN\n    CREATE ROLE authenticated NOLOGIN NOINHERIT;\n  END IF;\nEND\n$$;\n\n-- Create service_role (backend services with elevated privileges)\nDO $$\nBEGIN\n  IF NOT EXISTS (SELECT FROM pg_roles WHERE rolname = 'service_role') THEN\n    CREATE ROLE service_role WITH LOGIN BYPASSRLS PASSWORD 'postgres';\n  END IF;\nEND\n$$;\n\n-- Grant role hierarchy\nGRANT anon TO authenticator;\nGRANT authenticated TO authenticator;\nGRANT service_role TO authenticator;\n\n-- Create required schemas\nCREATE SCHEMA IF NOT EXISTS extensions;\nCREATE SCHEMA IF NOT EXISTS auth;\nCREATE SCHEMA IF NOT EXISTS storage;\nCREATE SCHEMA IF NOT EXISTS realtime;\n\n-- Grant schema access\nGRANT USAGE ON SCHEMA public TO anon, authenticated, service_role;\nGRANT USAGE ON SCHEMA extensions TO anon, authenticated, service_role;\nGRANT USAGE ON SCHEMA auth TO service_role;\nGRANT USAGE ON SCHEMA storage TO service_role;\n\n-- Create directus database (optional)\nSELECT 'CREATE DATABASE directus' WHERE NOT EXISTS (SELECT FROM pg_database WHERE datname = 'directus')\\gexec\n"
            },
            "id": "app-plane/ananta-supabase-init",
            "immutable": false,
            "metadata": [
              {
                "annotations": {},
                "generate_name": "",
                "generation": 0,
                "labels": {
                  "app.kubernetes.io/managed-by": "terraform",
                  "app.kubernetes.io/part-of": "ananta-app-plane",
                  "environment": "local"
                },
                "name": "ananta-supabase-init",
                "namespace": "app-plane",
                "resource_version": "517744",
                "uid": "125ce1f0-c9d2-4ddd-bf58-ff8652d41eaa"
              }
            ]
          },
          "sensitive_attributes": [],
          "identity_schema_version": 1,
          "identity": {
            "api_version": "v1",
            "kind": "ConfigMap",
            "name": "ananta-supabase-init",
            "namespace": "app-plane"
          },
          "private": "bnVsbA==",
          "dependencies": [
            "kubernetes_config_map.db_migrations",
            "kubernetes_job.db_migration",
            "kubernetes_namespace.app_plane",
            "kubernetes_namespace.namespaces",
            "module.cache.helm_release.redis_operator",
            "module.cache.kubernetes_manifest.prometheus_rules",
            "module.cache.kubernetes_manifest.redis_failover",
            "module.cache.kubernetes_manifest.service_monitor",
            "module.cache.kubernetes_namespace.redis",
            "module.cache.kubernetes_secret.redis_auth",
            "module.cache.kubernetes_service.redis",
            "module.cache.kubernetes_stateful_set.redis_standalone",
            "module.cache.random_password.redis_password",
            "module.database.helm_release.cloudnative_pg",
            "module.database.kubernetes_namespace.database",
            "module.database.kubernetes_secret.app_user",
            "module.database.kubernetes_secret.superuser",
            "module.database.kubernetes_service.database",
            "module.database.local_file.cluster_manifest",
            "module.database.null_resource.cluster",
            "module.database.random_password.app_user",
            "module.database.random_password.superuser",
            "module.temporal.kubernetes_config_map.temporal",
            "module.temporal.kubernetes_deployment.temporal",
            "module.temporal.kubernetes_deployment.temporal_ui",
            "module.temporal.kubernetes_job.create_namespaces",
            "module.temporal.kubernetes_secret.temporal",
            "module.temporal.kubernetes_service.temporal",
            "module.temporal.kubernetes_service.temporal_ui",
            "module.temporal.kubernetes_service_account.temporal",
            "module.vault.helm_release.vault",
            "module.vault.kubernetes_config_map.vault_agent_config",
            "module.vault.kubernetes_job.vault_init",
            "module.vault.kubernetes_job.vault_seed"
          ]
        }
      ]
    },
    {
      "module": "module.app_plane[0]",
      "mode": "managed",
      "type": "kubernetes_deployment",
      "name": "customer_portal",
      "provider": "provider[\"registry.terraform.io/hashicorp/kubernetes\"]",
      "instances": [
        {
          "index_key": 0,
          "schema_version": 1,
          "attributes": {
            "id": "app-plane/customer-portal",
            "metadata": [
              {
                "annotations": {},
                "generate_name": "",
                "generation": 1,
                "labels": {
                  "app.kubernetes.io/component": "frontend",
                  "app.kubernetes.io/managed-by": "terraform",
                  "app.kubernetes.io/name": "customer-portal",
                  "app.kubernetes.io/part-of": "ananta-app-plane",
                  "environment": "local"
                },
                "name": "customer-portal",
                "namespace": "app-plane",
                "resource_version": "664174",
                "uid": "ddfbe0f3-943c-440d-8914-e94e3a128504"
              }
            ],
            "spec": [
              {
                "min_ready_seconds": 0,
                "paused": false,
                "progress_deadline_seconds": 600,
                "replicas": "1",
                "revision_history_limit": 10,
                "selector": [
                  {
                    "match_expressions": [],
                    "match_labels": {
                      "app.kubernetes.io/name": "customer-portal"
                    }
                  }
                ],
                "strategy": [
                  {
                    "rolling_update": [
                      {
                        "max_surge": "25%",
                        "max_unavailable": "25%"
                      }
                    ],
                    "type": "RollingUpdate"
                  }
                ],
                "template": [
                  {
                    "metadata": [
                      {
                        "annotations": {},
                        "generate_name": "",
                        "generation": 0,
                        "labels": {
                          "app.kubernetes.io/component": "frontend",
                          "app.kubernetes.io/managed-by": "terraform",
                          "app.kubernetes.io/name": "customer-portal",
                          "app.kubernetes.io/part-of": "ananta-app-plane",
                          "environment": "local"
                        },
                        "name": "",
                        "namespace": "",
                        "resource_version": "",
                        "uid": ""
                      }
                    ],
                    "spec": [
                      {
                        "active_deadline_seconds": 0,
                        "affinity": [],
                        "automount_service_account_token": true,
                        "container": [
                          {
                            "args": [],
                            "command": [],
                            "env": [],
                            "env_from": [],
                            "image": "ananta/customer-portal:local",
                            "image_pull_policy": "IfNotPresent",
                            "lifecycle": [],
                            "liveness_probe": [],
                            "name": "customer-portal",
                            "port": [
                              {
                                "container_port": 80,
                                "host_ip": "",
                                "host_port": 0,
                                "name": "http",
                                "protocol": "TCP"
                              }
                            ],
                            "readiness_probe": [
                              {
                                "exec": [],
                                "failure_threshold": 3,
                                "grpc": [],
                                "http_get": [
                                  {
                                    "host": "",
                                    "http_header": [],
                                    "path": "/",
                                    "port": "80",
                                    "scheme": "HTTP"
                                  }
                                ],
                                "initial_delay_seconds": 5,
                                "period_seconds": 10,
                                "success_threshold": 1,
                                "tcp_socket": [],
                                "timeout_seconds": 1
                              }
                            ],
                            "resources": [
                              {
                                "limits": {
                                  "cpu": "100m",
                                  "memory": "128Mi"
                                },
                                "requests": {
                                  "cpu": "100m",
                                  "memory": "128Mi"
                                }
                              }
                            ],
                            "restart_policy": "",
                            "security_context": [],
                            "startup_probe": [],
                            "stdin": false,
                            "stdin_once": false,
                            "termination_message_path": "/dev/termination-log",
                            "termination_message_policy": "File",
                            "tty": false,
                            "volume_device": [],
                            "volume_mount": [],
                            "working_dir": ""
                          }
                        ],
                        "dns_config": [],
                        "dns_policy": "ClusterFirst",
                        "enable_service_links": true,
                        "host_aliases": [],
                        "host_ipc": false,
                        "host_network": false,
                        "host_pid": false,
                        "hostname": "",
                        "image_pull_secrets": [],
                        "init_container": [],
                        "node_name": "",
                        "node_selector": {},
                        "os": [],
                        "priority_class_name": "",
                        "readiness_gate": [],
                        "restart_policy": "Always",
                        "runtime_class_name": "",
                        "scheduler_name": "default-scheduler",
                        "security_context": [],
                        "service_account_name": "",
                        "share_process_namespace": false,
                        "subdomain": "",
                        "termination_grace_period_seconds": 30,
                        "toleration": [],
                        "topology_spread_constraint": [],
                        "volume": []
                      }
                    ]
                  }
                ]
              }
            ],
            "timeouts": null,
            "wait_for_rollout": true
          },
          "sensitive_attributes": [],
          "identity_schema_version": 1,
          "identity": {
            "api_version": "apps/v1",
            "kind": "Deployment",
            "name": "customer-portal",
            "namespace": "app-plane"
          },
          "private": "eyJlMmJmYjczMC1lY2FhLTExZTYtOGY4OC0zNDM2M2JjN2M0YzAiOnsiY3JlYXRlIjo2MDAwMDAwMDAwMDAsImRlbGV0ZSI6NjAwMDAwMDAwMDAwLCJ1cGRhdGUiOjYwMDAwMDAwMDAwMH0sInNjaGVtYV92ZXJzaW9uIjoiMSJ9",
          "dependencies": [
            "kubernetes_config_map.db_migrations",
            "kubernetes_job.db_migration",
            "kubernetes_namespace.app_plane",
            "kubernetes_namespace.namespaces",
            "module.cache.helm_release.redis_operator",
            "module.cache.kubernetes_manifest.prometheus_rules",
            "module.cache.kubernetes_manifest.redis_failover",
            "module.cache.kubernetes_manifest.service_monitor",
            "module.cache.kubernetes_namespace.redis",
            "module.cache.kubernetes_secret.redis_auth",
            "module.cache.kubernetes_service.redis",
            "module.cache.kubernetes_stateful_set.redis_standalone",
            "module.cache.random_password.redis_password",
            "module.database.helm_release.cloudnative_pg",
            "module.database.kubernetes_namespace.database",
            "module.database.kubernetes_secret.app_user",
            "module.database.kubernetes_secret.superuser",
            "module.database.kubernetes_service.database",
            "module.database.local_file.cluster_manifest",
            "module.database.null_resource.cluster",
            "module.database.random_password.app_user",
            "module.database.random_password.superuser",
            "module.temporal.kubernetes_config_map.temporal",
            "module.temporal.kubernetes_deployment.temporal",
            "module.temporal.kubernetes_deployment.temporal_ui",
            "module.temporal.kubernetes_job.create_namespaces",
            "module.temporal.kubernetes_secret.temporal",
            "module.temporal.kubernetes_service.temporal",
            "module.temporal.kubernetes_service.temporal_ui",
            "module.temporal.kubernetes_service_account.temporal",
            "module.vault.helm_release.vault",
            "module.vault.kubernetes_config_map.vault_agent_config",
            "module.vault.kubernetes_job.vault_init",
            "module.vault.kubernetes_job.vault_seed"
          ]
        }
      ]
    },
    {
      "module": "module.app_plane[0]",
      "mode": "managed",
      "type": "kubernetes_deployment",
      "name": "grafana",
      "provider": "provider[\"registry.terraform.io/hashicorp/kubernetes\"]",
      "instances": []
    },
    {
      "module": "module.app_plane[0]",
      "mode": "managed",
      "type": "kubernetes_deployment",
      "name": "jaeger",
      "provider": "provider[\"registry.terraform.io/hashicorp/kubernetes\"]",
      "instances": []
    },
    {
      "module": "module.app_plane[0]",
      "mode": "managed",
      "type": "kubernetes_deployment",
      "name": "novu_api",
      "provider": "provider[\"registry.terraform.io/hashicorp/kubernetes\"]",
      "instances": []
    },
    {
      "module": "module.app_plane[0]",
      "mode": "managed",
      "type": "kubernetes_deployment",
      "name": "novu_redis",
      "provider": "provider[\"registry.terraform.io/hashicorp/kubernetes\"]",
      "instances": []
    },
    {
      "module": "module.app_plane[0]",
      "mode": "managed",
      "type": "kubernetes_deployment",
      "name": "novu_web",
      "provider": "provider[\"registry.terraform.io/hashicorp/kubernetes\"]",
      "instances": []
    },
    {
      "module": "module.app_plane[0]",
      "mode": "managed",
      "type": "kubernetes_deployment",
      "name": "novu_worker",
      "provider": "provider[\"registry.terraform.io/hashicorp/kubernetes\"]",
      "instances": []
    },
    {
      "module": "module.app_plane[0]",
      "mode": "managed",
      "type": "kubernetes_deployment",
      "name": "novu_ws",
      "provider": "provider[\"registry.terraform.io/hashicorp/kubernetes\"]",
      "instances": []
    },
    {
      "module": "module.app_plane[0]",
      "mode": "managed",
      "type": "kubernetes_deployment",
      "name": "prometheus",
      "provider": "provider[\"registry.terraform.io/hashicorp/kubernetes\"]",
      "instances": []
    },
    {
      "module": "module.app_plane[0]",
      "mode": "managed",
      "type": "kubernetes_deployment",
      "name": "supabase_api",
      "provider": "provider[\"registry.terraform.io/hashicorp/kubernetes\"]",
      "instances": [
        {
          "status": "tainted",
          "schema_version": 1,
          "attributes": {
            "id": "app-plane/supabase-api",
            "metadata": [
              {
                "annotations": null,
                "generate_name": "",
                "generation": 0,
                "labels": {
                  "app.kubernetes.io/component": "api",
                  "app.kubernetes.io/managed-by": "terraform",
                  "app.kubernetes.io/name": "supabase-api",
                  "app.kubernetes.io/part-of": "ananta-app-plane",
                  "environment": "local"
                },
                "name": "supabase-api",
                "namespace": "app-plane",
                "resource_version": "",
                "uid": ""
              }
            ],
            "spec": [
              {
                "min_ready_seconds": 0,
                "paused": false,
                "progress_deadline_seconds": 600,
                "replicas": "1",
                "revision_history_limit": 10,
                "selector": [
                  {
                    "match_expressions": [],
                    "match_labels": {
                      "app.kubernetes.io/name": "supabase-api"
                    }
                  }
                ],
                "strategy": [],
                "template": [
                  {
                    "metadata": [
                      {
                        "annotations": null,
                        "generate_name": "",
                        "generation": 0,
                        "labels": {
                          "app.kubernetes.io/component": "api",
                          "app.kubernetes.io/managed-by": "terraform",
                          "app.kubernetes.io/name": "supabase-api",
                          "app.kubernetes.io/part-of": "ananta-app-plane",
                          "environment": "local"
                        },
                        "name": "",
                        "namespace": "",
                        "resource_version": "",
                        "uid": ""
                      }
                    ],
                    "spec": [
                      {
                        "active_deadline_seconds": 0,
                        "affinity": [],
                        "automount_service_account_token": true,
                        "container": [
                          {
                            "args": null,
                            "command": null,
                            "env": [
                              {
                                "name": "PGRST_DB_URI",
                                "value": "postgres://postgres:postgres@supabase-db:5432/postgres",
                                "value_from": []
                              },
                              {
                                "name": "PGRST_DB_SCHEMA",
                                "value": "public",
                                "value_from": []
                              },
                              {
                                "name": "PGRST_DB_ANON_ROLE",
                                "value": "anon",
                                "value_from": []
                              },
                              {
                                "name": "PGRST_JWT_SECRET",
                                "value": "your-super-secret-jwt-token-with-at-least-32-characters-long",
                                "value_from": []
                              }
                            ],
                            "env_from": [],
                            "image": "postgrest/postgrest:v11.2.2",
                            "image_pull_policy": "",
                            "lifecycle": [],
                            "liveness_probe": [
                              {
                                "exec": [],
                                "failure_threshold": 3,
                                "grpc": [],
                                "http_get": [
                                  {
                                    "host": "",
                                    "http_header": [],
                                    "path": "/",
                                    "port": "3000",
                                    "scheme": "HTTP"
                                  }
                                ],
                                "initial_delay_seconds": 10,
                                "period_seconds": 30,
                                "success_threshold": 1,
                                "tcp_socket": [],
                                "timeout_seconds": 5
                              }
                            ],
                            "name": "supabase-api",
                            "port": [
                              {
                                "container_port": 3000,
                                "host_ip": "",
                                "host_port": 0,
                                "name": "http",
                                "protocol": "TCP"
                              }
                            ],
                            "readiness_probe": [
                              {
                                "exec": [],
                                "failure_threshold": 3,
                                "grpc": [],
                                "http_get": [
                                  {
                                    "host": "",
                                    "http_header": [],
                                    "path": "/",
                                    "port": "3000",
                                    "scheme": "HTTP"
                                  }
                                ],
                                "initial_delay_seconds": 5,
                                "period_seconds": 10,
                                "success_threshold": 1,
                                "tcp_socket": [],
                                "timeout_seconds": 5
                              }
                            ],
                            "resources": [
                              {
                                "limits": {
                                  "cpu": "250m",
                                  "memory": "256Mi"
                                },
                                "requests": {
                                  "cpu": "100m",
                                  "memory": "128Mi"
                                }
                              }
                            ],
                            "restart_policy": "",
                            "security_context": [],
                            "startup_probe": [
                              {
                                "exec": [],
                                "failure_threshold": 24,
                                "grpc": [],
                                "http_get": [
                                  {
                                    "host": "",
                                    "http_header": [],
                                    "path": "/",
                                    "port": "3000",
                                    "scheme": "HTTP"
                                  }
                                ],
                                "initial_delay_seconds": 5,
                                "period_seconds": 5,
                                "success_threshold": 1,
                                "tcp_socket": [],
                                "timeout_seconds": 5
                              }
                            ],
                            "stdin": false,
                            "stdin_once": false,
                            "termination_message_path": "/dev/termination-log",
                            "termination_message_policy": "",
                            "tty": false,
                            "volume_device": [],
                            "volume_mount": [],
                            "working_dir": ""
                          }
                        ],
                        "dns_config": [],
                        "dns_policy": "ClusterFirst",
                        "enable_service_links": true,
                        "host_aliases": [],
                        "host_ipc": false,
                        "host_network": false,
                        "host_pid": false,
                        "hostname": "",
                        "image_pull_secrets": [],
                        "init_container": [],
                        "node_name": "",
                        "node_selector": null,
                        "os": [],
                        "priority_class_name": "",
                        "readiness_gate": [],
                        "restart_policy": "Always",
                        "runtime_class_name": "",
                        "scheduler_name": "",
                        "security_context": [],
                        "service_account_name": "",
                        "share_process_namespace": false,
                        "subdomain": "",
                        "termination_grace_period_seconds": 30,
                        "toleration": [],
                        "topology_spread_constraint": [],
                        "volume": []
                      }
                    ]
                  }
                ]
              }
            ],
            "timeouts": null,
            "wait_for_rollout": true
          },
          "sensitive_attributes": [
            [
              {
                "type": "get_attr",
                "value": "spec"
              },
              {
                "type": "index",
                "value": {
                  "value": 0,
                  "type": "number"
                }
              },
              {
                "type": "get_attr",
                "value": "template"
              },
              {
                "type": "index",
                "value": {
                  "value": 0,
                  "type": "number"
                }
              },
              {
                "type": "get_attr",
                "value": "spec"
              },
              {
                "type": "index",
                "value": {
                  "value": 0,
                  "type": "number"
                }
              },
              {
                "type": "get_attr",
                "value": "container"
              },
              {
                "type": "index",
                "value": {
                  "value": 0,
                  "type": "number"
                }
              },
              {
                "type": "get_attr",
                "value": "env"
              },
              {
                "type": "index",
                "value": {
                  "value": 0,
                  "type": "number"
                }
              },
              {
                "type": "get_attr",
                "value": "value"
              }
            ],
            [
              {
                "type": "get_attr",
                "value": "spec"
              },
              {
                "type": "index",
                "value": {
                  "value": 0,
                  "type": "number"
                }
              },
              {
                "type": "get_attr",
                "value": "template"
              },
              {
                "type": "index",
                "value": {
                  "value": 0,
                  "type": "number"
                }
              },
              {
                "type": "get_attr",
                "value": "spec"
              },
              {
                "type": "index",
                "value": {
                  "value": 0,
                  "type": "number"
                }
              },
              {
                "type": "get_attr",
                "value": "container"
              },
              {
                "type": "index",
                "value": {
                  "value": 0,
                  "type": "number"
                }
              },
              {
                "type": "get_attr",
                "value": "env"
              },
              {
                "type": "index",
                "value": {
                  "value": 3,
                  "type": "number"
                }
              },
              {
                "type": "get_attr",
                "value": "value"
              }
            ]
          ],
          "identity_schema_version": 1,
          "identity": {
            "api_version": null,
            "kind": null,
            "name": null,
            "namespace": null
          },
          "private": "eyJlMmJmYjczMC1lY2FhLTExZTYtOGY4OC0zNDM2M2JjN2M0YzAiOnsiY3JlYXRlIjo2MDAwMDAwMDAwMDAsImRlbGV0ZSI6NjAwMDAwMDAwMDAwLCJ1cGRhdGUiOjYwMDAwMDAwMDAwMH0sInNjaGVtYV92ZXJzaW9uIjoiMSJ9",
          "dependencies": [
            "kubernetes_config_map.db_migrations",
            "kubernetes_job.db_migration",
            "kubernetes_namespace.app_plane",
            "kubernetes_namespace.namespaces",
            "module.app_plane.kubernetes_config_map.supabase_init",
            "module.app_plane.kubernetes_secret.supabase_db",
            "module.app_plane.kubernetes_stateful_set.supabase_db",
            "module.cache.helm_release.redis_operator",
            "module.cache.kubernetes_manifest.prometheus_rules",
            "module.cache.kubernetes_manifest.redis_failover",
            "module.cache.kubernetes_manifest.service_monitor",
            "module.cache.kubernetes_namespace.redis",
            "module.cache.kubernetes_secret.redis_auth",
            "module.cache.kubernetes_service.redis",
            "module.cache.kubernetes_stateful_set.redis_standalone",
            "module.cache.random_password.redis_password",
            "module.database.helm_release.cloudnative_pg",
            "module.database.kubernetes_namespace.database",
            "module.database.kubernetes_secret.app_user",
            "module.database.kubernetes_secret.superuser",
            "module.database.kubernetes_service.database",
            "module.database.local_file.cluster_manifest",
            "module.database.null_resource.cluster",
            "module.database.random_password.app_user",
            "module.database.random_password.superuser",
            "module.temporal.kubernetes_config_map.temporal",
            "module.temporal.kubernetes_deployment.temporal",
            "module.temporal.kubernetes_deployment.temporal_ui",
            "module.temporal.kubernetes_job.create_namespaces",
            "module.temporal.kubernetes_secret.temporal",
            "module.temporal.kubernetes_service.temporal",
            "module.temporal.kubernetes_service.temporal_ui",
            "module.temporal.kubernetes_service_account.temporal",
            "module.vault.helm_release.vault",
            "module.vault.kubernetes_config_map.vault_agent_config",
            "module.vault.kubernetes_job.vault_init",
            "module.vault.kubernetes_job.vault_seed"
          ]
        }
      ]
    },
    {
      "module": "module.app_plane[0]",
      "mode": "managed",
      "type": "kubernetes_deployment",
      "name": "supabase_meta",
      "provider": "provider[\"registry.terraform.io/hashicorp/kubernetes\"]",
      "instances": [
        {
          "index_key": 0,
          "schema_version": 1,
          "attributes": {
            "id": "app-plane/supabase-meta",
            "metadata": [
              {
                "annotations": {},
                "generate_name": "",
                "generation": 1,
                "labels": {
                  "app.kubernetes.io/component": "database-admin",
                  "app.kubernetes.io/managed-by": "terraform",
                  "app.kubernetes.io/name": "supabase-meta",
                  "app.kubernetes.io/part-of": "ananta-app-plane",
                  "environment": "local"
                },
                "name": "supabase-meta",
                "namespace": "app-plane",
                "resource_version": "517882",
                "uid": "5459ff16-f0ae-4461-83ac-218a2d298f7e"
              }
            ],
            "spec": [
              {
                "min_ready_seconds": 0,
                "paused": false,
                "progress_deadline_seconds": 600,
                "replicas": "1",
                "revision_history_limit": 10,
                "selector": [
                  {
                    "match_expressions": [],
                    "match_labels": {
                      "app.kubernetes.io/name": "supabase-meta"
                    }
                  }
                ],
                "strategy": [
                  {
                    "rolling_update": [
                      {
                        "max_surge": "25%",
                        "max_unavailable": "25%"
                      }
                    ],
                    "type": "RollingUpdate"
                  }
                ],
                "template": [
                  {
                    "metadata": [
                      {
                        "annotations": {},
                        "generate_name": "",
                        "generation": 0,
                        "labels": {
                          "app.kubernetes.io/component": "database-admin",
                          "app.kubernetes.io/managed-by": "terraform",
                          "app.kubernetes.io/name": "supabase-meta",
                          "app.kubernetes.io/part-of": "ananta-app-plane",
                          "environment": "local"
                        },
                        "name": "",
                        "namespace": "",
                        "resource_version": "",
                        "uid": ""
                      }
                    ],
                    "spec": [
                      {
                        "active_deadline_seconds": 0,
                        "affinity": [],
                        "automount_service_account_token": true,
                        "container": [
                          {
                            "args": [],
                            "command": [],
                            "env": [
                              {
                                "name": "PG_META_PORT",
                                "value": "8080",
                                "value_from": []
                              },
                              {
                                "name": "PG_META_DB_HOST",
                                "value": "supabase-db",
                                "value_from": []
                              },
                              {
                                "name": "PG_META_DB_PORT",
                                "value": "5432",
                                "value_from": []
                              },
                              {
                                "name": "PG_META_DB_NAME",
                                "value": "postgres",
                                "value_from": []
                              },
                              {
                                "name": "PG_META_DB_USER",
                                "value": "postgres",
                                "value_from": []
                              },
                              {
                                "name": "PG_META_DB_PASSWORD",
                                "value": "",
                                "value_from": [
                                  {
                                    "config_map_key_ref": [],
                                    "field_ref": [],
                                    "resource_field_ref": [],
                                    "secret_key_ref": [
                                      {
                                        "key": "POSTGRES_PASSWORD",
                                        "name": "ananta-supabase-db-secrets",
                                        "optional": false
                                      }
                                    ]
                                  }
                                ]
                              }
                            ],
                            "env_from": [],
                            "image": "supabase/postgres-meta:v0.74.0",
                            "image_pull_policy": "IfNotPresent",
                            "lifecycle": [],
                            "liveness_probe": [],
                            "name": "supabase-meta",
                            "port": [
                              {
                                "container_port": 8080,
                                "host_ip": "",
                                "host_port": 0,
                                "name": "http",
                                "protocol": "TCP"
                              }
                            ],
                            "readiness_probe": [
                              {
                                "exec": [],
                                "failure_threshold": 3,
                                "grpc": [],
                                "http_get": [
                                  {
                                    "host": "",
                                    "http_header": [],
                                    "path": "/health",
                                    "port": "8080",
                                    "scheme": "HTTP"
                                  }
                                ],
                                "initial_delay_seconds": 10,
                                "period_seconds": 10,
                                "success_threshold": 1,
                                "tcp_socket": [],
                                "timeout_seconds": 1
                              }
                            ],
                            "resources": [
                              {
                                "limits": {
                                  "cpu": "200m",
                                  "memory": "256Mi"
                                },
                                "requests": {
                                  "cpu": "100m",
                                  "memory": "128Mi"
                                }
                              }
                            ],
                            "restart_policy": "",
                            "security_context": [],
                            "startup_probe": [],
                            "stdin": false,
                            "stdin_once": false,
                            "termination_message_path": "/dev/termination-log",
                            "termination_message_policy": "File",
                            "tty": false,
                            "volume_device": [],
                            "volume_mount": [],
                            "working_dir": ""
                          }
                        ],
                        "dns_config": [],
                        "dns_policy": "ClusterFirst",
                        "enable_service_links": true,
                        "host_aliases": [],
                        "host_ipc": false,
                        "host_network": false,
                        "host_pid": false,
                        "hostname": "",
                        "image_pull_secrets": [],
                        "init_container": [],
                        "node_name": "",
                        "node_selector": {},
                        "os": [],
                        "priority_class_name": "",
                        "readiness_gate": [],
                        "restart_policy": "Always",
                        "runtime_class_name": "",
                        "scheduler_name": "default-scheduler",
                        "security_context": [],
                        "service_account_name": "",
                        "share_process_namespace": false,
                        "subdomain": "",
                        "termination_grace_period_seconds": 30,
                        "toleration": [],
                        "topology_spread_constraint": [],
                        "volume": []
                      }
                    ]
                  }
                ]
              }
            ],
            "timeouts": null,
            "wait_for_rollout": true
          },
          "sensitive_attributes": [],
          "identity_schema_version": 1,
          "identity": {
            "api_version": "apps/v1",
            "kind": "Deployment",
            "name": "supabase-meta",
            "namespace": "app-plane"
          },
          "private": "eyJlMmJmYjczMC1lY2FhLTExZTYtOGY4OC0zNDM2M2JjN2M0YzAiOnsiY3JlYXRlIjo2MDAwMDAwMDAwMDAsImRlbGV0ZSI6NjAwMDAwMDAwMDAwLCJ1cGRhdGUiOjYwMDAwMDAwMDAwMH0sInNjaGVtYV92ZXJzaW9uIjoiMSJ9",
          "dependencies": [
            "kubernetes_config_map.db_migrations",
            "kubernetes_job.db_migration",
            "kubernetes_namespace.app_plane",
            "kubernetes_namespace.namespaces",
            "module.app_plane.kubernetes_config_map.supabase_init",
            "module.app_plane.kubernetes_secret.supabase_db",
            "module.app_plane.kubernetes_stateful_set.supabase_db",
            "module.cache.helm_release.redis_operator",
            "module.cache.kubernetes_manifest.prometheus_rules",
            "module.cache.kubernetes_manifest.redis_failover",
            "module.cache.kubernetes_manifest.service_monitor",
            "module.cache.kubernetes_namespace.redis",
            "module.cache.kubernetes_secret.redis_auth",
            "module.cache.kubernetes_service.redis",
            "module.cache.kubernetes_stateful_set.redis_standalone",
            "module.cache.random_password.redis_password",
            "module.database.helm_release.cloudnative_pg",
            "module.database.kubernetes_namespace.database",
            "module.database.kubernetes_secret.app_user",
            "module.database.kubernetes_secret.superuser",
            "module.database.kubernetes_service.database",
            "module.database.local_file.cluster_manifest",
            "module.database.null_resource.cluster",
            "module.database.random_password.app_user",
            "module.database.random_password.superuser",
            "module.temporal.kubernetes_config_map.temporal",
            "module.temporal.kubernetes_deployment.temporal",
            "module.temporal.kubernetes_deployment.temporal_ui",
            "module.temporal.kubernetes_job.create_namespaces",
            "module.temporal.kubernetes_secret.temporal",
            "module.temporal.kubernetes_service.temporal",
            "module.temporal.kubernetes_service.temporal_ui",
            "module.temporal.kubernetes_service_account.temporal",
            "module.vault.helm_release.vault",
            "module.vault.kubernetes_config_map.vault_agent_config",
            "module.vault.kubernetes_job.vault_init",
            "module.vault.kubernetes_job.vault_seed"
          ]
        }
      ]
    },
    {
      "module": "module.app_plane[0]",
      "mode": "managed",
      "type": "kubernetes_job",
      "name": "db_migration",
      "provider": "provider[\"registry.terraform.io/hashicorp/kubernetes\"]",
      "instances": [
        {
          "index_key": 0,
          "status": "tainted",
          "schema_version": 1,
          "attributes": {
            "id": "app-plane/ananta-app-plane-migration",
            "metadata": [
              {
                "annotations": null,
                "generate_name": "",
                "generation": 0,
                "labels": {
                  "app.kubernetes.io/managed-by": "terraform",
                  "app.kubernetes.io/part-of": "ananta-app-plane",
                  "environment": "local"
                },
                "name": "ananta-app-plane-migration",
                "namespace": "app-plane",
                "resource_version": "",
                "uid": ""
              }
            ],
            "spec": [
              {
                "active_deadline_seconds": 0,
                "backoff_limit": 5,
                "backoff_limit_per_index": 0,
                "completion_mode": "",
                "completions": 1,
                "manual_selector": false,
                "max_failed_indexes": 0,
                "parallelism": 1,
                "pod_failure_policy": [],
                "selector": [],
                "template": [
                  {
                    "metadata": [
                      {
                        "annotations": null,
                        "generate_name": "",
                        "generation": 0,
                        "labels": {
                          "app.kubernetes.io/managed-by": "terraform",
                          "app.kubernetes.io/part-of": "ananta-app-plane",
                          "environment": "local"
                        },
                        "name": "",
                        "resource_version": "",
                        "uid": ""
                      }
                    ],
                    "spec": [
                      {
                        "active_deadline_seconds": 0,
                        "affinity": [],
                        "automount_service_account_token": true,
                        "container": [
                          {
                            "args": [
                              "echo \"======================================\"\necho \"Waiting for Supabase DB to be ready...\"\necho \"======================================\"\nuntil pg_isready -h supabase-db -p 5432 -U postgres 2\u003e/dev/null; do\n  sleep 5\ndone\necho \"Supabase DB is ready!\"\n\necho \"======================================\"\necho \"Creating Supabase roles...\"\necho \"======================================\"\nPGPASSWORD=$SUPABASE_DB_PASSWORD psql -h supabase-db -p 5432 -U postgres -d postgres \u003c\u003c-'EOSQL'\n-- Create supabase_admin role (superuser for migrations)\nDO $$\nBEGIN\n  IF NOT EXISTS (SELECT FROM pg_roles WHERE rolname = 'supabase_admin') THEN\n    CREATE ROLE supabase_admin WITH LOGIN SUPERUSER PASSWORD 'postgres';\n  END IF;\nEND\n$$;\n\n-- Create authenticator role (PostgREST connection role)\nDO $$\nBEGIN\n  IF NOT EXISTS (SELECT FROM pg_roles WHERE rolname = 'authenticator') THEN\n    CREATE ROLE authenticator WITH LOGIN NOINHERIT PASSWORD 'postgres';\n  END IF;\nEND\n$$;\n\n-- Create anon role (anonymous/public access)\nDO $$\nBEGIN\n  IF NOT EXISTS (SELECT FROM pg_roles WHERE rolname = 'anon') THEN\n    CREATE ROLE anon NOLOGIN NOINHERIT;\n  END IF;\nEND\n$$;\n\n-- Create authenticated role (logged-in users)\nDO $$\nBEGIN\n  IF NOT EXISTS (SELECT FROM pg_roles WHERE rolname = 'authenticated') THEN\n    CREATE ROLE authenticated NOLOGIN NOINHERIT;\n  END IF;\nEND\n$$;\n\n-- Create service_role (backend services with elevated privileges)\nDO $$\nBEGIN\n  IF NOT EXISTS (SELECT FROM pg_roles WHERE rolname = 'service_role') THEN\n    CREATE ROLE service_role WITH LOGIN BYPASSRLS PASSWORD 'postgres';\n  END IF;\nEND\n$$;\n\n-- Grant role hierarchy\nGRANT anon TO authenticator;\nGRANT authenticated TO authenticator;\nGRANT service_role TO authenticator;\n\n-- Create required schemas\nCREATE SCHEMA IF NOT EXISTS extensions;\nCREATE SCHEMA IF NOT EXISTS auth;\nCREATE SCHEMA IF NOT EXISTS storage;\nCREATE SCHEMA IF NOT EXISTS realtime;\n\n-- Grant schema access\nGRANT USAGE ON SCHEMA public TO anon, authenticated, service_role;\nGRANT USAGE ON SCHEMA extensions TO anon, authenticated, service_role;\nGRANT USAGE ON SCHEMA auth TO service_role;\nGRANT USAGE ON SCHEMA storage TO service_role;\nEOSQL\necho \"Supabase roles created!\"\n\necho \"======================================\"\necho \"Running Supabase migrations...\"\necho \"======================================\"\nPGPASSWORD=$SUPABASE_DB_PASSWORD psql -h supabase-db -p 5432 -U postgres -d postgres -f /migrations/001_SUPABASE_MASTER.sql || true\n\necho \"======================================\"\necho \"Waiting for Components DB to be ready...\"\necho \"======================================\"\nuntil pg_isready -h components-db -p 5432 -U postgres 2\u003e/dev/null; do\n  sleep 5\ndone\necho \"Components DB is ready!\"\n\necho \"======================================\"\necho \"Running Components-V2 migrations...\"\necho \"======================================\"\nPGPASSWORD=$COMPONENTS_DB_PASSWORD psql -h components-db -p 5432 -U postgres -d components_v2 -f /migrations/002_COMPONENTS_V2_MASTER.sql || true\n\necho \"======================================\"\necho \"All migrations completed successfully!\"\necho \"======================================\"\n"
                            ],
                            "command": [
                              "/bin/sh",
                              "-c"
                            ],
                            "env": [
                              {
                                "name": "SUPABASE_DB_PASSWORD",
                                "value": "",
                                "value_from": [
                                  {
                                    "config_map_key_ref": [],
                                    "field_ref": [],
                                    "resource_field_ref": [],
                                    "secret_key_ref": [
                                      {
                                        "key": "POSTGRES_PASSWORD",
                                        "name": "ananta-supabase-db-secrets",
                                        "optional": false
                                      }
                                    ]
                                  }
                                ]
                              },
                              {
                                "name": "COMPONENTS_DB_PASSWORD",
                                "value": "",
                                "value_from": [
                                  {
                                    "config_map_key_ref": [],
                                    "field_ref": [],
                                    "resource_field_ref": [],
                                    "secret_key_ref": [
                                      {
                                        "key": "POSTGRES_PASSWORD",
                                        "name": "ananta-components-db-secrets",
                                        "optional": false
                                      }
                                    ]
                                  }
                                ]
                              }
                            ],
                            "env_from": [],
                            "image": "postgres:15-alpine",
                            "image_pull_policy": "",
                            "lifecycle": [],
                            "liveness_probe": [],
                            "name": "migration",
                            "port": [],
                            "readiness_probe": [],
                            "resources": [],
                            "restart_policy": "",
                            "security_context": [],
                            "startup_probe": [],
                            "stdin": false,
                            "stdin_once": false,
                            "termination_message_path": "/dev/termination-log",
                            "termination_message_policy": "",
                            "tty": false,
                            "volume_device": [],
                            "volume_mount": [
                              {
                                "mount_path": "/migrations",
                                "mount_propagation": "None",
                                "name": "migrations",
                                "read_only": false,
                                "sub_path": "",
                                "sub_path_expr": ""
                              }
                            ],
                            "working_dir": ""
                          }
                        ],
                        "dns_config": [],
                        "dns_policy": "ClusterFirst",
                        "enable_service_links": true,
                        "host_aliases": [],
                        "host_ipc": false,
                        "host_network": false,
                        "host_pid": false,
                        "hostname": "",
                        "image_pull_secrets": [],
                        "init_container": [],
                        "node_name": "",
                        "node_selector": null,
                        "os": [],
                        "priority_class_name": "",
                        "readiness_gate": [],
                        "restart_policy": "OnFailure",
                        "runtime_class_name": "",
                        "scheduler_name": "",
                        "security_context": [],
                        "service_account_name": "",
                        "share_process_namespace": false,
                        "subdomain": "",
                        "termination_grace_period_seconds": 30,
                        "toleration": [],
                        "topology_spread_constraint": [],
                        "volume": [
                          {
                            "aws_elastic_block_store": [],
                            "azure_disk": [],
                            "azure_file": [],
                            "ceph_fs": [],
                            "cinder": [],
                            "config_map": [
                              {
                                "default_mode": "0644",
                                "items": [],
                                "name": "ananta-app-plane-migrations",
                                "optional": false
                              }
                            ],
                            "csi": [],
                            "downward_api": [],
                            "empty_dir": [],
                            "ephemeral": [],
                            "fc": [],
                            "flex_volume": [],
                            "flocker": [],
                            "gce_persistent_disk": [],
                            "git_repo": [],
                            "glusterfs": [],
                            "host_path": [],
                            "iscsi": [],
                            "local": [],
                            "name": "migrations",
                            "nfs": [],
                            "persistent_volume_claim": [],
                            "photon_persistent_disk": [],
                            "projected": [],
                            "quobyte": [],
                            "rbd": [],
                            "secret": [],
                            "vsphere_volume": []
                          }
                        ]
                      }
                    ]
                  }
                ],
                "ttl_seconds_after_finished": "600"
              }
            ],
            "timeouts": null,
            "wait_for_completion": true
          },
          "sensitive_attributes": [],
          "identity_schema_version": 1,
          "identity": {
            "api_version": "batch/v1",
            "kind": "Job",
            "name": "ananta-app-plane-migration",
            "namespace": "app-plane"
          },
          "private": "eyJlMmJmYjczMC1lY2FhLTExZTYtOGY4OC0zNDM2M2JjN2M0YzAiOnsiY3JlYXRlIjo2MDAwMDAwMDAwMCwiZGVsZXRlIjo2MDAwMDAwMDAwMCwidXBkYXRlIjo2MDAwMDAwMDAwMH0sInNjaGVtYV92ZXJzaW9uIjoiMSJ9",
          "dependencies": [
            "kubernetes_config_map.app_plane_migrations",
            "kubernetes_config_map.db_migrations",
            "kubernetes_job.db_migration",
            "kubernetes_namespace.app_plane",
            "kubernetes_namespace.namespaces",
            "module.app_plane.kubernetes_config_map.supabase_init",
            "module.app_plane.kubernetes_secret.components_db",
            "module.app_plane.kubernetes_secret.supabase_db",
            "module.app_plane.kubernetes_stateful_set.components_db",
            "module.app_plane.kubernetes_stateful_set.supabase_db",
            "module.cache.helm_release.redis_operator",
            "module.cache.kubernetes_manifest.prometheus_rules",
            "module.cache.kubernetes_manifest.redis_failover",
            "module.cache.kubernetes_manifest.service_monitor",
            "module.cache.kubernetes_namespace.redis",
            "module.cache.kubernetes_secret.redis_auth",
            "module.cache.kubernetes_service.redis",
            "module.cache.kubernetes_stateful_set.redis_standalone",
            "module.cache.random_password.redis_password",
            "module.database.helm_release.cloudnative_pg",
            "module.database.kubernetes_namespace.database",
            "module.database.kubernetes_secret.app_user",
            "module.database.kubernetes_secret.superuser",
            "module.database.kubernetes_service.database",
            "module.database.local_file.cluster_manifest",
            "module.database.null_resource.cluster",
            "module.database.random_password.app_user",
            "module.database.random_password.superuser",
            "module.temporal.kubernetes_config_map.temporal",
            "module.temporal.kubernetes_deployment.temporal",
            "module.temporal.kubernetes_deployment.temporal_ui",
            "module.temporal.kubernetes_job.create_namespaces",
            "module.temporal.kubernetes_secret.temporal",
            "module.temporal.kubernetes_service.temporal",
            "module.temporal.kubernetes_service.temporal_ui",
            "module.temporal.kubernetes_service_account.temporal",
            "module.vault.helm_release.vault",
            "module.vault.kubernetes_config_map.vault_agent_config",
            "module.vault.kubernetes_job.vault_init",
            "module.vault.kubernetes_job.vault_seed"
          ]
        }
      ]
    },
    {
      "module": "module.app_plane[0]",
      "mode": "managed",
      "type": "kubernetes_job",
      "name": "minio_bucket_init",
      "provider": "provider[\"registry.terraform.io/hashicorp/kubernetes\"]",
      "instances": [
        {
          "status": "tainted",
          "schema_version": 1,
          "attributes": {
            "id": "app-plane/minio-bucket-init",
            "metadata": [
              {
                "annotations": null,
                "generate_name": "",
                "generation": 0,
                "labels": {
                  "app.kubernetes.io/managed-by": "terraform",
                  "app.kubernetes.io/part-of": "ananta-app-plane",
                  "environment": "local"
                },
                "name": "minio-bucket-init",
                "namespace": "app-plane",
                "resource_version": "",
                "uid": ""
              }
            ],
            "spec": [
              {
                "active_deadline_seconds": 0,
                "backoff_limit": 5,
                "backoff_limit_per_index": 0,
                "completion_mode": "",
                "completions": 1,
                "manual_selector": false,
                "max_failed_indexes": 0,
                "parallelism": 1,
                "pod_failure_policy": [],
                "selector": [],
                "template": [
                  {
                    "metadata": [
                      {
                        "annotations": null,
                        "generate_name": "",
                        "generation": 0,
                        "labels": {
                          "app.kubernetes.io/managed-by": "terraform",
                          "app.kubernetes.io/part-of": "ananta-app-plane",
                          "environment": "local"
                        },
                        "name": "",
                        "resource_version": "",
                        "uid": ""
                      }
                    ],
                    "spec": [
                      {
                        "active_deadline_seconds": 0,
                        "affinity": [],
                        "automount_service_account_token": true,
                        "container": [
                          {
                            "args": [
                              "echo \"Waiting for MinIO to be ready...\"\nuntil curl -sf http://minio:9000/minio/health/live; do\n  echo \"MinIO not ready, waiting...\"\n  sleep 2\ndone\necho \"MinIO is ready!\"\n\nmc alias set myminio http://minio:9000 $MINIO_ROOT_USER $MINIO_ROOT_PASSWORD\n\necho \"Creating buckets...\"\nmc mb myminio/bom-uploads --ignore-existing\nmc mb myminio/documents --ignore-existing\nmc mb myminio/exports --ignore-existing\nmc mb myminio/avatars --ignore-existing\nmc mb myminio/enrichment-audit --ignore-existing\nmc mb myminio/bulk-uploads --ignore-existing\nmc mb myminio/novu-storage --ignore-existing\n\necho \"Setting public access for avatars...\"\nmc anonymous set download myminio/avatars\n\necho \"Bucket initialization complete!\"\nmc ls myminio\n"
                            ],
                            "command": [
                              "/bin/sh",
                              "-c"
                            ],
                            "env": [
                              {
                                "name": "MINIO_ROOT_USER",
                                "value": "",
                                "value_from": [
                                  {
                                    "config_map_key_ref": [],
                                    "field_ref": [],
                                    "resource_field_ref": [],
                                    "secret_key_ref": [
                                      {
                                        "key": "rootUser",
                                        "name": "minio",
                                        "optional": false
                                      }
                                    ]
                                  }
                                ]
                              },
                              {
                                "name": "MINIO_ROOT_PASSWORD",
                                "value": "",
                                "value_from": [
                                  {
                                    "config_map_key_ref": [],
                                    "field_ref": [],
                                    "resource_field_ref": [],
                                    "secret_key_ref": [
                                      {
                                        "key": "rootPassword",
                                        "name": "minio",
                                        "optional": false
                                      }
                                    ]
                                  }
                                ]
                              }
                            ],
                            "env_from": [],
                            "image": "minio/mc:latest",
                            "image_pull_policy": "",
                            "lifecycle": [],
                            "liveness_probe": [],
                            "name": "mc",
                            "port": [],
                            "readiness_probe": [],
                            "resources": [],
                            "restart_policy": "",
                            "security_context": [],
                            "startup_probe": [],
                            "stdin": false,
                            "stdin_once": false,
                            "termination_message_path": "/dev/termination-log",
                            "termination_message_policy": "",
                            "tty": false,
                            "volume_device": [],
                            "volume_mount": [],
                            "working_dir": ""
                          }
                        ],
                        "dns_config": [],
                        "dns_policy": "ClusterFirst",
                        "enable_service_links": true,
                        "host_aliases": [],
                        "host_ipc": false,
                        "host_network": false,
                        "host_pid": false,
                        "hostname": "",
                        "image_pull_secrets": [],
                        "init_container": [],
                        "node_name": "",
                        "node_selector": null,
                        "os": [],
                        "priority_class_name": "",
                        "readiness_gate": [],
                        "restart_policy": "OnFailure",
                        "runtime_class_name": "",
                        "scheduler_name": "",
                        "security_context": [],
                        "service_account_name": "",
                        "share_process_namespace": false,
                        "subdomain": "",
                        "termination_grace_period_seconds": 30,
                        "toleration": [],
                        "topology_spread_constraint": [],
                        "volume": []
                      }
                    ]
                  }
                ],
                "ttl_seconds_after_finished": "600"
              }
            ],
            "timeouts": null,
            "wait_for_completion": true
          },
          "sensitive_attributes": [],
          "identity_schema_version": 1,
          "identity": {
            "api_version": "batch/v1",
            "kind": "Job",
            "name": "minio-bucket-init",
            "namespace": "app-plane"
          },
          "private": "eyJlMmJmYjczMC1lY2FhLTExZTYtOGY4OC0zNDM2M2JjN2M0YzAiOnsiY3JlYXRlIjo2MDAwMDAwMDAwMCwiZGVsZXRlIjo2MDAwMDAwMDAwMCwidXBkYXRlIjo2MDAwMDAwMDAwMH0sInNjaGVtYV92ZXJzaW9uIjoiMSJ9",
          "dependencies": [
            "kubernetes_config_map.db_migrations",
            "kubernetes_job.db_migration",
            "kubernetes_namespace.app_plane",
            "kubernetes_namespace.namespaces",
            "module.app_plane.kubernetes_secret.minio",
            "module.app_plane.kubernetes_service.minio",
            "module.app_plane.kubernetes_stateful_set.minio",
            "module.cache.helm_release.redis_operator",
            "module.cache.kubernetes_manifest.prometheus_rules",
            "module.cache.kubernetes_manifest.redis_failover",
            "module.cache.kubernetes_manifest.service_monitor",
            "module.cache.kubernetes_namespace.redis",
            "module.cache.kubernetes_secret.redis_auth",
            "module.cache.kubernetes_service.redis",
            "module.cache.kubernetes_stateful_set.redis_standalone",
            "module.cache.random_password.redis_password",
            "module.database.helm_release.cloudnative_pg",
            "module.database.kubernetes_namespace.database",
            "module.database.kubernetes_secret.app_user",
            "module.database.kubernetes_secret.superuser",
            "module.database.kubernetes_service.database",
            "module.database.local_file.cluster_manifest",
            "module.database.null_resource.cluster",
            "module.database.random_password.app_user",
            "module.database.random_password.superuser",
            "module.temporal.kubernetes_config_map.temporal",
            "module.temporal.kubernetes_deployment.temporal",
            "module.temporal.kubernetes_deployment.temporal_ui",
            "module.temporal.kubernetes_job.create_namespaces",
            "module.temporal.kubernetes_secret.temporal",
            "module.temporal.kubernetes_service.temporal",
            "module.temporal.kubernetes_service.temporal_ui",
            "module.temporal.kubernetes_service_account.temporal",
            "module.vault.helm_release.vault",
            "module.vault.kubernetes_config_map.vault_agent_config",
            "module.vault.kubernetes_job.vault_init",
            "module.vault.kubernetes_job.vault_seed"
          ]
        }
      ]
    },
    {
      "module": "module.app_plane[0]",
      "mode": "managed",
      "type": "kubernetes_secret",
      "name": "cns_service",
      "provider": "provider[\"registry.terraform.io/hashicorp/kubernetes\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "binary_data": null,
            "binary_data_wo": null,
            "binary_data_wo_revision": null,
            "data": {
              "ARROW_API_KEY": "",
              "DIGIKEY_CLIENT_ID": "gpa0gNdLFhHbapxaa4BwRKfWgrqxs6qpHTEBAFgorViBYJpy",
              "DIGIKEY_CLIENT_SECRET": "tIBYlRCyO0HGxTWc7NTg6IUZjIn0syx5iw3PIni88xWS2iPsFmGotxXrTjfPE7nd",
              "ELEMENT14_API_KEY": "mafvh5qjd49ns43awtnsesbp",
              "JWT_SECRET_KEY": "dev-jwt-secret-change-in-production",
              "MOUSER_API_KEY": "b1b7b35c-b654-4012-ba7e-018b7f0b59b0"
            },
            "data_wo": null,
            "data_wo_revision": null,
            "id": "app-plane/ananta-cns-service-secrets",
            "immutable": false,
            "metadata": [
              {
                "annotations": {},
                "generate_name": "",
                "generation": 0,
                "labels": {
                  "app.kubernetes.io/managed-by": "terraform",
                  "app.kubernetes.io/part-of": "ananta-app-plane",
                  "environment": "local"
                },
                "name": "ananta-cns-service-secrets",
                "namespace": "app-plane",
                "resource_version": "664099",
                "uid": "2bffa7d0-4e38-4c97-b284-782cf2e450f4"
              }
            ],
            "timeouts": null,
            "type": "Opaque",
            "wait_for_service_account_token": true
          },
          "sensitive_attributes": [
            [
              {
                "type": "get_attr",
                "value": "binary_data"
              }
            ],
            [
              {
                "type": "get_attr",
                "value": "data"
              }
            ],
            [
              {
                "type": "get_attr",
                "value": "data"
              },
              {
                "type": "index",
                "value": {
                  "value": "ARROW_API_KEY",
                  "type": "string"
                }
              }
            ],
            [
              {
                "type": "get_attr",
                "value": "data"
              },
              {
                "type": "index",
                "value": {
                  "value": "DIGIKEY_CLIENT_ID",
                  "type": "string"
                }
              }
            ],
            [
              {
                "type": "get_attr",
                "value": "data"
              },
              {
                "type": "index",
                "value": {
                  "value": "DIGIKEY_CLIENT_SECRET",
                  "type": "string"
                }
              }
            ],
            [
              {
                "type": "get_attr",
                "value": "data"
              },
              {
                "type": "index",
                "value": {
                  "value": "ELEMENT14_API_KEY",
                  "type": "string"
                }
              }
            ],
            [
              {
                "type": "get_attr",
                "value": "data"
              },
              {
                "type": "index",
                "value": {
                  "value": "JWT_SECRET_KEY",
                  "type": "string"
                }
              }
            ],
            [
              {
                "type": "get_attr",
                "value": "data"
              },
              {
                "type": "index",
                "value": {
                  "value": "MOUSER_API_KEY",
                  "type": "string"
                }
              }
            ]
          ],
          "identity_schema_version": 1,
          "identity": {
            "api_version": "v1",
            "kind": "Secret",
            "name": "ananta-cns-service-secrets",
            "namespace": "app-plane"
          },
          "private": "eyJlMmJmYjczMC1lY2FhLTExZTYtOGY4OC0zNDM2M2JjN2M0YzAiOnsiY3JlYXRlIjo2MDAwMDAwMDAwMH19",
          "dependencies": [
            "kubernetes_config_map.db_migrations",
            "kubernetes_job.db_migration",
            "kubernetes_namespace.app_plane",
            "kubernetes_namespace.namespaces",
            "module.cache.helm_release.redis_operator",
            "module.cache.kubernetes_manifest.prometheus_rules",
            "module.cache.kubernetes_manifest.redis_failover",
            "module.cache.kubernetes_manifest.service_monitor",
            "module.cache.kubernetes_namespace.redis",
            "module.cache.kubernetes_secret.redis_auth",
            "module.cache.kubernetes_service.redis",
            "module.cache.kubernetes_stateful_set.redis_standalone",
            "module.cache.random_password.redis_password",
            "module.database.helm_release.cloudnative_pg",
            "module.database.kubernetes_namespace.database",
            "module.database.kubernetes_secret.app_user",
            "module.database.kubernetes_secret.superuser",
            "module.database.kubernetes_service.database",
            "module.database.local_file.cluster_manifest",
            "module.database.null_resource.cluster",
            "module.database.random_password.app_user",
            "module.database.random_password.superuser",
            "module.temporal.kubernetes_config_map.temporal",
            "module.temporal.kubernetes_deployment.temporal",
            "module.temporal.kubernetes_deployment.temporal_ui",
            "module.temporal.kubernetes_job.create_namespaces",
            "module.temporal.kubernetes_secret.temporal",
            "module.temporal.kubernetes_service.temporal",
            "module.temporal.kubernetes_service.temporal_ui",
            "module.temporal.kubernetes_service_account.temporal",
            "module.vault.helm_release.vault",
            "module.vault.kubernetes_config_map.vault_agent_config",
            "module.vault.kubernetes_job.vault_init",
            "module.vault.kubernetes_job.vault_seed"
          ]
        }
      ]
    },
    {
      "module": "module.app_plane[0]",
      "mode": "managed",
      "type": "kubernetes_secret",
      "name": "components_db",
      "provider": "provider[\"registry.terraform.io/hashicorp/kubernetes\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "binary_data": null,
            "binary_data_wo": null,
            "binary_data_wo_revision": null,
            "data": {
              "POSTGRES_DB": "components_v2",
              "POSTGRES_PASSWORD": "postgres",
              "POSTGRES_USER": "postgres"
            },
            "data_wo": null,
            "data_wo_revision": null,
            "id": "app-plane/ananta-components-db-secrets",
            "immutable": false,
            "metadata": [
              {
                "annotations": {},
                "generate_name": "",
                "generation": 0,
                "labels": {
                  "app.kubernetes.io/managed-by": "terraform",
                  "app.kubernetes.io/part-of": "ananta-app-plane",
                  "environment": "local"
                },
                "name": "ananta-components-db-secrets",
                "namespace": "app-plane",
                "resource_version": "88856",
                "uid": "d185a769-0cc3-4b36-b36d-e80749a8c5d7"
              }
            ],
            "timeouts": null,
            "type": "Opaque",
            "wait_for_service_account_token": true
          },
          "sensitive_attributes": [
            [
              {
                "type": "get_attr",
                "value": "binary_data"
              }
            ],
            [
              {
                "type": "get_attr",
                "value": "data"
              }
            ],
            [
              {
                "type": "get_attr",
                "value": "data"
              },
              {
                "type": "index",
                "value": {
                  "value": "POSTGRES_PASSWORD",
                  "type": "string"
                }
              }
            ]
          ],
          "identity_schema_version": 1,
          "identity": {
            "api_version": "v1",
            "kind": "Secret",
            "name": "ananta-components-db-secrets",
            "namespace": "app-plane"
          },
          "private": "eyJlMmJmYjczMC1lY2FhLTExZTYtOGY4OC0zNDM2M2JjN2M0YzAiOnsiY3JlYXRlIjo2MDAwMDAwMDAwMH19",
          "dependencies": [
            "kubernetes_config_map.db_migrations",
            "kubernetes_job.db_migration",
            "kubernetes_namespace.app_plane",
            "kubernetes_namespace.namespaces",
            "module.cache.helm_release.redis_operator",
            "module.cache.kubernetes_manifest.prometheus_rules",
            "module.cache.kubernetes_manifest.redis_failover",
            "module.cache.kubernetes_manifest.service_monitor",
            "module.cache.kubernetes_namespace.redis",
            "module.cache.kubernetes_secret.redis_auth",
            "module.cache.kubernetes_service.redis",
            "module.cache.kubernetes_stateful_set.redis_standalone",
            "module.cache.random_password.redis_password",
            "module.database.helm_release.cloudnative_pg",
            "module.database.kubernetes_namespace.database",
            "module.database.kubernetes_secret.app_user",
            "module.database.kubernetes_secret.superuser",
            "module.database.kubernetes_service.database",
            "module.database.local_file.cluster_manifest",
            "module.database.null_resource.cluster",
            "module.database.random_password.app_user",
            "module.database.random_password.superuser",
            "module.temporal.kubernetes_config_map.temporal",
            "module.temporal.kubernetes_deployment.temporal",
            "module.temporal.kubernetes_deployment.temporal_ui",
            "module.temporal.kubernetes_job.create_namespaces",
            "module.temporal.kubernetes_secret.temporal",
            "module.temporal.kubernetes_service.temporal",
            "module.temporal.kubernetes_service.temporal_ui",
            "module.temporal.kubernetes_service_account.temporal",
            "module.vault.helm_release.vault",
            "module.vault.kubernetes_config_map.vault_agent_config",
            "module.vault.kubernetes_job.vault_init",
            "module.vault.kubernetes_job.vault_seed"
          ]
        }
      ]
    },
    {
      "module": "module.app_plane[0]",
      "mode": "managed",
      "type": "kubernetes_secret",
      "name": "grafana",
      "provider": "provider[\"registry.terraform.io/hashicorp/kubernetes\"]",
      "instances": []
    },
    {
      "module": "module.app_plane[0]",
      "mode": "managed",
      "type": "kubernetes_secret",
      "name": "minio",
      "provider": "provider[\"registry.terraform.io/hashicorp/kubernetes\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "binary_data": null,
            "binary_data_wo": null,
            "binary_data_wo_revision": null,
            "data": {
              "rootPassword": "minioadmin",
              "rootUser": "minioadmin"
            },
            "data_wo": null,
            "data_wo_revision": null,
            "id": "app-plane/minio",
            "immutable": false,
            "metadata": [
              {
                "annotations": {},
                "generate_name": "",
                "generation": 0,
                "labels": {
                  "app.kubernetes.io/component": "storage",
                  "app.kubernetes.io/managed-by": "terraform",
                  "app.kubernetes.io/name": "minio",
                  "app.kubernetes.io/part-of": "ananta-app-plane",
                  "environment": "local"
                },
                "name": "minio",
                "namespace": "app-plane",
                "resource_version": "521229",
                "uid": "a60d3f87-db08-4d95-8d55-82d08d589ba0"
              }
            ],
            "timeouts": null,
            "type": "Opaque",
            "wait_for_service_account_token": true
          },
          "sensitive_attributes": [
            [
              {
                "type": "get_attr",
                "value": "binary_data"
              }
            ],
            [
              {
                "type": "get_attr",
                "value": "data"
              }
            ],
            [
              {
                "type": "get_attr",
                "value": "data"
              },
              {
                "type": "index",
                "value": {
                  "value": "rootPassword",
                  "type": "string"
                }
              }
            ]
          ],
          "identity_schema_version": 1,
          "identity": {
            "api_version": "v1",
            "kind": "Secret",
            "name": "minio",
            "namespace": "app-plane"
          },
          "private": "eyJlMmJmYjczMC1lY2FhLTExZTYtOGY4OC0zNDM2M2JjN2M0YzAiOnsiY3JlYXRlIjo2MDAwMDAwMDAwMH19",
          "dependencies": [
            "kubernetes_config_map.db_migrations",
            "kubernetes_job.db_migration",
            "kubernetes_namespace.app_plane",
            "kubernetes_namespace.namespaces",
            "module.cache.helm_release.redis_operator",
            "module.cache.kubernetes_manifest.prometheus_rules",
            "module.cache.kubernetes_manifest.redis_failover",
            "module.cache.kubernetes_manifest.service_monitor",
            "module.cache.kubernetes_namespace.redis",
            "module.cache.kubernetes_secret.redis_auth",
            "module.cache.kubernetes_service.redis",
            "module.cache.kubernetes_stateful_set.redis_standalone",
            "module.cache.random_password.redis_password",
            "module.database.helm_release.cloudnative_pg",
            "module.database.kubernetes_namespace.database",
            "module.database.kubernetes_secret.app_user",
            "module.database.kubernetes_secret.superuser",
            "module.database.kubernetes_service.database",
            "module.database.local_file.cluster_manifest",
            "module.database.null_resource.cluster",
            "module.database.random_password.app_user",
            "module.database.random_password.superuser",
            "module.temporal.kubernetes_config_map.temporal",
            "module.temporal.kubernetes_deployment.temporal",
            "module.temporal.kubernetes_deployment.temporal_ui",
            "module.temporal.kubernetes_job.create_namespaces",
            "module.temporal.kubernetes_secret.temporal",
            "module.temporal.kubernetes_service.temporal",
            "module.temporal.kubernetes_service.temporal_ui",
            "module.temporal.kubernetes_service_account.temporal",
            "module.vault.helm_release.vault",
            "module.vault.kubernetes_config_map.vault_agent_config",
            "module.vault.kubernetes_job.vault_init",
            "module.vault.kubernetes_job.vault_seed"
          ]
        }
      ]
    },
    {
      "module": "module.app_plane[0]",
      "mode": "managed",
      "type": "kubernetes_secret",
      "name": "novu",
      "provider": "provider[\"registry.terraform.io/hashicorp/kubernetes\"]",
      "instances": []
    },
    {
      "module": "module.app_plane[0]",
      "mode": "managed",
      "type": "kubernetes_secret",
      "name": "supabase_db",
      "provider": "provider[\"registry.terraform.io/hashicorp/kubernetes\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "binary_data": null,
            "binary_data_wo": null,
            "binary_data_wo_revision": null,
            "data": {
              "POSTGRES_DB": "postgres",
              "POSTGRES_PASSWORD": "postgres",
              "POSTGRES_USER": "postgres"
            },
            "data_wo": null,
            "data_wo_revision": null,
            "id": "app-plane/ananta-supabase-db-secrets",
            "immutable": false,
            "metadata": [
              {
                "annotations": {},
                "generate_name": "",
                "generation": 0,
                "labels": {
                  "app.kubernetes.io/managed-by": "terraform",
                  "app.kubernetes.io/part-of": "ananta-app-plane",
                  "environment": "local"
                },
                "name": "ananta-supabase-db-secrets",
                "namespace": "app-plane",
                "resource_version": "88894",
                "uid": "5087c04a-4e32-4ac3-a763-444004e6a1c6"
              }
            ],
            "timeouts": null,
            "type": "Opaque",
            "wait_for_service_account_token": true
          },
          "sensitive_attributes": [
            [
              {
                "type": "get_attr",
                "value": "binary_data"
              }
            ],
            [
              {
                "type": "get_attr",
                "value": "data"
              }
            ],
            [
              {
                "type": "get_attr",
                "value": "data"
              },
              {
                "type": "index",
                "value": {
                  "value": "POSTGRES_PASSWORD",
                  "type": "string"
                }
              }
            ]
          ],
          "identity_schema_version": 1,
          "identity": {
            "api_version": "v1",
            "kind": "Secret",
            "name": "ananta-supabase-db-secrets",
            "namespace": "app-plane"
          },
          "private": "eyJlMmJmYjczMC1lY2FhLTExZTYtOGY4OC0zNDM2M2JjN2M0YzAiOnsiY3JlYXRlIjo2MDAwMDAwMDAwMH19",
          "dependencies": [
            "kubernetes_config_map.db_migrations",
            "kubernetes_job.db_migration",
            "kubernetes_namespace.app_plane",
            "kubernetes_namespace.namespaces",
            "module.cache.helm_release.redis_operator",
            "module.cache.kubernetes_manifest.prometheus_rules",
            "module.cache.kubernetes_manifest.redis_failover",
            "module.cache.kubernetes_manifest.service_monitor",
            "module.cache.kubernetes_namespace.redis",
            "module.cache.kubernetes_secret.redis_auth",
            "module.cache.kubernetes_service.redis",
            "module.cache.kubernetes_stateful_set.redis_standalone",
            "module.cache.random_password.redis_password",
            "module.database.helm_release.cloudnative_pg",
            "module.database.kubernetes_namespace.database",
            "module.database.kubernetes_secret.app_user",
            "module.database.kubernetes_secret.superuser",
            "module.database.kubernetes_service.database",
            "module.database.local_file.cluster_manifest",
            "module.database.null_resource.cluster",
            "module.database.random_password.app_user",
            "module.database.random_password.superuser",
            "module.temporal.kubernetes_config_map.temporal",
            "module.temporal.kubernetes_deployment.temporal",
            "module.temporal.kubernetes_deployment.temporal_ui",
            "module.temporal.kubernetes_job.create_namespaces",
            "module.temporal.kubernetes_secret.temporal",
            "module.temporal.kubernetes_service.temporal",
            "module.temporal.kubernetes_service.temporal_ui",
            "module.temporal.kubernetes_service_account.temporal",
            "module.vault.helm_release.vault",
            "module.vault.kubernetes_config_map.vault_agent_config",
            "module.vault.kubernetes_job.vault_init",
            "module.vault.kubernetes_job.vault_seed"
          ]
        }
      ]
    },
    {
      "module": "module.app_plane[0]",
      "mode": "managed",
      "type": "kubernetes_service",
      "name": "cns_dashboard",
      "provider": "provider[\"registry.terraform.io/hashicorp/kubernetes\"]",
      "instances": [
        {
          "index_key": 0,
          "schema_version": 1,
          "attributes": {
            "id": "app-plane/cns-dashboard",
            "metadata": [
              {
                "annotations": {},
                "generate_name": "",
                "generation": 0,
                "labels": {
                  "app.kubernetes.io/managed-by": "terraform",
                  "app.kubernetes.io/name": "cns-dashboard",
                  "app.kubernetes.io/part-of": "ananta-app-plane",
                  "environment": "local"
                },
                "name": "cns-dashboard",
                "namespace": "app-plane",
                "resource_version": "664591",
                "uid": "e7272b80-c56b-4a64-81c1-35977ecd53e9"
              }
            ],
            "spec": [
              {
                "allocate_load_balancer_node_ports": true,
                "cluster_ip": "10.43.199.221",
                "cluster_ips": [
                  "10.43.199.221"
                ],
                "external_ips": [],
                "external_name": "",
                "external_traffic_policy": "",
                "health_check_node_port": 0,
                "internal_traffic_policy": "Cluster",
                "ip_families": [
                  "IPv4"
                ],
                "ip_family_policy": "SingleStack",
                "load_balancer_class": "",
                "load_balancer_ip": "",
                "load_balancer_source_ranges": [],
                "port": [
                  {
                    "app_protocol": "",
                    "name": "http",
                    "node_port": 0,
                    "port": 27250,
                    "protocol": "TCP",
                    "target_port": "27810"
                  }
                ],
                "publish_not_ready_addresses": false,
                "selector": {
                  "app.kubernetes.io/name": "cns-dashboard"
                },
                "session_affinity": "None",
                "session_affinity_config": [],
                "type": "ClusterIP"
              }
            ],
            "status": [
              {
                "load_balancer": [
                  {
                    "ingress": []
                  }
                ]
              }
            ],
            "timeouts": null,
            "wait_for_load_balancer": true
          },
          "sensitive_attributes": [],
          "identity_schema_version": 1,
          "identity": {
            "api_version": "v1",
            "kind": "Service",
            "name": "cns-dashboard",
            "namespace": "app-plane"
          },
          "private": "eyJlMmJmYjczMC1lY2FhLTExZTYtOGY4OC0zNDM2M2JjN2M0YzAiOnsiY3JlYXRlIjo2MDAwMDAwMDAwMDB9LCJzY2hlbWFfdmVyc2lvbiI6IjEifQ==",
          "dependencies": [
            "kubernetes_config_map.db_migrations",
            "kubernetes_job.db_migration",
            "kubernetes_namespace.app_plane",
            "kubernetes_namespace.namespaces",
            "module.cache.helm_release.redis_operator",
            "module.cache.kubernetes_manifest.prometheus_rules",
            "module.cache.kubernetes_manifest.redis_failover",
            "module.cache.kubernetes_manifest.service_monitor",
            "module.cache.kubernetes_namespace.redis",
            "module.cache.kubernetes_secret.redis_auth",
            "module.cache.kubernetes_service.redis",
            "module.cache.kubernetes_stateful_set.redis_standalone",
            "module.cache.random_password.redis_password",
            "module.database.helm_release.cloudnative_pg",
            "module.database.kubernetes_namespace.database",
            "module.database.kubernetes_secret.app_user",
            "module.database.kubernetes_secret.superuser",
            "module.database.kubernetes_service.database",
            "module.database.local_file.cluster_manifest",
            "module.database.null_resource.cluster",
            "module.database.random_password.app_user",
            "module.database.random_password.superuser",
            "module.temporal.kubernetes_config_map.temporal",
            "module.temporal.kubernetes_deployment.temporal",
            "module.temporal.kubernetes_deployment.temporal_ui",
            "module.temporal.kubernetes_job.create_namespaces",
            "module.temporal.kubernetes_secret.temporal",
            "module.temporal.kubernetes_service.temporal",
            "module.temporal.kubernetes_service.temporal_ui",
            "module.temporal.kubernetes_service_account.temporal",
            "module.vault.helm_release.vault",
            "module.vault.kubernetes_config_map.vault_agent_config",
            "module.vault.kubernetes_job.vault_init",
            "module.vault.kubernetes_job.vault_seed"
          ]
        }
      ]
    },
    {
      "module": "module.app_plane[0]",
      "mode": "managed",
      "type": "kubernetes_service",
      "name": "cns_service",
      "provider": "provider[\"registry.terraform.io/hashicorp/kubernetes\"]",
      "instances": [
        {
          "index_key": 0,
          "schema_version": 1,
          "attributes": {
            "id": "app-plane/cns-service",
            "metadata": [
              {
                "annotations": {},
                "generate_name": "",
                "generation": 0,
                "labels": {
                  "app.kubernetes.io/managed-by": "terraform",
                  "app.kubernetes.io/name": "cns-service",
                  "app.kubernetes.io/part-of": "ananta-app-plane",
                  "environment": "local"
                },
                "name": "cns-service",
                "namespace": "app-plane",
                "resource_version": "664587",
                "uid": "5ec0e961-fd6c-4628-ace4-dcca513e4395"
              }
            ],
            "spec": [
              {
                "allocate_load_balancer_node_ports": true,
                "cluster_ip": "10.43.189.126",
                "cluster_ips": [
                  "10.43.189.126"
                ],
                "external_ips": [],
                "external_name": "",
                "external_traffic_policy": "",
                "health_check_node_port": 0,
                "internal_traffic_policy": "Cluster",
                "ip_families": [
                  "IPv4"
                ],
                "ip_family_policy": "SingleStack",
                "load_balancer_class": "",
                "load_balancer_ip": "",
                "load_balancer_source_ranges": [],
                "port": [
                  {
                    "app_protocol": "",
                    "name": "http",
                    "node_port": 0,
                    "port": 27200,
                    "protocol": "TCP",
                    "target_port": "8000"
                  }
                ],
                "publish_not_ready_addresses": false,
                "selector": {
                  "app.kubernetes.io/name": "cns-service"
                },
                "session_affinity": "None",
                "session_affinity_config": [],
                "type": "ClusterIP"
              }
            ],
            "status": [
              {
                "load_balancer": [
                  {
                    "ingress": []
                  }
                ]
              }
            ],
            "timeouts": null,
            "wait_for_load_balancer": true
          },
          "sensitive_attributes": [],
          "identity_schema_version": 1,
          "identity": {
            "api_version": "v1",
            "kind": "Service",
            "name": "cns-service",
            "namespace": "app-plane"
          },
          "private": "eyJlMmJmYjczMC1lY2FhLTExZTYtOGY4OC0zNDM2M2JjN2M0YzAiOnsiY3JlYXRlIjo2MDAwMDAwMDAwMDB9LCJzY2hlbWFfdmVyc2lvbiI6IjEifQ==",
          "dependencies": [
            "kubernetes_config_map.db_migrations",
            "kubernetes_job.db_migration",
            "kubernetes_namespace.app_plane",
            "kubernetes_namespace.namespaces",
            "module.cache.helm_release.redis_operator",
            "module.cache.kubernetes_manifest.prometheus_rules",
            "module.cache.kubernetes_manifest.redis_failover",
            "module.cache.kubernetes_manifest.service_monitor",
            "module.cache.kubernetes_namespace.redis",
            "module.cache.kubernetes_secret.redis_auth",
            "module.cache.kubernetes_service.redis",
            "module.cache.kubernetes_stateful_set.redis_standalone",
            "module.cache.random_password.redis_password",
            "module.database.helm_release.cloudnative_pg",
            "module.database.kubernetes_namespace.database",
            "module.database.kubernetes_secret.app_user",
            "module.database.kubernetes_secret.superuser",
            "module.database.kubernetes_service.database",
            "module.database.local_file.cluster_manifest",
            "module.database.null_resource.cluster",
            "module.database.random_password.app_user",
            "module.database.random_password.superuser",
            "module.temporal.kubernetes_config_map.temporal",
            "module.temporal.kubernetes_deployment.temporal",
            "module.temporal.kubernetes_deployment.temporal_ui",
            "module.temporal.kubernetes_job.create_namespaces",
            "module.temporal.kubernetes_secret.temporal",
            "module.temporal.kubernetes_service.temporal",
            "module.temporal.kubernetes_service.temporal_ui",
            "module.temporal.kubernetes_service_account.temporal",
            "module.vault.helm_release.vault",
            "module.vault.kubernetes_config_map.vault_agent_config",
            "module.vault.kubernetes_job.vault_init",
            "module.vault.kubernetes_job.vault_seed"
          ]
        }
      ]
    },
    {
      "module": "module.app_plane[0]",
      "mode": "managed",
      "type": "kubernetes_service",
      "name": "components_db",
      "provider": "provider[\"registry.terraform.io/hashicorp/kubernetes\"]",
      "instances": [
        {
          "schema_version": 1,
          "attributes": {
            "id": "app-plane/components-db",
            "metadata": [
              {
                "annotations": {},
                "generate_name": "",
                "generation": 0,
                "labels": {
                  "app.kubernetes.io/managed-by": "terraform",
                  "app.kubernetes.io/name": "components-db",
                  "app.kubernetes.io/part-of": "ananta-app-plane",
                  "environment": "local"
                },
                "name": "components-db",
                "namespace": "app-plane",
                "resource_version": "88862",
                "uid": "a3be74d0-9aad-4786-867f-0afd3da0026d"
              }
            ],
            "spec": [
              {
                "allocate_load_balancer_node_ports": true,
                "cluster_ip": "10.43.83.97",
                "cluster_ips": [
                  "10.43.83.97"
                ],
                "external_ips": [],
                "external_name": "",
                "external_traffic_policy": "",
                "health_check_node_port": 0,
                "internal_traffic_policy": "Cluster",
                "ip_families": [
                  "IPv4"
                ],
                "ip_family_policy": "SingleStack",
                "load_balancer_class": "",
                "load_balancer_ip": "",
                "load_balancer_source_ranges": [],
                "port": [
                  {
                    "app_protocol": "",
                    "name": "postgres",
                    "node_port": 0,
                    "port": 5432,
                    "protocol": "TCP",
                    "target_port": "5432"
                  }
                ],
                "publish_not_ready_addresses": false,
                "selector": {
                  "app.kubernetes.io/name": "components-db"
                },
                "session_affinity": "None",
                "session_affinity_config": [],
                "type": "ClusterIP"
              }
            ],
            "status": [
              {
                "load_balancer": [
                  {
                    "ingress": []
                  }
                ]
              }
            ],
            "timeouts": null,
            "wait_for_load_balancer": true
          },
          "sensitive_attributes": [],
          "identity_schema_version": 1,
          "identity": {
            "api_version": "v1",
            "kind": "Service",
            "name": "components-db",
            "namespace": "app-plane"
          },
          "private": "eyJlMmJmYjczMC1lY2FhLTExZTYtOGY4OC0zNDM2M2JjN2M0YzAiOnsiY3JlYXRlIjo2MDAwMDAwMDAwMDB9LCJzY2hlbWFfdmVyc2lvbiI6IjEifQ==",
          "dependencies": [
            "kubernetes_config_map.db_migrations",
            "kubernetes_job.db_migration",
            "kubernetes_namespace.app_plane",
            "kubernetes_namespace.namespaces",
            "module.cache.helm_release.redis_operator",
            "module.cache.kubernetes_manifest.prometheus_rules",
            "module.cache.kubernetes_manifest.redis_failover",
            "module.cache.kubernetes_manifest.service_monitor",
            "module.cache.kubernetes_namespace.redis",
            "module.cache.kubernetes_secret.redis_auth",
            "module.cache.kubernetes_service.redis",
            "module.cache.kubernetes_stateful_set.redis_standalone",
            "module.cache.random_password.redis_password",
            "module.database.helm_release.cloudnative_pg",
            "module.database.kubernetes_namespace.database",
            "module.database.kubernetes_secret.app_user",
            "module.database.kubernetes_secret.superuser",
            "module.database.kubernetes_service.database",
            "module.database.local_file.cluster_manifest",
            "module.database.null_resource.cluster",
            "module.database.random_password.app_user",
            "module.database.random_password.superuser",
            "module.temporal.kubernetes_config_map.temporal",
            "module.temporal.kubernetes_deployment.temporal",
            "module.temporal.kubernetes_deployment.temporal_ui",
            "module.temporal.kubernetes_job.create_namespaces",
            "module.temporal.kubernetes_secret.temporal",
            "module.temporal.kubernetes_service.temporal",
            "module.temporal.kubernetes_service.temporal_ui",
            "module.temporal.kubernetes_service_account.temporal",
            "module.vault.helm_release.vault",
            "module.vault.kubernetes_config_map.vault_agent_config",
            "module.vault.kubernetes_job.vault_init",
            "module.vault.kubernetes_job.vault_seed"
          ]
        }
      ]
    },
    {
      "module": "module.app_plane[0]",
      "mode": "managed",
      "type": "kubernetes_service",
      "name": "customer_portal",
      "provider": "provider[\"registry.terraform.io/hashicorp/kubernetes\"]",
      "instances": [
        {
          "index_key": 0,
          "schema_version": 1,
          "attributes": {
            "id": "app-plane/customer-portal",
            "metadata": [
              {
                "annotations": {},
                "generate_name": "",
                "generation": 0,
                "labels": {
                  "app.kubernetes.io/managed-by": "terraform",
                  "app.kubernetes.io/name": "customer-portal",
                  "app.kubernetes.io/part-of": "ananta-app-plane",
                  "environment": "local"
                },
                "name": "customer-portal",
                "namespace": "app-plane",
                "resource_version": "664589",
                "uid": "afe20a40-fdd2-4ef5-971d-c19dbf271d0e"
              }
            ],
            "spec": [
              {
                "allocate_load_balancer_node_ports": true,
                "cluster_ip": "10.43.193.180",
                "cluster_ips": [
                  "10.43.193.180"
                ],
                "external_ips": [],
                "external_name": "",
                "external_traffic_policy": "",
                "health_check_node_port": 0,
                "internal_traffic_policy": "Cluster",
                "ip_families": [
                  "IPv4"
                ],
                "ip_family_policy": "SingleStack",
                "load_balancer_class": "",
                "load_balancer_ip": "",
                "load_balancer_source_ranges": [],
                "port": [
                  {
                    "app_protocol": "",
                    "name": "http",
                    "node_port": 0,
                    "port": 27100,
                    "protocol": "TCP",
                    "target_port": "80"
                  }
                ],
                "publish_not_ready_addresses": false,
                "selector": {
                  "app.kubernetes.io/name": "customer-portal"
                },
                "session_affinity": "None",
                "session_affinity_config": [],
                "type": "ClusterIP"
              }
            ],
            "status": [
              {
                "load_balancer": [
                  {
                    "ingress": []
                  }
                ]
              }
            ],
            "timeouts": null,
            "wait_for_load_balancer": true
          },
          "sensitive_attributes": [],
          "identity_schema_version": 1,
          "identity": {
            "api_version": "v1",
            "kind": "Service",
            "name": "customer-portal",
            "namespace": "app-plane"
          },
          "private": "eyJlMmJmYjczMC1lY2FhLTExZTYtOGY4OC0zNDM2M2JjN2M0YzAiOnsiY3JlYXRlIjo2MDAwMDAwMDAwMDB9LCJzY2hlbWFfdmVyc2lvbiI6IjEifQ==",
          "dependencies": [
            "kubernetes_config_map.db_migrations",
            "kubernetes_job.db_migration",
            "kubernetes_namespace.app_plane",
            "kubernetes_namespace.namespaces",
            "module.cache.helm_release.redis_operator",
            "module.cache.kubernetes_manifest.prometheus_rules",
            "module.cache.kubernetes_manifest.redis_failover",
            "module.cache.kubernetes_manifest.service_monitor",
            "module.cache.kubernetes_namespace.redis",
            "module.cache.kubernetes_secret.redis_auth",
            "module.cache.kubernetes_service.redis",
            "module.cache.kubernetes_stateful_set.redis_standalone",
            "module.cache.random_password.redis_password",
            "module.database.helm_release.cloudnative_pg",
            "module.database.kubernetes_namespace.database",
            "module.database.kubernetes_secret.app_user",
            "module.database.kubernetes_secret.superuser",
            "module.database.kubernetes_service.database",
            "module.database.local_file.cluster_manifest",
            "module.database.null_resource.cluster",
            "module.database.random_password.app_user",
            "module.database.random_password.superuser",
            "module.temporal.kubernetes_config_map.temporal",
            "module.temporal.kubernetes_deployment.temporal",
            "module.temporal.kubernetes_deployment.temporal_ui",
            "module.temporal.kubernetes_job.create_namespaces",
            "module.temporal.kubernetes_secret.temporal",
            "module.temporal.kubernetes_service.temporal",
            "module.temporal.kubernetes_service.temporal_ui",
            "module.temporal.kubernetes_service_account.temporal",
            "module.vault.helm_release.vault",
            "module.vault.kubernetes_config_map.vault_agent_config",
            "module.vault.kubernetes_job.vault_init",
            "module.vault.kubernetes_job.vault_seed"
          ]
        }
      ]
    },
    {
      "module": "module.app_plane[0]",
      "mode": "managed",
      "type": "kubernetes_service",
      "name": "grafana",
      "provider": "provider[\"registry.terraform.io/hashicorp/kubernetes\"]",
      "instances": []
    },
    {
      "module": "module.app_plane[0]",
      "mode": "managed",
      "type": "kubernetes_service",
      "name": "jaeger",
      "provider": "provider[\"registry.terraform.io/hashicorp/kubernetes\"]",
      "instances": []
    },
    {
      "module": "module.app_plane[0]",
      "mode": "managed",
      "type": "kubernetes_service",
      "name": "minio",
      "provider": "provider[\"registry.terraform.io/hashicorp/kubernetes\"]",
      "instances": [
        {
          "schema_version": 1,
          "attributes": {
            "id": "app-plane/minio",
            "metadata": [
              {
                "annotations": {},
                "generate_name": "",
                "generation": 0,
                "labels": {
                  "app.kubernetes.io/managed-by": "terraform",
                  "app.kubernetes.io/name": "minio",
                  "app.kubernetes.io/part-of": "ananta-app-plane",
                  "environment": "local"
                },
                "name": "minio",
                "namespace": "app-plane",
                "resource_version": "517761",
                "uid": "0c73cb77-d59e-4bc1-8b2b-545db6f94467"
              }
            ],
            "spec": [
              {
                "allocate_load_balancer_node_ports": true,
                "cluster_ip": "10.43.163.153",
                "cluster_ips": [
                  "10.43.163.153"
                ],
                "external_ips": [],
                "external_name": "",
                "external_traffic_policy": "",
                "health_check_node_port": 0,
                "internal_traffic_policy": "Cluster",
                "ip_families": [
                  "IPv4"
                ],
                "ip_family_policy": "SingleStack",
                "load_balancer_class": "",
                "load_balancer_ip": "",
                "load_balancer_source_ranges": [],
                "port": [
                  {
                    "app_protocol": "",
                    "name": "api",
                    "node_port": 0,
                    "port": 9000,
                    "protocol": "TCP",
                    "target_port": "9000"
                  },
                  {
                    "app_protocol": "",
                    "name": "console",
                    "node_port": 0,
                    "port": 9001,
                    "protocol": "TCP",
                    "target_port": "9001"
                  }
                ],
                "publish_not_ready_addresses": false,
                "selector": {
                  "app": "minio"
                },
                "session_affinity": "None",
                "session_affinity_config": [],
                "type": "ClusterIP"
              }
            ],
            "status": [
              {
                "load_balancer": [
                  {
                    "ingress": []
                  }
                ]
              }
            ],
            "timeouts": null,
            "wait_for_load_balancer": true
          },
          "sensitive_attributes": [],
          "identity_schema_version": 1,
          "identity": {
            "api_version": "v1",
            "kind": "Service",
            "name": "minio",
            "namespace": "app-plane"
          },
          "private": "eyJlMmJmYjczMC1lY2FhLTExZTYtOGY4OC0zNDM2M2JjN2M0YzAiOnsiY3JlYXRlIjo2MDAwMDAwMDAwMDB9LCJzY2hlbWFfdmVyc2lvbiI6IjEifQ==",
          "dependencies": [
            "kubernetes_config_map.db_migrations",
            "kubernetes_job.db_migration",
            "kubernetes_namespace.app_plane",
            "kubernetes_namespace.namespaces",
            "module.cache.helm_release.redis_operator",
            "module.cache.kubernetes_manifest.prometheus_rules",
            "module.cache.kubernetes_manifest.redis_failover",
            "module.cache.kubernetes_manifest.service_monitor",
            "module.cache.kubernetes_namespace.redis",
            "module.cache.kubernetes_secret.redis_auth",
            "module.cache.kubernetes_service.redis",
            "module.cache.kubernetes_stateful_set.redis_standalone",
            "module.cache.random_password.redis_password",
            "module.database.helm_release.cloudnative_pg",
            "module.database.kubernetes_namespace.database",
            "module.database.kubernetes_secret.app_user",
            "module.database.kubernetes_secret.superuser",
            "module.database.kubernetes_service.database",
            "module.database.local_file.cluster_manifest",
            "module.database.null_resource.cluster",
            "module.database.random_password.app_user",
            "module.database.random_password.superuser",
            "module.temporal.kubernetes_config_map.temporal",
            "module.temporal.kubernetes_deployment.temporal",
            "module.temporal.kubernetes_deployment.temporal_ui",
            "module.temporal.kubernetes_job.create_namespaces",
            "module.temporal.kubernetes_secret.temporal",
            "module.temporal.kubernetes_service.temporal",
            "module.temporal.kubernetes_service.temporal_ui",
            "module.temporal.kubernetes_service_account.temporal",
            "module.vault.helm_release.vault",
            "module.vault.kubernetes_config_map.vault_agent_config",
            "module.vault.kubernetes_job.vault_init",
            "module.vault.kubernetes_job.vault_seed"
          ]
        }
      ]
    },
    {
      "module": "module.app_plane[0]",
      "mode": "managed",
      "type": "kubernetes_service",
      "name": "minio_console",
      "provider": "provider[\"registry.terraform.io/hashicorp/kubernetes\"]",
      "instances": [
        {
          "schema_version": 1,
          "attributes": {
            "id": "app-plane/minio-console",
            "metadata": [
              {
                "annotations": {},
                "generate_name": "",
                "generation": 0,
                "labels": {
                  "app.kubernetes.io/managed-by": "terraform",
                  "app.kubernetes.io/name": "minio",
                  "app.kubernetes.io/part-of": "ananta-app-plane",
                  "environment": "local"
                },
                "name": "minio-console",
                "namespace": "app-plane",
                "resource_version": "521232",
                "uid": "de3b3823-409c-4d6e-b8c0-cc8c7a190533"
              }
            ],
            "spec": [
              {
                "allocate_load_balancer_node_ports": true,
                "cluster_ip": "10.43.101.112",
                "cluster_ips": [
                  "10.43.101.112"
                ],
                "external_ips": [],
                "external_name": "",
                "external_traffic_policy": "",
                "health_check_node_port": 0,
                "internal_traffic_policy": "Cluster",
                "ip_families": [
                  "IPv4"
                ],
                "ip_family_policy": "SingleStack",
                "load_balancer_class": "",
                "load_balancer_ip": "",
                "load_balancer_source_ranges": [],
                "port": [
                  {
                    "app_protocol": "",
                    "name": "console",
                    "node_port": 0,
                    "port": 9001,
                    "protocol": "TCP",
                    "target_port": "9001"
                  }
                ],
                "publish_not_ready_addresses": false,
                "selector": {
                  "app": "minio"
                },
                "session_affinity": "None",
                "session_affinity_config": [],
                "type": "ClusterIP"
              }
            ],
            "status": [
              {
                "load_balancer": [
                  {
                    "ingress": []
                  }
                ]
              }
            ],
            "timeouts": null,
            "wait_for_load_balancer": true
          },
          "sensitive_attributes": [],
          "identity_schema_version": 1,
          "identity": {
            "api_version": "v1",
            "kind": "Service",
            "name": "minio-console",
            "namespace": "app-plane"
          },
          "private": "eyJlMmJmYjczMC1lY2FhLTExZTYtOGY4OC0zNDM2M2JjN2M0YzAiOnsiY3JlYXRlIjo2MDAwMDAwMDAwMDB9LCJzY2hlbWFfdmVyc2lvbiI6IjEifQ==",
          "dependencies": [
            "kubernetes_config_map.db_migrations",
            "kubernetes_job.db_migration",
            "kubernetes_namespace.app_plane",
            "kubernetes_namespace.namespaces",
            "module.cache.helm_release.redis_operator",
            "module.cache.kubernetes_manifest.prometheus_rules",
            "module.cache.kubernetes_manifest.redis_failover",
            "module.cache.kubernetes_manifest.service_monitor",
            "module.cache.kubernetes_namespace.redis",
            "module.cache.kubernetes_secret.redis_auth",
            "module.cache.kubernetes_service.redis",
            "module.cache.kubernetes_stateful_set.redis_standalone",
            "module.cache.random_password.redis_password",
            "module.database.helm_release.cloudnative_pg",
            "module.database.kubernetes_namespace.database",
            "module.database.kubernetes_secret.app_user",
            "module.database.kubernetes_secret.superuser",
            "module.database.kubernetes_service.database",
            "module.database.local_file.cluster_manifest",
            "module.database.null_resource.cluster",
            "module.database.random_password.app_user",
            "module.database.random_password.superuser",
            "module.temporal.kubernetes_config_map.temporal",
            "module.temporal.kubernetes_deployment.temporal",
            "module.temporal.kubernetes_deployment.temporal_ui",
            "module.temporal.kubernetes_job.create_namespaces",
            "module.temporal.kubernetes_secret.temporal",
            "module.temporal.kubernetes_service.temporal",
            "module.temporal.kubernetes_service.temporal_ui",
            "module.temporal.kubernetes_service_account.temporal",
            "module.vault.helm_release.vault",
            "module.vault.kubernetes_config_map.vault_agent_config",
            "module.vault.kubernetes_job.vault_init",
            "module.vault.kubernetes_job.vault_seed"
          ]
        }
      ]
    },
    {
      "module": "module.app_plane[0]",
      "mode": "managed",
      "type": "kubernetes_service",
      "name": "minio_headless",
      "provider": "provider[\"registry.terraform.io/hashicorp/kubernetes\"]",
      "instances": [
        {
          "schema_version": 1,
          "attributes": {
            "id": "app-plane/minio-headless",
            "metadata": [
              {
                "annotations": {},
                "generate_name": "",
                "generation": 0,
                "labels": {
                  "app.kubernetes.io/managed-by": "terraform",
                  "app.kubernetes.io/name": "minio",
                  "app.kubernetes.io/part-of": "ananta-app-plane",
                  "environment": "local"
                },
                "name": "minio-headless",
                "namespace": "app-plane",
                "resource_version": "517743",
                "uid": "be359df5-7211-408b-a27f-be3c5df6d25f"
              }
            ],
            "spec": [
              {
                "allocate_load_balancer_node_ports": true,
                "cluster_ip": "None",
                "cluster_ips": [
                  "None"
                ],
                "external_ips": [],
                "external_name": "",
                "external_traffic_policy": "",
                "health_check_node_port": 0,
                "internal_traffic_policy": "Cluster",
                "ip_families": [
                  "IPv4"
                ],
                "ip_family_policy": "SingleStack",
                "load_balancer_class": "",
                "load_balancer_ip": "",
                "load_balancer_source_ranges": [],
                "port": [
                  {
                    "app_protocol": "",
                    "name": "api",
                    "node_port": 0,
                    "port": 9000,
                    "protocol": "TCP",
                    "target_port": "9000"
                  },
                  {
                    "app_protocol": "",
                    "name": "console",
                    "node_port": 0,
                    "port": 9001,
                    "protocol": "TCP",
                    "target_port": "9001"
                  }
                ],
                "publish_not_ready_addresses": true,
                "selector": {
                  "app": "minio"
                },
                "session_affinity": "None",
                "session_affinity_config": [],
                "type": "ClusterIP"
              }
            ],
            "status": [
              {
                "load_balancer": [
                  {
                    "ingress": []
                  }
                ]
              }
            ],
            "timeouts": null,
            "wait_for_load_balancer": true
          },
          "sensitive_attributes": [],
          "identity_schema_version": 1,
          "identity": {
            "api_version": "v1",
            "kind": "Service",
            "name": "minio-headless",
            "namespace": "app-plane"
          },
          "private": "eyJlMmJmYjczMC1lY2FhLTExZTYtOGY4OC0zNDM2M2JjN2M0YzAiOnsiY3JlYXRlIjo2MDAwMDAwMDAwMDB9LCJzY2hlbWFfdmVyc2lvbiI6IjEifQ==",
          "dependencies": [
            "kubernetes_config_map.db_migrations",
            "kubernetes_job.db_migration",
            "kubernetes_namespace.app_plane",
            "kubernetes_namespace.namespaces",
            "module.cache.helm_release.redis_operator",
            "module.cache.kubernetes_manifest.prometheus_rules",
            "module.cache.kubernetes_manifest.redis_failover",
            "module.cache.kubernetes_manifest.service_monitor",
            "module.cache.kubernetes_namespace.redis",
            "module.cache.kubernetes_secret.redis_auth",
            "module.cache.kubernetes_service.redis",
            "module.cache.kubernetes_stateful_set.redis_standalone",
            "module.cache.random_password.redis_password",
            "module.database.helm_release.cloudnative_pg",
            "module.database.kubernetes_namespace.database",
            "module.database.kubernetes_secret.app_user",
            "module.database.kubernetes_secret.superuser",
            "module.database.kubernetes_service.database",
            "module.database.local_file.cluster_manifest",
            "module.database.null_resource.cluster",
            "module.database.random_password.app_user",
            "module.database.random_password.superuser",
            "module.temporal.kubernetes_config_map.temporal",
            "module.temporal.kubernetes_deployment.temporal",
            "module.temporal.kubernetes_deployment.temporal_ui",
            "module.temporal.kubernetes_job.create_namespaces",
            "module.temporal.kubernetes_secret.temporal",
            "module.temporal.kubernetes_service.temporal",
            "module.temporal.kubernetes_service.temporal_ui",
            "module.temporal.kubernetes_service_account.temporal",
            "module.vault.helm_release.vault",
            "module.vault.kubernetes_config_map.vault_agent_config",
            "module.vault.kubernetes_job.vault_init",
            "module.vault.kubernetes_job.vault_seed"
          ]
        }
      ]
    },
    {
      "module": "module.app_plane[0]",
      "mode": "managed",
      "type": "kubernetes_service",
      "name": "novu_api",
      "provider": "provider[\"registry.terraform.io/hashicorp/kubernetes\"]",
      "instances": []
    },
    {
      "module": "module.app_plane[0]",
      "mode": "managed",
      "type": "kubernetes_service",
      "name": "novu_mongodb",
      "provider": "provider[\"registry.terraform.io/hashicorp/kubernetes\"]",
      "instances": []
    },
    {
      "module": "module.app_plane[0]",
      "mode": "managed",
      "type": "kubernetes_service",
      "name": "novu_redis",
      "provider": "provider[\"registry.terraform.io/hashicorp/kubernetes\"]",
      "instances": []
    },
    {
      "module": "module.app_plane[0]",
      "mode": "managed",
      "type": "kubernetes_service",
      "name": "novu_web",
      "provider": "provider[\"registry.terraform.io/hashicorp/kubernetes\"]",
      "instances": []
    },
    {
      "module": "module.app_plane[0]",
      "mode": "managed",
      "type": "kubernetes_service",
      "name": "novu_ws",
      "provider": "provider[\"registry.terraform.io/hashicorp/kubernetes\"]",
      "instances": []
    },
    {
      "module": "module.app_plane[0]",
      "mode": "managed",
      "type": "kubernetes_service",
      "name": "prometheus",
      "provider": "provider[\"registry.terraform.io/hashicorp/kubernetes\"]",
      "instances": []
    },
    {
      "module": "module.app_plane[0]",
      "mode": "managed",
      "type": "kubernetes_service",
      "name": "supabase_api",
      "provider": "provider[\"registry.terraform.io/hashicorp/kubernetes\"]",
      "instances": [
        {
          "schema_version": 1,
          "attributes": {
            "id": "app-plane/supabase-api",
            "metadata": [
              {
                "annotations": {},
                "generate_name": "",
                "generation": 0,
                "labels": {
                  "app.kubernetes.io/managed-by": "terraform",
                  "app.kubernetes.io/name": "supabase-api",
                  "app.kubernetes.io/part-of": "ananta-app-plane",
                  "environment": "local"
                },
                "name": "supabase-api",
                "namespace": "app-plane",
                "resource_version": "88871",
                "uid": "d9bceca5-dde6-4660-a4cd-b00112f0f6c8"
              }
            ],
            "spec": [
              {
                "allocate_load_balancer_node_ports": true,
                "cluster_ip": "10.43.204.177",
                "cluster_ips": [
                  "10.43.204.177"
                ],
                "external_ips": [],
                "external_name": "",
                "external_traffic_policy": "",
                "health_check_node_port": 0,
                "internal_traffic_policy": "Cluster",
                "ip_families": [
                  "IPv4"
                ],
                "ip_family_policy": "SingleStack",
                "load_balancer_class": "",
                "load_balancer_ip": "",
                "load_balancer_source_ranges": [],
                "port": [
                  {
                    "app_protocol": "",
                    "name": "http",
                    "node_port": 0,
                    "port": 3000,
                    "protocol": "TCP",
                    "target_port": "3000"
                  }
                ],
                "publish_not_ready_addresses": false,
                "selector": {
                  "app.kubernetes.io/name": "supabase-api"
                },
                "session_affinity": "None",
                "session_affinity_config": [],
                "type": "ClusterIP"
              }
            ],
            "status": [
              {
                "load_balancer": [
                  {
                    "ingress": []
                  }
                ]
              }
            ],
            "timeouts": null,
            "wait_for_load_balancer": true
          },
          "sensitive_attributes": [],
          "identity_schema_version": 1,
          "identity": {
            "api_version": "v1",
            "kind": "Service",
            "name": "supabase-api",
            "namespace": "app-plane"
          },
          "private": "eyJlMmJmYjczMC1lY2FhLTExZTYtOGY4OC0zNDM2M2JjN2M0YzAiOnsiY3JlYXRlIjo2MDAwMDAwMDAwMDB9LCJzY2hlbWFfdmVyc2lvbiI6IjEifQ==",
          "dependencies": [
            "kubernetes_config_map.db_migrations",
            "kubernetes_job.db_migration",
            "kubernetes_namespace.app_plane",
            "kubernetes_namespace.namespaces",
            "module.cache.helm_release.redis_operator",
            "module.cache.kubernetes_manifest.prometheus_rules",
            "module.cache.kubernetes_manifest.redis_failover",
            "module.cache.kubernetes_manifest.service_monitor",
            "module.cache.kubernetes_namespace.redis",
            "module.cache.kubernetes_secret.redis_auth",
            "module.cache.kubernetes_service.redis",
            "module.cache.kubernetes_stateful_set.redis_standalone",
            "module.cache.random_password.redis_password",
            "module.database.helm_release.cloudnative_pg",
            "module.database.kubernetes_namespace.database",
            "module.database.kubernetes_secret.app_user",
            "module.database.kubernetes_secret.superuser",
            "module.database.kubernetes_service.database",
            "module.database.local_file.cluster_manifest",
            "module.database.null_resource.cluster",
            "module.database.random_password.app_user",
            "module.database.random_password.superuser",
            "module.temporal.kubernetes_config_map.temporal",
            "module.temporal.kubernetes_deployment.temporal",
            "module.temporal.kubernetes_deployment.temporal_ui",
            "module.temporal.kubernetes_job.create_namespaces",
            "module.temporal.kubernetes_secret.temporal",
            "module.temporal.kubernetes_service.temporal",
            "module.temporal.kubernetes_service.temporal_ui",
            "module.temporal.kubernetes_service_account.temporal",
            "module.vault.helm_release.vault",
            "module.vault.kubernetes_config_map.vault_agent_config",
            "module.vault.kubernetes_job.vault_init",
            "module.vault.kubernetes_job.vault_seed"
          ]
        }
      ]
    },
    {
      "module": "module.app_plane[0]",
      "mode": "managed",
      "type": "kubernetes_service",
      "name": "supabase_db",
      "provider": "provider[\"registry.terraform.io/hashicorp/kubernetes\"]",
      "instances": [
        {
          "schema_version": 1,
          "attributes": {
            "id": "app-plane/supabase-db",
            "metadata": [
              {
                "annotations": {},
                "generate_name": "",
                "generation": 0,
                "labels": {
                  "app.kubernetes.io/managed-by": "terraform",
                  "app.kubernetes.io/name": "supabase-db",
                  "app.kubernetes.io/part-of": "ananta-app-plane",
                  "environment": "local"
                },
                "name": "supabase-db",
                "namespace": "app-plane",
                "resource_version": "88896",
                "uid": "d1f7f9ca-2a76-4528-b98e-747f822f43c7"
              }
            ],
            "spec": [
              {
                "allocate_load_balancer_node_ports": true,
                "cluster_ip": "10.43.79.122",
                "cluster_ips": [
                  "10.43.79.122"
                ],
                "external_ips": [],
                "external_name": "",
                "external_traffic_policy": "",
                "health_check_node_port": 0,
                "internal_traffic_policy": "Cluster",
                "ip_families": [
                  "IPv4"
                ],
                "ip_family_policy": "SingleStack",
                "load_balancer_class": "",
                "load_balancer_ip": "",
                "load_balancer_source_ranges": [],
                "port": [
                  {
                    "app_protocol": "",
                    "name": "postgres",
                    "node_port": 0,
                    "port": 5432,
                    "protocol": "TCP",
                    "target_port": "5432"
                  }
                ],
                "publish_not_ready_addresses": false,
                "selector": {
                  "app.kubernetes.io/name": "supabase-db"
                },
                "session_affinity": "None",
                "session_affinity_config": [],
                "type": "ClusterIP"
              }
            ],
            "status": [
              {
                "load_balancer": [
                  {
                    "ingress": []
                  }
                ]
              }
            ],
            "timeouts": null,
            "wait_for_load_balancer": true
          },
          "sensitive_attributes": [],
          "identity_schema_version": 1,
          "identity": {
            "api_version": "v1",
            "kind": "Service",
            "name": "supabase-db",
            "namespace": "app-plane"
          },
          "private": "eyJlMmJmYjczMC1lY2FhLTExZTYtOGY4OC0zNDM2M2JjN2M0YzAiOnsiY3JlYXRlIjo2MDAwMDAwMDAwMDB9LCJzY2hlbWFfdmVyc2lvbiI6IjEifQ==",
          "dependencies": [
            "kubernetes_config_map.db_migrations",
            "kubernetes_job.db_migration",
            "kubernetes_namespace.app_plane",
            "kubernetes_namespace.namespaces",
            "module.cache.helm_release.redis_operator",
            "module.cache.kubernetes_manifest.prometheus_rules",
            "module.cache.kubernetes_manifest.redis_failover",
            "module.cache.kubernetes_manifest.service_monitor",
            "module.cache.kubernetes_namespace.redis",
            "module.cache.kubernetes_secret.redis_auth",
            "module.cache.kubernetes_service.redis",
            "module.cache.kubernetes_stateful_set.redis_standalone",
            "module.cache.random_password.redis_password",
            "module.database.helm_release.cloudnative_pg",
            "module.database.kubernetes_namespace.database",
            "module.database.kubernetes_secret.app_user",
            "module.database.kubernetes_secret.superuser",
            "module.database.kubernetes_service.database",
            "module.database.local_file.cluster_manifest",
            "module.database.null_resource.cluster",
            "module.database.random_password.app_user",
            "module.database.random_password.superuser",
            "module.temporal.kubernetes_config_map.temporal",
            "module.temporal.kubernetes_deployment.temporal",
            "module.temporal.kubernetes_deployment.temporal_ui",
            "module.temporal.kubernetes_job.create_namespaces",
            "module.temporal.kubernetes_secret.temporal",
            "module.temporal.kubernetes_service.temporal",
            "module.temporal.kubernetes_service.temporal_ui",
            "module.temporal.kubernetes_service_account.temporal",
            "module.vault.helm_release.vault",
            "module.vault.kubernetes_config_map.vault_agent_config",
            "module.vault.kubernetes_job.vault_init",
            "module.vault.kubernetes_job.vault_seed"
          ]
        }
      ]
    },
    {
      "module": "module.app_plane[0]",
      "mode": "managed",
      "type": "kubernetes_service",
      "name": "supabase_meta",
      "provider": "provider[\"registry.terraform.io/hashicorp/kubernetes\"]",
      "instances": [
        {
          "index_key": 0,
          "schema_version": 1,
          "attributes": {
            "id": "app-plane/supabase-meta",
            "metadata": [
              {
                "annotations": {},
                "generate_name": "",
                "generation": 0,
                "labels": {
                  "app.kubernetes.io/managed-by": "terraform",
                  "app.kubernetes.io/name": "supabase-meta",
                  "app.kubernetes.io/part-of": "ananta-app-plane",
                  "environment": "local"
                },
                "name": "supabase-meta",
                "namespace": "app-plane",
                "resource_version": "517754",
                "uid": "fac109e6-8644-4144-a177-078913009229"
              }
            ],
            "spec": [
              {
                "allocate_load_balancer_node_ports": true,
                "cluster_ip": "10.43.4.101",
                "cluster_ips": [
                  "10.43.4.101"
                ],
                "external_ips": [],
                "external_name": "",
                "external_traffic_policy": "",
                "health_check_node_port": 0,
                "internal_traffic_policy": "Cluster",
                "ip_families": [
                  "IPv4"
                ],
                "ip_family_policy": "SingleStack",
                "load_balancer_class": "",
                "load_balancer_ip": "",
                "load_balancer_source_ranges": [],
                "port": [
                  {
                    "app_protocol": "",
                    "name": "http",
                    "node_port": 0,
                    "port": 8080,
                    "protocol": "TCP",
                    "target_port": "8080"
                  }
                ],
                "publish_not_ready_addresses": false,
                "selector": {
                  "app.kubernetes.io/name": "supabase-meta"
                },
                "session_affinity": "None",
                "session_affinity_config": [],
                "type": "ClusterIP"
              }
            ],
            "status": [
              {
                "load_balancer": [
                  {
                    "ingress": []
                  }
                ]
              }
            ],
            "timeouts": null,
            "wait_for_load_balancer": true
          },
          "sensitive_attributes": [],
          "identity_schema_version": 1,
          "identity": {
            "api_version": "v1",
            "kind": "Service",
            "name": "supabase-meta",
            "namespace": "app-plane"
          },
          "private": "eyJlMmJmYjczMC1lY2FhLTExZTYtOGY4OC0zNDM2M2JjN2M0YzAiOnsiY3JlYXRlIjo2MDAwMDAwMDAwMDB9LCJzY2hlbWFfdmVyc2lvbiI6IjEifQ==",
          "dependencies": [
            "kubernetes_config_map.db_migrations",
            "kubernetes_job.db_migration",
            "kubernetes_namespace.app_plane",
            "kubernetes_namespace.namespaces",
            "module.cache.helm_release.redis_operator",
            "module.cache.kubernetes_manifest.prometheus_rules",
            "module.cache.kubernetes_manifest.redis_failover",
            "module.cache.kubernetes_manifest.service_monitor",
            "module.cache.kubernetes_namespace.redis",
            "module.cache.kubernetes_secret.redis_auth",
            "module.cache.kubernetes_service.redis",
            "module.cache.kubernetes_stateful_set.redis_standalone",
            "module.cache.random_password.redis_password",
            "module.database.helm_release.cloudnative_pg",
            "module.database.kubernetes_namespace.database",
            "module.database.kubernetes_secret.app_user",
            "module.database.kubernetes_secret.superuser",
            "module.database.kubernetes_service.database",
            "module.database.local_file.cluster_manifest",
            "module.database.null_resource.cluster",
            "module.database.random_password.app_user",
            "module.database.random_password.superuser",
            "module.temporal.kubernetes_config_map.temporal",
            "module.temporal.kubernetes_deployment.temporal",
            "module.temporal.kubernetes_deployment.temporal_ui",
            "module.temporal.kubernetes_job.create_namespaces",
            "module.temporal.kubernetes_secret.temporal",
            "module.temporal.kubernetes_service.temporal",
            "module.temporal.kubernetes_service.temporal_ui",
            "module.temporal.kubernetes_service_account.temporal",
            "module.vault.helm_release.vault",
            "module.vault.kubernetes_config_map.vault_agent_config",
            "module.vault.kubernetes_job.vault_init",
            "module.vault.kubernetes_job.vault_seed"
          ]
        }
      ]
    },
    {
      "module": "module.app_plane[0]",
      "mode": "managed",
      "type": "kubernetes_service",
      "name": "supabase_studio",
      "provider": "provider[\"registry.terraform.io/hashicorp/kubernetes\"]",
      "instances": [
        {
          "index_key": 0,
          "schema_version": 1,
          "attributes": {
            "id": "app-plane/supabase-studio",
            "metadata": [
              {
                "annotations": {},
                "generate_name": "",
                "generation": 0,
                "labels": {
                  "app.kubernetes.io/managed-by": "terraform",
                  "app.kubernetes.io/name": "supabase-studio",
                  "app.kubernetes.io/part-of": "ananta-app-plane",
                  "environment": "local"
                },
                "name": "supabase-studio",
                "namespace": "app-plane",
                "resource_version": "517749",
                "uid": "fe206426-1063-4412-a3cb-dbbd2006bcbb"
              }
            ],
            "spec": [
              {
                "allocate_load_balancer_node_ports": true,
                "cluster_ip": "10.43.237.165",
                "cluster_ips": [
                  "10.43.237.165"
                ],
                "external_ips": [],
                "external_name": "",
                "external_traffic_policy": "",
                "health_check_node_port": 0,
                "internal_traffic_policy": "Cluster",
                "ip_families": [
                  "IPv4"
                ],
                "ip_family_policy": "SingleStack",
                "load_balancer_class": "",
                "load_balancer_ip": "",
                "load_balancer_source_ranges": [],
                "port": [
                  {
                    "app_protocol": "",
                    "name": "http",
                    "node_port": 0,
                    "port": 27800,
                    "protocol": "TCP",
                    "target_port": "3000"
                  }
                ],
                "publish_not_ready_addresses": false,
                "selector": {
                  "app.kubernetes.io/name": "supabase-studio"
                },
                "session_affinity": "None",
                "session_affinity_config": [],
                "type": "ClusterIP"
              }
            ],
            "status": [
              {
                "load_balancer": [
                  {
                    "ingress": []
                  }
                ]
              }
            ],
            "timeouts": null,
            "wait_for_load_balancer": true
          },
          "sensitive_attributes": [],
          "identity_schema_version": 1,
          "identity": {
            "api_version": "v1",
            "kind": "Service",
            "name": "supabase-studio",
            "namespace": "app-plane"
          },
          "private": "eyJlMmJmYjczMC1lY2FhLTExZTYtOGY4OC0zNDM2M2JjN2M0YzAiOnsiY3JlYXRlIjo2MDAwMDAwMDAwMDB9LCJzY2hlbWFfdmVyc2lvbiI6IjEifQ==",
          "dependencies": [
            "kubernetes_config_map.db_migrations",
            "kubernetes_job.db_migration",
            "kubernetes_namespace.app_plane",
            "kubernetes_namespace.namespaces",
            "module.cache.helm_release.redis_operator",
            "module.cache.kubernetes_manifest.prometheus_rules",
            "module.cache.kubernetes_manifest.redis_failover",
            "module.cache.kubernetes_manifest.service_monitor",
            "module.cache.kubernetes_namespace.redis",
            "module.cache.kubernetes_secret.redis_auth",
            "module.cache.kubernetes_service.redis",
            "module.cache.kubernetes_stateful_set.redis_standalone",
            "module.cache.random_password.redis_password",
            "module.database.helm_release.cloudnative_pg",
            "module.database.kubernetes_namespace.database",
            "module.database.kubernetes_secret.app_user",
            "module.database.kubernetes_secret.superuser",
            "module.database.kubernetes_service.database",
            "module.database.local_file.cluster_manifest",
            "module.database.null_resource.cluster",
            "module.database.random_password.app_user",
            "module.database.random_password.superuser",
            "module.temporal.kubernetes_config_map.temporal",
            "module.temporal.kubernetes_deployment.temporal",
            "module.temporal.kubernetes_deployment.temporal_ui",
            "module.temporal.kubernetes_job.create_namespaces",
            "module.temporal.kubernetes_secret.temporal",
            "module.temporal.kubernetes_service.temporal",
            "module.temporal.kubernetes_service.temporal_ui",
            "module.temporal.kubernetes_service_account.temporal",
            "module.vault.helm_release.vault",
            "module.vault.kubernetes_config_map.vault_agent_config",
            "module.vault.kubernetes_job.vault_init",
            "module.vault.kubernetes_job.vault_seed"
          ]
        }
      ]
    },
    {
      "module": "module.app_plane[0]",
      "mode": "managed",
      "type": "kubernetes_stateful_set",
      "name": "components_db",
      "provider": "provider[\"registry.terraform.io/hashicorp/kubernetes\"]",
      "instances": [
        {
          "schema_version": 1,
          "attributes": {
            "id": "app-plane/components-db",
            "metadata": [
              {
                "annotations": {},
                "generate_name": "",
                "generation": 7,
                "labels": {
                  "app.kubernetes.io/component": "database",
                  "app.kubernetes.io/managed-by": "terraform",
                  "app.kubernetes.io/name": "components-db",
                  "app.kubernetes.io/part-of": "ananta-app-plane",
                  "environment": "local"
                },
                "name": "components-db",
                "namespace": "app-plane",
                "resource_version": "519622",
                "uid": "615d31a0-d633-4271-a260-e9b378d03e23"
              }
            ],
            "spec": [
              {
                "min_ready_seconds": 0,
                "persistent_volume_claim_retention_policy": [
                  {
                    "when_deleted": "Retain",
                    "when_scaled": "Retain"
                  }
                ],
                "pod_management_policy": "OrderedReady",
                "replicas": "1",
                "revision_history_limit": 0,
                "selector": [
                  {
                    "match_expressions": [],
                    "match_labels": {
                      "app.kubernetes.io/name": "components-db"
                    }
                  }
                ],
                "service_name": "components-db",
                "template": [
                  {
                    "metadata": [
                      {
                        "annotations": {},
                        "generate_name": "",
                        "generation": 0,
                        "labels": {
                          "app.kubernetes.io/component": "database",
                          "app.kubernetes.io/managed-by": "terraform",
                          "app.kubernetes.io/name": "components-db",
                          "app.kubernetes.io/part-of": "ananta-app-plane",
                          "environment": "local"
                        },
                        "name": "",
                        "namespace": "",
                        "resource_version": "",
                        "uid": ""
                      }
                    ],
                    "spec": [
                      {
                        "active_deadline_seconds": 0,
                        "affinity": [],
                        "automount_service_account_token": true,
                        "container": [
                          {
                            "args": [],
                            "command": [],
                            "env": [],
                            "env_from": [
                              {
                                "config_map_ref": [],
                                "prefix": "",
                                "secret_ref": [
                                  {
                                    "name": "ananta-components-db-secrets",
                                    "optional": false
                                  }
                                ]
                              }
                            ],
                            "image": "postgres:15-alpine",
                            "image_pull_policy": "IfNotPresent",
                            "lifecycle": [],
                            "liveness_probe": [
                              {
                                "exec": [
                                  {
                                    "command": [
                                      "pg_isready",
                                      "-U",
                                      "postgres",
                                      "-d",
                                      "components_v2"
                                    ]
                                  }
                                ],
                                "failure_threshold": 3,
                                "grpc": [],
                                "http_get": [],
                                "initial_delay_seconds": 30,
                                "period_seconds": 30,
                                "success_threshold": 1,
                                "tcp_socket": [],
                                "timeout_seconds": 1
                              }
                            ],
                            "name": "components-db",
                            "port": [
                              {
                                "container_port": 5432,
                                "host_ip": "",
                                "host_port": 0,
                                "name": "postgres",
                                "protocol": "TCP"
                              }
                            ],
                            "readiness_probe": [
                              {
                                "exec": [
                                  {
                                    "command": [
                                      "pg_isready",
                                      "-U",
                                      "postgres",
                                      "-d",
                                      "components_v2"
                                    ]
                                  }
                                ],
                                "failure_threshold": 3,
                                "grpc": [],
                                "http_get": [],
                                "initial_delay_seconds": 10,
                                "period_seconds": 10,
                                "success_threshold": 1,
                                "tcp_socket": [],
                                "timeout_seconds": 1
                              }
                            ],
                            "resources": [
                              {
                                "limits": {
                                  "cpu": "250m",
                                  "memory": "256Mi"
                                },
                                "requests": {
                                  "cpu": "250m",
                                  "memory": "256Mi"
                                }
                              }
                            ],
                            "restart_policy": "",
                            "security_context": [],
                            "startup_probe": [],
                            "stdin": false,
                            "stdin_once": false,
                            "termination_message_path": "/dev/termination-log",
                            "termination_message_policy": "File",
                            "tty": false,
                            "volume_device": [],
                            "volume_mount": [
                              {
                                "mount_path": "/var/lib/postgresql/data",
                                "mount_propagation": "None",
                                "name": "data",
                                "read_only": false,
                                "sub_path": "pgdata",
                                "sub_path_expr": ""
                              }
                            ],
                            "working_dir": ""
                          }
                        ],
                        "dns_config": [],
                        "dns_policy": "ClusterFirst",
                        "enable_service_links": true,
                        "host_aliases": [],
                        "host_ipc": false,
                        "host_network": false,
                        "host_pid": false,
                        "hostname": "",
                        "image_pull_secrets": [],
                        "init_container": [],
                        "node_name": "",
                        "node_selector": {},
                        "os": [],
                        "priority_class_name": "",
                        "readiness_gate": [],
                        "restart_policy": "Always",
                        "runtime_class_name": "",
                        "scheduler_name": "default-scheduler",
                        "security_context": [],
                        "service_account_name": "",
                        "share_process_namespace": false,
                        "subdomain": "",
                        "termination_grace_period_seconds": 30,
                        "toleration": [],
                        "topology_spread_constraint": [],
                        "volume": []
                      }
                    ]
                  }
                ],
                "update_strategy": [],
                "volume_claim_template": [
                  {
                    "metadata": [
                      {
                        "annotations": {},
                        "generate_name": "",
                        "generation": 0,
                        "labels": {
                          "app.kubernetes.io/managed-by": "terraform",
                          "app.kubernetes.io/part-of": "ananta-app-plane",
                          "environment": "local"
                        },
                        "name": "data",
                        "namespace": "default",
                        "resource_version": "",
                        "uid": ""
                      }
                    ],
                    "spec": [
                      {
                        "access_modes": [
                          "ReadWriteOnce"
                        ],
                        "resources": [
                          {
                            "limits": {},
                            "requests": {
                              "storage": "5Gi"
                            }
                          }
                        ],
                        "selector": [],
                        "storage_class_name": "local-path",
                        "volume_mode": "Filesystem",
                        "volume_name": ""
                      }
                    ]
                  }
                ]
              }
            ],
            "timeouts": null,
            "wait_for_rollout": true
          },
          "sensitive_attributes": [],
          "identity_schema_version": 1,
          "identity": {
            "api_version": "apps/v1",
            "kind": "StatefulSet",
            "name": "components-db",
            "namespace": "app-plane"
          },
          "private": "eyJlMmJmYjczMC1lY2FhLTExZTYtOGY4OC0zNDM2M2JjN2M0YzAiOnsiY3JlYXRlIjo2MDAwMDAwMDAwMDAsImRlbGV0ZSI6NjAwMDAwMDAwMDAwLCJyZWFkIjo2MDAwMDAwMDAwMDAsInVwZGF0ZSI6NjAwMDAwMDAwMDAwfSwic2NoZW1hX3ZlcnNpb24iOiIxIn0=",
          "dependencies": [
            "kubernetes_config_map.db_migrations",
            "kubernetes_job.db_migration",
            "kubernetes_namespace.app_plane",
            "kubernetes_namespace.namespaces",
            "module.app_plane.kubernetes_secret.components_db",
            "module.cache.helm_release.redis_operator",
            "module.cache.kubernetes_manifest.prometheus_rules",
            "module.cache.kubernetes_manifest.redis_failover",
            "module.cache.kubernetes_manifest.service_monitor",
            "module.cache.kubernetes_namespace.redis",
            "module.cache.kubernetes_secret.redis_auth",
            "module.cache.kubernetes_service.redis",
            "module.cache.kubernetes_stateful_set.redis_standalone",
            "module.cache.random_password.redis_password",
            "module.database.helm_release.cloudnative_pg",
            "module.database.kubernetes_namespace.database",
            "module.database.kubernetes_secret.app_user",
            "module.database.kubernetes_secret.superuser",
            "module.database.kubernetes_service.database",
            "module.database.local_file.cluster_manifest",
            "module.database.null_resource.cluster",
            "module.database.random_password.app_user",
            "module.database.random_password.superuser",
            "module.temporal.kubernetes_config_map.temporal",
            "module.temporal.kubernetes_deployment.temporal",
            "module.temporal.kubernetes_deployment.temporal_ui",
            "module.temporal.kubernetes_job.create_namespaces",
            "module.temporal.kubernetes_secret.temporal",
            "module.temporal.kubernetes_service.temporal",
            "module.temporal.kubernetes_service.temporal_ui",
            "module.temporal.kubernetes_service_account.temporal",
            "module.vault.helm_release.vault",
            "module.vault.kubernetes_config_map.vault_agent_config",
            "module.vault.kubernetes_job.vault_init",
            "module.vault.kubernetes_job.vault_seed"
          ]
        }
      ]
    },
    {
      "module": "module.app_plane[0]",
      "mode": "managed",
      "type": "kubernetes_stateful_set",
      "name": "minio",
      "provider": "provider[\"registry.terraform.io/hashicorp/kubernetes\"]",
      "instances": [
        {
          "schema_version": 1,
          "attributes": {
            "id": "app-plane/minio",
            "metadata": [
              {
                "annotations": {},
                "generate_name": "",
                "generation": 1,
                "labels": {
                  "app": "minio",
                  "app.kubernetes.io/component": "storage",
                  "app.kubernetes.io/managed-by": "terraform",
                  "app.kubernetes.io/name": "minio",
                  "app.kubernetes.io/part-of": "ananta-app-plane",
                  "environment": "local"
                },
                "name": "minio",
                "namespace": "app-plane",
                "resource_version": "521374",
                "uid": "5c7b3666-6996-4cc9-8b73-7ffd40cd9ac2"
              }
            ],
            "spec": [
              {
                "min_ready_seconds": 0,
                "persistent_volume_claim_retention_policy": [
                  {
                    "when_deleted": "Retain",
                    "when_scaled": "Retain"
                  }
                ],
                "pod_management_policy": "OrderedReady",
                "replicas": "1",
                "revision_history_limit": 0,
                "selector": [
                  {
                    "match_expressions": [],
                    "match_labels": {
                      "app": "minio"
                    }
                  }
                ],
                "service_name": "minio-headless",
                "template": [
                  {
                    "metadata": [
                      {
                        "annotations": {},
                        "generate_name": "",
                        "generation": 0,
                        "labels": {
                          "app": "minio",
                          "app.kubernetes.io/component": "storage",
                          "app.kubernetes.io/managed-by": "terraform",
                          "app.kubernetes.io/name": "minio",
                          "app.kubernetes.io/part-of": "ananta-app-plane",
                          "environment": "local"
                        },
                        "name": "",
                        "namespace": "",
                        "resource_version": "",
                        "uid": ""
                      }
                    ],
                    "spec": [
                      {
                        "active_deadline_seconds": 0,
                        "affinity": [],
                        "automount_service_account_token": true,
                        "container": [
                          {
                            "args": [
                              "server",
                              "/data",
                              "--console-address",
                              ":9001"
                            ],
                            "command": [],
                            "env": [
                              {
                                "name": "MINIO_ROOT_USER",
                                "value": "",
                                "value_from": [
                                  {
                                    "config_map_key_ref": [],
                                    "field_ref": [],
                                    "resource_field_ref": [],
                                    "secret_key_ref": [
                                      {
                                        "key": "rootUser",
                                        "name": "minio",
                                        "optional": false
                                      }
                                    ]
                                  }
                                ]
                              },
                              {
                                "name": "MINIO_ROOT_PASSWORD",
                                "value": "",
                                "value_from": [
                                  {
                                    "config_map_key_ref": [],
                                    "field_ref": [],
                                    "resource_field_ref": [],
                                    "secret_key_ref": [
                                      {
                                        "key": "rootPassword",
                                        "name": "minio",
                                        "optional": false
                                      }
                                    ]
                                  }
                                ]
                              }
                            ],
                            "env_from": [],
                            "image": "minio/minio:latest",
                            "image_pull_policy": "Always",
                            "lifecycle": [],
                            "liveness_probe": [
                              {
                                "exec": [],
                                "failure_threshold": 3,
                                "grpc": [],
                                "http_get": [
                                  {
                                    "host": "",
                                    "http_header": [],
                                    "path": "/minio/health/live",
                                    "port": "9000",
                                    "scheme": "HTTP"
                                  }
                                ],
                                "initial_delay_seconds": 30,
                                "period_seconds": 10,
                                "success_threshold": 1,
                                "tcp_socket": [],
                                "timeout_seconds": 1
                              }
                            ],
                            "name": "minio",
                            "port": [
                              {
                                "container_port": 9000,
                                "host_ip": "",
                                "host_port": 0,
                                "name": "api",
                                "protocol": "TCP"
                              },
                              {
                                "container_port": 9001,
                                "host_ip": "",
                                "host_port": 0,
                                "name": "console",
                                "protocol": "TCP"
                              }
                            ],
                            "readiness_probe": [
                              {
                                "exec": [],
                                "failure_threshold": 3,
                                "grpc": [],
                                "http_get": [
                                  {
                                    "host": "",
                                    "http_header": [],
                                    "path": "/minio/health/ready",
                                    "port": "9000",
                                    "scheme": "HTTP"
                                  }
                                ],
                                "initial_delay_seconds": 5,
                                "period_seconds": 10,
                                "success_threshold": 1,
                                "tcp_socket": [],
                                "timeout_seconds": 1
                              }
                            ],
                            "resources": [
                              {
                                "limits": {
                                  "cpu": "250m",
                                  "memory": "256Mi"
                                },
                                "requests": {
                                  "cpu": "250m",
                                  "memory": "256Mi"
                                }
                              }
                            ],
                            "restart_policy": "",
                            "security_context": [],
                            "startup_probe": [],
                            "stdin": false,
                            "stdin_once": false,
                            "termination_message_path": "/dev/termination-log",
                            "termination_message_policy": "File",
                            "tty": false,
                            "volume_device": [],
                            "volume_mount": [
                              {
                                "mount_path": "/data",
                                "mount_propagation": "None",
                                "name": "data",
                                "read_only": false,
                                "sub_path": "",
                                "sub_path_expr": ""
                              }
                            ],
                            "working_dir": ""
                          }
                        ],
                        "dns_config": [],
                        "dns_policy": "ClusterFirst",
                        "enable_service_links": true,
                        "host_aliases": [],
                        "host_ipc": false,
                        "host_network": false,
                        "host_pid": false,
                        "hostname": "",
                        "image_pull_secrets": [],
                        "init_container": [],
                        "node_name": "",
                        "node_selector": {},
                        "os": [],
                        "priority_class_name": "",
                        "readiness_gate": [],
                        "restart_policy": "Always",
                        "runtime_class_name": "",
                        "scheduler_name": "default-scheduler",
                        "security_context": [],
                        "service_account_name": "",
                        "share_process_namespace": false,
                        "subdomain": "",
                        "termination_grace_period_seconds": 30,
                        "toleration": [],
                        "topology_spread_constraint": [],
                        "volume": []
                      }
                    ]
                  }
                ],
                "update_strategy": [
                  {
                    "rolling_update": [],
                    "type": "RollingUpdate"
                  }
                ],
                "volume_claim_template": [
                  {
                    "metadata": [
                      {
                        "annotations": {},
                        "generate_name": "",
                        "generation": 0,
                        "labels": {},
                        "name": "data",
                        "namespace": "default",
                        "resource_version": "",
                        "uid": ""
                      }
                    ],
                    "spec": [
                      {
                        "access_modes": [
                          "ReadWriteOnce"
                        ],
                        "resources": [
                          {
                            "limits": {},
                            "requests": {
                              "storage": "10Gi"
                            }
                          }
                        ],
                        "selector": [],
                        "storage_class_name": "local-path",
                        "volume_mode": "Filesystem",
                        "volume_name": ""
                      }
                    ]
                  }
                ]
              }
            ],
            "timeouts": null,
            "wait_for_rollout": true
          },
          "sensitive_attributes": [],
          "identity_schema_version": 1,
          "identity": {
            "api_version": "apps/v1",
            "kind": "StatefulSet",
            "name": "minio",
            "namespace": "app-plane"
          },
          "private": "eyJlMmJmYjczMC1lY2FhLTExZTYtOGY4OC0zNDM2M2JjN2M0YzAiOnsiY3JlYXRlIjo2MDAwMDAwMDAwMDAsImRlbGV0ZSI6NjAwMDAwMDAwMDAwLCJyZWFkIjo2MDAwMDAwMDAwMDAsInVwZGF0ZSI6NjAwMDAwMDAwMDAwfSwic2NoZW1hX3ZlcnNpb24iOiIxIn0=",
          "dependencies": [
            "kubernetes_config_map.db_migrations",
            "kubernetes_job.db_migration",
            "kubernetes_namespace.app_plane",
            "kubernetes_namespace.namespaces",
            "module.app_plane.kubernetes_secret.minio",
            "module.cache.helm_release.redis_operator",
            "module.cache.kubernetes_manifest.prometheus_rules",
            "module.cache.kubernetes_manifest.redis_failover",
            "module.cache.kubernetes_manifest.service_monitor",
            "module.cache.kubernetes_namespace.redis",
            "module.cache.kubernetes_secret.redis_auth",
            "module.cache.kubernetes_service.redis",
            "module.cache.kubernetes_stateful_set.redis_standalone",
            "module.cache.random_password.redis_password",
            "module.database.helm_release.cloudnative_pg",
            "module.database.kubernetes_namespace.database",
            "module.database.kubernetes_secret.app_user",
            "module.database.kubernetes_secret.superuser",
            "module.database.kubernetes_service.database",
            "module.database.local_file.cluster_manifest",
            "module.database.null_resource.cluster",
            "module.database.random_password.app_user",
            "module.database.random_password.superuser",
            "module.temporal.kubernetes_config_map.temporal",
            "module.temporal.kubernetes_deployment.temporal",
            "module.temporal.kubernetes_deployment.temporal_ui",
            "module.temporal.kubernetes_job.create_namespaces",
            "module.temporal.kubernetes_secret.temporal",
            "module.temporal.kubernetes_service.temporal",
            "module.temporal.kubernetes_service.temporal_ui",
            "module.temporal.kubernetes_service_account.temporal",
            "module.vault.helm_release.vault",
            "module.vault.kubernetes_config_map.vault_agent_config",
            "module.vault.kubernetes_job.vault_init",
            "module.vault.kubernetes_job.vault_seed"
          ]
        }
      ]
    },
    {
      "module": "module.app_plane[0]",
      "mode": "managed",
      "type": "kubernetes_stateful_set",
      "name": "novu_mongodb",
      "provider": "provider[\"registry.terraform.io/hashicorp/kubernetes\"]",
      "instances": []
    },
    {
      "module": "module.app_plane[0]",
      "mode": "managed",
      "type": "kubernetes_stateful_set",
      "name": "supabase_db",
      "provider": "provider[\"registry.terraform.io/hashicorp/kubernetes\"]",
      "instances": [
        {
          "schema_version": 1,
          "attributes": {
            "id": "app-plane/supabase-db",
            "metadata": [
              {
                "annotations": {},
                "generate_name": "",
                "generation": 7,
                "labels": {
                  "app.kubernetes.io/component": "database",
                  "app.kubernetes.io/managed-by": "terraform",
                  "app.kubernetes.io/name": "supabase-db",
                  "app.kubernetes.io/part-of": "ananta-app-plane",
                  "environment": "local"
                },
                "name": "supabase-db",
                "namespace": "app-plane",
                "resource_version": "519630",
                "uid": "d19d31ed-ce03-4b9c-9fc2-f69993e95508"
              }
            ],
            "spec": [
              {
                "min_ready_seconds": 0,
                "persistent_volume_claim_retention_policy": [
                  {
                    "when_deleted": "Retain",
                    "when_scaled": "Retain"
                  }
                ],
                "pod_management_policy": "OrderedReady",
                "replicas": "1",
                "revision_history_limit": 0,
                "selector": [
                  {
                    "match_expressions": [],
                    "match_labels": {
                      "app.kubernetes.io/name": "supabase-db"
                    }
                  }
                ],
                "service_name": "supabase-db",
                "template": [
                  {
                    "metadata": [
                      {
                        "annotations": {},
                        "generate_name": "",
                        "generation": 0,
                        "labels": {
                          "app.kubernetes.io/component": "database",
                          "app.kubernetes.io/managed-by": "terraform",
                          "app.kubernetes.io/name": "supabase-db",
                          "app.kubernetes.io/part-of": "ananta-app-plane",
                          "environment": "local"
                        },
                        "name": "",
                        "namespace": "",
                        "resource_version": "",
                        "uid": ""
                      }
                    ],
                    "spec": [
                      {
                        "active_deadline_seconds": 0,
                        "affinity": [],
                        "automount_service_account_token": true,
                        "container": [
                          {
                            "args": [],
                            "command": [],
                            "env": [],
                            "env_from": [
                              {
                                "config_map_ref": [],
                                "prefix": "",
                                "secret_ref": [
                                  {
                                    "name": "ananta-supabase-db-secrets",
                                    "optional": false
                                  }
                                ]
                              }
                            ],
                            "image": "supabase/postgres:15.1.0.147",
                            "image_pull_policy": "IfNotPresent",
                            "lifecycle": [],
                            "liveness_probe": [
                              {
                                "exec": [
                                  {
                                    "command": [
                                      "pg_isready",
                                      "-U",
                                      "postgres"
                                    ]
                                  }
                                ],
                                "failure_threshold": 3,
                                "grpc": [],
                                "http_get": [],
                                "initial_delay_seconds": 30,
                                "period_seconds": 30,
                                "success_threshold": 1,
                                "tcp_socket": [],
                                "timeout_seconds": 1
                              }
                            ],
                            "name": "supabase-db",
                            "port": [
                              {
                                "container_port": 5432,
                                "host_ip": "",
                                "host_port": 0,
                                "name": "postgres",
                                "protocol": "TCP"
                              }
                            ],
                            "readiness_probe": [
                              {
                                "exec": [
                                  {
                                    "command": [
                                      "pg_isready",
                                      "-U",
                                      "postgres"
                                    ]
                                  }
                                ],
                                "failure_threshold": 3,
                                "grpc": [],
                                "http_get": [],
                                "initial_delay_seconds": 10,
                                "period_seconds": 10,
                                "success_threshold": 1,
                                "tcp_socket": [],
                                "timeout_seconds": 1
                              }
                            ],
                            "resources": [
                              {
                                "limits": {
                                  "cpu": "500m",
                                  "memory": "512Mi"
                                },
                                "requests": {
                                  "cpu": "500m",
                                  "memory": "512Mi"
                                }
                              }
                            ],
                            "restart_policy": "",
                            "security_context": [],
                            "startup_probe": [],
                            "stdin": false,
                            "stdin_once": false,
                            "termination_message_path": "/dev/termination-log",
                            "termination_message_policy": "File",
                            "tty": false,
                            "volume_device": [],
                            "volume_mount": [
                              {
                                "mount_path": "/var/lib/postgresql/data",
                                "mount_propagation": "None",
                                "name": "data",
                                "read_only": false,
                                "sub_path": "pgdata",
                                "sub_path_expr": ""
                              },
                              {
                                "mount_path": "/docker-entrypoint-initdb.d",
                                "mount_propagation": "None",
                                "name": "init-scripts",
                                "read_only": false,
                                "sub_path": "",
                                "sub_path_expr": ""
                              }
                            ],
                            "working_dir": ""
                          }
                        ],
                        "dns_config": [],
                        "dns_policy": "ClusterFirst",
                        "enable_service_links": true,
                        "host_aliases": [],
                        "host_ipc": false,
                        "host_network": false,
                        "host_pid": false,
                        "hostname": "",
                        "image_pull_secrets": [],
                        "init_container": [],
                        "node_name": "",
                        "node_selector": {},
                        "os": [],
                        "priority_class_name": "",
                        "readiness_gate": [],
                        "restart_policy": "Always",
                        "runtime_class_name": "",
                        "scheduler_name": "default-scheduler",
                        "security_context": [],
                        "service_account_name": "",
                        "share_process_namespace": false,
                        "subdomain": "",
                        "termination_grace_period_seconds": 30,
                        "toleration": [],
                        "topology_spread_constraint": [],
                        "volume": [
                          {
                            "aws_elastic_block_store": [],
                            "azure_disk": [],
                            "azure_file": [],
                            "ceph_fs": [],
                            "cinder": [],
                            "config_map": [
                              {
                                "default_mode": "0644",
                                "items": [],
                                "name": "ananta-supabase-init",
                                "optional": false
                              }
                            ],
                            "csi": [],
                            "downward_api": [],
                            "empty_dir": [],
                            "ephemeral": [],
                            "fc": [],
                            "flex_volume": [],
                            "flocker": [],
                            "gce_persistent_disk": [],
                            "git_repo": [],
                            "glusterfs": [],
                            "host_path": [],
                            "iscsi": [],
                            "local": [],
                            "name": "init-scripts",
                            "nfs": [],
                            "persistent_volume_claim": [],
                            "photon_persistent_disk": [],
                            "projected": [],
                            "quobyte": [],
                            "rbd": [],
                            "secret": [],
                            "vsphere_volume": []
                          }
                        ]
                      }
                    ]
                  }
                ],
                "update_strategy": [],
                "volume_claim_template": [
                  {
                    "metadata": [
                      {
                        "annotations": {},
                        "generate_name": "",
                        "generation": 0,
                        "labels": {
                          "app.kubernetes.io/managed-by": "terraform",
                          "app.kubernetes.io/part-of": "ananta-app-plane",
                          "environment": "local"
                        },
                        "name": "data",
                        "namespace": "default",
                        "resource_version": "",
                        "uid": ""
                      }
                    ],
                    "spec": [
                      {
                        "access_modes": [
                          "ReadWriteOnce"
                        ],
                        "resources": [
                          {
                            "limits": {},
                            "requests": {
                              "storage": "10Gi"
                            }
                          }
                        ],
                        "selector": [],
                        "storage_class_name": "local-path",
                        "volume_mode": "Filesystem",
                        "volume_name": ""
                      }
                    ]
                  }
                ]
              }
            ],
            "timeouts": null,
            "wait_for_rollout": true
          },
          "sensitive_attributes": [],
          "identity_schema_version": 1,
          "identity": {
            "api_version": "apps/v1",
            "kind": "StatefulSet",
            "name": "supabase-db",
            "namespace": "app-plane"
          },
          "private": "eyJlMmJmYjczMC1lY2FhLTExZTYtOGY4OC0zNDM2M2JjN2M0YzAiOnsiY3JlYXRlIjo2MDAwMDAwMDAwMDAsImRlbGV0ZSI6NjAwMDAwMDAwMDAwLCJyZWFkIjo2MDAwMDAwMDAwMDAsInVwZGF0ZSI6NjAwMDAwMDAwMDAwfSwic2NoZW1hX3ZlcnNpb24iOiIxIn0=",
          "dependencies": [
            "kubernetes_config_map.db_migrations",
            "kubernetes_job.db_migration",
            "kubernetes_namespace.app_plane",
            "kubernetes_namespace.namespaces",
            "module.app_plane.kubernetes_config_map.supabase_init",
            "module.app_plane.kubernetes_secret.supabase_db",
            "module.cache.helm_release.redis_operator",
            "module.cache.kubernetes_manifest.prometheus_rules",
            "module.cache.kubernetes_manifest.redis_failover",
            "module.cache.kubernetes_manifest.service_monitor",
            "module.cache.kubernetes_namespace.redis",
            "module.cache.kubernetes_secret.redis_auth",
            "module.cache.kubernetes_service.redis",
            "module.cache.kubernetes_stateful_set.redis_standalone",
            "module.cache.random_password.redis_password",
            "module.database.helm_release.cloudnative_pg",
            "module.database.kubernetes_namespace.database",
            "module.database.kubernetes_secret.app_user",
            "module.database.kubernetes_secret.superuser",
            "module.database.kubernetes_service.database",
            "module.database.local_file.cluster_manifest",
            "module.database.null_resource.cluster",
            "module.database.random_password.app_user",
            "module.database.random_password.superuser",
            "module.temporal.kubernetes_config_map.temporal",
            "module.temporal.kubernetes_deployment.temporal",
            "module.temporal.kubernetes_deployment.temporal_ui",
            "module.temporal.kubernetes_job.create_namespaces",
            "module.temporal.kubernetes_secret.temporal",
            "module.temporal.kubernetes_service.temporal",
            "module.temporal.kubernetes_service.temporal_ui",
            "module.temporal.kubernetes_service_account.temporal",
            "module.vault.helm_release.vault",
            "module.vault.kubernetes_config_map.vault_agent_config",
            "module.vault.kubernetes_job.vault_init",
            "module.vault.kubernetes_job.vault_seed"
          ]
        }
      ]
    },
    {
      "module": "module.cache",
      "mode": "managed",
      "type": "helm_release",
      "name": "redis_operator",
      "provider": "provider[\"registry.terraform.io/hashicorp/helm\"]",
      "instances": [
        {
          "index_key": 0,
          "schema_version": 2,
          "attributes": {
            "atomic": false,
            "chart": "redis-operator",
            "cleanup_on_fail": false,
            "create_namespace": true,
            "dependency_update": false,
            "description": null,
            "devel": null,
            "disable_crd_hooks": false,
            "disable_openapi_validation": false,
            "disable_webhooks": false,
            "force_update": false,
            "id": "redis-operator",
            "keyring": null,
            "lint": false,
            "manifest": null,
            "max_history": 0,
            "metadata": {
              "app_version": "1.2.4",
              "chart": "redis-operator",
              "first_deployed": 1767822573,
              "last_deployed": 1767822573,
              "name": "redis-operator",
              "namespace": "redis-operator",
              "notes": "",
              "revision": 1,
              "values": "{\"resources\":{\"limits\":{\"cpu\":\"100m\",\"memory\":\"128Mi\"},\"requests\":{\"cpu\":\"50m\",\"memory\":\"64Mi\"}}}",
              "version": "3.2.9"
            },
            "name": "redis-operator",
            "namespace": "redis-operator",
            "pass_credentials": false,
            "postrender": null,
            "recreate_pods": false,
            "render_subchart_notes": true,
            "replace": false,
            "repository": "https://spotahome.github.io/redis-operator",
            "repository_ca_file": null,
            "repository_cert_file": null,
            "repository_key_file": null,
            "repository_password": null,
            "repository_username": null,
            "reset_values": false,
            "resources": null,
            "reuse_values": false,
            "set": null,
            "set_list": null,
            "set_sensitive": null,
            "set_wo": null,
            "set_wo_revision": null,
            "skip_crds": false,
            "status": "deployed",
            "take_ownership": false,
            "timeout": 300,
            "timeouts": null,
            "upgrade_install": false,
            "values": [
              "\"resources\":\n  \"limits\":\n    \"cpu\": \"100m\"\n    \"memory\": \"128Mi\"\n  \"requests\":\n    \"cpu\": \"50m\"\n    \"memory\": \"64Mi\"\n"
            ],
            "verify": false,
            "version": "3.2.9",
            "wait": true,
            "wait_for_jobs": false
          },
          "sensitive_attributes": [
            [
              {
                "type": "get_attr",
                "value": "repository_password"
              }
            ]
          ],
          "identity_schema_version": 0,
          "identity": {
            "namespace": "redis-operator",
            "release_name": "redis-operator"
          },
          "dependencies": [
            "kubernetes_namespace.namespaces",
            "module.cache.kubernetes_namespace.redis",
            "module.vault.helm_release.vault",
            "module.vault.kubernetes_config_map.vault_agent_config",
            "module.vault.kubernetes_job.vault_init",
            "module.vault.kubernetes_job.vault_seed"
          ]
        }
      ]
    },
    {
      "module": "module.cache",
      "mode": "managed",
      "type": "kubernetes_manifest",
      "name": "prometheus_rules",
      "provider": "provider[\"registry.terraform.io/hashicorp/kubernetes\"]",
      "instances": []
    },
    {
      "module": "module.cache",
      "mode": "managed",
      "type": "kubernetes_manifest",
      "name": "redis_failover",
      "provider": "provider[\"registry.terraform.io/hashicorp/kubernetes\"]",
      "instances": []
    },
    {
      "module": "module.cache",
      "mode": "managed",
      "type": "kubernetes_manifest",
      "name": "service_monitor",
      "provider": "provider[\"registry.terraform.io/hashicorp/kubernetes\"]",
      "instances": []
    },
    {
      "module": "module.cache",
      "mode": "managed",
      "type": "kubernetes_namespace",
      "name": "redis",
      "provider": "provider[\"registry.terraform.io/hashicorp/kubernetes\"]",
      "instances": []
    },
    {
      "module": "module.cache",
      "mode": "managed",
      "type": "kubernetes_secret",
      "name": "redis_auth",
      "provider": "provider[\"registry.terraform.io/hashicorp/kubernetes\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "binary_data": null,
            "binary_data_wo": null,
            "binary_data_wo_revision": null,
            "data": {
              "password": "rHQ9xmHIiCuGF5pj7LqmBMd1UrkjJOpR"
            },
            "data_wo": null,
            "data_wo_revision": null,
            "id": "cache-system/ananta-redis-auth",
            "immutable": false,
            "metadata": [
              {
                "annotations": {},
                "generate_name": "",
                "generation": 0,
                "labels": {
                  "app.kubernetes.io/component": "cache",
                  "app.kubernetes.io/instance": "ananta-redis",
                  "app.kubernetes.io/managed-by": "terraform",
                  "app.kubernetes.io/name": "redis",
                  "app.kubernetes.io/part-of": "ananta-platform",
                  "environment": "local"
                },
                "name": "ananta-redis-auth",
                "namespace": "cache-system",
                "resource_version": "21763",
                "uid": "e5a748af-cfd7-45ea-8fe0-87b3f46d5202"
              }
            ],
            "timeouts": null,
            "type": "Opaque",
            "wait_for_service_account_token": true
          },
          "sensitive_attributes": [
            [
              {
                "type": "get_attr",
                "value": "binary_data"
              }
            ],
            [
              {
                "type": "get_attr",
                "value": "data"
              }
            ],
            [
              {
                "type": "get_attr",
                "value": "data"
              },
              {
                "type": "index",
                "value": {
                  "value": "password",
                  "type": "string"
                }
              }
            ]
          ],
          "identity_schema_version": 1,
          "identity": {
            "api_version": "v1",
            "kind": "Secret",
            "name": "ananta-redis-auth",
            "namespace": "cache-system"
          },
          "private": "eyJlMmJmYjczMC1lY2FhLTExZTYtOGY4OC0zNDM2M2JjN2M0YzAiOnsiY3JlYXRlIjo2MDAwMDAwMDAwMH19",
          "dependencies": [
            "kubernetes_namespace.namespaces",
            "module.cache.kubernetes_namespace.redis",
            "module.cache.random_password.redis_password",
            "module.vault.helm_release.vault",
            "module.vault.kubernetes_config_map.vault_agent_config",
            "module.vault.kubernetes_job.vault_init",
            "module.vault.kubernetes_job.vault_seed"
          ]
        }
      ]
    },
    {
      "module": "module.cache",
      "mode": "managed",
      "type": "kubernetes_service",
      "name": "redis",
      "provider": "provider[\"registry.terraform.io/hashicorp/kubernetes\"]",
      "instances": [
        {
          "index_key": 0,
          "schema_version": 1,
          "attributes": {
            "id": "cache-system/ananta-redis",
            "metadata": [
              {
                "annotations": {},
                "generate_name": "",
                "generation": 0,
                "labels": {
                  "app.kubernetes.io/component": "cache",
                  "app.kubernetes.io/instance": "ananta-redis",
                  "app.kubernetes.io/managed-by": "terraform",
                  "app.kubernetes.io/name": "redis",
                  "app.kubernetes.io/part-of": "ananta-platform",
                  "environment": "local"
                },
                "name": "ananta-redis",
                "namespace": "cache-system",
                "resource_version": "21855",
                "uid": "785b8d3d-ec76-48a5-ac02-018e0eac81b7"
              }
            ],
            "spec": [
              {
                "allocate_load_balancer_node_ports": true,
                "cluster_ip": "10.43.25.84",
                "cluster_ips": [
                  "10.43.25.84"
                ],
                "external_ips": [],
                "external_name": "",
                "external_traffic_policy": "",
                "health_check_node_port": 0,
                "internal_traffic_policy": "Cluster",
                "ip_families": [
                  "IPv4"
                ],
                "ip_family_policy": "SingleStack",
                "load_balancer_class": "",
                "load_balancer_ip": "",
                "load_balancer_source_ranges": [],
                "port": [
                  {
                    "app_protocol": "",
                    "name": "redis",
                    "node_port": 0,
                    "port": 6379,
                    "protocol": "TCP",
                    "target_port": "6379"
                  }
                ],
                "publish_not_ready_addresses": false,
                "selector": {
                  "app.kubernetes.io/instance": "ananta-redis",
                  "app.kubernetes.io/name": "redis"
                },
                "session_affinity": "None",
                "session_affinity_config": [],
                "type": "ClusterIP"
              }
            ],
            "status": [
              {
                "load_balancer": [
                  {
                    "ingress": []
                  }
                ]
              }
            ],
            "timeouts": null,
            "wait_for_load_balancer": true
          },
          "sensitive_attributes": [],
          "identity_schema_version": 1,
          "identity": {
            "api_version": "v1",
            "kind": "Service",
            "name": "ananta-redis",
            "namespace": "cache-system"
          },
          "private": "eyJlMmJmYjczMC1lY2FhLTExZTYtOGY4OC0zNDM2M2JjN2M0YzAiOnsiY3JlYXRlIjo2MDAwMDAwMDAwMDB9LCJzY2hlbWFfdmVyc2lvbiI6IjEifQ==",
          "dependencies": [
            "kubernetes_namespace.namespaces",
            "module.cache.kubernetes_namespace.redis",
            "module.cache.kubernetes_secret.redis_auth",
            "module.cache.kubernetes_stateful_set.redis_standalone",
            "module.cache.random_password.redis_password",
            "module.vault.helm_release.vault",
            "module.vault.kubernetes_config_map.vault_agent_config",
            "module.vault.kubernetes_job.vault_init",
            "module.vault.kubernetes_job.vault_seed"
          ]
        }
      ]
    },
    {
      "module": "module.cache",
      "mode": "managed",
      "type": "kubernetes_stateful_set",
      "name": "redis_standalone",
      "provider": "provider[\"registry.terraform.io/hashicorp/kubernetes\"]",
      "instances": [
        {
          "index_key": 0,
          "schema_version": 1,
          "attributes": {
            "id": "cache-system/ananta-redis",
            "metadata": [
              {
                "annotations": {},
                "generate_name": "",
                "generation": 1,
                "labels": {
                  "app.kubernetes.io/component": "cache",
                  "app.kubernetes.io/instance": "ananta-redis",
                  "app.kubernetes.io/managed-by": "terraform",
                  "app.kubernetes.io/name": "redis",
                  "app.kubernetes.io/part-of": "ananta-platform",
                  "environment": "local"
                },
                "name": "ananta-redis",
                "namespace": "cache-system",
                "resource_version": "21853",
                "uid": "1839dba3-79e9-43ce-969e-84953bad10c7"
              }
            ],
            "spec": [
              {
                "min_ready_seconds": 0,
                "persistent_volume_claim_retention_policy": [
                  {
                    "when_deleted": "Retain",
                    "when_scaled": "Retain"
                  }
                ],
                "pod_management_policy": "OrderedReady",
                "replicas": "1",
                "revision_history_limit": 0,
                "selector": [
                  {
                    "match_expressions": [],
                    "match_labels": {
                      "app.kubernetes.io/instance": "ananta-redis",
                      "app.kubernetes.io/name": "redis"
                    }
                  }
                ],
                "service_name": "ananta-redis",
                "template": [
                  {
                    "metadata": [
                      {
                        "annotations": {},
                        "generate_name": "",
                        "generation": 0,
                        "labels": {
                          "app.kubernetes.io/component": "cache",
                          "app.kubernetes.io/instance": "ananta-redis",
                          "app.kubernetes.io/managed-by": "terraform",
                          "app.kubernetes.io/name": "redis",
                          "app.kubernetes.io/part-of": "ananta-platform",
                          "environment": "local"
                        },
                        "name": "",
                        "namespace": "",
                        "resource_version": "",
                        "uid": ""
                      }
                    ],
                    "spec": [
                      {
                        "active_deadline_seconds": 0,
                        "affinity": [],
                        "automount_service_account_token": true,
                        "container": [
                          {
                            "args": [],
                            "command": [
                              "redis-server",
                              "--requirepass",
                              "$(REDIS_PASSWORD)",
                              "--maxmemory-policy",
                              "volatile-lru",
                              "--tcp-keepalive",
                              "300"
                            ],
                            "env": [
                              {
                                "name": "REDIS_PASSWORD",
                                "value": "",
                                "value_from": [
                                  {
                                    "config_map_key_ref": [],
                                    "field_ref": [],
                                    "resource_field_ref": [],
                                    "secret_key_ref": [
                                      {
                                        "key": "password",
                                        "name": "ananta-redis-auth",
                                        "optional": false
                                      }
                                    ]
                                  }
                                ]
                              }
                            ],
                            "env_from": [],
                            "image": "redis:7.0-alpine",
                            "image_pull_policy": "IfNotPresent",
                            "lifecycle": [],
                            "liveness_probe": [
                              {
                                "exec": [
                                  {
                                    "command": [
                                      "redis-cli",
                                      "-a",
                                      "$(REDIS_PASSWORD)",
                                      "ping"
                                    ]
                                  }
                                ],
                                "failure_threshold": 3,
                                "grpc": [],
                                "http_get": [],
                                "initial_delay_seconds": 30,
                                "period_seconds": 10,
                                "success_threshold": 1,
                                "tcp_socket": [],
                                "timeout_seconds": 1
                              }
                            ],
                            "name": "redis",
                            "port": [
                              {
                                "container_port": 6379,
                                "host_ip": "",
                                "host_port": 0,
                                "name": "redis",
                                "protocol": "TCP"
                              }
                            ],
                            "readiness_probe": [
                              {
                                "exec": [
                                  {
                                    "command": [
                                      "redis-cli",
                                      "-a",
                                      "$(REDIS_PASSWORD)",
                                      "ping"
                                    ]
                                  }
                                ],
                                "failure_threshold": 3,
                                "grpc": [],
                                "http_get": [],
                                "initial_delay_seconds": 5,
                                "period_seconds": 5,
                                "success_threshold": 1,
                                "tcp_socket": [],
                                "timeout_seconds": 1
                              }
                            ],
                            "resources": [
                              {
                                "limits": {
                                  "cpu": "200m",
                                  "memory": "256Mi"
                                },
                                "requests": {
                                  "cpu": "200m",
                                  "memory": "256Mi"
                                }
                              }
                            ],
                            "restart_policy": "",
                            "security_context": [],
                            "startup_probe": [],
                            "stdin": false,
                            "stdin_once": false,
                            "termination_message_path": "/dev/termination-log",
                            "termination_message_policy": "File",
                            "tty": false,
                            "volume_device": [],
                            "volume_mount": [
                              {
                                "mount_path": "/data",
                                "mount_propagation": "None",
                                "name": "data",
                                "read_only": false,
                                "sub_path": "",
                                "sub_path_expr": ""
                              }
                            ],
                            "working_dir": ""
                          }
                        ],
                        "dns_config": [],
                        "dns_policy": "ClusterFirst",
                        "enable_service_links": true,
                        "host_aliases": [],
                        "host_ipc": false,
                        "host_network": false,
                        "host_pid": false,
                        "hostname": "",
                        "image_pull_secrets": [],
                        "init_container": [],
                        "node_name": "",
                        "node_selector": {},
                        "os": [],
                        "priority_class_name": "",
                        "readiness_gate": [],
                        "restart_policy": "Always",
                        "runtime_class_name": "",
                        "scheduler_name": "default-scheduler",
                        "security_context": [],
                        "service_account_name": "",
                        "share_process_namespace": false,
                        "subdomain": "",
                        "termination_grace_period_seconds": 30,
                        "toleration": [],
                        "topology_spread_constraint": [],
                        "volume": []
                      }
                    ]
                  }
                ],
                "update_strategy": [],
                "volume_claim_template": [
                  {
                    "metadata": [
                      {
                        "annotations": {},
                        "generate_name": "",
                        "generation": 0,
                        "labels": {},
                        "name": "data",
                        "namespace": "default",
                        "resource_version": "",
                        "uid": ""
                      }
                    ],
                    "spec": [
                      {
                        "access_modes": [
                          "ReadWriteOnce"
                        ],
                        "resources": [
                          {
                            "limits": {},
                            "requests": {
                              "storage": "1Gi"
                            }
                          }
                        ],
                        "selector": [],
                        "storage_class_name": "local-path",
                        "volume_mode": "Filesystem",
                        "volume_name": ""
                      }
                    ]
                  }
                ]
              }
            ],
            "timeouts": null,
            "wait_for_rollout": true
          },
          "sensitive_attributes": [],
          "identity_schema_version": 1,
          "identity": {
            "api_version": "apps/v1",
            "kind": "StatefulSet",
            "name": "ananta-redis",
            "namespace": "cache-system"
          },
          "private": "eyJlMmJmYjczMC1lY2FhLTExZTYtOGY4OC0zNDM2M2JjN2M0YzAiOnsiY3JlYXRlIjo2MDAwMDAwMDAwMDAsImRlbGV0ZSI6NjAwMDAwMDAwMDAwLCJyZWFkIjo2MDAwMDAwMDAwMDAsInVwZGF0ZSI6NjAwMDAwMDAwMDAwfSwic2NoZW1hX3ZlcnNpb24iOiIxIn0=",
          "dependencies": [
            "kubernetes_namespace.namespaces",
            "module.cache.kubernetes_namespace.redis",
            "module.cache.kubernetes_secret.redis_auth",
            "module.cache.random_password.redis_password",
            "module.vault.helm_release.vault",
            "module.vault.kubernetes_config_map.vault_agent_config",
            "module.vault.kubernetes_job.vault_init",
            "module.vault.kubernetes_job.vault_seed"
          ]
        }
      ]
    },
    {
      "module": "module.cache",
      "mode": "managed",
      "type": "random_password",
      "name": "redis_password",
      "provider": "provider[\"registry.terraform.io/hashicorp/random\"]",
      "instances": [
        {
          "schema_version": 3,
          "attributes": {
            "bcrypt_hash": "$2a$10$UmV0tE5QIjCW4FFANcS65OKk13rz6bg0Y2gW19o323c259Fpq9zuy",
            "id": "none",
            "keepers": null,
            "length": 32,
            "lower": true,
            "min_lower": 0,
            "min_numeric": 0,
            "min_special": 0,
            "min_upper": 0,
            "number": true,
            "numeric": true,
            "override_special": null,
            "result": "rHQ9xmHIiCuGF5pj7LqmBMd1UrkjJOpR",
            "special": false,
            "upper": true
          },
          "sensitive_attributes": [
            [
              {
                "type": "get_attr",
                "value": "bcrypt_hash"
              }
            ],
            [
              {
                "type": "get_attr",
                "value": "result"
              }
            ]
          ],
          "identity_schema_version": 0,
          "dependencies": [
            "kubernetes_namespace.namespaces",
            "module.vault.helm_release.vault",
            "module.vault.kubernetes_config_map.vault_agent_config",
            "module.vault.kubernetes_job.vault_init",
            "module.vault.kubernetes_job.vault_seed"
          ]
        }
      ]
    },
    {
      "module": "module.control_plane",
      "mode": "managed",
      "type": "kubernetes_deployment",
      "name": "orchestrator",
      "provider": "provider[\"registry.terraform.io/hashicorp/kubernetes\"]",
      "instances": [
        {
          "schema_version": 1,
          "attributes": {
            "id": "control-plane/orchestrator-service",
            "metadata": [
              {
                "annotations": {},
                "generate_name": "",
                "generation": 3,
                "labels": {
                  "app.kubernetes.io/component": "orchestrator",
                  "app.kubernetes.io/managed-by": "terraform",
                  "app.kubernetes.io/name": "orchestrator-service",
                  "app.kubernetes.io/part-of": "ananta-control-plane",
                  "environment": "local"
                },
                "name": "orchestrator-service",
                "namespace": "control-plane",
                "resource_version": "483947",
                "uid": "259f9db2-a094-4c87-a429-23f7426044bd"
              }
            ],
            "spec": [
              {
                "min_ready_seconds": 0,
                "paused": false,
                "progress_deadline_seconds": 600,
                "replicas": "1",
                "revision_history_limit": 10,
                "selector": [
                  {
                    "match_expressions": [],
                    "match_labels": {
                      "app.kubernetes.io/name": "orchestrator-service"
                    }
                  }
                ],
                "strategy": [
                  {
                    "rolling_update": [
                      {
                        "max_surge": "25%",
                        "max_unavailable": "25%"
                      }
                    ],
                    "type": "RollingUpdate"
                  }
                ],
                "template": [
                  {
                    "metadata": [
                      {
                        "annotations": {
                          "kubectl.kubernetes.io/restartedAt": "2026-01-10T13:51:09-08:00"
                        },
                        "generate_name": "",
                        "generation": 0,
                        "labels": {
                          "app.kubernetes.io/component": "orchestrator",
                          "app.kubernetes.io/managed-by": "terraform",
                          "app.kubernetes.io/name": "orchestrator-service",
                          "app.kubernetes.io/part-of": "ananta-control-plane",
                          "environment": "local"
                        },
                        "name": "",
                        "namespace": "",
                        "resource_version": "",
                        "uid": ""
                      }
                    ],
                    "spec": [
                      {
                        "active_deadline_seconds": 0,
                        "affinity": [],
                        "automount_service_account_token": true,
                        "container": [
                          {
                            "args": [],
                            "command": [],
                            "env": [
                              {
                                "name": "PORT",
                                "value": "3001",
                                "value_from": []
                              }
                            ],
                            "env_from": [
                              {
                                "config_map_ref": [
                                  {
                                    "name": "ananta-control-plane-config",
                                    "optional": false
                                  }
                                ],
                                "prefix": "",
                                "secret_ref": []
                              },
                              {
                                "config_map_ref": [],
                                "prefix": "",
                                "secret_ref": [
                                  {
                                    "name": "ananta-control-plane-secrets",
                                    "optional": false
                                  }
                                ]
                              }
                            ],
                            "image": "ananta/orchestrator-service:local",
                            "image_pull_policy": "Never",
                            "lifecycle": [],
                            "liveness_probe": [],
                            "name": "orchestrator-service",
                            "port": [
                              {
                                "container_port": 3001,
                                "host_ip": "",
                                "host_port": 0,
                                "name": "http",
                                "protocol": "TCP"
                              }
                            ],
                            "readiness_probe": [],
                            "resources": [
                              {
                                "limits": {
                                  "cpu": "250m",
                                  "memory": "256Mi"
                                },
                                "requests": {
                                  "cpu": "100m",
                                  "memory": "128Mi"
                                }
                              }
                            ],
                            "restart_policy": "",
                            "security_context": [],
                            "startup_probe": [],
                            "stdin": false,
                            "stdin_once": false,
                            "termination_message_path": "/dev/termination-log",
                            "termination_message_policy": "File",
                            "tty": false,
                            "volume_device": [],
                            "volume_mount": [],
                            "working_dir": ""
                          }
                        ],
                        "dns_config": [],
                        "dns_policy": "ClusterFirst",
                        "enable_service_links": true,
                        "host_aliases": [],
                        "host_ipc": false,
                        "host_network": false,
                        "host_pid": false,
                        "hostname": "",
                        "image_pull_secrets": [],
                        "init_container": [],
                        "node_name": "",
                        "node_selector": {},
                        "os": [],
                        "priority_class_name": "",
                        "readiness_gate": [],
                        "restart_policy": "Always",
                        "runtime_class_name": "",
                        "scheduler_name": "default-scheduler",
                        "security_context": [],
                        "service_account_name": "",
                        "share_process_namespace": false,
                        "subdomain": "",
                        "termination_grace_period_seconds": 30,
                        "toleration": [],
                        "topology_spread_constraint": [],
                        "volume": []
                      }
                    ]
                  }
                ]
              }
            ],
            "timeouts": null,
            "wait_for_rollout": true
          },
          "sensitive_attributes": [],
          "identity_schema_version": 1,
          "identity": {
            "api_version": "apps/v1",
            "kind": "Deployment",
            "name": "orchestrator-service",
            "namespace": "control-plane"
          },
          "private": "eyJlMmJmYjczMC1lY2FhLTExZTYtOGY4OC0zNDM2M2JjN2M0YzAiOnsiY3JlYXRlIjo2MDAwMDAwMDAwMDAsImRlbGV0ZSI6NjAwMDAwMDAwMDAwLCJ1cGRhdGUiOjYwMDAwMDAwMDAwMH0sInNjaGVtYV92ZXJzaW9uIjoiMSJ9",
          "dependencies": [
            "kubernetes_config_map.db_migrations",
            "kubernetes_config_map.keycloak_realm",
            "kubernetes_job.db_migration",
            "kubernetes_namespace.namespaces",
            "module.cache.helm_release.redis_operator",
            "module.cache.kubernetes_manifest.prometheus_rules",
            "module.cache.kubernetes_manifest.redis_failover",
            "module.cache.kubernetes_manifest.service_monitor",
            "module.cache.kubernetes_namespace.redis",
            "module.cache.kubernetes_secret.redis_auth",
            "module.cache.kubernetes_service.redis",
            "module.cache.kubernetes_stateful_set.redis_standalone",
            "module.cache.random_password.redis_password",
            "module.control_plane.kubernetes_config_map.control_plane",
            "module.control_plane.kubernetes_config_map.control_plane_config",
            "module.control_plane.kubernetes_namespace.control_plane",
            "module.control_plane.kubernetes_secret.control_plane",
            "module.control_plane.kubernetes_secret.control_plane_secrets",
            "module.control_plane.random_password.db_password",
            "module.control_plane.random_password.jwt_secret",
            "module.database.helm_release.cloudnative_pg",
            "module.database.kubernetes_namespace.database",
            "module.database.kubernetes_secret.app_user",
            "module.database.kubernetes_secret.superuser",
            "module.database.kubernetes_service.database",
            "module.database.local_file.cluster_manifest",
            "module.database.null_resource.cluster",
            "module.database.random_password.app_user",
            "module.database.random_password.superuser",
            "module.keycloak.kubernetes_config_map.keycloak",
            "module.keycloak.kubernetes_deployment.keycloak",
            "module.keycloak.kubernetes_job.realm_import",
            "module.keycloak.kubernetes_secret.keycloak",
            "module.keycloak.kubernetes_service.keycloak",
            "module.keycloak.kubernetes_service_account.keycloak",
            "module.temporal.kubernetes_config_map.temporal",
            "module.temporal.kubernetes_deployment.temporal",
            "module.temporal.kubernetes_deployment.temporal_ui",
            "module.temporal.kubernetes_job.create_namespaces",
            "module.temporal.kubernetes_secret.temporal",
            "module.temporal.kubernetes_service.temporal",
            "module.temporal.kubernetes_service.temporal_ui",
            "module.temporal.kubernetes_service_account.temporal",
            "module.vault.helm_release.vault",
            "module.vault.kubernetes_config_map.vault_agent_config",
            "module.vault.kubernetes_job.vault_init",
            "module.vault.kubernetes_job.vault_seed"
          ]
        }
      ]
    },
    {
      "module": "module.control_plane",
      "mode": "managed",
      "type": "kubernetes_deployment",
      "name": "subscription",
      "provider": "provider[\"registry.terraform.io/hashicorp/kubernetes\"]",
      "instances": [
        {
          "schema_version": 1,
          "attributes": {
            "id": "control-plane/subscription-service",
            "metadata": [
              {
                "annotations": {},
                "generate_name": "",
                "generation": 3,
                "labels": {
                  "app.kubernetes.io/component": "subscription",
                  "app.kubernetes.io/managed-by": "terraform",
                  "app.kubernetes.io/name": "subscription-service",
                  "app.kubernetes.io/part-of": "ananta-control-plane",
                  "environment": "local"
                },
                "name": "subscription-service",
                "namespace": "control-plane",
                "resource_version": "483923",
                "uid": "8f4dfb7e-6b57-4e51-af06-30a1e8ad10f4"
              }
            ],
            "spec": [
              {
                "min_ready_seconds": 0,
                "paused": false,
                "progress_deadline_seconds": 600,
                "replicas": "1",
                "revision_history_limit": 10,
                "selector": [
                  {
                    "match_expressions": [],
                    "match_labels": {
                      "app.kubernetes.io/name": "subscription-service"
                    }
                  }
                ],
                "strategy": [
                  {
                    "rolling_update": [
                      {
                        "max_surge": "25%",
                        "max_unavailable": "25%"
                      }
                    ],
                    "type": "RollingUpdate"
                  }
                ],
                "template": [
                  {
                    "metadata": [
                      {
                        "annotations": {
                          "kubectl.kubernetes.io/restartedAt": "2026-01-10T13:51:09-08:00"
                        },
                        "generate_name": "",
                        "generation": 0,
                        "labels": {
                          "app.kubernetes.io/component": "subscription",
                          "app.kubernetes.io/managed-by": "terraform",
                          "app.kubernetes.io/name": "subscription-service",
                          "app.kubernetes.io/part-of": "ananta-control-plane",
                          "environment": "local"
                        },
                        "name": "",
                        "namespace": "",
                        "resource_version": "",
                        "uid": ""
                      }
                    ],
                    "spec": [
                      {
                        "active_deadline_seconds": 0,
                        "affinity": [],
                        "automount_service_account_token": true,
                        "container": [
                          {
                            "args": [],
                            "command": [],
                            "env": [
                              {
                                "name": "PORT",
                                "value": "3002",
                                "value_from": []
                              }
                            ],
                            "env_from": [
                              {
                                "config_map_ref": [
                                  {
                                    "name": "ananta-control-plane-config",
                                    "optional": false
                                  }
                                ],
                                "prefix": "",
                                "secret_ref": []
                              },
                              {
                                "config_map_ref": [],
                                "prefix": "",
                                "secret_ref": [
                                  {
                                    "name": "ananta-control-plane-secrets",
                                    "optional": false
                                  }
                                ]
                              }
                            ],
                            "image": "ananta/subscription-service:local",
                            "image_pull_policy": "Never",
                            "lifecycle": [],
                            "liveness_probe": [],
                            "name": "subscription-service",
                            "port": [
                              {
                                "container_port": 3002,
                                "host_ip": "",
                                "host_port": 0,
                                "name": "http",
                                "protocol": "TCP"
                              }
                            ],
                            "readiness_probe": [],
                            "resources": [
                              {
                                "limits": {
                                  "cpu": "250m",
                                  "memory": "256Mi"
                                },
                                "requests": {
                                  "cpu": "100m",
                                  "memory": "128Mi"
                                }
                              }
                            ],
                            "restart_policy": "",
                            "security_context": [],
                            "startup_probe": [],
                            "stdin": false,
                            "stdin_once": false,
                            "termination_message_path": "/dev/termination-log",
                            "termination_message_policy": "File",
                            "tty": false,
                            "volume_device": [],
                            "volume_mount": [],
                            "working_dir": ""
                          }
                        ],
                        "dns_config": [],
                        "dns_policy": "ClusterFirst",
                        "enable_service_links": true,
                        "host_aliases": [],
                        "host_ipc": false,
                        "host_network": false,
                        "host_pid": false,
                        "hostname": "",
                        "image_pull_secrets": [],
                        "init_container": [],
                        "node_name": "",
                        "node_selector": {},
                        "os": [],
                        "priority_class_name": "",
                        "readiness_gate": [],
                        "restart_policy": "Always",
                        "runtime_class_name": "",
                        "scheduler_name": "default-scheduler",
                        "security_context": [],
                        "service_account_name": "",
                        "share_process_namespace": false,
                        "subdomain": "",
                        "termination_grace_period_seconds": 30,
                        "toleration": [],
                        "topology_spread_constraint": [],
                        "volume": []
                      }
                    ]
                  }
                ]
              }
            ],
            "timeouts": null,
            "wait_for_rollout": true
          },
          "sensitive_attributes": [],
          "identity_schema_version": 1,
          "identity": {
            "api_version": "apps/v1",
            "kind": "Deployment",
            "name": "subscription-service",
            "namespace": "control-plane"
          },
          "private": "eyJlMmJmYjczMC1lY2FhLTExZTYtOGY4OC0zNDM2M2JjN2M0YzAiOnsiY3JlYXRlIjo2MDAwMDAwMDAwMDAsImRlbGV0ZSI6NjAwMDAwMDAwMDAwLCJ1cGRhdGUiOjYwMDAwMDAwMDAwMH0sInNjaGVtYV92ZXJzaW9uIjoiMSJ9",
          "dependencies": [
            "kubernetes_config_map.db_migrations",
            "kubernetes_config_map.keycloak_realm",
            "kubernetes_job.db_migration",
            "kubernetes_namespace.namespaces",
            "module.cache.helm_release.redis_operator",
            "module.cache.kubernetes_manifest.prometheus_rules",
            "module.cache.kubernetes_manifest.redis_failover",
            "module.cache.kubernetes_manifest.service_monitor",
            "module.cache.kubernetes_namespace.redis",
            "module.cache.kubernetes_secret.redis_auth",
            "module.cache.kubernetes_service.redis",
            "module.cache.kubernetes_stateful_set.redis_standalone",
            "module.cache.random_password.redis_password",
            "module.control_plane.kubernetes_config_map.control_plane",
            "module.control_plane.kubernetes_config_map.control_plane_config",
            "module.control_plane.kubernetes_namespace.control_plane",
            "module.control_plane.kubernetes_secret.control_plane",
            "module.control_plane.kubernetes_secret.control_plane_secrets",
            "module.control_plane.random_password.db_password",
            "module.control_plane.random_password.jwt_secret",
            "module.database.helm_release.cloudnative_pg",
            "module.database.kubernetes_namespace.database",
            "module.database.kubernetes_secret.app_user",
            "module.database.kubernetes_secret.superuser",
            "module.database.kubernetes_service.database",
            "module.database.local_file.cluster_manifest",
            "module.database.null_resource.cluster",
            "module.database.random_password.app_user",
            "module.database.random_password.superuser",
            "module.keycloak.kubernetes_config_map.keycloak",
            "module.keycloak.kubernetes_deployment.keycloak",
            "module.keycloak.kubernetes_job.realm_import",
            "module.keycloak.kubernetes_secret.keycloak",
            "module.keycloak.kubernetes_service.keycloak",
            "module.keycloak.kubernetes_service_account.keycloak",
            "module.temporal.kubernetes_config_map.temporal",
            "module.temporal.kubernetes_deployment.temporal",
            "module.temporal.kubernetes_deployment.temporal_ui",
            "module.temporal.kubernetes_job.create_namespaces",
            "module.temporal.kubernetes_secret.temporal",
            "module.temporal.kubernetes_service.temporal",
            "module.temporal.kubernetes_service.temporal_ui",
            "module.temporal.kubernetes_service_account.temporal",
            "module.vault.helm_release.vault",
            "module.vault.kubernetes_config_map.vault_agent_config",
            "module.vault.kubernetes_job.vault_init",
            "module.vault.kubernetes_job.vault_seed"
          ]
        }
      ]
    },
    {
      "module": "module.control_plane",
      "mode": "managed",
      "type": "kubernetes_deployment",
      "name": "temporal_worker",
      "provider": "provider[\"registry.terraform.io/hashicorp/kubernetes\"]",
      "instances": [
        {
          "schema_version": 1,
          "attributes": {
            "id": "control-plane/temporal-worker-service",
            "metadata": [
              {
                "annotations": {},
                "generate_name": "",
                "generation": 3,
                "labels": {
                  "app.kubernetes.io/component": "worker",
                  "app.kubernetes.io/managed-by": "terraform",
                  "app.kubernetes.io/name": "temporal-worker-service",
                  "app.kubernetes.io/part-of": "ananta-control-plane",
                  "environment": "local"
                },
                "name": "temporal-worker-service",
                "namespace": "control-plane",
                "resource_version": "483982",
                "uid": "9b1025d2-5fcc-4dde-8a45-e05d5a269dc1"
              }
            ],
            "spec": [
              {
                "min_ready_seconds": 0,
                "paused": false,
                "progress_deadline_seconds": 600,
                "replicas": "1",
                "revision_history_limit": 10,
                "selector": [
                  {
                    "match_expressions": [],
                    "match_labels": {
                      "app.kubernetes.io/name": "temporal-worker-service"
                    }
                  }
                ],
                "strategy": [
                  {
                    "rolling_update": [
                      {
                        "max_surge": "25%",
                        "max_unavailable": "25%"
                      }
                    ],
                    "type": "RollingUpdate"
                  }
                ],
                "template": [
                  {
                    "metadata": [
                      {
                        "annotations": {
                          "kubectl.kubernetes.io/restartedAt": "2026-01-10T13:51:09-08:00"
                        },
                        "generate_name": "",
                        "generation": 0,
                        "labels": {
                          "app.kubernetes.io/component": "worker",
                          "app.kubernetes.io/managed-by": "terraform",
                          "app.kubernetes.io/name": "temporal-worker-service",
                          "app.kubernetes.io/part-of": "ananta-control-plane",
                          "environment": "local"
                        },
                        "name": "",
                        "namespace": "",
                        "resource_version": "",
                        "uid": ""
                      }
                    ],
                    "spec": [
                      {
                        "active_deadline_seconds": 0,
                        "affinity": [],
                        "automount_service_account_token": true,
                        "container": [
                          {
                            "args": [],
                            "command": [],
                            "env": [],
                            "env_from": [
                              {
                                "config_map_ref": [
                                  {
                                    "name": "ananta-control-plane-config",
                                    "optional": false
                                  }
                                ],
                                "prefix": "",
                                "secret_ref": []
                              },
                              {
                                "config_map_ref": [],
                                "prefix": "",
                                "secret_ref": [
                                  {
                                    "name": "ananta-control-plane-secrets",
                                    "optional": false
                                  }
                                ]
                              }
                            ],
                            "image": "ananta/temporal-worker-service:local",
                            "image_pull_policy": "Never",
                            "lifecycle": [],
                            "liveness_probe": [],
                            "name": "temporal-worker-service",
                            "port": [],
                            "readiness_probe": [],
                            "resources": [
                              {
                                "limits": {
                                  "cpu": "500m",
                                  "memory": "512Mi"
                                },
                                "requests": {
                                  "cpu": "200m",
                                  "memory": "256Mi"
                                }
                              }
                            ],
                            "restart_policy": "",
                            "security_context": [],
                            "startup_probe": [],
                            "stdin": false,
                            "stdin_once": false,
                            "termination_message_path": "/dev/termination-log",
                            "termination_message_policy": "File",
                            "tty": false,
                            "volume_device": [],
                            "volume_mount": [],
                            "working_dir": ""
                          }
                        ],
                        "dns_config": [],
                        "dns_policy": "ClusterFirst",
                        "enable_service_links": true,
                        "host_aliases": [],
                        "host_ipc": false,
                        "host_network": false,
                        "host_pid": false,
                        "hostname": "",
                        "image_pull_secrets": [],
                        "init_container": [],
                        "node_name": "",
                        "node_selector": {},
                        "os": [],
                        "priority_class_name": "",
                        "readiness_gate": [],
                        "restart_policy": "Always",
                        "runtime_class_name": "",
                        "scheduler_name": "default-scheduler",
                        "security_context": [],
                        "service_account_name": "",
                        "share_process_namespace": false,
                        "subdomain": "",
                        "termination_grace_period_seconds": 30,
                        "toleration": [],
                        "topology_spread_constraint": [],
                        "volume": []
                      }
                    ]
                  }
                ]
              }
            ],
            "timeouts": null,
            "wait_for_rollout": true
          },
          "sensitive_attributes": [],
          "identity_schema_version": 1,
          "identity": {
            "api_version": "apps/v1",
            "kind": "Deployment",
            "name": "temporal-worker-service",
            "namespace": "control-plane"
          },
          "private": "eyJlMmJmYjczMC1lY2FhLTExZTYtOGY4OC0zNDM2M2JjN2M0YzAiOnsiY3JlYXRlIjo2MDAwMDAwMDAwMDAsImRlbGV0ZSI6NjAwMDAwMDAwMDAwLCJ1cGRhdGUiOjYwMDAwMDAwMDAwMH0sInNjaGVtYV92ZXJzaW9uIjoiMSJ9",
          "dependencies": [
            "kubernetes_config_map.db_migrations",
            "kubernetes_config_map.keycloak_realm",
            "kubernetes_job.db_migration",
            "kubernetes_namespace.namespaces",
            "module.cache.helm_release.redis_operator",
            "module.cache.kubernetes_manifest.prometheus_rules",
            "module.cache.kubernetes_manifest.redis_failover",
            "module.cache.kubernetes_manifest.service_monitor",
            "module.cache.kubernetes_namespace.redis",
            "module.cache.kubernetes_secret.redis_auth",
            "module.cache.kubernetes_service.redis",
            "module.cache.kubernetes_stateful_set.redis_standalone",
            "module.cache.random_password.redis_password",
            "module.control_plane.kubernetes_config_map.control_plane",
            "module.control_plane.kubernetes_config_map.control_plane_config",
            "module.control_plane.kubernetes_namespace.control_plane",
            "module.control_plane.kubernetes_secret.control_plane",
            "module.control_plane.kubernetes_secret.control_plane_secrets",
            "module.control_plane.random_password.db_password",
            "module.control_plane.random_password.jwt_secret",
            "module.database.helm_release.cloudnative_pg",
            "module.database.kubernetes_namespace.database",
            "module.database.kubernetes_secret.app_user",
            "module.database.kubernetes_secret.superuser",
            "module.database.kubernetes_service.database",
            "module.database.local_file.cluster_manifest",
            "module.database.null_resource.cluster",
            "module.database.random_password.app_user",
            "module.database.random_password.superuser",
            "module.keycloak.kubernetes_config_map.keycloak",
            "module.keycloak.kubernetes_deployment.keycloak",
            "module.keycloak.kubernetes_job.realm_import",
            "module.keycloak.kubernetes_secret.keycloak",
            "module.keycloak.kubernetes_service.keycloak",
            "module.keycloak.kubernetes_service_account.keycloak",
            "module.temporal.kubernetes_config_map.temporal",
            "module.temporal.kubernetes_deployment.temporal",
            "module.temporal.kubernetes_deployment.temporal_ui",
            "module.temporal.kubernetes_job.create_namespaces",
            "module.temporal.kubernetes_secret.temporal",
            "module.temporal.kubernetes_service.temporal",
            "module.temporal.kubernetes_service.temporal_ui",
            "module.temporal.kubernetes_service_account.temporal",
            "module.vault.helm_release.vault",
            "module.vault.kubernetes_config_map.vault_agent_config",
            "module.vault.kubernetes_job.vault_init",
            "module.vault.kubernetes_job.vault_seed"
          ]
        }
      ]
    },
    {
      "module": "module.control_plane",
      "mode": "managed",
      "type": "kubernetes_service",
      "name": "orchestrator",
      "provider": "provider[\"registry.terraform.io/hashicorp/kubernetes\"]",
      "instances": [
        {
          "schema_version": 1,
          "attributes": {
            "id": "control-plane/orchestrator-service",
            "metadata": [
              {
                "annotations": {},
                "generate_name": "",
                "generation": 0,
                "labels": {
                  "app.kubernetes.io/managed-by": "terraform",
                  "app.kubernetes.io/name": "orchestrator-service",
                  "app.kubernetes.io/part-of": "ananta-control-plane",
                  "environment": "local"
                },
                "name": "orchestrator-service",
                "namespace": "control-plane",
                "resource_version": "32082",
                "uid": "58494153-2c5f-4063-bfce-6b3bfbb6176d"
              }
            ],
            "spec": [
              {
                "allocate_load_balancer_node_ports": true,
                "cluster_ip": "10.43.237.196",
                "cluster_ips": [
                  "10.43.237.196"
                ],
                "external_ips": [],
                "external_name": "",
                "external_traffic_policy": "",
                "health_check_node_port": 0,
                "internal_traffic_policy": "Cluster",
                "ip_families": [
                  "IPv4"
                ],
                "ip_family_policy": "SingleStack",
                "load_balancer_class": "",
                "load_balancer_ip": "",
                "load_balancer_source_ranges": [],
                "port": [
                  {
                    "app_protocol": "",
                    "name": "http",
                    "node_port": 0,
                    "port": 3001,
                    "protocol": "TCP",
                    "target_port": "3001"
                  }
                ],
                "publish_not_ready_addresses": false,
                "selector": {
                  "app.kubernetes.io/name": "orchestrator-service"
                },
                "session_affinity": "None",
                "session_affinity_config": [],
                "type": "ClusterIP"
              }
            ],
            "status": [
              {
                "load_balancer": [
                  {
                    "ingress": []
                  }
                ]
              }
            ],
            "timeouts": null,
            "wait_for_load_balancer": true
          },
          "sensitive_attributes": [],
          "identity_schema_version": 1,
          "identity": {
            "api_version": "v1",
            "kind": "Service",
            "name": "orchestrator-service",
            "namespace": "control-plane"
          },
          "private": "eyJlMmJmYjczMC1lY2FhLTExZTYtOGY4OC0zNDM2M2JjN2M0YzAiOnsiY3JlYXRlIjo2MDAwMDAwMDAwMDB9LCJzY2hlbWFfdmVyc2lvbiI6IjEifQ==",
          "dependencies": [
            "kubernetes_config_map.db_migrations",
            "kubernetes_config_map.keycloak_realm",
            "kubernetes_job.db_migration",
            "kubernetes_namespace.namespaces",
            "module.cache.helm_release.redis_operator",
            "module.cache.kubernetes_manifest.prometheus_rules",
            "module.cache.kubernetes_manifest.redis_failover",
            "module.cache.kubernetes_manifest.service_monitor",
            "module.cache.kubernetes_namespace.redis",
            "module.cache.kubernetes_secret.redis_auth",
            "module.cache.kubernetes_service.redis",
            "module.cache.kubernetes_stateful_set.redis_standalone",
            "module.cache.random_password.redis_password",
            "module.control_plane.kubernetes_config_map.control_plane_config",
            "module.control_plane.kubernetes_deployment.orchestrator",
            "module.control_plane.kubernetes_namespace.control_plane",
            "module.control_plane.kubernetes_secret.control_plane_secrets",
            "module.database.helm_release.cloudnative_pg",
            "module.database.kubernetes_namespace.database",
            "module.database.kubernetes_secret.app_user",
            "module.database.kubernetes_secret.superuser",
            "module.database.kubernetes_service.database",
            "module.database.local_file.cluster_manifest",
            "module.database.null_resource.cluster",
            "module.database.random_password.app_user",
            "module.database.random_password.superuser",
            "module.keycloak.kubernetes_config_map.keycloak",
            "module.keycloak.kubernetes_deployment.keycloak",
            "module.keycloak.kubernetes_job.realm_import",
            "module.keycloak.kubernetes_secret.keycloak",
            "module.keycloak.kubernetes_service.keycloak",
            "module.keycloak.kubernetes_service_account.keycloak",
            "module.temporal.kubernetes_config_map.temporal",
            "module.temporal.kubernetes_deployment.temporal",
            "module.temporal.kubernetes_deployment.temporal_ui",
            "module.temporal.kubernetes_job.create_namespaces",
            "module.temporal.kubernetes_secret.temporal",
            "module.temporal.kubernetes_service.temporal",
            "module.temporal.kubernetes_service.temporal_ui",
            "module.temporal.kubernetes_service_account.temporal",
            "module.vault.helm_release.vault",
            "module.vault.kubernetes_config_map.vault_agent_config",
            "module.vault.kubernetes_job.vault_init",
            "module.vault.kubernetes_job.vault_seed"
          ]
        }
      ]
    },
    {
      "module": "module.control_plane",
      "mode": "managed",
      "type": "kubernetes_service",
      "name": "subscription",
      "provider": "provider[\"registry.terraform.io/hashicorp/kubernetes\"]",
      "instances": [
        {
          "schema_version": 1,
          "attributes": {
            "id": "control-plane/subscription-service",
            "metadata": [
              {
                "annotations": {},
                "generate_name": "",
                "generation": 0,
                "labels": {
                  "app.kubernetes.io/managed-by": "terraform",
                  "app.kubernetes.io/name": "subscription-service",
                  "app.kubernetes.io/part-of": "ananta-control-plane",
                  "environment": "local"
                },
                "name": "subscription-service",
                "namespace": "control-plane",
                "resource_version": "32077",
                "uid": "8aef0e1a-f93b-4aea-8219-88b0794131e5"
              }
            ],
            "spec": [
              {
                "allocate_load_balancer_node_ports": true,
                "cluster_ip": "10.43.170.31",
                "cluster_ips": [
                  "10.43.170.31"
                ],
                "external_ips": [],
                "external_name": "",
                "external_traffic_policy": "",
                "health_check_node_port": 0,
                "internal_traffic_policy": "Cluster",
                "ip_families": [
                  "IPv4"
                ],
                "ip_family_policy": "SingleStack",
                "load_balancer_class": "",
                "load_balancer_ip": "",
                "load_balancer_source_ranges": [],
                "port": [
                  {
                    "app_protocol": "",
                    "name": "http",
                    "node_port": 0,
                    "port": 3002,
                    "protocol": "TCP",
                    "target_port": "3002"
                  }
                ],
                "publish_not_ready_addresses": false,
                "selector": {
                  "app.kubernetes.io/name": "subscription-service"
                },
                "session_affinity": "None",
                "session_affinity_config": [],
                "type": "ClusterIP"
              }
            ],
            "status": [
              {
                "load_balancer": [
                  {
                    "ingress": []
                  }
                ]
              }
            ],
            "timeouts": null,
            "wait_for_load_balancer": true
          },
          "sensitive_attributes": [],
          "identity_schema_version": 1,
          "identity": {
            "api_version": "v1",
            "kind": "Service",
            "name": "subscription-service",
            "namespace": "control-plane"
          },
          "private": "eyJlMmJmYjczMC1lY2FhLTExZTYtOGY4OC0zNDM2M2JjN2M0YzAiOnsiY3JlYXRlIjo2MDAwMDAwMDAwMDB9LCJzY2hlbWFfdmVyc2lvbiI6IjEifQ==",
          "dependencies": [
            "kubernetes_config_map.db_migrations",
            "kubernetes_config_map.keycloak_realm",
            "kubernetes_job.db_migration",
            "kubernetes_namespace.namespaces",
            "module.cache.helm_release.redis_operator",
            "module.cache.kubernetes_manifest.prometheus_rules",
            "module.cache.kubernetes_manifest.redis_failover",
            "module.cache.kubernetes_manifest.service_monitor",
            "module.cache.kubernetes_namespace.redis",
            "module.cache.kubernetes_secret.redis_auth",
            "module.cache.kubernetes_service.redis",
            "module.cache.kubernetes_stateful_set.redis_standalone",
            "module.cache.random_password.redis_password",
            "module.control_plane.kubernetes_config_map.control_plane_config",
            "module.control_plane.kubernetes_deployment.subscription",
            "module.control_plane.kubernetes_namespace.control_plane",
            "module.control_plane.kubernetes_secret.control_plane_secrets",
            "module.database.helm_release.cloudnative_pg",
            "module.database.kubernetes_namespace.database",
            "module.database.kubernetes_secret.app_user",
            "module.database.kubernetes_secret.superuser",
            "module.database.kubernetes_service.database",
            "module.database.local_file.cluster_manifest",
            "module.database.null_resource.cluster",
            "module.database.random_password.app_user",
            "module.database.random_password.superuser",
            "module.keycloak.kubernetes_config_map.keycloak",
            "module.keycloak.kubernetes_deployment.keycloak",
            "module.keycloak.kubernetes_job.realm_import",
            "module.keycloak.kubernetes_secret.keycloak",
            "module.keycloak.kubernetes_service.keycloak",
            "module.keycloak.kubernetes_service_account.keycloak",
            "module.temporal.kubernetes_config_map.temporal",
            "module.temporal.kubernetes_deployment.temporal",
            "module.temporal.kubernetes_deployment.temporal_ui",
            "module.temporal.kubernetes_job.create_namespaces",
            "module.temporal.kubernetes_secret.temporal",
            "module.temporal.kubernetes_service.temporal",
            "module.temporal.kubernetes_service.temporal_ui",
            "module.temporal.kubernetes_service_account.temporal",
            "module.vault.helm_release.vault",
            "module.vault.kubernetes_config_map.vault_agent_config",
            "module.vault.kubernetes_job.vault_init",
            "module.vault.kubernetes_job.vault_seed"
          ]
        }
      ]
    },
    {
      "module": "module.control_plane",
      "mode": "managed",
      "type": "kubernetes_service",
      "name": "tenant_management",
      "provider": "provider[\"registry.terraform.io/hashicorp/kubernetes\"]",
      "instances": [
        {
          "schema_version": 1,
          "attributes": {
            "id": "control-plane/tenant-management-service",
            "metadata": [
              {
                "annotations": {},
                "generate_name": "",
                "generation": 0,
                "labels": {
                  "app.kubernetes.io/managed-by": "terraform",
                  "app.kubernetes.io/name": "tenant-management-service",
                  "app.kubernetes.io/part-of": "ananta-control-plane",
                  "environment": "local"
                },
                "name": "tenant-management-service",
                "namespace": "control-plane",
                "resource_version": "32075",
                "uid": "116a1645-87c2-49d6-afc2-1d157c12e9a6"
              }
            ],
            "spec": [
              {
                "allocate_load_balancer_node_ports": true,
                "cluster_ip": "10.43.19.18",
                "cluster_ips": [
                  "10.43.19.18"
                ],
                "external_ips": [],
                "external_name": "",
                "external_traffic_policy": "",
                "health_check_node_port": 0,
                "internal_traffic_policy": "Cluster",
                "ip_families": [
                  "IPv4"
                ],
                "ip_family_policy": "SingleStack",
                "load_balancer_class": "",
                "load_balancer_ip": "",
                "load_balancer_source_ranges": [],
                "port": [
                  {
                    "app_protocol": "",
                    "name": "http",
                    "node_port": 0,
                    "port": 14000,
                    "protocol": "TCP",
                    "target_port": "14000"
                  }
                ],
                "publish_not_ready_addresses": false,
                "selector": {
                  "app.kubernetes.io/name": "tenant-management-service"
                },
                "session_affinity": "None",
                "session_affinity_config": [],
                "type": "ClusterIP"
              }
            ],
            "status": [
              {
                "load_balancer": [
                  {
                    "ingress": []
                  }
                ]
              }
            ],
            "timeouts": null,
            "wait_for_load_balancer": true
          },
          "sensitive_attributes": [],
          "identity_schema_version": 1,
          "identity": {
            "api_version": "v1",
            "kind": "Service",
            "name": "tenant-management-service",
            "namespace": "control-plane"
          },
          "private": "eyJlMmJmYjczMC1lY2FhLTExZTYtOGY4OC0zNDM2M2JjN2M0YzAiOnsiY3JlYXRlIjo2MDAwMDAwMDAwMDB9LCJzY2hlbWFfdmVyc2lvbiI6IjEifQ==",
          "dependencies": [
            "kubernetes_config_map.db_migrations",
            "kubernetes_config_map.keycloak_realm",
            "kubernetes_job.db_migration",
            "kubernetes_namespace.namespaces",
            "module.cache.helm_release.redis_operator",
            "module.cache.kubernetes_manifest.prometheus_rules",
            "module.cache.kubernetes_manifest.redis_failover",
            "module.cache.kubernetes_manifest.service_monitor",
            "module.cache.kubernetes_namespace.redis",
            "module.cache.kubernetes_secret.redis_auth",
            "module.cache.kubernetes_service.redis",
            "module.cache.kubernetes_stateful_set.redis_standalone",
            "module.cache.random_password.redis_password",
            "module.control_plane.kubernetes_config_map.control_plane_config",
            "module.control_plane.kubernetes_deployment.tenant_management",
            "module.control_plane.kubernetes_namespace.control_plane",
            "module.control_plane.kubernetes_secret.control_plane_secrets",
            "module.database.helm_release.cloudnative_pg",
            "module.database.kubernetes_namespace.database",
            "module.database.kubernetes_secret.app_user",
            "module.database.kubernetes_secret.superuser",
            "module.database.kubernetes_service.database",
            "module.database.local_file.cluster_manifest",
            "module.database.null_resource.cluster",
            "module.database.random_password.app_user",
            "module.database.random_password.superuser",
            "module.keycloak.kubernetes_config_map.keycloak",
            "module.keycloak.kubernetes_deployment.keycloak",
            "module.keycloak.kubernetes_job.realm_import",
            "module.keycloak.kubernetes_secret.keycloak",
            "module.keycloak.kubernetes_service.keycloak",
            "module.keycloak.kubernetes_service_account.keycloak",
            "module.temporal.kubernetes_config_map.temporal",
            "module.temporal.kubernetes_deployment.temporal",
            "module.temporal.kubernetes_deployment.temporal_ui",
            "module.temporal.kubernetes_job.create_namespaces",
            "module.temporal.kubernetes_secret.temporal",
            "module.temporal.kubernetes_service.temporal",
            "module.temporal.kubernetes_service.temporal_ui",
            "module.temporal.kubernetes_service_account.temporal",
            "module.vault.helm_release.vault",
            "module.vault.kubernetes_config_map.vault_agent_config",
            "module.vault.kubernetes_job.vault_init",
            "module.vault.kubernetes_job.vault_seed"
          ]
        }
      ]
    },
    {
      "module": "module.database",
      "mode": "managed",
      "type": "helm_release",
      "name": "cloudnative_pg",
      "provider": "provider[\"registry.terraform.io/hashicorp/helm\"]",
      "instances": [
        {
          "index_key": 0,
          "schema_version": 2,
          "attributes": {
            "atomic": false,
            "chart": "cloudnative-pg",
            "cleanup_on_fail": false,
            "create_namespace": true,
            "dependency_update": false,
            "description": null,
            "devel": null,
            "disable_crd_hooks": false,
            "disable_openapi_validation": false,
            "disable_webhooks": false,
            "force_update": false,
            "id": "cnpg",
            "keyring": null,
            "lint": false,
            "manifest": null,
            "max_history": 0,
            "metadata": {
              "app_version": "1.21.1",
              "chart": "cloudnative-pg",
              "first_deployed": 1767823074,
              "last_deployed": 1767823074,
              "name": "cnpg",
              "namespace": "cnpg-system",
              "notes": "\nCloudNativePG operator should be installed in namespace \"cnpg-system\".\nYou can now create a PostgreSQL cluster with 3 nodes in the current namespace as follows:\n\ncat \u003c\u003cEOF | kubectl apply -f -\n# Example of PostgreSQL cluster\napiVersion: postgresql.cnpg.io/v1\nkind: Cluster\nmetadata:\n  name: cluster-example\nspec:\n  instances: 3\n  storage:\n    size: 1Gi\nEOF\n\nkubectl get cluster\n\n",
              "revision": 1,
              "values": "{\"monitoring\":{\"podMonitorEnabled\":false},\"resources\":{\"limits\":{\"cpu\":\"500m\",\"memory\":\"512Mi\"},\"requests\":{\"cpu\":\"100m\",\"memory\":\"256Mi\"}}}",
              "version": "0.19.1"
            },
            "name": "cnpg",
            "namespace": "cnpg-system",
            "pass_credentials": false,
            "postrender": null,
            "recreate_pods": false,
            "render_subchart_notes": true,
            "replace": false,
            "repository": "https://cloudnative-pg.github.io/charts",
            "repository_ca_file": null,
            "repository_cert_file": null,
            "repository_key_file": null,
            "repository_password": null,
            "repository_username": null,
            "reset_values": false,
            "resources": null,
            "reuse_values": false,
            "set": null,
            "set_list": null,
            "set_sensitive": null,
            "set_wo": null,
            "set_wo_revision": null,
            "skip_crds": false,
            "status": "deployed",
            "take_ownership": false,
            "timeout": 300,
            "timeouts": null,
            "upgrade_install": false,
            "values": [
              "\"monitoring\":\n  \"podMonitorEnabled\": false\n\"resources\":\n  \"limits\":\n    \"cpu\": \"500m\"\n    \"memory\": \"512Mi\"\n  \"requests\":\n    \"cpu\": \"100m\"\n    \"memory\": \"256Mi\"\n"
            ],
            "verify": false,
            "version": "0.19.1",
            "wait": true,
            "wait_for_jobs": false
          },
          "sensitive_attributes": [
            [
              {
                "type": "get_attr",
                "value": "repository_password"
              }
            ]
          ],
          "identity_schema_version": 0,
          "identity": {
            "namespace": "cnpg-system",
            "release_name": "cnpg"
          },
          "dependencies": [
            "kubernetes_namespace.namespaces",
            "module.vault.helm_release.vault",
            "module.vault.kubernetes_config_map.vault_agent_config",
            "module.vault.kubernetes_job.vault_init",
            "module.vault.kubernetes_job.vault_seed"
          ]
        }
      ]
    },
    {
      "module": "module.database",
      "mode": "managed",
      "type": "kubernetes_namespace",
      "name": "database",
      "provider": "provider[\"registry.terraform.io/hashicorp/kubernetes\"]",
      "instances": []
    },
    {
      "module": "module.database",
      "mode": "managed",
      "type": "kubernetes_secret",
      "name": "app_user",
      "provider": "provider[\"registry.terraform.io/hashicorp/kubernetes\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "binary_data": null,
            "binary_data_wo": null,
            "binary_data_wo_revision": null,
            "data": {
              "password": "k6M0XUo9R45h0mMJW_L]P(a0",
              "username": "ananta_app"
            },
            "data_wo": null,
            "data_wo_revision": null,
            "id": "database-system/ananta-local-pg-app",
            "immutable": false,
            "metadata": [
              {
                "annotations": {},
                "generate_name": "",
                "generation": 0,
                "labels": {
                  "app.kubernetes.io/component": "database",
                  "app.kubernetes.io/instance": "ananta-local-pg",
                  "app.kubernetes.io/managed-by": "terraform",
                  "app.kubernetes.io/name": "postgresql",
                  "app.kubernetes.io/part-of": "ananta-platform",
                  "environment": "local"
                },
                "name": "ananta-local-pg-app",
                "namespace": "database-system",
                "resource_version": "21764",
                "uid": "ff07bbd6-4ba5-4291-83b3-af47e4fb9108"
              }
            ],
            "timeouts": null,
            "type": "kubernetes.io/basic-auth",
            "wait_for_service_account_token": true
          },
          "sensitive_attributes": [
            [
              {
                "type": "get_attr",
                "value": "binary_data"
              }
            ],
            [
              {
                "type": "get_attr",
                "value": "data"
              }
            ],
            [
              {
                "type": "get_attr",
                "value": "data"
              },
              {
                "type": "index",
                "value": {
                  "value": "password",
                  "type": "string"
                }
              }
            ]
          ],
          "identity_schema_version": 1,
          "identity": {
            "api_version": "v1",
            "kind": "Secret",
            "name": "ananta-local-pg-app",
            "namespace": "database-system"
          },
          "private": "eyJlMmJmYjczMC1lY2FhLTExZTYtOGY4OC0zNDM2M2JjN2M0YzAiOnsiY3JlYXRlIjo2MDAwMDAwMDAwMH19",
          "dependencies": [
            "kubernetes_namespace.namespaces",
            "module.database.kubernetes_namespace.database",
            "module.database.random_password.app_user",
            "module.vault.helm_release.vault",
            "module.vault.kubernetes_config_map.vault_agent_config",
            "module.vault.kubernetes_job.vault_init",
            "module.vault.kubernetes_job.vault_seed"
          ]
        }
      ]
    },
    {
      "module": "module.database",
      "mode": "managed",
      "type": "kubernetes_secret",
      "name": "superuser",
      "provider": "provider[\"registry.terraform.io/hashicorp/kubernetes\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "binary_data": null,
            "binary_data_wo": null,
            "binary_data_wo_revision": null,
            "data": {
              "password": "d#z-)(B+cXteY=}$AlS:34D%",
              "username": "postgres"
            },
            "data_wo": null,
            "data_wo_revision": null,
            "id": "database-system/ananta-local-pg-superuser",
            "immutable": false,
            "metadata": [
              {
                "annotations": {},
                "generate_name": "",
                "generation": 0,
                "labels": {
                  "app.kubernetes.io/component": "database",
                  "app.kubernetes.io/instance": "ananta-local-pg",
                  "app.kubernetes.io/managed-by": "terraform",
                  "app.kubernetes.io/name": "postgresql",
                  "app.kubernetes.io/part-of": "ananta-platform",
                  "environment": "local"
                },
                "name": "ananta-local-pg-superuser",
                "namespace": "database-system",
                "resource_version": "21762",
                "uid": "10c2cf00-2d58-4639-a294-d84d4f7d52b4"
              }
            ],
            "timeouts": null,
            "type": "kubernetes.io/basic-auth",
            "wait_for_service_account_token": true
          },
          "sensitive_attributes": [
            [
              {
                "type": "get_attr",
                "value": "binary_data"
              }
            ],
            [
              {
                "type": "get_attr",
                "value": "data"
              }
            ],
            [
              {
                "type": "get_attr",
                "value": "data"
              },
              {
                "type": "index",
                "value": {
                  "value": "password",
                  "type": "string"
                }
              }
            ]
          ],
          "identity_schema_version": 1,
          "identity": {
            "api_version": "v1",
            "kind": "Secret",
            "name": "ananta-local-pg-superuser",
            "namespace": "database-system"
          },
          "private": "eyJlMmJmYjczMC1lY2FhLTExZTYtOGY4OC0zNDM2M2JjN2M0YzAiOnsiY3JlYXRlIjo2MDAwMDAwMDAwMH19",
          "dependencies": [
            "kubernetes_namespace.namespaces",
            "module.database.kubernetes_namespace.database",
            "module.database.random_password.superuser",
            "module.vault.helm_release.vault",
            "module.vault.kubernetes_config_map.vault_agent_config",
            "module.vault.kubernetes_job.vault_init",
            "module.vault.kubernetes_job.vault_seed"
          ]
        }
      ]
    },
    {
      "module": "module.database",
      "mode": "managed",
      "type": "kubernetes_service",
      "name": "database",
      "provider": "provider[\"registry.terraform.io/hashicorp/kubernetes\"]",
      "instances": []
    },
    {
      "module": "module.database",
      "mode": "managed",
      "type": "local_file",
      "name": "cluster_manifest",
      "provider": "provider[\"registry.terraform.io/hashicorp/local\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "content": "\"apiVersion\": \"postgresql.cnpg.io/v1\"\n\"kind\": \"Cluster\"\n\"metadata\":\n  \"labels\":\n    \"app.kubernetes.io/component\": \"database\"\n    \"app.kubernetes.io/instance\": \"ananta-local-pg\"\n    \"app.kubernetes.io/managed-by\": \"terraform\"\n    \"app.kubernetes.io/name\": \"postgresql\"\n    \"app.kubernetes.io/part-of\": \"ananta-platform\"\n    \"environment\": \"local\"\n  \"name\": \"ananta-local-pg\"\n  \"namespace\": \"database-system\"\n\"spec\":\n  \"affinity\":\n    \"podAntiAffinityType\": \"preferred\"\n    \"topologyKey\": \"kubernetes.io/hostname\"\n  \"bootstrap\":\n    \"initdb\":\n      \"database\": \"ananta\"\n      \"owner\": \"ananta_app\"\n      \"secret\":\n        \"name\": \"ananta-local-pg-app\"\n  \"description\": \"PostgreSQL cluster for ananta local\"\n  \"imageName\": \"ghcr.io/cloudnative-pg/postgresql:15\"\n  \"instances\": 1\n  \"monitoring\":\n    \"enablePodMonitor\": false\n  \"postgresql\":\n    \"parameters\":\n      \"checkpoint_completion_target\": \"0.9\"\n      \"default_statistics_target\": \"100\"\n      \"effective_cache_size\": \"512MB\"\n      \"effective_io_concurrency\": \"200\"\n      \"log_checkpoints\": \"on\"\n      \"log_connections\": \"on\"\n      \"log_disconnections\": \"on\"\n      \"log_lock_waits\": \"on\"\n      \"maintenance_work_mem\": \"64MB\"\n      \"max_connections\": \"100\"\n      \"max_wal_size\": \"4GB\"\n      \"min_wal_size\": \"1GB\"\n      \"random_page_cost\": \"1.1\"\n      \"shared_buffers\": \"256MB\"\n      \"wal_buffers\": \"16MB\"\n  \"primaryUpdateStrategy\": \"unsupervised\"\n  \"resources\":\n    \"limits\":\n      \"cpu\": \"1\"\n      \"memory\": \"1Gi\"\n    \"requests\":\n      \"cpu\": \"500m\"\n      \"memory\": \"512Mi\"\n  \"storage\":\n    \"size\": \"10Gi\"\n    \"storageClass\": \"local-path\"\n  \"superuserSecret\":\n    \"name\": \"ananta-local-pg-superuser\"\n",
            "content_base64": null,
            "content_base64sha256": "0E0NXWH7hcj69Rg8LtKkhemz6S1h2txloqbAAwcK1dY=",
            "content_base64sha512": "BYr4dj+m3kRc5lWBajoJqaJJt8VUNeQMEVUJw063TqLbiU2ZHRVfrlwGr1A94Z3TofgRBi57a29ZBDRzS8nnNw==",
            "content_md5": "2a40cdcab59302b194623a7634cf6faa",
            "content_sha1": "c26f11e42f946727ddba119fd1420f22e35c3e27",
            "content_sha256": "d04d0d5d61fb85c8faf5183c2ed2a485e9b3e92d61dadc65a2a6c003070ad5d6",
            "content_sha512": "058af8763fa6de445ce655816a3a09a9a249b7c55435e40c115509c34eb74ea2db894d991d155fae5c06af503de19dd3a1f811062e7b6b6f590434734bc9e737",
            "directory_permission": "0777",
            "file_permission": "0777",
            "filename": "../../modules/database/kubernetes/generated/ananta-local-pg.yaml",
            "id": "c26f11e42f946727ddba119fd1420f22e35c3e27",
            "sensitive_content": null,
            "source": null
          },
          "sensitive_attributes": [
            [
              {
                "type": "get_attr",
                "value": "sensitive_content"
              }
            ]
          ],
          "identity_schema_version": 0,
          "dependencies": [
            "kubernetes_namespace.namespaces",
            "module.database.helm_release.cloudnative_pg",
            "module.database.kubernetes_namespace.database",
            "module.database.kubernetes_secret.app_user",
            "module.database.kubernetes_secret.superuser",
            "module.database.random_password.app_user",
            "module.database.random_password.superuser",
            "module.vault.helm_release.vault",
            "module.vault.kubernetes_config_map.vault_agent_config",
            "module.vault.kubernetes_job.vault_init",
            "module.vault.kubernetes_job.vault_seed"
          ]
        }
      ]
    },
    {
      "module": "module.database",
      "mode": "managed",
      "type": "null_resource",
      "name": "cluster",
      "provider": "provider[\"registry.terraform.io/hashicorp/null\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "id": "3117920071750707515",
            "triggers": {
              "cluster_name": "ananta-local-pg",
              "manifest_sha": "2a40cdcab59302b194623a7634cf6faa",
              "namespace": "database-system"
            }
          },
          "sensitive_attributes": [],
          "identity_schema_version": 0,
          "dependencies": [
            "kubernetes_namespace.namespaces",
            "module.database.helm_release.cloudnative_pg",
            "module.database.kubernetes_namespace.database",
            "module.database.kubernetes_secret.app_user",
            "module.database.kubernetes_secret.superuser",
            "module.database.local_file.cluster_manifest",
            "module.database.random_password.app_user",
            "module.database.random_password.superuser",
            "module.vault.helm_release.vault",
            "module.vault.kubernetes_config_map.vault_agent_config",
            "module.vault.kubernetes_job.vault_init",
            "module.vault.kubernetes_job.vault_seed"
          ]
        }
      ]
    },
    {
      "module": "module.database",
      "mode": "managed",
      "type": "random_password",
      "name": "app_user",
      "provider": "provider[\"registry.terraform.io/hashicorp/random\"]",
      "instances": [
        {
          "schema_version": 3,
          "attributes": {
            "bcrypt_hash": "$2a$10$AN/iTCCgodiG4Zdb8WaeRuAcGM0PjTRx7rMlhOe3dV44y4jW85Oyq",
            "id": "none",
            "keepers": null,
            "length": 24,
            "lower": true,
            "min_lower": 0,
            "min_numeric": 0,
            "min_special": 0,
            "min_upper": 0,
            "number": true,
            "numeric": true,
            "override_special": "!#$%\u0026*()-_=+[]{}:?",
            "result": "k6M0XUo9R45h0mMJW_L]P(a0",
            "special": true,
            "upper": true
          },
          "sensitive_attributes": [
            [
              {
                "type": "get_attr",
                "value": "bcrypt_hash"
              }
            ],
            [
              {
                "type": "get_attr",
                "value": "result"
              }
            ]
          ],
          "identity_schema_version": 0,
          "dependencies": [
            "kubernetes_namespace.namespaces",
            "module.vault.helm_release.vault",
            "module.vault.kubernetes_config_map.vault_agent_config",
            "module.vault.kubernetes_job.vault_init",
            "module.vault.kubernetes_job.vault_seed"
          ]
        }
      ]
    },
    {
      "module": "module.database",
      "mode": "managed",
      "type": "random_password",
      "name": "superuser",
      "provider": "provider[\"registry.terraform.io/hashicorp/random\"]",
      "instances": [
        {
          "schema_version": 3,
          "attributes": {
            "bcrypt_hash": "$2a$10$0UeuJ7dv2sq2rS9ohf401OmQp6GngKTZDggHX.AplCG4W4lNcqWM2",
            "id": "none",
            "keepers": null,
            "length": 24,
            "lower": true,
            "min_lower": 0,
            "min_numeric": 0,
            "min_special": 0,
            "min_upper": 0,
            "number": true,
            "numeric": true,
            "override_special": "!#$%\u0026*()-_=+[]{}:?",
            "result": "d#z-)(B+cXteY=}$AlS:34D%",
            "special": true,
            "upper": true
          },
          "sensitive_attributes": [
            [
              {
                "type": "get_attr",
                "value": "bcrypt_hash"
              }
            ],
            [
              {
                "type": "get_attr",
                "value": "result"
              }
            ]
          ],
          "identity_schema_version": 0,
          "dependencies": [
            "kubernetes_namespace.namespaces",
            "module.vault.helm_release.vault",
            "module.vault.kubernetes_config_map.vault_agent_config",
            "module.vault.kubernetes_job.vault_init",
            "module.vault.kubernetes_job.vault_seed"
          ]
        }
      ]
    },
    {
      "module": "module.keycloak",
      "mode": "managed",
      "type": "kubernetes_config_map",
      "name": "keycloak",
      "provider": "provider[\"registry.terraform.io/hashicorp/kubernetes\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "binary_data": {},
            "data": {
              "KC_DB": "postgres",
              "KC_DB_URL": "jdbc:postgresql://ananta-local-pg-rw.database-system.svc.cluster.local:5432/keycloak",
              "KC_DB_USERNAME": "keycloak",
              "KC_HEALTH_ENABLED": "true",
              "KC_HOSTNAME_STRICT": "false",
              "KC_HTTP_ENABLED": "true",
              "KC_METRICS_ENABLED": "true",
              "KC_PROXY": "edge",
              "KEYCLOAK_ADMIN": "admin"
            },
            "id": "auth-system/ananta-keycloak-config",
            "immutable": false,
            "metadata": [
              {
                "annotations": {},
                "generate_name": "",
                "generation": 0,
                "labels": {
                  "app.kubernetes.io/component": "auth",
                  "app.kubernetes.io/instance": "ananta-keycloak",
                  "app.kubernetes.io/managed-by": "terraform",
                  "app.kubernetes.io/name": "keycloak",
                  "app.kubernetes.io/part-of": "ananta-platform",
                  "environment": "local"
                },
                "name": "ananta-keycloak-config",
                "namespace": "auth-system",
                "resource_version": "26267",
                "uid": "920e92d1-5303-49c4-8787-13da01d82ca7"
              }
            ]
          },
          "sensitive_attributes": [],
          "identity_schema_version": 1,
          "identity": {
            "api_version": "v1",
            "kind": "ConfigMap",
            "name": "ananta-keycloak-config",
            "namespace": "auth-system"
          },
          "private": "bnVsbA==",
          "dependencies": [
            "kubernetes_config_map.db_migrations",
            "kubernetes_job.db_migration",
            "kubernetes_namespace.namespaces",
            "module.database.helm_release.cloudnative_pg",
            "module.database.kubernetes_namespace.database",
            "module.database.kubernetes_secret.app_user",
            "module.database.kubernetes_secret.superuser",
            "module.database.kubernetes_service.database",
            "module.database.local_file.cluster_manifest",
            "module.database.null_resource.cluster",
            "module.database.random_password.app_user",
            "module.database.random_password.superuser",
            "module.vault.helm_release.vault",
            "module.vault.kubernetes_config_map.vault_agent_config",
            "module.vault.kubernetes_job.vault_init",
            "module.vault.kubernetes_job.vault_seed"
          ]
        }
      ]
    },
    {
      "module": "module.keycloak",
      "mode": "managed",
      "type": "kubernetes_deployment",
      "name": "keycloak",
      "provider": "provider[\"registry.terraform.io/hashicorp/kubernetes\"]",
      "instances": [
        {
          "schema_version": 1,
          "attributes": {
            "id": "auth-system/keycloak",
            "metadata": [
              {
                "annotations": {},
                "generate_name": "",
                "generation": 21,
                "labels": {
                  "app.kubernetes.io/component": "auth",
                  "app.kubernetes.io/instance": "ananta-keycloak",
                  "app.kubernetes.io/managed-by": "terraform",
                  "app.kubernetes.io/name": "keycloak",
                  "app.kubernetes.io/part-of": "ananta-platform",
                  "environment": "local"
                },
                "name": "keycloak",
                "namespace": "auth-system",
                "resource_version": "664268",
                "uid": "03301069-020f-4daa-851e-266e009abca3"
              }
            ],
            "spec": [
              {
                "min_ready_seconds": 0,
                "paused": false,
                "progress_deadline_seconds": 600,
                "replicas": "1",
                "revision_history_limit": 10,
                "selector": [
                  {
                    "match_expressions": [],
                    "match_labels": {
                      "app.kubernetes.io/instance": "ananta-keycloak",
                      "app.kubernetes.io/name": "keycloak"
                    }
                  }
                ],
                "strategy": [
                  {
                    "rolling_update": [
                      {
                        "max_surge": "25%",
                        "max_unavailable": "25%"
                      }
                    ],
                    "type": "RollingUpdate"
                  }
                ],
                "template": [
                  {
                    "metadata": [
                      {
                        "annotations": {},
                        "generate_name": "",
                        "generation": 0,
                        "labels": {
                          "app.kubernetes.io/component": "auth",
                          "app.kubernetes.io/instance": "ananta-keycloak",
                          "app.kubernetes.io/managed-by": "terraform",
                          "app.kubernetes.io/name": "keycloak",
                          "app.kubernetes.io/part-of": "ananta-platform",
                          "environment": "local"
                        },
                        "name": "",
                        "namespace": "",
                        "resource_version": "",
                        "uid": ""
                      }
                    ],
                    "spec": [
                      {
                        "active_deadline_seconds": 0,
                        "affinity": [],
                        "automount_service_account_token": true,
                        "container": [
                          {
                            "args": [
                              "start-dev"
                            ],
                            "command": [],
                            "env": [],
                            "env_from": [
                              {
                                "config_map_ref": [
                                  {
                                    "name": "ananta-keycloak-config",
                                    "optional": false
                                  }
                                ],
                                "prefix": "",
                                "secret_ref": []
                              },
                              {
                                "config_map_ref": [],
                                "prefix": "",
                                "secret_ref": [
                                  {
                                    "name": "ananta-keycloak-secrets",
                                    "optional": false
                                  }
                                ]
                              }
                            ],
                            "image": "quay.io/keycloak/keycloak:23.0",
                            "image_pull_policy": "IfNotPresent",
                            "lifecycle": [],
                            "liveness_probe": [
                              {
                                "exec": [],
                                "failure_threshold": 3,
                                "grpc": [],
                                "http_get": [
                                  {
                                    "host": "",
                                    "http_header": [],
                                    "path": "/health/live",
                                    "port": "8080",
                                    "scheme": "HTTP"
                                  }
                                ],
                                "initial_delay_seconds": 60,
                                "period_seconds": 30,
                                "success_threshold": 1,
                                "tcp_socket": [],
                                "timeout_seconds": 5
                              }
                            ],
                            "name": "keycloak",
                            "port": [
                              {
                                "container_port": 8080,
                                "host_ip": "",
                                "host_port": 0,
                                "name": "http",
                                "protocol": "TCP"
                              }
                            ],
                            "readiness_probe": [
                              {
                                "exec": [],
                                "failure_threshold": 3,
                                "grpc": [],
                                "http_get": [
                                  {
                                    "host": "",
                                    "http_header": [],
                                    "path": "/health/ready",
                                    "port": "8080",
                                    "scheme": "HTTP"
                                  }
                                ],
                                "initial_delay_seconds": 30,
                                "period_seconds": 10,
                                "success_threshold": 1,
                                "tcp_socket": [],
                                "timeout_seconds": 5
                              }
                            ],
                            "resources": [
                              {
                                "limits": {
                                  "cpu": "1",
                                  "memory": "1Gi"
                                },
                                "requests": {
                                  "cpu": "500m",
                                  "memory": "512Mi"
                                }
                              }
                            ],
                            "restart_policy": "",
                            "security_context": [],
                            "startup_probe": [],
                            "stdin": false,
                            "stdin_once": false,
                            "termination_message_path": "/dev/termination-log",
                            "termination_message_policy": "File",
                            "tty": false,
                            "volume_device": [],
                            "volume_mount": [
                              {
                                "mount_path": "/opt/keycloak/data/import",
                                "mount_propagation": "None",
                                "name": "realm-config",
                                "read_only": true,
                                "sub_path": "",
                                "sub_path_expr": ""
                              }
                            ],
                            "working_dir": ""
                          }
                        ],
                        "dns_config": [],
                        "dns_policy": "ClusterFirst",
                        "enable_service_links": true,
                        "host_aliases": [],
                        "host_ipc": false,
                        "host_network": false,
                        "host_pid": false,
                        "hostname": "",
                        "image_pull_secrets": [],
                        "init_container": [],
                        "node_name": "",
                        "node_selector": {},
                        "os": [],
                        "priority_class_name": "",
                        "readiness_gate": [],
                        "restart_policy": "Always",
                        "runtime_class_name": "",
                        "scheduler_name": "default-scheduler",
                        "security_context": [],
                        "service_account_name": "",
                        "share_process_namespace": false,
                        "subdomain": "",
                        "termination_grace_period_seconds": 30,
                        "toleration": [],
                        "topology_spread_constraint": [],
                        "volume": [
                          {
                            "aws_elastic_block_store": [],
                            "azure_disk": [],
                            "azure_file": [],
                            "ceph_fs": [],
                            "cinder": [],
                            "config_map": [
                              {
                                "default_mode": "0644",
                                "items": [],
                                "name": "ananta-keycloak-realm",
                                "optional": false
                              }
                            ],
                            "csi": [],
                            "downward_api": [],
                            "empty_dir": [],
                            "ephemeral": [],
                            "fc": [],
                            "flex_volume": [],
                            "flocker": [],
                            "gce_persistent_disk": [],
                            "git_repo": [],
                            "glusterfs": [],
                            "host_path": [],
                            "iscsi": [],
                            "local": [],
                            "name": "realm-config",
                            "nfs": [],
                            "persistent_volume_claim": [],
                            "photon_persistent_disk": [],
                            "projected": [],
                            "quobyte": [],
                            "rbd": [],
                            "secret": [],
                            "vsphere_volume": []
                          }
                        ]
                      }
                    ]
                  }
                ]
              }
            ],
            "timeouts": null,
            "wait_for_rollout": true
          },
          "sensitive_attributes": [],
          "identity_schema_version": 1,
          "identity": {
            "api_version": "apps/v1",
            "kind": "Deployment",
            "name": "keycloak",
            "namespace": "auth-system"
          },
          "private": "eyJlMmJmYjczMC1lY2FhLTExZTYtOGY4OC0zNDM2M2JjN2M0YzAiOnsiY3JlYXRlIjo2MDAwMDAwMDAwMDAsImRlbGV0ZSI6NjAwMDAwMDAwMDAwLCJ1cGRhdGUiOjYwMDAwMDAwMDAwMH0sInNjaGVtYV92ZXJzaW9uIjoiMSJ9",
          "dependencies": [
            "kubernetes_config_map.db_migrations",
            "kubernetes_config_map.keycloak_realm",
            "kubernetes_job.db_migration",
            "kubernetes_namespace.namespaces",
            "module.database.helm_release.cloudnative_pg",
            "module.database.kubernetes_namespace.database",
            "module.database.kubernetes_secret.app_user",
            "module.database.kubernetes_secret.superuser",
            "module.database.kubernetes_service.database",
            "module.database.local_file.cluster_manifest",
            "module.database.null_resource.cluster",
            "module.database.random_password.app_user",
            "module.database.random_password.superuser",
            "module.keycloak.kubernetes_config_map.keycloak",
            "module.keycloak.kubernetes_secret.keycloak",
            "module.keycloak.kubernetes_service_account.keycloak",
            "module.vault.helm_release.vault",
            "module.vault.kubernetes_config_map.vault_agent_config",
            "module.vault.kubernetes_job.vault_init",
            "module.vault.kubernetes_job.vault_seed"
          ]
        }
      ]
    },
    {
      "module": "module.keycloak",
      "mode": "managed",
      "type": "kubernetes_job",
      "name": "realm_import",
      "provider": "provider[\"registry.terraform.io/hashicorp/kubernetes\"]",
      "instances": [
        {
          "index_key": 0,
          "status": "tainted",
          "schema_version": 1,
          "attributes": {
            "id": "auth-system/ananta-keycloak-realm-import",
            "metadata": [
              {
                "annotations": null,
                "generate_name": "",
                "generation": 0,
                "labels": {
                  "app.kubernetes.io/component": "auth",
                  "app.kubernetes.io/instance": "ananta-keycloak",
                  "app.kubernetes.io/managed-by": "terraform",
                  "app.kubernetes.io/name": "keycloak",
                  "app.kubernetes.io/part-of": "ananta-platform",
                  "environment": "local"
                },
                "name": "ananta-keycloak-realm-import",
                "namespace": "auth-system",
                "resource_version": "",
                "uid": ""
              }
            ],
            "spec": [
              {
                "active_deadline_seconds": 0,
                "backoff_limit": 5,
                "backoff_limit_per_index": 0,
                "completion_mode": "",
                "completions": 1,
                "manual_selector": false,
                "max_failed_indexes": 0,
                "parallelism": 1,
                "pod_failure_policy": [],
                "selector": [],
                "template": [
                  {
                    "metadata": [
                      {
                        "annotations": null,
                        "generate_name": "",
                        "generation": 0,
                        "labels": {
                          "app.kubernetes.io/component": "auth",
                          "app.kubernetes.io/instance": "ananta-keycloak",
                          "app.kubernetes.io/managed-by": "terraform",
                          "app.kubernetes.io/name": "keycloak",
                          "app.kubernetes.io/part-of": "ananta-platform",
                          "environment": "local"
                        },
                        "name": "",
                        "resource_version": "",
                        "uid": ""
                      }
                    ],
                    "spec": [
                      {
                        "active_deadline_seconds": 0,
                        "affinity": [],
                        "automount_service_account_token": true,
                        "container": [
                          {
                            "args": [
                              "echo \"Waiting for Keycloak to be ready...\"\nuntil curl -sf http://keycloak:8080/health/ready; do\n  echo \"Keycloak not ready, waiting...\"\n  sleep 5\ndone\necho \"Keycloak is ready, importing realm...\"\n\n# Get admin token\necho \"Getting admin token...\"\nTOKEN=$(curl -s -X POST \"http://keycloak:8080/realms/master/protocol/openid-connect/token\" \\\n  -H \"Content-Type: application/x-www-form-urlencoded\" \\\n  -d \"username=admin\" \\\n  -d \"password=admin123\" \\\n  -d \"grant_type=password\" \\\n  -d \"client_id=admin-cli\" | sed -n 's/.*\"access_token\":\"\\([^\"]*\\)\".*/\\1/p')\n\nif [ -z \"$TOKEN\" ]; then\n  echo \"Failed to get admin token\"\n  exit 1\nfi\necho \"Got admin token\"\n\n# Check if realm exists\necho \"Checking if realm exists...\"\nREALM_EXISTS=$(curl -s -o /dev/null -w \"%{http_code}\" \\\n  \"http://keycloak:8080/admin/realms/arc-saas\" \\\n  -H \"Authorization: Bearer $TOKEN\")\n\nif [ \"$REALM_EXISTS\" = \"200\" ]; then\n  echo \"Realm arc-saas already exists, skipping import\"\n  exit 0\nfi\n\n# Import realm\necho \"Creating arc-saas realm...\"\nRESULT=$(curl -s -w \"\\n%{http_code}\" -X POST \"http://keycloak:8080/admin/realms\" \\\n  -H \"Authorization: Bearer $TOKEN\" \\\n  -H \"Content-Type: application/json\" \\\n  -d @/realm-config/arc-saas-realm.json)\n\nHTTP_CODE=$(echo \"$RESULT\" | tail -1)\nBODY=$(echo \"$RESULT\" | head -n -1)\n\nif [ \"$HTTP_CODE\" = \"201\" ] || [ \"$HTTP_CODE\" = \"200\" ]; then\n  echo \"Realm import successful!\"\nelse\n  echo \"Realm import failed with status $HTTP_CODE: $BODY\"\n  exit 1\nfi\n"
                            ],
                            "command": [
                              "/bin/sh",
                              "-c"
                            ],
                            "env": [],
                            "env_from": [],
                            "image": "curlimages/curl:8.5.0",
                            "image_pull_policy": "",
                            "lifecycle": [],
                            "liveness_probe": [],
                            "name": "realm-import",
                            "port": [],
                            "readiness_probe": [],
                            "resources": [],
                            "restart_policy": "",
                            "security_context": [],
                            "startup_probe": [],
                            "stdin": false,
                            "stdin_once": false,
                            "termination_message_path": "/dev/termination-log",
                            "termination_message_policy": "",
                            "tty": false,
                            "volume_device": [],
                            "volume_mount": [
                              {
                                "mount_path": "/realm-config",
                                "mount_propagation": "None",
                                "name": "realm-config",
                                "read_only": false,
                                "sub_path": "",
                                "sub_path_expr": ""
                              }
                            ],
                            "working_dir": ""
                          }
                        ],
                        "dns_config": [],
                        "dns_policy": "ClusterFirst",
                        "enable_service_links": true,
                        "host_aliases": [],
                        "host_ipc": false,
                        "host_network": false,
                        "host_pid": false,
                        "hostname": "",
                        "image_pull_secrets": [],
                        "init_container": [],
                        "node_name": "",
                        "node_selector": null,
                        "os": [],
                        "priority_class_name": "",
                        "readiness_gate": [],
                        "restart_policy": "OnFailure",
                        "runtime_class_name": "",
                        "scheduler_name": "",
                        "security_context": [],
                        "service_account_name": "",
                        "share_process_namespace": false,
                        "subdomain": "",
                        "termination_grace_period_seconds": 30,
                        "toleration": [],
                        "topology_spread_constraint": [],
                        "volume": [
                          {
                            "aws_elastic_block_store": [],
                            "azure_disk": [],
                            "azure_file": [],
                            "ceph_fs": [],
                            "cinder": [],
                            "config_map": [
                              {
                                "default_mode": "0644",
                                "items": [],
                                "name": "ananta-keycloak-realm",
                                "optional": false
                              }
                            ],
                            "csi": [],
                            "downward_api": [],
                            "empty_dir": [],
                            "ephemeral": [],
                            "fc": [],
                            "flex_volume": [],
                            "flocker": [],
                            "gce_persistent_disk": [],
                            "git_repo": [],
                            "glusterfs": [],
                            "host_path": [],
                            "iscsi": [],
                            "local": [],
                            "name": "realm-config",
                            "nfs": [],
                            "persistent_volume_claim": [],
                            "photon_persistent_disk": [],
                            "projected": [],
                            "quobyte": [],
                            "rbd": [],
                            "secret": [],
                            "vsphere_volume": []
                          }
                        ]
                      }
                    ]
                  }
                ],
                "ttl_seconds_after_finished": "600"
              }
            ],
            "timeouts": null,
            "wait_for_completion": true
          },
          "sensitive_attributes": [
            [
              {
                "type": "get_attr",
                "value": "spec"
              },
              {
                "type": "index",
                "value": {
                  "value": 0,
                  "type": "number"
                }
              },
              {
                "type": "get_attr",
                "value": "template"
              },
              {
                "type": "index",
                "value": {
                  "value": 0,
                  "type": "number"
                }
              },
              {
                "type": "get_attr",
                "value": "spec"
              },
              {
                "type": "index",
                "value": {
                  "value": 0,
                  "type": "number"
                }
              },
              {
                "type": "get_attr",
                "value": "container"
              },
              {
                "type": "index",
                "value": {
                  "value": 0,
                  "type": "number"
                }
              },
              {
                "type": "get_attr",
                "value": "args"
              },
              {
                "type": "index",
                "value": {
                  "value": 0,
                  "type": "number"
                }
              }
            ]
          ],
          "identity_schema_version": 1,
          "identity": {
            "api_version": "batch/v1",
            "kind": "Job",
            "name": "ananta-keycloak-realm-import",
            "namespace": "auth-system"
          },
          "private": "eyJlMmJmYjczMC1lY2FhLTExZTYtOGY4OC0zNDM2M2JjN2M0YzAiOnsiY3JlYXRlIjo2MDAwMDAwMDAwMCwiZGVsZXRlIjo2MDAwMDAwMDAwMCwidXBkYXRlIjo2MDAwMDAwMDAwMH0sInNjaGVtYV92ZXJzaW9uIjoiMSJ9",
          "dependencies": [
            "kubernetes_config_map.db_migrations",
            "kubernetes_config_map.keycloak_realm",
            "kubernetes_job.db_migration",
            "kubernetes_namespace.namespaces",
            "module.database.helm_release.cloudnative_pg",
            "module.database.kubernetes_namespace.database",
            "module.database.kubernetes_secret.app_user",
            "module.database.kubernetes_secret.superuser",
            "module.database.kubernetes_service.database",
            "module.database.local_file.cluster_manifest",
            "module.database.null_resource.cluster",
            "module.database.random_password.app_user",
            "module.database.random_password.superuser",
            "module.keycloak.kubernetes_config_map.keycloak",
            "module.keycloak.kubernetes_deployment.keycloak",
            "module.keycloak.kubernetes_secret.keycloak",
            "module.keycloak.kubernetes_service_account.keycloak",
            "module.vault.helm_release.vault",
            "module.vault.kubernetes_config_map.vault_agent_config",
            "module.vault.kubernetes_job.vault_init",
            "module.vault.kubernetes_job.vault_seed"
          ]
        }
      ]
    },
    {
      "module": "module.keycloak",
      "mode": "managed",
      "type": "kubernetes_secret",
      "name": "keycloak",
      "provider": "provider[\"registry.terraform.io/hashicorp/kubernetes\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "binary_data": null,
            "binary_data_wo": null,
            "binary_data_wo_revision": null,
            "data": {
              "KC_DB_PASSWORD": "keycloak123",
              "KEYCLOAK_ADMIN_PASSWORD": "admin123"
            },
            "data_wo": null,
            "data_wo_revision": null,
            "id": "auth-system/ananta-keycloak-secrets",
            "immutable": false,
            "metadata": [
              {
                "annotations": {},
                "generate_name": "",
                "generation": 0,
                "labels": {
                  "app.kubernetes.io/component": "auth",
                  "app.kubernetes.io/instance": "ananta-keycloak",
                  "app.kubernetes.io/managed-by": "terraform",
                  "app.kubernetes.io/name": "keycloak",
                  "app.kubernetes.io/part-of": "ananta-platform",
                  "environment": "local"
                },
                "name": "ananta-keycloak-secrets",
                "namespace": "auth-system",
                "resource_version": "59958",
                "uid": "118b5f36-049c-4128-894e-29af0ca91f31"
              }
            ],
            "timeouts": null,
            "type": "Opaque",
            "wait_for_service_account_token": true
          },
          "sensitive_attributes": [
            [
              {
                "type": "get_attr",
                "value": "binary_data"
              }
            ],
            [
              {
                "type": "get_attr",
                "value": "data"
              }
            ],
            [
              {
                "type": "get_attr",
                "value": "data"
              },
              {
                "type": "index",
                "value": {
                  "value": "KC_DB_PASSWORD",
                  "type": "string"
                }
              }
            ],
            [
              {
                "type": "get_attr",
                "value": "data"
              },
              {
                "type": "index",
                "value": {
                  "value": "KEYCLOAK_ADMIN_PASSWORD",
                  "type": "string"
                }
              }
            ]
          ],
          "identity_schema_version": 1,
          "identity": {
            "api_version": "v1",
            "kind": "Secret",
            "name": "ananta-keycloak-secrets",
            "namespace": "auth-system"
          },
          "private": "eyJlMmJmYjczMC1lY2FhLTExZTYtOGY4OC0zNDM2M2JjN2M0YzAiOnsiY3JlYXRlIjo2MDAwMDAwMDAwMH19",
          "dependencies": [
            "kubernetes_config_map.db_migrations",
            "kubernetes_job.db_migration",
            "kubernetes_namespace.namespaces",
            "module.database.helm_release.cloudnative_pg",
            "module.database.kubernetes_namespace.database",
            "module.database.kubernetes_secret.app_user",
            "module.database.kubernetes_secret.superuser",
            "module.database.kubernetes_service.database",
            "module.database.local_file.cluster_manifest",
            "module.database.null_resource.cluster",
            "module.database.random_password.app_user",
            "module.database.random_password.superuser",
            "module.vault.helm_release.vault",
            "module.vault.kubernetes_config_map.vault_agent_config",
            "module.vault.kubernetes_job.vault_init",
            "module.vault.kubernetes_job.vault_seed"
          ]
        }
      ]
    },
    {
      "module": "module.keycloak",
      "mode": "managed",
      "type": "kubernetes_service",
      "name": "keycloak",
      "provider": "provider[\"registry.terraform.io/hashicorp/kubernetes\"]",
      "instances": [
        {
          "schema_version": 1,
          "attributes": {
            "id": "auth-system/keycloak",
            "metadata": [
              {
                "annotations": {},
                "generate_name": "",
                "generation": 0,
                "labels": {
                  "app.kubernetes.io/component": "auth",
                  "app.kubernetes.io/instance": "ananta-keycloak",
                  "app.kubernetes.io/managed-by": "terraform",
                  "app.kubernetes.io/name": "keycloak",
                  "app.kubernetes.io/part-of": "ananta-platform",
                  "environment": "local"
                },
                "name": "keycloak",
                "namespace": "auth-system",
                "resource_version": "26272",
                "uid": "8ba33888-07b3-42d1-b7fd-5328ef62debc"
              }
            ],
            "spec": [
              {
                "allocate_load_balancer_node_ports": true,
                "cluster_ip": "10.43.171.67",
                "cluster_ips": [
                  "10.43.171.67"
                ],
                "external_ips": [],
                "external_name": "",
                "external_traffic_policy": "",
                "health_check_node_port": 0,
                "internal_traffic_policy": "Cluster",
                "ip_families": [
                  "IPv4"
                ],
                "ip_family_policy": "SingleStack",
                "load_balancer_class": "",
                "load_balancer_ip": "",
                "load_balancer_source_ranges": [],
                "port": [
                  {
                    "app_protocol": "",
                    "name": "http",
                    "node_port": 0,
                    "port": 8080,
                    "protocol": "TCP",
                    "target_port": "8080"
                  }
                ],
                "publish_not_ready_addresses": false,
                "selector": {
                  "app.kubernetes.io/instance": "ananta-keycloak",
                  "app.kubernetes.io/name": "keycloak"
                },
                "session_affinity": "None",
                "session_affinity_config": [],
                "type": "ClusterIP"
              }
            ],
            "status": [
              {
                "load_balancer": [
                  {
                    "ingress": []
                  }
                ]
              }
            ],
            "timeouts": null,
            "wait_for_load_balancer": true
          },
          "sensitive_attributes": [],
          "identity_schema_version": 1,
          "identity": {
            "api_version": "v1",
            "kind": "Service",
            "name": "keycloak",
            "namespace": "auth-system"
          },
          "private": "eyJlMmJmYjczMC1lY2FhLTExZTYtOGY4OC0zNDM2M2JjN2M0YzAiOnsiY3JlYXRlIjo2MDAwMDAwMDAwMDB9LCJzY2hlbWFfdmVyc2lvbiI6IjEifQ==",
          "dependencies": [
            "kubernetes_config_map.db_migrations",
            "kubernetes_job.db_migration",
            "kubernetes_namespace.namespaces",
            "module.database.helm_release.cloudnative_pg",
            "module.database.kubernetes_namespace.database",
            "module.database.kubernetes_secret.app_user",
            "module.database.kubernetes_secret.superuser",
            "module.database.kubernetes_service.database",
            "module.database.local_file.cluster_manifest",
            "module.database.null_resource.cluster",
            "module.database.random_password.app_user",
            "module.database.random_password.superuser",
            "module.vault.helm_release.vault",
            "module.vault.kubernetes_config_map.vault_agent_config",
            "module.vault.kubernetes_job.vault_init",
            "module.vault.kubernetes_job.vault_seed"
          ]
        }
      ]
    },
    {
      "module": "module.keycloak",
      "mode": "managed",
      "type": "kubernetes_service_account",
      "name": "keycloak",
      "provider": "provider[\"registry.terraform.io/hashicorp/kubernetes\"]",
      "instances": []
    },
    {
      "module": "module.temporal",
      "mode": "managed",
      "type": "kubernetes_config_map",
      "name": "temporal",
      "provider": "provider[\"registry.terraform.io/hashicorp/kubernetes\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "binary_data": {},
            "data": {
              "DB": "postgres12",
              "DB_PORT": "5432",
              "LOG_LEVEL": "info",
              "POSTGRES_SEEDS": "ananta-local-pg-rw.database-system.svc.cluster.local",
              "POSTGRES_USER": "temporal"
            },
            "id": "temporal-system/ananta-temporal-config",
            "immutable": false,
            "metadata": [
              {
                "annotations": {},
                "generate_name": "",
                "generation": 0,
                "labels": {
                  "app.kubernetes.io/component": "workflow",
                  "app.kubernetes.io/instance": "ananta-temporal",
                  "app.kubernetes.io/managed-by": "terraform",
                  "app.kubernetes.io/name": "temporal",
                  "app.kubernetes.io/part-of": "ananta-platform",
                  "environment": "local"
                },
                "name": "ananta-temporal-config",
                "namespace": "temporal-system",
                "resource_version": "26268",
                "uid": "ff95fa12-b70f-4315-b0e7-8240825ca375"
              }
            ]
          },
          "sensitive_attributes": [],
          "identity_schema_version": 1,
          "identity": {
            "api_version": "v1",
            "kind": "ConfigMap",
            "name": "ananta-temporal-config",
            "namespace": "temporal-system"
          },
          "private": "bnVsbA==",
          "dependencies": [
            "kubernetes_config_map.db_migrations",
            "kubernetes_job.db_migration",
            "kubernetes_namespace.namespaces",
            "module.database.helm_release.cloudnative_pg",
            "module.database.kubernetes_namespace.database",
            "module.database.kubernetes_secret.app_user",
            "module.database.kubernetes_secret.superuser",
            "module.database.kubernetes_service.database",
            "module.database.local_file.cluster_manifest",
            "module.database.null_resource.cluster",
            "module.database.random_password.app_user",
            "module.database.random_password.superuser",
            "module.vault.helm_release.vault",
            "module.vault.kubernetes_config_map.vault_agent_config",
            "module.vault.kubernetes_job.vault_init",
            "module.vault.kubernetes_job.vault_seed"
          ]
        }
      ]
    },
    {
      "module": "module.temporal",
      "mode": "managed",
      "type": "kubernetes_deployment",
      "name": "temporal",
      "provider": "provider[\"registry.terraform.io/hashicorp/kubernetes\"]",
      "instances": [
        {
          "schema_version": 1,
          "attributes": {
            "id": "temporal-system/temporal",
            "metadata": [
              {
                "annotations": {},
                "generate_name": "",
                "generation": 1,
                "labels": {
                  "app.kubernetes.io/component": "workflow",
                  "app.kubernetes.io/instance": "ananta-temporal",
                  "app.kubernetes.io/managed-by": "terraform",
                  "app.kubernetes.io/name": "temporal",
                  "app.kubernetes.io/part-of": "ananta-platform",
                  "environment": "local"
                },
                "name": "temporal",
                "namespace": "temporal-system",
                "resource_version": "28552",
                "uid": "c1d99047-7b38-45a9-81f6-5a685594624d"
              }
            ],
            "spec": [
              {
                "min_ready_seconds": 0,
                "paused": false,
                "progress_deadline_seconds": 600,
                "replicas": "1",
                "revision_history_limit": 10,
                "selector": [
                  {
                    "match_expressions": [],
                    "match_labels": {
                      "app.kubernetes.io/instance": "ananta-temporal",
                      "app.kubernetes.io/name": "temporal"
                    }
                  }
                ],
                "strategy": [
                  {
                    "rolling_update": [
                      {
                        "max_surge": "25%",
                        "max_unavailable": "25%"
                      }
                    ],
                    "type": "RollingUpdate"
                  }
                ],
                "template": [
                  {
                    "metadata": [
                      {
                        "annotations": {},
                        "generate_name": "",
                        "generation": 0,
                        "labels": {
                          "app.kubernetes.io/component": "workflow",
                          "app.kubernetes.io/instance": "ananta-temporal",
                          "app.kubernetes.io/managed-by": "terraform",
                          "app.kubernetes.io/name": "temporal",
                          "app.kubernetes.io/part-of": "ananta-platform",
                          "environment": "local"
                        },
                        "name": "",
                        "namespace": "",
                        "resource_version": "",
                        "uid": ""
                      }
                    ],
                    "spec": [
                      {
                        "active_deadline_seconds": 0,
                        "affinity": [],
                        "automount_service_account_token": true,
                        "container": [
                          {
                            "args": [],
                            "command": [],
                            "env": [],
                            "env_from": [
                              {
                                "config_map_ref": [
                                  {
                                    "name": "ananta-temporal-config",
                                    "optional": false
                                  }
                                ],
                                "prefix": "",
                                "secret_ref": []
                              },
                              {
                                "config_map_ref": [],
                                "prefix": "",
                                "secret_ref": [
                                  {
                                    "name": "ananta-temporal-secrets",
                                    "optional": false
                                  }
                                ]
                              }
                            ],
                            "image": "temporalio/auto-setup:1.24.2",
                            "image_pull_policy": "IfNotPresent",
                            "lifecycle": [],
                            "liveness_probe": [
                              {
                                "exec": [],
                                "failure_threshold": 3,
                                "grpc": [],
                                "http_get": [],
                                "initial_delay_seconds": 60,
                                "period_seconds": 30,
                                "success_threshold": 1,
                                "tcp_socket": [
                                  {
                                    "port": "7233"
                                  }
                                ],
                                "timeout_seconds": 1
                              }
                            ],
                            "name": "temporal",
                            "port": [
                              {
                                "container_port": 7233,
                                "host_ip": "",
                                "host_port": 0,
                                "name": "grpc",
                                "protocol": "TCP"
                              }
                            ],
                            "readiness_probe": [
                              {
                                "exec": [],
                                "failure_threshold": 3,
                                "grpc": [],
                                "http_get": [],
                                "initial_delay_seconds": 10,
                                "period_seconds": 10,
                                "success_threshold": 1,
                                "tcp_socket": [
                                  {
                                    "port": "7233"
                                  }
                                ],
                                "timeout_seconds": 1
                              }
                            ],
                            "resources": [
                              {
                                "limits": {
                                  "cpu": "1",
                                  "memory": "1Gi"
                                },
                                "requests": {
                                  "cpu": "250m",
                                  "memory": "512Mi"
                                }
                              }
                            ],
                            "restart_policy": "",
                            "security_context": [],
                            "startup_probe": [
                              {
                                "exec": [],
                                "failure_threshold": 30,
                                "grpc": [],
                                "http_get": [],
                                "initial_delay_seconds": 30,
                                "period_seconds": 10,
                                "success_threshold": 1,
                                "tcp_socket": [
                                  {
                                    "port": "7233"
                                  }
                                ],
                                "timeout_seconds": 1
                              }
                            ],
                            "stdin": false,
                            "stdin_once": false,
                            "termination_message_path": "/dev/termination-log",
                            "termination_message_policy": "File",
                            "tty": false,
                            "volume_device": [],
                            "volume_mount": [],
                            "working_dir": ""
                          }
                        ],
                        "dns_config": [],
                        "dns_policy": "ClusterFirst",
                        "enable_service_links": true,
                        "host_aliases": [],
                        "host_ipc": false,
                        "host_network": false,
                        "host_pid": false,
                        "hostname": "",
                        "image_pull_secrets": [],
                        "init_container": [],
                        "node_name": "",
                        "node_selector": {},
                        "os": [],
                        "priority_class_name": "",
                        "readiness_gate": [],
                        "restart_policy": "Always",
                        "runtime_class_name": "",
                        "scheduler_name": "default-scheduler",
                        "security_context": [],
                        "service_account_name": "",
                        "share_process_namespace": false,
                        "subdomain": "",
                        "termination_grace_period_seconds": 30,
                        "toleration": [],
                        "topology_spread_constraint": [],
                        "volume": []
                      }
                    ]
                  }
                ]
              }
            ],
            "timeouts": null,
            "wait_for_rollout": true
          },
          "sensitive_attributes": [],
          "identity_schema_version": 1,
          "identity": {
            "api_version": "apps/v1",
            "kind": "Deployment",
            "name": "temporal",
            "namespace": "temporal-system"
          },
          "private": "eyJlMmJmYjczMC1lY2FhLTExZTYtOGY4OC0zNDM2M2JjN2M0YzAiOnsiY3JlYXRlIjo2MDAwMDAwMDAwMDAsImRlbGV0ZSI6NjAwMDAwMDAwMDAwLCJ1cGRhdGUiOjYwMDAwMDAwMDAwMH0sInNjaGVtYV92ZXJzaW9uIjoiMSJ9",
          "dependencies": [
            "kubernetes_config_map.db_migrations",
            "kubernetes_job.db_migration",
            "kubernetes_namespace.namespaces",
            "module.database.helm_release.cloudnative_pg",
            "module.database.kubernetes_namespace.database",
            "module.database.kubernetes_secret.app_user",
            "module.database.kubernetes_secret.superuser",
            "module.database.kubernetes_service.database",
            "module.database.local_file.cluster_manifest",
            "module.database.null_resource.cluster",
            "module.database.random_password.app_user",
            "module.database.random_password.superuser",
            "module.temporal.kubernetes_config_map.temporal",
            "module.temporal.kubernetes_secret.temporal",
            "module.temporal.kubernetes_service_account.temporal",
            "module.vault.helm_release.vault",
            "module.vault.kubernetes_config_map.vault_agent_config",
            "module.vault.kubernetes_job.vault_init",
            "module.vault.kubernetes_job.vault_seed"
          ]
        }
      ]
    },
    {
      "module": "module.temporal",
      "mode": "managed",
      "type": "kubernetes_deployment",
      "name": "temporal_ui",
      "provider": "provider[\"registry.terraform.io/hashicorp/kubernetes\"]",
      "instances": [
        {
          "index_key": 0,
          "schema_version": 1,
          "attributes": {
            "id": "temporal-system/temporal-ui",
            "metadata": [
              {
                "annotations": {},
                "generate_name": "",
                "generation": 1,
                "labels": {
                  "app.kubernetes.io/component": "workflow-ui",
                  "app.kubernetes.io/instance": "ananta-temporal-ui",
                  "app.kubernetes.io/managed-by": "terraform",
                  "app.kubernetes.io/name": "temporal-ui",
                  "app.kubernetes.io/part-of": "ananta-platform",
                  "environment": "local"
                },
                "name": "temporal-ui",
                "namespace": "temporal-system",
                "resource_version": "29304",
                "uid": "28046f1f-46a0-4f77-b158-ce8d48601577"
              }
            ],
            "spec": [
              {
                "min_ready_seconds": 0,
                "paused": false,
                "progress_deadline_seconds": 600,
                "replicas": "1",
                "revision_history_limit": 10,
                "selector": [
                  {
                    "match_expressions": [],
                    "match_labels": {
                      "app.kubernetes.io/instance": "ananta-temporal-ui",
                      "app.kubernetes.io/name": "temporal-ui"
                    }
                  }
                ],
                "strategy": [
                  {
                    "rolling_update": [
                      {
                        "max_surge": "25%",
                        "max_unavailable": "25%"
                      }
                    ],
                    "type": "RollingUpdate"
                  }
                ],
                "template": [
                  {
                    "metadata": [
                      {
                        "annotations": {},
                        "generate_name": "",
                        "generation": 0,
                        "labels": {
                          "app.kubernetes.io/component": "workflow-ui",
                          "app.kubernetes.io/instance": "ananta-temporal-ui",
                          "app.kubernetes.io/managed-by": "terraform",
                          "app.kubernetes.io/name": "temporal-ui",
                          "app.kubernetes.io/part-of": "ananta-platform",
                          "environment": "local"
                        },
                        "name": "",
                        "namespace": "",
                        "resource_version": "",
                        "uid": ""
                      }
                    ],
                    "spec": [
                      {
                        "active_deadline_seconds": 0,
                        "affinity": [],
                        "automount_service_account_token": true,
                        "container": [
                          {
                            "args": [],
                            "command": [],
                            "env": [
                              {
                                "name": "TEMPORAL_ADDRESS",
                                "value": "temporal.temporal-system.svc.cluster.local:7233",
                                "value_from": []
                              },
                              {
                                "name": "TEMPORAL_UI_PORT",
                                "value": "8080",
                                "value_from": []
                              },
                              {
                                "name": "TEMPORAL_CORS_ORIGINS",
                                "value": "http://localhost:3000,http://localhost:27555",
                                "value_from": []
                              }
                            ],
                            "env_from": [],
                            "image": "temporalio/ui:2.32.0",
                            "image_pull_policy": "IfNotPresent",
                            "lifecycle": [],
                            "liveness_probe": [
                              {
                                "exec": [],
                                "failure_threshold": 3,
                                "grpc": [],
                                "http_get": [
                                  {
                                    "host": "",
                                    "http_header": [],
                                    "path": "/",
                                    "port": "8080",
                                    "scheme": "HTTP"
                                  }
                                ],
                                "initial_delay_seconds": 30,
                                "period_seconds": 30,
                                "success_threshold": 1,
                                "tcp_socket": [],
                                "timeout_seconds": 1
                              }
                            ],
                            "name": "temporal-ui",
                            "port": [
                              {
                                "container_port": 8080,
                                "host_ip": "",
                                "host_port": 0,
                                "name": "http",
                                "protocol": "TCP"
                              }
                            ],
                            "readiness_probe": [
                              {
                                "exec": [],
                                "failure_threshold": 3,
                                "grpc": [],
                                "http_get": [
                                  {
                                    "host": "",
                                    "http_header": [],
                                    "path": "/",
                                    "port": "8080",
                                    "scheme": "HTTP"
                                  }
                                ],
                                "initial_delay_seconds": 10,
                                "period_seconds": 10,
                                "success_threshold": 1,
                                "tcp_socket": [],
                                "timeout_seconds": 1
                              }
                            ],
                            "resources": [
                              {
                                "limits": {
                                  "cpu": "200m",
                                  "memory": "256Mi"
                                },
                                "requests": {
                                  "cpu": "50m",
                                  "memory": "128Mi"
                                }
                              }
                            ],
                            "restart_policy": "",
                            "security_context": [],
                            "startup_probe": [],
                            "stdin": false,
                            "stdin_once": false,
                            "termination_message_path": "/dev/termination-log",
                            "termination_message_policy": "File",
                            "tty": false,
                            "volume_device": [],
                            "volume_mount": [],
                            "working_dir": ""
                          }
                        ],
                        "dns_config": [],
                        "dns_policy": "ClusterFirst",
                        "enable_service_links": true,
                        "host_aliases": [],
                        "host_ipc": false,
                        "host_network": false,
                        "host_pid": false,
                        "hostname": "",
                        "image_pull_secrets": [],
                        "init_container": [],
                        "node_name": "",
                        "node_selector": {},
                        "os": [],
                        "priority_class_name": "",
                        "readiness_gate": [],
                        "restart_policy": "Always",
                        "runtime_class_name": "",
                        "scheduler_name": "default-scheduler",
                        "security_context": [],
                        "service_account_name": "",
                        "share_process_namespace": false,
                        "subdomain": "",
                        "termination_grace_period_seconds": 30,
                        "toleration": [],
                        "topology_spread_constraint": [],
                        "volume": []
                      }
                    ]
                  }
                ]
              }
            ],
            "timeouts": null,
            "wait_for_rollout": true
          },
          "sensitive_attributes": [],
          "identity_schema_version": 1,
          "identity": {
            "api_version": "apps/v1",
            "kind": "Deployment",
            "name": "temporal-ui",
            "namespace": "temporal-system"
          },
          "private": "eyJlMmJmYjczMC1lY2FhLTExZTYtOGY4OC0zNDM2M2JjN2M0YzAiOnsiY3JlYXRlIjo2MDAwMDAwMDAwMDAsImRlbGV0ZSI6NjAwMDAwMDAwMDAwLCJ1cGRhdGUiOjYwMDAwMDAwMDAwMH0sInNjaGVtYV92ZXJzaW9uIjoiMSJ9",
          "dependencies": [
            "kubernetes_config_map.db_migrations",
            "kubernetes_job.db_migration",
            "kubernetes_namespace.namespaces",
            "module.database.helm_release.cloudnative_pg",
            "module.database.kubernetes_namespace.database",
            "module.database.kubernetes_secret.app_user",
            "module.database.kubernetes_secret.superuser",
            "module.database.kubernetes_service.database",
            "module.database.local_file.cluster_manifest",
            "module.database.null_resource.cluster",
            "module.database.random_password.app_user",
            "module.database.random_password.superuser",
            "module.temporal.kubernetes_config_map.temporal",
            "module.temporal.kubernetes_deployment.temporal",
            "module.temporal.kubernetes_secret.temporal",
            "module.temporal.kubernetes_service.temporal",
            "module.temporal.kubernetes_service_account.temporal",
            "module.vault.helm_release.vault",
            "module.vault.kubernetes_config_map.vault_agent_config",
            "module.vault.kubernetes_job.vault_init",
            "module.vault.kubernetes_job.vault_seed"
          ]
        }
      ]
    },
    {
      "module": "module.temporal",
      "mode": "managed",
      "type": "kubernetes_job",
      "name": "create_namespaces",
      "provider": "provider[\"registry.terraform.io/hashicorp/kubernetes\"]",
      "instances": [
        {
          "index_key": 0,
          "schema_version": 1,
          "attributes": {
            "id": "temporal-system/ananta-temporal-ns-init",
            "metadata": [
              {
                "annotations": null,
                "generate_name": "",
                "generation": 0,
                "labels": {
                  "app.kubernetes.io/component": "workflow",
                  "app.kubernetes.io/instance": "ananta-temporal",
                  "app.kubernetes.io/managed-by": "terraform",
                  "app.kubernetes.io/name": "temporal",
                  "app.kubernetes.io/part-of": "ananta-platform",
                  "environment": "local"
                },
                "name": "ananta-temporal-ns-init",
                "namespace": "temporal-system",
                "resource_version": "",
                "uid": ""
              }
            ],
            "spec": [
              {
                "active_deadline_seconds": 0,
                "backoff_limit": 10,
                "backoff_limit_per_index": 0,
                "completion_mode": "",
                "completions": 1,
                "manual_selector": false,
                "max_failed_indexes": 0,
                "parallelism": 1,
                "pod_failure_policy": [],
                "selector": [],
                "template": [
                  {
                    "metadata": [
                      {
                        "annotations": null,
                        "generate_name": "",
                        "generation": 0,
                        "labels": {
                          "app.kubernetes.io/component": "workflow",
                          "app.kubernetes.io/instance": "ananta-temporal",
                          "app.kubernetes.io/managed-by": "terraform",
                          "app.kubernetes.io/name": "temporal",
                          "app.kubernetes.io/part-of": "ananta-platform",
                          "environment": "local"
                        },
                        "name": "",
                        "resource_version": "",
                        "uid": ""
                      }
                    ],
                    "spec": [
                      {
                        "active_deadline_seconds": 0,
                        "affinity": [],
                        "automount_service_account_token": true,
                        "container": [
                          {
                            "args": [
                              "echo \"Waiting for Temporal to be ready...\"\n# Use tctl cluster health to check readiness\nMAX_RETRIES=60\nRETRY_COUNT=0\nuntil tctl --address temporal:7233 cluster health 2\u003e/dev/null | grep -q \"SERVING\"; do\n  RETRY_COUNT=$((RETRY_COUNT + 1))\n  if [ $RETRY_COUNT -ge $MAX_RETRIES ]; then\n    echo \"Timeout waiting for Temporal after $MAX_RETRIES attempts\"\n    exit 1\n  fi\n  echo \"Attempt $RETRY_COUNT/$MAX_RETRIES: Temporal not ready, waiting 10s...\"\n  sleep 10\ndone\necho \"Temporal is ready, creating namespaces...\"\n\n            echo \"Creating namespace: arc-saas\"\ntctl --address temporal:7233 --namespace arc-saas namespace register \\\n  --retention 3 \\\n  --description \"Namespace for arc-saas workflows\" 2\u003e\u00261 || \\\n  echo \"Namespace arc-saas may already exist (this is OK)\"\n            echo \"Creating namespace: enrichment\"\ntctl --address temporal:7233 --namespace enrichment namespace register \\\n  --retention 3 \\\n  --description \"Namespace for enrichment workflows\" 2\u003e\u00261 || \\\n  echo \"Namespace enrichment may already exist (this is OK)\"\n            echo \"Creating namespace: default\"\ntctl --address temporal:7233 --namespace default namespace register \\\n  --retention 3 \\\n  --description \"Namespace for default workflows\" 2\u003e\u00261 || \\\n  echo \"Namespace default may already exist (this is OK)\"\n\necho \"All namespaces created successfully\"\n# List namespaces to verify\necho \"Verifying namespaces:\"\ntctl --address temporal:7233 namespace list 2\u003e\u00261 || true\n"
                            ],
                            "command": [
                              "/bin/sh",
                              "-c"
                            ],
                            "env": [],
                            "env_from": [],
                            "image": "temporalio/auto-setup:1.24.2",
                            "image_pull_policy": "",
                            "lifecycle": [],
                            "liveness_probe": [],
                            "name": "namespace-init",
                            "port": [],
                            "readiness_probe": [],
                            "resources": [],
                            "restart_policy": "",
                            "security_context": [],
                            "startup_probe": [],
                            "stdin": false,
                            "stdin_once": false,
                            "termination_message_path": "/dev/termination-log",
                            "termination_message_policy": "",
                            "tty": false,
                            "volume_device": [],
                            "volume_mount": [],
                            "working_dir": ""
                          }
                        ],
                        "dns_config": [],
                        "dns_policy": "ClusterFirst",
                        "enable_service_links": true,
                        "host_aliases": [],
                        "host_ipc": false,
                        "host_network": false,
                        "host_pid": false,
                        "hostname": "",
                        "image_pull_secrets": [],
                        "init_container": [],
                        "node_name": "",
                        "node_selector": null,
                        "os": [],
                        "priority_class_name": "",
                        "readiness_gate": [],
                        "restart_policy": "OnFailure",
                        "runtime_class_name": "",
                        "scheduler_name": "",
                        "security_context": [],
                        "service_account_name": "",
                        "share_process_namespace": false,
                        "subdomain": "",
                        "termination_grace_period_seconds": 30,
                        "toleration": [],
                        "topology_spread_constraint": [],
                        "volume": []
                      }
                    ]
                  }
                ],
                "ttl_seconds_after_finished": "600"
              }
            ],
            "timeouts": null,
            "wait_for_completion": true
          },
          "sensitive_attributes": [],
          "identity_schema_version": 1,
          "identity": {
            "api_version": "batch/v1",
            "kind": "Job",
            "name": "ananta-temporal-ns-init",
            "namespace": "temporal-system"
          },
          "private": "eyJlMmJmYjczMC1lY2FhLTExZTYtOGY4OC0zNDM2M2JjN2M0YzAiOnsiY3JlYXRlIjo2MDAwMDAwMDAwMCwiZGVsZXRlIjo2MDAwMDAwMDAwMCwidXBkYXRlIjo2MDAwMDAwMDAwMH0sInNjaGVtYV92ZXJzaW9uIjoiMSJ9",
          "dependencies": [
            "kubernetes_config_map.db_migrations",
            "kubernetes_job.db_migration",
            "kubernetes_namespace.namespaces",
            "module.database.helm_release.cloudnative_pg",
            "module.database.kubernetes_namespace.database",
            "module.database.kubernetes_secret.app_user",
            "module.database.kubernetes_secret.superuser",
            "module.database.kubernetes_service.database",
            "module.database.local_file.cluster_manifest",
            "module.database.null_resource.cluster",
            "module.database.random_password.app_user",
            "module.database.random_password.superuser",
            "module.temporal.kubernetes_config_map.temporal",
            "module.temporal.kubernetes_deployment.temporal",
            "module.temporal.kubernetes_secret.temporal",
            "module.temporal.kubernetes_service_account.temporal",
            "module.vault.helm_release.vault",
            "module.vault.kubernetes_config_map.vault_agent_config",
            "module.vault.kubernetes_job.vault_init",
            "module.vault.kubernetes_job.vault_seed"
          ]
        }
      ]
    },
    {
      "module": "module.temporal",
      "mode": "managed",
      "type": "kubernetes_secret",
      "name": "temporal",
      "provider": "provider[\"registry.terraform.io/hashicorp/kubernetes\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "binary_data": null,
            "binary_data_wo": null,
            "binary_data_wo_revision": null,
            "data": {
              "POSTGRES_PWD": "temporal123"
            },
            "data_wo": null,
            "data_wo_revision": null,
            "id": "temporal-system/ananta-temporal-secrets",
            "immutable": false,
            "metadata": [
              {
                "annotations": {},
                "generate_name": "",
                "generation": 0,
                "labels": {
                  "app.kubernetes.io/component": "workflow",
                  "app.kubernetes.io/instance": "ananta-temporal",
                  "app.kubernetes.io/managed-by": "terraform",
                  "app.kubernetes.io/name": "temporal",
                  "app.kubernetes.io/part-of": "ananta-platform",
                  "environment": "local"
                },
                "name": "ananta-temporal-secrets",
                "namespace": "temporal-system",
                "resource_version": "57825",
                "uid": "b2495fa3-3501-4c1c-802f-5700588d1d02"
              }
            ],
            "timeouts": null,
            "type": "Opaque",
            "wait_for_service_account_token": true
          },
          "sensitive_attributes": [
            [
              {
                "type": "get_attr",
                "value": "binary_data"
              }
            ],
            [
              {
                "type": "get_attr",
                "value": "data"
              }
            ],
            [
              {
                "type": "get_attr",
                "value": "data"
              },
              {
                "type": "index",
                "value": {
                  "value": "POSTGRES_PWD",
                  "type": "string"
                }
              }
            ]
          ],
          "identity_schema_version": 1,
          "identity": {
            "api_version": "v1",
            "kind": "Secret",
            "name": "ananta-temporal-secrets",
            "namespace": "temporal-system"
          },
          "private": "eyJlMmJmYjczMC1lY2FhLTExZTYtOGY4OC0zNDM2M2JjN2M0YzAiOnsiY3JlYXRlIjo2MDAwMDAwMDAwMH19",
          "dependencies": [
            "kubernetes_config_map.db_migrations",
            "kubernetes_job.db_migration",
            "kubernetes_namespace.namespaces",
            "module.database.helm_release.cloudnative_pg",
            "module.database.kubernetes_namespace.database",
            "module.database.kubernetes_secret.app_user",
            "module.database.kubernetes_secret.superuser",
            "module.database.kubernetes_service.database",
            "module.database.local_file.cluster_manifest",
            "module.database.null_resource.cluster",
            "module.database.random_password.app_user",
            "module.database.random_password.superuser",
            "module.vault.helm_release.vault",
            "module.vault.kubernetes_config_map.vault_agent_config",
            "module.vault.kubernetes_job.vault_init",
            "module.vault.kubernetes_job.vault_seed"
          ]
        }
      ]
    },
    {
      "module": "module.temporal",
      "mode": "managed",
      "type": "kubernetes_service",
      "name": "temporal",
      "provider": "provider[\"registry.terraform.io/hashicorp/kubernetes\"]",
      "instances": [
        {
          "schema_version": 1,
          "attributes": {
            "id": "temporal-system/temporal",
            "metadata": [
              {
                "annotations": {},
                "generate_name": "",
                "generation": 0,
                "labels": {
                  "app.kubernetes.io/component": "workflow",
                  "app.kubernetes.io/instance": "ananta-temporal",
                  "app.kubernetes.io/managed-by": "terraform",
                  "app.kubernetes.io/name": "temporal",
                  "app.kubernetes.io/part-of": "ananta-platform",
                  "environment": "local"
                },
                "name": "temporal",
                "namespace": "temporal-system",
                "resource_version": "26274",
                "uid": "254328d2-bbfc-4cad-92cd-d922abb57deb"
              }
            ],
            "spec": [
              {
                "allocate_load_balancer_node_ports": true,
                "cluster_ip": "10.43.136.79",
                "cluster_ips": [
                  "10.43.136.79"
                ],
                "external_ips": [],
                "external_name": "",
                "external_traffic_policy": "",
                "health_check_node_port": 0,
                "internal_traffic_policy": "Cluster",
                "ip_families": [
                  "IPv4"
                ],
                "ip_family_policy": "SingleStack",
                "load_balancer_class": "",
                "load_balancer_ip": "",
                "load_balancer_source_ranges": [],
                "port": [
                  {
                    "app_protocol": "",
                    "name": "grpc",
                    "node_port": 0,
                    "port": 7233,
                    "protocol": "TCP",
                    "target_port": "7233"
                  }
                ],
                "publish_not_ready_addresses": false,
                "selector": {
                  "app.kubernetes.io/instance": "ananta-temporal",
                  "app.kubernetes.io/name": "temporal"
                },
                "session_affinity": "None",
                "session_affinity_config": [],
                "type": "ClusterIP"
              }
            ],
            "status": [
              {
                "load_balancer": [
                  {
                    "ingress": []
                  }
                ]
              }
            ],
            "timeouts": null,
            "wait_for_load_balancer": true
          },
          "sensitive_attributes": [],
          "identity_schema_version": 1,
          "identity": {
            "api_version": "v1",
            "kind": "Service",
            "name": "temporal",
            "namespace": "temporal-system"
          },
          "private": "eyJlMmJmYjczMC1lY2FhLTExZTYtOGY4OC0zNDM2M2JjN2M0YzAiOnsiY3JlYXRlIjo2MDAwMDAwMDAwMDB9LCJzY2hlbWFfdmVyc2lvbiI6IjEifQ==",
          "dependencies": [
            "kubernetes_config_map.db_migrations",
            "kubernetes_job.db_migration",
            "kubernetes_namespace.namespaces",
            "module.database.helm_release.cloudnative_pg",
            "module.database.kubernetes_namespace.database",
            "module.database.kubernetes_secret.app_user",
            "module.database.kubernetes_secret.superuser",
            "module.database.kubernetes_service.database",
            "module.database.local_file.cluster_manifest",
            "module.database.null_resource.cluster",
            "module.database.random_password.app_user",
            "module.database.random_password.superuser",
            "module.vault.helm_release.vault",
            "module.vault.kubernetes_config_map.vault_agent_config",
            "module.vault.kubernetes_job.vault_init",
            "module.vault.kubernetes_job.vault_seed"
          ]
        }
      ]
    },
    {
      "module": "module.temporal",
      "mode": "managed",
      "type": "kubernetes_service",
      "name": "temporal_ui",
      "provider": "provider[\"registry.terraform.io/hashicorp/kubernetes\"]",
      "instances": [
        {
          "index_key": 0,
          "schema_version": 1,
          "attributes": {
            "id": "temporal-system/temporal-ui",
            "metadata": [
              {
                "annotations": {},
                "generate_name": "",
                "generation": 0,
                "labels": {
                  "app.kubernetes.io/component": "workflow-ui",
                  "app.kubernetes.io/instance": "ananta-temporal-ui",
                  "app.kubernetes.io/managed-by": "terraform",
                  "app.kubernetes.io/name": "temporal-ui",
                  "app.kubernetes.io/part-of": "ananta-platform",
                  "environment": "local"
                },
                "name": "temporal-ui",
                "namespace": "temporal-system",
                "resource_version": "26270",
                "uid": "773d342d-1f26-4102-8baf-1476e1b3cc0a"
              }
            ],
            "spec": [
              {
                "allocate_load_balancer_node_ports": true,
                "cluster_ip": "10.43.162.239",
                "cluster_ips": [
                  "10.43.162.239"
                ],
                "external_ips": [],
                "external_name": "",
                "external_traffic_policy": "",
                "health_check_node_port": 0,
                "internal_traffic_policy": "Cluster",
                "ip_families": [
                  "IPv4"
                ],
                "ip_family_policy": "SingleStack",
                "load_balancer_class": "",
                "load_balancer_ip": "",
                "load_balancer_source_ranges": [],
                "port": [
                  {
                    "app_protocol": "",
                    "name": "http",
                    "node_port": 0,
                    "port": 8080,
                    "protocol": "TCP",
                    "target_port": "8080"
                  }
                ],
                "publish_not_ready_addresses": false,
                "selector": {
                  "app.kubernetes.io/instance": "ananta-temporal-ui",
                  "app.kubernetes.io/name": "temporal-ui"
                },
                "session_affinity": "None",
                "session_affinity_config": [],
                "type": "ClusterIP"
              }
            ],
            "status": [
              {
                "load_balancer": [
                  {
                    "ingress": []
                  }
                ]
              }
            ],
            "timeouts": null,
            "wait_for_load_balancer": true
          },
          "sensitive_attributes": [],
          "identity_schema_version": 1,
          "identity": {
            "api_version": "v1",
            "kind": "Service",
            "name": "temporal-ui",
            "namespace": "temporal-system"
          },
          "private": "eyJlMmJmYjczMC1lY2FhLTExZTYtOGY4OC0zNDM2M2JjN2M0YzAiOnsiY3JlYXRlIjo2MDAwMDAwMDAwMDB9LCJzY2hlbWFfdmVyc2lvbiI6IjEifQ==",
          "dependencies": [
            "kubernetes_config_map.db_migrations",
            "kubernetes_job.db_migration",
            "kubernetes_namespace.namespaces",
            "module.database.helm_release.cloudnative_pg",
            "module.database.kubernetes_namespace.database",
            "module.database.kubernetes_secret.app_user",
            "module.database.kubernetes_secret.superuser",
            "module.database.kubernetes_service.database",
            "module.database.local_file.cluster_manifest",
            "module.database.null_resource.cluster",
            "module.database.random_password.app_user",
            "module.database.random_password.superuser",
            "module.vault.helm_release.vault",
            "module.vault.kubernetes_config_map.vault_agent_config",
            "module.vault.kubernetes_job.vault_init",
            "module.vault.kubernetes_job.vault_seed"
          ]
        }
      ]
    },
    {
      "module": "module.temporal",
      "mode": "managed",
      "type": "kubernetes_service_account",
      "name": "temporal",
      "provider": "provider[\"registry.terraform.io/hashicorp/kubernetes\"]",
      "instances": []
    },
    {
      "module": "module.vault",
      "mode": "managed",
      "type": "helm_release",
      "name": "vault",
      "provider": "provider[\"registry.terraform.io/hashicorp/helm\"]",
      "instances": [
        {
          "schema_version": 2,
          "attributes": {
            "atomic": false,
            "chart": "vault",
            "cleanup_on_fail": false,
            "create_namespace": false,
            "dependency_update": false,
            "description": null,
            "devel": null,
            "disable_crd_hooks": false,
            "disable_openapi_validation": false,
            "disable_webhooks": false,
            "force_update": false,
            "id": "ananta-vault",
            "keyring": null,
            "lint": false,
            "manifest": null,
            "max_history": 0,
            "metadata": {
              "app_version": "1.15.2",
              "chart": "vault",
              "first_deployed": 1767822326,
              "last_deployed": 1767822326,
              "name": "ananta-vault",
              "namespace": "vault-system",
              "notes": "\nThank you for installing HashiCorp Vault!\n\nNow that you have deployed Vault, you should look over the docs on using\nVault with Kubernetes available here:\n\nhttps://developer.hashicorp.com/vault/docs\n\n\nYour release is named ananta-vault. To learn more about the release, try:\n\n  $ helm status ananta-vault\n  $ helm get manifest ananta-vault\n\n",
              "revision": 1,
              "values": "{\"csi\":{\"enabled\":false},\"global\":{\"enabled\":true},\"injector\":{\"enabled\":true,\"resources\":{\"limits\":{\"cpu\":\"100m\",\"memory\":\"128Mi\"},\"requests\":{\"cpu\":\"50m\",\"memory\":\"64Mi\"}}},\"server\":{\"dataStorage\":null,\"dev\":{\"devRootToken\":\"root\",\"enabled\":true},\"livenessProbe\":{\"enabled\":true,\"initialDelaySeconds\":60,\"path\":\"/v1/sys/health?standbyok=true\"},\"readinessProbe\":{\"enabled\":true,\"path\":\"/v1/sys/health?standbyok=true\"},\"resources\":{\"limits\":{\"cpu\":\"500m\",\"memory\":\"512Mi\"},\"requests\":{\"cpu\":\"100m\",\"memory\":\"256Mi\"}},\"service\":{\"enabled\":true,\"port\":8200,\"type\":\"ClusterIP\"},\"standalone\":{\"config\":null,\"enabled\":false}},\"ui\":{\"enabled\":true,\"serviceType\":\"ClusterIP\"}}",
              "version": "0.27.0"
            },
            "name": "ananta-vault",
            "namespace": "vault-system",
            "pass_credentials": false,
            "postrender": null,
            "recreate_pods": false,
            "render_subchart_notes": true,
            "replace": false,
            "repository": "https://helm.releases.hashicorp.com",
            "repository_ca_file": null,
            "repository_cert_file": null,
            "repository_key_file": null,
            "repository_password": null,
            "repository_username": null,
            "reset_values": false,
            "resources": null,
            "reuse_values": false,
            "set": null,
            "set_list": null,
            "set_sensitive": null,
            "set_wo": null,
            "set_wo_revision": null,
            "skip_crds": false,
            "status": "deployed",
            "take_ownership": false,
            "timeout": 300,
            "timeouts": null,
            "upgrade_install": false,
            "values": [
              "\"csi\":\n  \"enabled\": false\n\"global\":\n  \"enabled\": true\n\"injector\":\n  \"enabled\": true\n  \"resources\":\n    \"limits\":\n      \"cpu\": \"100m\"\n      \"memory\": \"128Mi\"\n    \"requests\":\n      \"cpu\": \"50m\"\n      \"memory\": \"64Mi\"\n\"server\":\n  \"dataStorage\": null\n  \"dev\":\n    \"devRootToken\": \"root\"\n    \"enabled\": true\n  \"livenessProbe\":\n    \"enabled\": true\n    \"initialDelaySeconds\": 60\n    \"path\": \"/v1/sys/health?standbyok=true\"\n  \"readinessProbe\":\n    \"enabled\": true\n    \"path\": \"/v1/sys/health?standbyok=true\"\n  \"resources\":\n    \"limits\":\n      \"cpu\": \"500m\"\n      \"memory\": \"512Mi\"\n    \"requests\":\n      \"cpu\": \"100m\"\n      \"memory\": \"256Mi\"\n  \"service\":\n    \"enabled\": true\n    \"port\": 8200\n    \"type\": \"ClusterIP\"\n  \"standalone\":\n    \"config\": null\n    \"enabled\": false\n\"ui\":\n  \"enabled\": true\n  \"serviceType\": \"ClusterIP\"\n"
            ],
            "verify": false,
            "version": "0.27.0",
            "wait": true,
            "wait_for_jobs": false
          },
          "sensitive_attributes": [
            [
              {
                "type": "get_attr",
                "value": "repository_password"
              }
            ]
          ],
          "identity_schema_version": 0,
          "identity": {
            "namespace": "vault-system",
            "release_name": "ananta-vault"
          },
          "dependencies": [
            "kubernetes_namespace.namespaces"
          ]
        }
      ]
    },
    {
      "module": "module.vault",
      "mode": "managed",
      "type": "kubernetes_config_map",
      "name": "vault_agent_config",
      "provider": "provider[\"registry.terraform.io/hashicorp/kubernetes\"]",
      "instances": [
        {
          "index_key": 0,
          "schema_version": 0,
          "attributes": {
            "binary_data": {},
            "data": {
              "database.ctmpl": "{{- with secret \"secret/data/database/ananta\" -}}\nDATABASE_HOST={{ .Data.data.host }}\nDATABASE_PORT={{ .Data.data.port }}\nDATABASE_NAME={{ .Data.data.database }}\nDATABASE_USERNAME={{ .Data.data.username }}\nDATABASE_PASSWORD={{ .Data.data.password }}\n{{- end -}}\n",
              "keycloak.ctmpl": "{{- with secret \"secret/data/auth/keycloak\" -}}\nKEYCLOAK_ADMIN={{ .Data.data.admin_username }}\nKEYCLOAK_ADMIN_PASSWORD={{ .Data.data.admin_password }}\nKC_DB_PASSWORD={{ .Data.data.db_password }}\n{{- end -}}\n",
              "redis.ctmpl": "{{- with secret \"secret/data/cache/redis\" -}}\nREDIS_PASSWORD={{ .Data.data.password }}\n{{- end -}}\n"
            },
            "id": "vault-system/ananta-vault-agent-config",
            "immutable": false,
            "metadata": [
              {
                "annotations": {},
                "generate_name": "",
                "generation": 0,
                "labels": {
                  "app.kubernetes.io/component": "secrets",
                  "app.kubernetes.io/instance": "ananta-vault",
                  "app.kubernetes.io/managed-by": "terraform",
                  "app.kubernetes.io/name": "vault",
                  "app.kubernetes.io/part-of": "ananta-platform",
                  "environment": "local"
                },
                "name": "ananta-vault-agent-config",
                "namespace": "vault-system",
                "resource_version": "21403",
                "uid": "f86711ae-f8f5-4e4c-98fd-525b375f3dea"
              }
            ]
          },
          "sensitive_attributes": [],
          "identity_schema_version": 1,
          "identity": {
            "api_version": "v1",
            "kind": "ConfigMap",
            "name": "ananta-vault-agent-config",
            "namespace": "vault-system"
          },
          "private": "bnVsbA==",
          "dependencies": [
            "kubernetes_namespace.namespaces"
          ]
        }
      ]
    },
    {
      "module": "module.vault",
      "mode": "managed",
      "type": "kubernetes_job",
      "name": "vault_init",
      "provider": "provider[\"registry.terraform.io/hashicorp/kubernetes\"]",
      "instances": []
    },
    {
      "module": "module.vault",
      "mode": "managed",
      "type": "kubernetes_job",
      "name": "vault_seed",
      "provider": "provider[\"registry.terraform.io/hashicorp/kubernetes\"]",
      "instances": [
        {
          "index_key": 0,
          "schema_version": 1,
          "attributes": {
            "id": "vault-system/ananta-vault-seed",
            "metadata": [
              {
                "annotations": null,
                "generate_name": "",
                "generation": 0,
                "labels": {
                  "app.kubernetes.io/component": "secrets",
                  "app.kubernetes.io/instance": "ananta-vault",
                  "app.kubernetes.io/managed-by": "terraform",
                  "app.kubernetes.io/name": "vault",
                  "app.kubernetes.io/part-of": "ananta-platform",
                  "environment": "local"
                },
                "name": "ananta-vault-seed",
                "namespace": "vault-system",
                "resource_version": "",
                "uid": ""
              }
            ],
            "spec": [
              {
                "active_deadline_seconds": 0,
                "backoff_limit": 5,
                "backoff_limit_per_index": 0,
                "completion_mode": "",
                "completions": 1,
                "manual_selector": false,
                "max_failed_indexes": 0,
                "parallelism": 1,
                "pod_failure_policy": [],
                "selector": [],
                "template": [
                  {
                    "metadata": [
                      {
                        "annotations": null,
                        "generate_name": "",
                        "generation": 0,
                        "labels": {
                          "app.kubernetes.io/component": "secrets",
                          "app.kubernetes.io/instance": "ananta-vault",
                          "app.kubernetes.io/managed-by": "terraform",
                          "app.kubernetes.io/name": "vault",
                          "app.kubernetes.io/part-of": "ananta-platform",
                          "environment": "local"
                        },
                        "name": "",
                        "resource_version": "",
                        "uid": ""
                      }
                    ],
                    "spec": [
                      {
                        "active_deadline_seconds": 0,
                        "affinity": [],
                        "automount_service_account_token": true,
                        "container": [
                          {
                            "args": [
                              "set -e\n\nVAULT_ADDR=\"http://ananta-vault:8200\"\nexport VAULT_ADDR\n\n# Get root token\nif [ \"true\" = \"true\" ]; then\n  VAULT_TOKEN=\"root\"\nelse\n  # Wait for init job to complete\n  sleep 30\n  VAULT_TOKEN=$(kubectl get secret ananta-vault-keys -n vault-system -o jsonpath='{.data.root-token}' | base64 -d)\nfi\nexport VAULT_TOKEN\n\n# Enable KV secrets engine\nvault secrets enable -path=secret -version=2 kv 2\u003e/dev/null || true\n\n# Enable Kubernetes auth\nvault auth enable kubernetes 2\u003e/dev/null || true\n\n# Configure Kubernetes auth\nvault write auth/kubernetes/config \\\n  kubernetes_host=\"https://kubernetes.default.svc\" \\\n  kubernetes_ca_cert=@/var/run/secrets/kubernetes.io/serviceaccount/ca.crt \\\n  token_reviewer_jwt=@/var/run/secrets/kubernetes.io/serviceaccount/token\n\n# Generate and store database passwords\nDB_POSTGRES_PASS=$(cat /dev/urandom | tr -dc 'a-zA-Z0-9' | fold -w 32 | head -n 1)\nDB_KEYCLOAK_PASS=$(cat /dev/urandom | tr -dc 'a-zA-Z0-9' | fold -w 32 | head -n 1)\nDB_TEMPORAL_PASS=$(cat /dev/urandom | tr -dc 'a-zA-Z0-9' | fold -w 32 | head -n 1)\nDB_ANANTA_PASS=$(cat /dev/urandom | tr -dc 'a-zA-Z0-9' | fold -w 32 | head -n 1)\n\nvault kv put secret/database/postgres \\\n  username=postgres \\\n  password=$DB_POSTGRES_PASS\n\nvault kv put secret/database/keycloak \\\n  username=keycloak \\\n  password=$DB_KEYCLOAK_PASS\n\nvault kv put secret/database/temporal \\\n  username=temporal \\\n  password=$DB_TEMPORAL_PASS\n\nvault kv put secret/database/ananta \\\n  username=ananta_app \\\n  password=$DB_ANANTA_PASS\n\n# Redis password\nREDIS_PASS=$(cat /dev/urandom | tr -dc 'a-zA-Z0-9' | fold -w 32 | head -n 1)\nvault kv put secret/cache/redis \\\n  password=$REDIS_PASS\n\n# Keycloak admin credentials\nKC_ADMIN_PASS=$(cat /dev/urandom | tr -dc 'a-zA-Z0-9' | fold -w 32 | head -n 1)\nvault kv put secret/auth/keycloak \\\n  admin_username=admin \\\n  admin_password=$KC_ADMIN_PASS \\\n  db_password=$DB_KEYCLOAK_PASS\n\n# Control plane secrets\nJWT_SECRET=$(cat /dev/urandom | tr -dc 'a-zA-Z0-9' | fold -w 64 | head -n 1)\nvault kv put secret/control-plane/jwt \\\n  secret=$JWT_SECRET\n\nvault kv put secret/control-plane/database \\\n  host=postgresql.database-system.svc.cluster.local \\\n  port=5432 \\\n  database=ananta \\\n  username=ananta_app \\\n  password=$DB_ANANTA_PASS\n\n# Create policies for each service\nvault policy write database-read - \u003c\u003cEOF\npath \"secret/data/database/*\" {\n  capabilities = [\"read\"]\n}\nEOF\n\nvault policy write control-plane - \u003c\u003cEOF\npath \"secret/data/control-plane/*\" {\n  capabilities = [\"read\"]\n}\npath \"secret/data/database/ananta\" {\n  capabilities = [\"read\"]\n}\npath \"secret/data/cache/redis\" {\n  capabilities = [\"read\"]\n}\npath \"secret/data/auth/keycloak\" {\n  capabilities = [\"read\"]\n}\nEOF\n\nvault policy write keycloak - \u003c\u003cEOF\npath \"secret/data/auth/keycloak\" {\n  capabilities = [\"read\"]\n}\npath \"secret/data/database/keycloak\" {\n  capabilities = [\"read\"]\n}\nEOF\n\nvault policy write temporal - \u003c\u003cEOF\npath \"secret/data/temporal/*\" {\n  capabilities = [\"read\"]\n}\npath \"secret/data/database/temporal\" {\n  capabilities = [\"read\"]\n}\nEOF\n\n# Create Kubernetes auth roles\nvault write auth/kubernetes/role/control-plane \\\n  bound_service_account_names=* \\\n  bound_service_account_namespaces=control-plane \\\n  policies=control-plane \\\n  ttl=1h\n\nvault write auth/kubernetes/role/keycloak \\\n  bound_service_account_names=* \\\n  bound_service_account_namespaces=auth-system \\\n  policies=keycloak \\\n  ttl=1h\n\nvault write auth/kubernetes/role/temporal \\\n  bound_service_account_names=* \\\n  bound_service_account_namespaces=temporal-system \\\n  policies=temporal \\\n  ttl=1h\n\nvault write auth/kubernetes/role/database \\\n  bound_service_account_names=* \\\n  bound_service_account_namespaces=database-system \\\n  policies=database-read \\\n  ttl=1h\n\necho \"Vault secrets seeded successfully!\"\n"
                            ],
                            "command": [
                              "/bin/sh",
                              "-c"
                            ],
                            "env": [
                              {
                                "name": "VAULT_ADDR",
                                "value": "http://ananta-vault:8200",
                                "value_from": []
                              }
                            ],
                            "env_from": [],
                            "image": "hashicorp/vault:1.15.4",
                            "image_pull_policy": "",
                            "lifecycle": [],
                            "liveness_probe": [],
                            "name": "vault-seed",
                            "port": [],
                            "readiness_probe": [],
                            "resources": [],
                            "restart_policy": "",
                            "security_context": [],
                            "startup_probe": [],
                            "stdin": false,
                            "stdin_once": false,
                            "termination_message_path": "/dev/termination-log",
                            "termination_message_policy": "",
                            "tty": false,
                            "volume_device": [],
                            "volume_mount": [],
                            "working_dir": ""
                          }
                        ],
                        "dns_config": [],
                        "dns_policy": "ClusterFirst",
                        "enable_service_links": true,
                        "host_aliases": [],
                        "host_ipc": false,
                        "host_network": false,
                        "host_pid": false,
                        "hostname": "",
                        "image_pull_secrets": [],
                        "init_container": [],
                        "node_name": "",
                        "node_selector": null,
                        "os": [],
                        "priority_class_name": "",
                        "readiness_gate": [],
                        "restart_policy": "OnFailure",
                        "runtime_class_name": "",
                        "scheduler_name": "",
                        "security_context": [],
                        "service_account_name": "",
                        "share_process_namespace": false,
                        "subdomain": "",
                        "termination_grace_period_seconds": 30,
                        "toleration": [],
                        "topology_spread_constraint": [],
                        "volume": []
                      }
                    ]
                  }
                ],
                "ttl_seconds_after_finished": "600"
              }
            ],
            "timeouts": null,
            "wait_for_completion": true
          },
          "sensitive_attributes": [],
          "identity_schema_version": 1,
          "identity": {
            "api_version": "batch/v1",
            "kind": "Job",
            "name": "ananta-vault-seed",
            "namespace": "vault-system"
          },
          "private": "eyJlMmJmYjczMC1lY2FhLTExZTYtOGY4OC0zNDM2M2JjN2M0YzAiOnsiY3JlYXRlIjo2MDAwMDAwMDAwMCwiZGVsZXRlIjo2MDAwMDAwMDAwMCwidXBkYXRlIjo2MDAwMDAwMDAwMH0sInNjaGVtYV92ZXJzaW9uIjoiMSJ9",
          "dependencies": [
            "kubernetes_namespace.namespaces",
            "module.vault.helm_release.vault",
            "module.vault.kubernetes_job.vault_init"
          ]
        }
      ]
    }
  ],
  "check_results": null
}
