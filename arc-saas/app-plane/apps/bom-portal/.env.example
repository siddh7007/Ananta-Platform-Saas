# BOM Portal Environment Configuration
# ======================================
# This file configures the BOM Portal frontend (Vite/React)
# All VITE_ prefixed variables are exposed to the browser bundle
#
# Copy this file to .env and fill in the values for your environment

# ==============================================
# Supabase Configuration (App Plane Database)
# ==============================================
# PostgREST API endpoint for the App Plane Supabase instance
VITE_SUPABASE_URL=http://localhost:27810

# Supabase Anonymous Key - allows public read access with RLS
# Generate with: node -e "console.log(require('jsonwebtoken').sign({iss:'supabase',ref:'local',role:'anon',iat:Math.floor(Date.now()/1000),exp:Math.floor(Date.now()/1000)+10*365*24*60*60}, 'your-jwt-secret'))"
VITE_SUPABASE_ANON_KEY=your-supabase-anon-key-here

# Service Role Key - ONLY used in development with auth bypass enabled
# This key bypasses RLS - NEVER use in production frontend
# VITE_SUPABASE_SERVICE_KEY=your-supabase-service-role-key-here

# ==============================================
# Authentication Configuration
# ==============================================
# Auth provider: auth0, keycloak, or supabase
VITE_AUTH_PROVIDER=keycloak

# Keycloak Configuration (when VITE_AUTH_PROVIDER=keycloak)
VITE_KEYCLOAK_URL=http://localhost:8180
VITE_KEYCLOAK_REALM=components-platform
VITE_KEYCLOAK_CLIENT_ID=customer-portal

# Auth0 Configuration (when VITE_AUTH_PROVIDER=auth0)
# VITE_AUTH0_DOMAIN=your-auth0-domain.auth0.com
# VITE_AUTH0_CLIENT_ID=your-auth0-client-id
# VITE_AUTH0_AUDIENCE=your-auth0-api-audience
# VITE_AUTH0_NAMESPACE=https://your-custom-namespace

# ==============================================
# API Endpoints
# ==============================================
# CNS Service API (Component Normalization Service)
VITE_CNS_API_URL=http://localhost:27200

# Django Backend (if using Components V2 pattern)
VITE_BACKEND_URL=http://localhost:27000

# Control Plane API (tenant management)
VITE_CONTROL_PLANE_API_URL=http://localhost:14000

# Middleware API (for Auth0 session management)
VITE_MIDDLEWARE_API_URL=http://localhost:27300

# ==============================================
# Development Settings
# ==============================================
# Set to true to bypass auth and use service role key (DEVELOPMENT ONLY)
VITE_DEV_AUTH_BYPASS_ENABLED=false

# Alternative name for dev bypass
# VITE_DEV_BYPASS_ENABLED=false

# Default credentials for dev mode login
# VITE_DEV_DEFAULT_EMAIL=dev@example.com
# VITE_DEV_DEFAULT_PASSWORD=devpassword

# Dev session duration in minutes
# VITE_DEV_SESSION_DURATION=60

# Allowed IPs for dev mode (comma-separated)
# VITE_DEV_ALLOWED_IPS=127.0.0.1,localhost

# ==============================================
# Auth0 Direct JWT Mode (Option A)
# ==============================================
# Set to true to send Auth0 JWT directly to PostgREST (RS256 JWKS validation)
# Default is false (Option B: Middleware creates Supabase JWT session)
# VITE_USE_DIRECT_AUTH0_JWT=false

# ==============================================
# Logging & Debugging
# ==============================================
# Enable gate logging (authentication flow debugging)
# VITE_ENABLE_GATE_LOGGING=true

# Enable data provider logging
# VITE_ENABLE_DATA_PROVIDER_LOGGING=false

# Auth event logging
# VITE_AUTH_LOGGING=true

# ==============================================
# Notifications (Novu)
# ==============================================
# VITE_NOVU_APP_IDENTIFIER=your-novu-app-id
# VITE_NOVU_BACKEND_URL=http://localhost:27850
# VITE_NOVU_SOCKET_URL=http://localhost:27851

# ==============================================
# Analytics
# ==============================================
# VITE_ANALYTICS_ENDPOINT=your-analytics-endpoint

# ==============================================
# Stripe (Payments)
# ==============================================
# VITE_STRIPE_PUBLISHABLE_KEY=pk_test_your-stripe-publishable-key

# ==============================================
# Data Provider Selection
# ==============================================
# Explicit data provider override (optional)
# Options: supabase, django, loopback
# If not set, automatically selected based on auth provider
# VITE_DATA_PROVIDER=supabase
