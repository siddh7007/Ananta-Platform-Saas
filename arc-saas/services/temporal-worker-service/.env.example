# ===========================================
# Temporal Worker Service Configuration
# ===========================================

# Node Environment
NODE_ENV=development
LOG_LEVEL=info

# ===========================================
# Temporal Server Configuration
# ===========================================
TEMPORAL_ADDRESS=localhost:7233
TEMPORAL_NAMESPACE=arc-saas
TEMPORAL_TASK_QUEUE=tenant-provisioning

# For Temporal Cloud (if using managed service)
TEMPORAL_CLOUD_ENABLED=false
TEMPORAL_CLOUD_NAMESPACE=your-namespace.a]
TEMPORAL_CLOUD_API_KEY=

# TLS Configuration (for production)
TEMPORAL_TLS_ENABLED=false
TEMPORAL_TLS_CERT_PATH=
TEMPORAL_TLS_KEY_PATH=

# Worker Configuration
TEMPORAL_WORKER_MAX_CONCURRENT_ACTIVITIES=10
TEMPORAL_WORKER_MAX_CONCURRENT_WORKFLOWS=50
TEMPORAL_WORKER_MAX_CACHED_WORKFLOWS=100

# ===========================================
# Database Configuration (for tenant activities)
# ===========================================
DB_HOST=localhost
DB_PORT=5432
DB_USER=postgres
DB_PASSWORD=password
DB_DATABASE=tenant_management
DB_SCHEMA=main
DB_SSL=false

# ===========================================
# Auth0 Configuration
# ===========================================
AUTH0_ENABLED=true
AUTH0_DOMAIN=your-tenant.auth0.com
AUTH0_CLIENT_ID=your-client-id
AUTH0_CLIENT_SECRET=your-client-secret
AUTH0_MANAGEMENT_AUDIENCE=https://your-tenant.auth0.com/api/v2/

# ===========================================
# Keycloak Configuration
# ===========================================
# For local dev (running directly with bun/node): use localhost:8180
# For Docker container: use keycloak:8080 (internal network)
KEYCLOAK_ENABLED=true
KEYCLOAK_URL=http://localhost:8180
KEYCLOAK_REALM=master
KEYCLOAK_ADMIN_CLIENT_ID=admin-cli
KEYCLOAK_ADMIN_USERNAME=admin
KEYCLOAK_ADMIN_PASSWORD=admin

# ===========================================
# Terraform Configuration
# ===========================================
TERRAFORM_ENABLED=true

# Terraform Cloud Configuration
TF_CLOUD_ENABLED=false
TF_CLOUD_TOKEN=
TF_CLOUD_ORG=your-org
TF_WORKSPACE_SILO=tenant-silo-workspace
TF_WORKSPACE_POOLED=tenant-pooled-workspace
TF_WORKSPACE_BRIDGE=tenant-bridge-workspace

# Local Terraform Configuration (for self-managed)
TF_LOCAL_ENABLED=true
TF_WORKING_DIR=/terraform
TF_STATE_BACKEND=s3
TF_STATE_BUCKET=terraform-state-bucket
TF_STATE_REGION=us-east-1

# ===========================================
# AWS Configuration (for infrastructure provisioning)
# ===========================================
AWS_REGION=us-east-1
AWS_ACCESS_KEY_ID=
AWS_SECRET_ACCESS_KEY=

# ===========================================
# Novu Configuration (Self-Hosted Notifications)
# https://docs.novu.co/self-hosting-novu/introduction
# ===========================================
NOVU_ENABLED=true
NOVU_API_KEY=your-novu-api-key
NOVU_BACKEND_URL=http://localhost:3000
NOVU_SUPPORT_EMAIL=support@example.com

# Novu Workflow/Template IDs (create these in Novu dashboard)
NOVU_TEMPLATE_WELCOME=tenant-welcome
NOVU_TEMPLATE_PROVISIONING_FAILED=tenant-provisioning-failed
NOVU_TEMPLATE_DEPROVISIONING=tenant-deprovisioning

# ===========================================
# Application URLs
# ===========================================
CONTROL_PLANE_URL=http://localhost:3000
APP_PLANE_BASE_URL=https://{tenant}.app.example.com

# ===========================================
# Webhook Configuration (for backward compatibility)
# ===========================================
WEBHOOK_ENABLED=false
WEBHOOK_URL=http://localhost:3000/webhook
WEBHOOK_TIMEOUT_MS=30000

# ===========================================
# Observability Configuration
# (Compatible with tenant-management-service and subscription-service)
# ===========================================

# Enable OpenTelemetry tracing (set to 1 to enable, same as other services)
ENABLE_TRACING=1
SERVICE_NAME=temporal-worker-service

# Jaeger Configuration (same env vars as other arc-saas services)
OPENTELEMETRY_HOST=localhost
OPENTELEMETRY_PORT=6832

# ===========================================
# Extended Observability (Temporal-specific)
# ===========================================

# OTLP exporter for modern stacks (Grafana Tempo, OpenTelemetry Collector)
OTLP_ENABLED=false
OTLP_ENDPOINT=http://localhost:4317

# Prometheus metrics endpoint
PROMETHEUS_ENABLED=false
PROMETHEUS_PORT=9464

# Temporal native metrics (separate from OTel)
TEMPORAL_METRICS_PORT=9090
